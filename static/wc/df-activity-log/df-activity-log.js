function e(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i}function t(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s}"function"==typeof SuppressedError&&SuppressedError;
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const i=e=>(t,i)=>{void 0!==i?i.addInitializer(()=>{customElements.define(e,t)}):customElements.define(e,t)},r=globalThis,n=r.ShadowRoot&&(void 0===r.ShadyCSS||r.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,o=Symbol(),s=new WeakMap;
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let a=class{constructor(e,t,i){if(this._$cssResult$=!0,i!==o)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(n&&void 0===e){const i=void 0!==t&&1===t.length;i&&(e=s.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),i&&s.set(t,e))}return e}toString(){return this.cssText}};const l=(e,...t)=>{const i=1===e.length?e[0]:t.reduce((t,i,r)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+e[r+1],e[0]);return new a(i,e,o)},c=n?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const i of e.cssRules)t+=i.cssText;return(e=>new a("string"==typeof e?e:e+"",void 0,o))(t)})(e):e,{is:d,defineProperty:h,getOwnPropertyDescriptor:u,getOwnPropertyNames:p,getOwnPropertySymbols:f,getPrototypeOf:m}=Object,g=globalThis,v=g.trustedTypes,O=v?v.emptyScript:"",y=g.reactiveElementPolyfillSupport,b=(e,t)=>e,x={toAttribute(e,t){switch(t){case Boolean:e=e?O:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let i=e;switch(t){case Boolean:i=null!==e;break;case Number:i=null===e?null:Number(e);break;case Object:case Array:try{i=JSON.parse(e)}catch(e){i=null}}return i}},w=(e,t)=>!d(e,t),k={attribute:!0,type:String,converter:x,reflect:!1,useDefault:!1,hasChanged:w};
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */Symbol.metadata??=Symbol("metadata"),g.litPropertyMetadata??=new WeakMap;let S=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=k){if(t.state&&(t.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((t=Object.create(t)).wrapped=!0),this.elementProperties.set(e,t),!t.noAccessor){const i=Symbol(),r=this.getPropertyDescriptor(e,i,t);void 0!==r&&h(this.prototype,e,r)}}static getPropertyDescriptor(e,t,i){const{get:r,set:n}=u(this.prototype,e)??{get(){return this[t]},set(e){this[t]=e}};return{get:r,set(t){const o=r?.call(this);n?.call(this,t),this.requestUpdate(e,o,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??k}static _$Ei(){if(this.hasOwnProperty(b("elementProperties")))return;const e=m(this);e.finalize(),void 0!==e.l&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(b("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(b("properties"))){const e=this.properties,t=[...p(e),...f(e)];for(const i of t)this.createProperty(i,e[i])}const e=this[Symbol.metadata];if(null!==e){const t=litPropertyMetadata.get(e);if(void 0!==t)for(const[e,i]of t)this.elementProperties.set(e,i)}this._$Eh=new Map;for(const[e,t]of this.elementProperties){const i=this._$Eu(e,t);void 0!==i&&this._$Eh.set(i,e)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const i=new Set(e.flat(1/0).reverse());for(const e of i)t.unshift(c(e))}else void 0!==e&&t.push(c(e));return t}static _$Eu(e,t){const i=t.attribute;return!1===i?void 0:"string"==typeof i?i:"string"==typeof e?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(e=>e(this))}addController(e){(this._$EO??=new Set).add(e),void 0!==this.renderRoot&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,t=this.constructor.elementProperties;for(const i of t.keys())this.hasOwnProperty(i)&&(e.set(i,this[i]),delete this[i]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return((e,t)=>{if(n)e.adoptedStyleSheets=t.map(e=>e instanceof CSSStyleSheet?e:e.styleSheet);else for(const i of t){const t=document.createElement("style"),n=r.litNonce;void 0!==n&&t.setAttribute("nonce",n),t.textContent=i.cssText,e.appendChild(t)}})(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach(e=>e.hostConnected?.())}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach(e=>e.hostDisconnected?.())}attributeChangedCallback(e,t,i){this._$AK(e,i)}_$ET(e,t){const i=this.constructor.elementProperties.get(e),r=this.constructor._$Eu(e,i);if(void 0!==r&&!0===i.reflect){const n=(void 0!==i.converter?.toAttribute?i.converter:x).toAttribute(t,i.type);this._$Em=e,null==n?this.removeAttribute(r):this.setAttribute(r,n),this._$Em=null}}_$AK(e,t){const i=this.constructor,r=i._$Eh.get(e);if(void 0!==r&&this._$Em!==r){const e=i.getPropertyOptions(r),n="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==e.converter?.fromAttribute?e.converter:x;this._$Em=r;const o=n.fromAttribute(t,e.type);this[r]=o??this._$Ej?.get(r)??o,this._$Em=null}}requestUpdate(e,t,i){if(void 0!==e){const r=this.constructor,n=this[e];if(i??=r.getPropertyOptions(e),!((i.hasChanged??w)(n,t)||i.useDefault&&i.reflect&&n===this._$Ej?.get(e)&&!this.hasAttribute(r._$Eu(e,i))))return;this.C(e,t,i)}!1===this.isUpdatePending&&(this._$ES=this._$EP())}C(e,t,{useDefault:i,reflect:r,wrapped:n},o){i&&!(this._$Ej??=new Map).has(e)&&(this._$Ej.set(e,o??t??this[e]),!0!==n||void 0!==o)||(this._$AL.has(e)||(this.hasUpdated||i||(t=void 0),this._$AL.set(e,t)),!0===r&&this._$Em!==e&&(this._$Eq??=new Set).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[e,t]of this._$Ep)this[e]=t;this._$Ep=void 0}const e=this.constructor.elementProperties;if(e.size>0)for(const[t,i]of e){const{wrapped:e}=i,r=this[t];!0!==e||this._$AL.has(t)||void 0===r||this.C(t,void 0,i,r)}}let e=!1;const t=this._$AL;try{e=this.shouldUpdate(t),e?(this.willUpdate(t),this._$EO?.forEach(e=>e.hostUpdate?.()),this.update(t)):this._$EM()}catch(t){throw e=!1,this._$EM(),t}e&&this._$AE(t)}willUpdate(e){}_$AE(e){this._$EO?.forEach(e=>e.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&=this._$Eq.forEach(e=>this._$ET(e,this[e])),this._$EM()}updated(e){}firstUpdated(e){}};S.elementStyles=[],S.shadowRootOptions={mode:"open"},S[b("elementProperties")]=new Map,S[b("finalized")]=new Map,y?.({ReactiveElement:S}),(g.reactiveElementVersions??=[]).push("2.1.1");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const _={attribute:!0,type:String,converter:x,reflect:!1,hasChanged:w},T=(e=_,t,i)=>{const{kind:r,metadata:n}=i;let o=globalThis.litPropertyMetadata.get(n);if(void 0===o&&globalThis.litPropertyMetadata.set(n,o=new Map),"setter"===r&&((e=Object.create(e)).wrapped=!0),o.set(i.name,e),"accessor"===r){const{name:r}=i;return{set(i){const n=t.get.call(this);t.set.call(this,i),this.requestUpdate(r,n,e)},init(t){return void 0!==t&&this.C(r,void 0,e,t),t}}}if("setter"===r){const{name:r}=i;return function(i){const n=this[r];t.call(this,i),this.requestUpdate(r,n,e)}}throw Error("Unsupported decorator location: "+r)};function C(e){return(t,i)=>"object"==typeof i?T(e,t,i):((e,t,i)=>{const r=t.hasOwnProperty(i);return t.constructor.createProperty(i,e),r?Object.getOwnPropertyDescriptor(t,i):void 0})(e,t,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function P(e){return C({...e,state:!0,attribute:!1})}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const E=(e,t,i)=>(i.configurable=!0,i.enumerable=!0,Reflect.decorate&&"object"!=typeof t&&Object.defineProperty(e,t,i),i);
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function $(e,t){return(t,i,r)=>E(t,i,{get(){return(t=>t.renderRoot?.querySelector(e)??null)(this)}})}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let A;
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
function I(e){return(t,i)=>{const{slot:r,selector:n}=e??{},o="slot"+(r?`[name=${r}]`:":not([name])");return E(t,i,{get(){const t=this.renderRoot?.querySelector(o),i=t?.assignedElements(e)??[];return void 0===n?i:i.filter(e=>e.matches(n))}})}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const Q=globalThis,R=Q.trustedTypes,D=R?R.createPolicy("lit-html",{createHTML:e=>e}):void 0,M="$lit$",N=`lit$${Math.random().toFixed(9).slice(2)}$`,L="?"+N,z=`<${L}>`,V=document,U=()=>V.createComment(""),q=e=>null===e||"object"!=typeof e&&"function"!=typeof e,X=Array.isArray,Z="[ \t\n\f\r]",B=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,j=/-->/g,F=/>/g,W=RegExp(`>|${Z}(?:([^\\s"'>=/]+)(${Z}*=${Z}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),Y=/'/g,G=/"/g,H=/^(?:script|style|textarea|title)$/i,K=(e=>(t,...i)=>({_$litType$:e,strings:t,values:i}))(1),J=Symbol.for("lit-noChange"),ee=Symbol.for("lit-nothing"),te=new WeakMap,ie=V.createTreeWalker(V,129);function re(e,t){if(!X(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==D?D.createHTML(t):t}const ne=(e,t)=>{const i=e.length-1,r=[];let n,o=2===t?"<svg>":3===t?"<math>":"",s=B;for(let t=0;t<i;t++){const i=e[t];let a,l,c=-1,d=0;for(;d<i.length&&(s.lastIndex=d,l=s.exec(i),null!==l);)d=s.lastIndex,s===B?"!--"===l[1]?s=j:void 0!==l[1]?s=F:void 0!==l[2]?(H.test(l[2])&&(n=RegExp("</"+l[2],"g")),s=W):void 0!==l[3]&&(s=W):s===W?">"===l[0]?(s=n??B,c=-1):void 0===l[1]?c=-2:(c=s.lastIndex-l[2].length,a=l[1],s=void 0===l[3]?W:'"'===l[3]?G:Y):s===G||s===Y?s=W:s===j||s===F?s=B:(s=W,n=void 0);const h=s===W&&e[t+1].startsWith("/>")?" ":"";o+=s===B?i+z:c>=0?(r.push(a),i.slice(0,c)+M+i.slice(c)+N+h):i+N+(-2===c?t:h)}return[re(e,o+(e[i]||"<?>")+(2===t?"</svg>":3===t?"</math>":"")),r]};let oe=class e{constructor({strings:t,_$litType$:i},r){let n;this.parts=[];let o=0,s=0;const a=t.length-1,l=this.parts,[c,d]=ne(t,i);if(this.el=e.createElement(c,r),ie.currentNode=this.el.content,2===i||3===i){const e=this.el.content.firstChild;e.replaceWith(...e.childNodes)}for(;null!==(n=ie.nextNode())&&l.length<a;){if(1===n.nodeType){if(n.hasAttributes())for(const e of n.getAttributeNames())if(e.endsWith(M)){const t=d[s++],i=n.getAttribute(e).split(N),r=/([.?@])?(.*)/.exec(t);l.push({type:1,index:o,name:r[2],strings:i,ctor:"."===r[1]?de:"?"===r[1]?he:"@"===r[1]?ue:ce}),n.removeAttribute(e)}else e.startsWith(N)&&(l.push({type:6,index:o}),n.removeAttribute(e));if(H.test(n.tagName)){const e=n.textContent.split(N),t=e.length-1;if(t>0){n.textContent=R?R.emptyScript:"";for(let i=0;i<t;i++)n.append(e[i],U()),ie.nextNode(),l.push({type:2,index:++o});n.append(e[t],U())}}}else if(8===n.nodeType)if(n.data===L)l.push({type:2,index:o});else{let e=-1;for(;-1!==(e=n.data.indexOf(N,e+1));)l.push({type:7,index:o}),e+=N.length-1}o++}}static createElement(e,t){const i=V.createElement("template");return i.innerHTML=e,i}};function se(e,t,i=e,r){if(t===J)return t;let n=void 0!==r?i._$Co?.[r]:i._$Cl;const o=q(t)?void 0:t._$litDirective$;return n?.constructor!==o&&(n?._$AO?.(!1),void 0===o?n=void 0:(n=new o(e),n._$AT(e,i,r)),void 0!==r?(i._$Co??=[])[r]=n:i._$Cl=n),void 0!==n&&(t=se(e,n._$AS(e,t.values),n,r)),t}let ae=class{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:t},parts:i}=this._$AD,r=(e?.creationScope??V).importNode(t,!0);ie.currentNode=r;let n=ie.nextNode(),o=0,s=0,a=i[0];for(;void 0!==a;){if(o===a.index){let t;2===a.type?t=new le(n,n.nextSibling,this,e):1===a.type?t=new a.ctor(n,a.name,a.strings,this,e):6===a.type&&(t=new pe(n,this,e)),this._$AV.push(t),a=i[++s]}o!==a?.index&&(n=ie.nextNode(),o++)}return ie.currentNode=V,r}p(e){let t=0;for(const i of this._$AV)void 0!==i&&(void 0!==i.strings?(i._$AI(e,i,t),t+=i.strings.length-2):i._$AI(e[t])),t++}};class le{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,t,i,r){this.type=2,this._$AH=ee,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=i,this.options=r,this._$Cv=r?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===e?.nodeType&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=se(this,e,t),q(e)?e===ee||null==e||""===e?(this._$AH!==ee&&this._$AR(),this._$AH=ee):e!==this._$AH&&e!==J&&this._(e):void 0!==e._$litType$?this.$(e):void 0!==e.nodeType?this.T(e):(e=>X(e)||"function"==typeof e?.[Symbol.iterator])(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==ee&&q(this._$AH)?this._$AA.nextSibling.data=e:this.T(V.createTextNode(e)),this._$AH=e}$(e){const{values:t,_$litType$:i}=e,r="number"==typeof i?this._$AC(e):(void 0===i.el&&(i.el=oe.createElement(re(i.h,i.h[0]),this.options)),i);if(this._$AH?._$AD===r)this._$AH.p(t);else{const e=new ae(r,this),i=e.u(this.options);e.p(t),this.T(i),this._$AH=e}}_$AC(e){let t=te.get(e.strings);return void 0===t&&te.set(e.strings,t=new oe(e)),t}k(e){X(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let i,r=0;for(const n of e)r===t.length?t.push(i=new le(this.O(U()),this.O(U()),this,this.options)):i=t[r],i._$AI(n),r++;r<t.length&&(this._$AR(i&&i._$AB.nextSibling,r),t.length=r)}_$AR(e=this._$AA.nextSibling,t){for(this._$AP?.(!1,!0,t);e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){void 0===this._$AM&&(this._$Cv=e,this._$AP?.(e))}}let ce=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,i,r,n){this.type=1,this._$AH=ee,this._$AN=void 0,this.element=e,this.name=t,this._$AM=r,this.options=n,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=ee}_$AI(e,t=this,i,r){const n=this.strings;let o=!1;if(void 0===n)e=se(this,e,t,0),o=!q(e)||e!==this._$AH&&e!==J,o&&(this._$AH=e);else{const r=e;let s,a;for(e=n[0],s=0;s<n.length-1;s++)a=se(this,r[i+s],t,s),a===J&&(a=this._$AH[s]),o||=!q(a)||a!==this._$AH[s],a===ee?e=ee:e!==ee&&(e+=(a??"")+n[s+1]),this._$AH[s]=a}o&&!r&&this.j(e)}j(e){e===ee?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}},de=class extends ce{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===ee?void 0:e}};class he extends ce{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==ee)}}let ue=class extends ce{constructor(e,t,i,r,n){super(e,t,i,r,n),this.type=5}_$AI(e,t=this){if((e=se(this,e,t,0)??ee)===J)return;const i=this._$AH,r=e===ee&&i!==ee||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,n=e!==ee&&(i===ee||r);r&&this.element.removeEventListener(this.name,this,i),n&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}},pe=class{constructor(e,t,i){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(e){se(this,e)}};const fe=Q.litHtmlPolyfillSupport;fe?.(oe,le),(Q.litHtmlVersions??=[]).push("3.3.1");const me=(e,t,i)=>{const r=i?.renderBefore??t;let n=r._$litPart$;if(void 0===n){const e=i?.renderBefore??null;r._$litPart$=n=new le(t.insertBefore(U(),e),e,void 0,i??{})}return n._$AI(e),n
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */},ge=globalThis;let ve=class extends S{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=me(t,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return J}};ve._$litElement$=!0,ve.finalized=!0,ge.litElementHydrateSupport?.({LitElement:ve});const Oe=ge.litElementPolyfillSupport;Oe?.({LitElement:ve}),(ge.litElementVersions??=[]).push("4.2.1");
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class ye extends ve{connectedCallback(){super.connectedCallback(),this.setAttribute("aria-hidden","true")}render(){return K`<span class="shadow"></span>`}}
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const be=l`:host,.shadow,.shadow::before,.shadow::after{border-radius:inherit;inset:0;position:absolute;transition-duration:inherit;transition-property:inherit;transition-timing-function:inherit}:host{display:flex;pointer-events:none;transition-property:box-shadow,opacity}.shadow::before,.shadow::after{content:"";transition-property:box-shadow,opacity;--_level: var(--md-elevation-level, 0);--_shadow-color: var(--md-elevation-shadow-color, var(--md-sys-color-shadow, #000))}.shadow::before{box-shadow:0px calc(1px*(clamp(0,var(--_level),1) + clamp(0,var(--_level) - 3,1) + 2*clamp(0,var(--_level) - 4,1))) calc(1px*(2*clamp(0,var(--_level),1) + clamp(0,var(--_level) - 2,1) + clamp(0,var(--_level) - 4,1))) 0px var(--_shadow-color);opacity:.3}.shadow::after{box-shadow:0px calc(1px*(clamp(0,var(--_level),1) + clamp(0,var(--_level) - 1,1) + 2*clamp(0,var(--_level) - 2,3))) calc(1px*(3*clamp(0,var(--_level),2) + 2*clamp(0,var(--_level) - 2,3))) calc(1px*(clamp(0,var(--_level),4) + 2*clamp(0,var(--_level) - 4,1))) var(--_shadow-color);opacity:.15}
`
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let xe=class extends ye{};xe.styles=[be],xe=t([i("md-elevation")],xe);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const we=Symbol("attachableController");let ke;ke=new MutationObserver(e=>{for(const t of e)t.target[we]?.hostConnected()});class Se{get htmlFor(){return this.host.getAttribute("for")}set htmlFor(e){null===e?this.host.removeAttribute("for"):this.host.setAttribute("for",e)}get control(){return this.host.hasAttribute("for")?this.htmlFor&&this.host.isConnected?this.host.getRootNode().querySelector(`#${this.htmlFor}`):null:this.currentControl||this.host.parentElement}set control(e){e?this.attach(e):this.detach()}constructor(e,t){this.host=e,this.onControlChange=t,this.currentControl=null,e.addController(this),e[we]=this,ke?.observe(e,{attributeFilter:["for"]})}attach(e){e!==this.currentControl&&(this.setCurrentControl(e),this.host.removeAttribute("for"))}detach(){this.setCurrentControl(null),this.host.setAttribute("for","")}hostConnected(){this.setCurrentControl(this.control)}hostDisconnected(){this.setCurrentControl(null)}setCurrentControl(e){this.onControlChange(this.currentControl,e),this.currentControl=e}}
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _e=["focusin","focusout","pointerdown"];class Te extends ve{constructor(){super(...arguments),this.visible=!1,this.inward=!1,this.attachableController=new Se(this,this.onControlChange.bind(this))}get htmlFor(){return this.attachableController.htmlFor}set htmlFor(e){this.attachableController.htmlFor=e}get control(){return this.attachableController.control}set control(e){this.attachableController.control=e}attach(e){this.attachableController.attach(e)}detach(){this.attachableController.detach()}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-hidden","true")}handleEvent(e){if(!e[Ce]){switch(e.type){default:return;case"focusin":this.visible=this.control?.matches(":focus-visible")??!1;break;case"focusout":case"pointerdown":this.visible=!1}e[Ce]=!0}}onControlChange(e,t){for(const i of _e)e?.removeEventListener(i,this),t?.addEventListener(i,this)}update(e){e.has("visible")&&this.dispatchEvent(new Event("visibility-changed")),super.update(e)}}t([C({type:Boolean,reflect:!0})],Te.prototype,"visible",void 0),t([C({type:Boolean,reflect:!0})],Te.prototype,"inward",void 0);const Ce=Symbol("handledByFocusRing"),Pe=l`:host{animation-delay:0s,calc(var(--md-focus-ring-duration, 600ms)*.25);animation-duration:calc(var(--md-focus-ring-duration, 600ms)*.25),calc(var(--md-focus-ring-duration, 600ms)*.75);animation-timing-function:cubic-bezier(0.2, 0, 0, 1);box-sizing:border-box;color:var(--md-focus-ring-color, var(--md-sys-color-secondary, #625b71));display:none;pointer-events:none;position:absolute}:host([visible]){display:flex}:host(:not([inward])){animation-name:outward-grow,outward-shrink;border-end-end-radius:calc(var(--md-focus-ring-shape-end-end, var(--md-focus-ring-shape, var(--md-sys-shape-corner-full, 9999px))) + var(--md-focus-ring-outward-offset, 2px));border-end-start-radius:calc(var(--md-focus-ring-shape-end-start, var(--md-focus-ring-shape, var(--md-sys-shape-corner-full, 9999px))) + var(--md-focus-ring-outward-offset, 2px));border-start-end-radius:calc(var(--md-focus-ring-shape-start-end, var(--md-focus-ring-shape, var(--md-sys-shape-corner-full, 9999px))) + var(--md-focus-ring-outward-offset, 2px));border-start-start-radius:calc(var(--md-focus-ring-shape-start-start, var(--md-focus-ring-shape, var(--md-sys-shape-corner-full, 9999px))) + var(--md-focus-ring-outward-offset, 2px));inset:calc(-1*var(--md-focus-ring-outward-offset, 2px));outline:var(--md-focus-ring-width, 3px) solid currentColor}:host([inward]){animation-name:inward-grow,inward-shrink;border-end-end-radius:calc(var(--md-focus-ring-shape-end-end, var(--md-focus-ring-shape, var(--md-sys-shape-corner-full, 9999px))) - var(--md-focus-ring-inward-offset, 0px));border-end-start-radius:calc(var(--md-focus-ring-shape-end-start, var(--md-focus-ring-shape, var(--md-sys-shape-corner-full, 9999px))) - var(--md-focus-ring-inward-offset, 0px));border-start-end-radius:calc(var(--md-focus-ring-shape-start-end, var(--md-focus-ring-shape, var(--md-sys-shape-corner-full, 9999px))) - var(--md-focus-ring-inward-offset, 0px));border-start-start-radius:calc(var(--md-focus-ring-shape-start-start, var(--md-focus-ring-shape, var(--md-sys-shape-corner-full, 9999px))) - var(--md-focus-ring-inward-offset, 0px));border:var(--md-focus-ring-width, 3px) solid currentColor;inset:var(--md-focus-ring-inward-offset, 0px)}@keyframes outward-grow{from{outline-width:0}to{outline-width:var(--md-focus-ring-active-width, 8px)}}@keyframes outward-shrink{from{outline-width:var(--md-focus-ring-active-width, 8px)}}@keyframes inward-grow{from{border-width:0}to{border-width:var(--md-focus-ring-active-width, 8px)}}@keyframes inward-shrink{from{border-width:var(--md-focus-ring-active-width, 8px)}}@media(prefers-reduced-motion){:host{animation:none}}
`
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Ee=class extends Te{};Ee.styles=[Pe],Ee=t([i("md-focus-ring")],Ee);
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const $e=1,Ae=3,Ie=4,Qe=e=>(...t)=>({_$litDirective$:e,values:t});let Re=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,i){this._$Ct=e,this._$AM=t,this._$Ci=i}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}};
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const De=Qe(class extends Re{constructor(e){if(super(e),e.type!==$e||"class"!==e.name||e.strings?.length>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(e){return" "+Object.keys(e).filter(t=>e[t]).join(" ")+" "}update(e,[t]){if(void 0===this.st){this.st=new Set,void 0!==e.strings&&(this.nt=new Set(e.strings.join(" ").split(/\s/).filter(e=>""!==e)));for(const e in t)t[e]&&!this.nt?.has(e)&&this.st.add(e);return this.render(t)}const i=e.element.classList;for(const e of this.st)e in t||(i.remove(e),this.st.delete(e));for(const e in t){const r=!!t[e];r===this.st.has(e)||this.nt?.has(e)||(r?(i.add(e),this.st.add(e)):(i.remove(e),this.st.delete(e)))}return J}}),Me="cubic-bezier(0.2, 0, 0, 1)",Ne="cubic-bezier(.3,0,0,1)",Le="cubic-bezier(.3,0,.8,.15)";
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ze;!function(e){e[e.INACTIVE=0]="INACTIVE",e[e.TOUCH_DELAY=1]="TOUCH_DELAY",e[e.HOLDING=2]="HOLDING",e[e.WAITING_FOR_CLICK=3]="WAITING_FOR_CLICK"}(ze||(ze={}));const Ve=["click","contextmenu","pointercancel","pointerdown","pointerenter","pointerleave","pointerup"],Ue=window.matchMedia("(forced-colors: active)");class qe extends ve{constructor(){super(...arguments),this.disabled=!1,this.hovered=!1,this.pressed=!1,this.rippleSize="",this.rippleScale="",this.initialSize=0,this.state=ze.INACTIVE,this.attachableController=new Se(this,this.onControlChange.bind(this))}get htmlFor(){return this.attachableController.htmlFor}set htmlFor(e){this.attachableController.htmlFor=e}get control(){return this.attachableController.control}set control(e){this.attachableController.control=e}attach(e){this.attachableController.attach(e)}detach(){this.attachableController.detach()}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-hidden","true")}render(){const e={hovered:this.hovered,pressed:this.pressed};return K`<div class="surface ${De(e)}"></div>`}update(e){e.has("disabled")&&this.disabled&&(this.hovered=!1,this.pressed=!1),super.update(e)}handlePointerenter(e){this.shouldReactToEvent(e)&&(this.hovered=!0)}handlePointerleave(e){this.shouldReactToEvent(e)&&(this.hovered=!1,this.state!==ze.INACTIVE&&this.endPressAnimation())}handlePointerup(e){if(this.shouldReactToEvent(e)){if(this.state!==ze.HOLDING)return this.state===ze.TOUCH_DELAY?(this.state=ze.WAITING_FOR_CLICK,void this.startPressAnimation(this.rippleStartEvent)):void 0;this.state=ze.WAITING_FOR_CLICK}}async handlePointerdown(e){if(this.shouldReactToEvent(e)){if(this.rippleStartEvent=e,!this.isTouch(e))return this.state=ze.WAITING_FOR_CLICK,void this.startPressAnimation(e);this.state=ze.TOUCH_DELAY,await new Promise(e=>{setTimeout(e,150)}),this.state===ze.TOUCH_DELAY&&(this.state=ze.HOLDING,this.startPressAnimation(e))}}handleClick(){this.disabled||(this.state!==ze.WAITING_FOR_CLICK?this.state===ze.INACTIVE&&(this.startPressAnimation(),this.endPressAnimation()):this.endPressAnimation())}handlePointercancel(e){this.shouldReactToEvent(e)&&this.endPressAnimation()}handleContextmenu(){this.disabled||this.endPressAnimation()}determineRippleSize(){const{height:e,width:t}=this.getBoundingClientRect(),i=Math.max(e,t),r=Math.max(.35*i,75),n=this.currentCSSZoom??1,o=Math.floor(.2*i/n),s=Math.sqrt(t**2+e**2)+10;this.initialSize=o;const a=(s+r)/o;this.rippleScale=""+a/n,this.rippleSize=`${o}px`}getNormalizedPointerEventCoords(e){const{scrollX:t,scrollY:i}=window,{left:r,top:n}=this.getBoundingClientRect(),o=t+r,s=i+n,{pageX:a,pageY:l}=e,c=this.currentCSSZoom??1;return{x:(a-o)/c,y:(l-s)/c}}getTranslationCoordinates(e){const{height:t,width:i}=this.getBoundingClientRect(),r=this.currentCSSZoom??1,n={x:(i/r-this.initialSize)/2,y:(t/r-this.initialSize)/2};let o;return o=e instanceof PointerEvent?this.getNormalizedPointerEventCoords(e):{x:i/r/2,y:t/r/2},o={x:o.x-this.initialSize/2,y:o.y-this.initialSize/2},{startPoint:o,endPoint:n}}startPressAnimation(e){if(!this.mdRoot)return;this.pressed=!0,this.growAnimation?.cancel(),this.determineRippleSize();const{startPoint:t,endPoint:i}=this.getTranslationCoordinates(e),r=`${t.x}px, ${t.y}px`,n=`${i.x}px, ${i.y}px`;this.growAnimation=this.mdRoot.animate({top:[0,0],left:[0,0],height:[this.rippleSize,this.rippleSize],width:[this.rippleSize,this.rippleSize],transform:[`translate(${r}) scale(1)`,`translate(${n}) scale(${this.rippleScale})`]},{pseudoElement:"::after",duration:450,easing:Me,fill:"forwards"})}async endPressAnimation(){this.rippleStartEvent=void 0,this.state=ze.INACTIVE;const e=this.growAnimation;let t=1/0;"number"==typeof e?.currentTime?t=e.currentTime:e?.currentTime&&(t=e.currentTime.to("ms").value),t>=225?this.pressed=!1:(await new Promise(e=>{setTimeout(e,225-t)}),this.growAnimation===e&&(this.pressed=!1))}shouldReactToEvent(e){if(this.disabled||!e.isPrimary)return!1;if(this.rippleStartEvent&&this.rippleStartEvent.pointerId!==e.pointerId)return!1;if("pointerenter"===e.type||"pointerleave"===e.type)return!this.isTouch(e);const t=1===e.buttons;return this.isTouch(e)||t}isTouch({pointerType:e}){return"touch"===e}async handleEvent(e){if(!Ue?.matches)switch(e.type){case"click":this.handleClick();break;case"contextmenu":this.handleContextmenu();break;case"pointercancel":this.handlePointercancel(e);break;case"pointerdown":await this.handlePointerdown(e);break;case"pointerenter":this.handlePointerenter(e);break;case"pointerleave":this.handlePointerleave(e);break;case"pointerup":this.handlePointerup(e)}}onControlChange(e,t){for(const i of Ve)e?.removeEventListener(i,this),t?.addEventListener(i,this)}}t([C({type:Boolean,reflect:!0})],qe.prototype,"disabled",void 0),t([P()],qe.prototype,"hovered",void 0),t([P()],qe.prototype,"pressed",void 0),t([$(".surface")],qe.prototype,"mdRoot",void 0);
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const Xe=l`:host{display:flex;margin:auto;pointer-events:none}:host([disabled]){display:none}@media(forced-colors: active){:host{display:none}}:host,.surface{border-radius:inherit;position:absolute;inset:0;overflow:hidden}.surface{-webkit-tap-highlight-color:rgba(0,0,0,0)}.surface::before,.surface::after{content:"";opacity:0;position:absolute}.surface::before{background-color:var(--md-ripple-hover-color, var(--md-sys-color-on-surface, #1d1b20));inset:0;transition:opacity 15ms linear,background-color 15ms linear}.surface::after{background:radial-gradient(closest-side, var(--md-ripple-pressed-color, var(--md-sys-color-on-surface, #1d1b20)) max(100% - 70px, 65%), transparent 100%);transform-origin:center center;transition:opacity 375ms linear}.hovered::before{background-color:var(--md-ripple-hover-color, var(--md-sys-color-on-surface, #1d1b20));opacity:var(--md-ripple-hover-opacity, 0.08)}.pressed::after{opacity:var(--md-ripple-pressed-opacity, 0.12);transition-duration:105ms}
`
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let Ze=class extends qe{};Ze.styles=[Xe],Ze=t([i("md-ripple")],Ze);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const Be=["role","ariaAtomic","ariaAutoComplete","ariaBusy","ariaChecked","ariaColCount","ariaColIndex","ariaColSpan","ariaCurrent","ariaDisabled","ariaExpanded","ariaHasPopup","ariaHidden","ariaInvalid","ariaKeyShortcuts","ariaLabel","ariaLevel","ariaLive","ariaModal","ariaMultiLine","ariaMultiSelectable","ariaOrientation","ariaPlaceholder","ariaPosInSet","ariaPressed","ariaReadOnly","ariaRequired","ariaRoleDescription","ariaRowCount","ariaRowIndex","ariaRowSpan","ariaSelected","ariaSetSize","ariaSort","ariaValueMax","ariaValueMin","ariaValueNow","ariaValueText"],je=Be.map(We);function Fe(e){return je.includes(e)}function We(e){return e.replace("aria","aria-").replace(/Elements?/g,"").toLowerCase()}
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ye=Symbol("privateIgnoreAttributeChangesFor");function Ge(e){var t;class i extends e{constructor(){super(...arguments),this[t]=new Set}attributeChangedCallback(e,t,i){if(!Fe(e))return void super.attributeChangedCallback(e,t,i);if(this[Ye].has(e))return;this[Ye].add(e),this.removeAttribute(e),this[Ye].delete(e);const r=Ke(e);null===i?delete this.dataset[r]:this.dataset[r]=i,this.requestUpdate(Ke(e),t)}getAttribute(e){return Fe(e)?super.getAttribute(He(e)):super.getAttribute(e)}removeAttribute(e){super.removeAttribute(e),Fe(e)&&(super.removeAttribute(He(e)),this.requestUpdate())}}return t=Ye,function(e){for(const t of Be){const i=We(t),r=He(i),n=Ke(i);e.createProperty(t,{attribute:i,noAccessor:!0}),e.createProperty(Symbol(r),{attribute:r,noAccessor:!0}),Object.defineProperty(e.prototype,t,{configurable:!0,enumerable:!0,get(){return this.dataset[n]??null},set(e){const i=this.dataset[n]??null;e!==i&&(null===e?delete this.dataset[n]:this.dataset[n]=e,this.requestUpdate(t,i))}})}}(i),i}function He(e){return`data-${e}`}function Ke(e){return e.replace(/-\w/,e=>e[1].toUpperCase())}
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Je=Symbol("internals"),et=Symbol("privateInternals");function tt(e){return class extends e{get[Je](){return this[et]||(this[et]=this.attachInternals()),this[et]}}}
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function it(e){e.addInitializer(e=>{const t=e;t.addEventListener("click",async e=>{const{type:i,[Je]:r}=t,{form:n}=r;n&&"button"!==i&&(await new Promise(e=>{setTimeout(e)}),e.defaultPrevented||("reset"!==i?(n.addEventListener("submit",e=>{Object.defineProperty(e,"submitter",{configurable:!0,enumerable:!0,get:()=>t})},{capture:!0,once:!0}),r.setFormValue(t.value),n.requestSubmit()):n.reset()))})})}
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rt(e){const t=new MouseEvent("click",{bubbles:!0});return e.dispatchEvent(t),t}function nt(e){return e.currentTarget===e.target&&(e.composedPath()[0]===e.target&&(!e.target.disabled&&!function(e){const t=ot;t&&(e.preventDefault(),e.stopImmediatePropagation());return async function(){ot=!0,await null,ot=!1}
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */(),t}(e)))}let ot=!1;const st=Ge(tt(ve));class at extends st{get name(){return this.getAttribute("name")??""}set name(e){this.setAttribute("name",e)}get form(){return this[Je].form}constructor(){super(),this.disabled=!1,this.softDisabled=!1,this.href="",this.download="",this.target="",this.trailingIcon=!1,this.hasIcon=!1,this.type="submit",this.value="",this.addEventListener("click",this.handleClick.bind(this))}focus(){this.buttonElement?.focus()}blur(){this.buttonElement?.blur()}render(){const e=this.disabled||this.softDisabled,t=this.href?this.renderLink():this.renderButton(),i=this.href?"link":"button";return K`
      ${this.renderElevationOrOutline?.()}
      <div class="background"></div>
      <md-focus-ring part="focus-ring" for=${i}></md-focus-ring>
      <md-ripple
        part="ripple"
        for=${i}
        ?disabled="${e}"></md-ripple>
      ${t}
    `}renderButton(){const{ariaLabel:e,ariaHasPopup:t,ariaExpanded:i}=this;return K`<button
      id="button"
      class="button"
      ?disabled=${this.disabled}
      aria-disabled=${this.softDisabled||ee}
      aria-label="${e||ee}"
      aria-haspopup="${t||ee}"
      aria-expanded="${i||ee}">
      ${this.renderContent()}
    </button>`}renderLink(){const{ariaLabel:e,ariaHasPopup:t,ariaExpanded:i}=this;return K`<a
      id="link"
      class="button"
      aria-label="${e||ee}"
      aria-haspopup="${t||ee}"
      aria-expanded="${i||ee}"
      aria-disabled=${this.disabled||this.softDisabled||ee}
      tabindex="${this.disabled&&!this.softDisabled?-1:ee}"
      href=${this.href}
      download=${this.download||ee}
      target=${this.target||ee}
      >${this.renderContent()}
    </a>`}renderContent(){const e=K`<slot
      name="icon"
      @slotchange="${this.handleSlotChange}"></slot>`;return K`
      <span class="touch"></span>
      ${this.trailingIcon?ee:e}
      <span class="label"><slot></slot></span>
      ${this.trailingIcon?e:ee}
    `}handleClick(e){if(this.softDisabled||this.disabled&&this.href)return e.stopImmediatePropagation(),void e.preventDefault();nt(e)&&this.buttonElement&&(this.focus(),rt(this.buttonElement))}handleSlotChange(){this.hasIcon=this.assignedIcons.length>0}}it(at),at.formAssociated=!0,at.shadowRootOptions={mode:"open",delegatesFocus:!0},t([C({type:Boolean,reflect:!0})],at.prototype,"disabled",void 0),t([C({type:Boolean,attribute:"soft-disabled",reflect:!0})],at.prototype,"softDisabled",void 0),t([C()],at.prototype,"href",void 0),t([C()],at.prototype,"download",void 0),t([C()],at.prototype,"target",void 0),t([C({type:Boolean,attribute:"trailing-icon",reflect:!0})],at.prototype,"trailingIcon",void 0),t([C({type:Boolean,attribute:"has-icon",reflect:!0})],at.prototype,"hasIcon",void 0),t([C()],at.prototype,"type",void 0),t([C({reflect:!0})],at.prototype,"value",void 0),t([$(".button")],at.prototype,"buttonElement",void 0),t([I({slot:"icon",flatten:!0})],at.prototype,"assignedIcons",void 0);
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class lt extends at{renderElevationOrOutline(){return K`<md-elevation part="elevation"></md-elevation>`}}
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ct=l`:host{--_container-color: var(--md-filled-button-container-color, var(--md-sys-color-primary, #6750a4));--_container-elevation: var(--md-filled-button-container-elevation, 0);--_container-height: var(--md-filled-button-container-height, 40px);--_container-shadow-color: var(--md-filled-button-container-shadow-color, var(--md-sys-color-shadow, #000));--_disabled-container-color: var(--md-filled-button-disabled-container-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-container-elevation: var(--md-filled-button-disabled-container-elevation, 0);--_disabled-container-opacity: var(--md-filled-button-disabled-container-opacity, 0.12);--_disabled-label-text-color: var(--md-filled-button-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-label-text-opacity: var(--md-filled-button-disabled-label-text-opacity, 0.38);--_focus-container-elevation: var(--md-filled-button-focus-container-elevation, 0);--_focus-label-text-color: var(--md-filled-button-focus-label-text-color, var(--md-sys-color-on-primary, #fff));--_hover-container-elevation: var(--md-filled-button-hover-container-elevation, 1);--_hover-label-text-color: var(--md-filled-button-hover-label-text-color, var(--md-sys-color-on-primary, #fff));--_hover-state-layer-color: var(--md-filled-button-hover-state-layer-color, var(--md-sys-color-on-primary, #fff));--_hover-state-layer-opacity: var(--md-filled-button-hover-state-layer-opacity, 0.08);--_label-text-color: var(--md-filled-button-label-text-color, var(--md-sys-color-on-primary, #fff));--_label-text-font: var(--md-filled-button-label-text-font, var(--md-sys-typescale-label-large-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-line-height: var(--md-filled-button-label-text-line-height, var(--md-sys-typescale-label-large-line-height, 1.25rem));--_label-text-size: var(--md-filled-button-label-text-size, var(--md-sys-typescale-label-large-size, 0.875rem));--_label-text-weight: var(--md-filled-button-label-text-weight, var(--md-sys-typescale-label-large-weight, var(--md-ref-typeface-weight-medium, 500)));--_pressed-container-elevation: var(--md-filled-button-pressed-container-elevation, 0);--_pressed-label-text-color: var(--md-filled-button-pressed-label-text-color, var(--md-sys-color-on-primary, #fff));--_pressed-state-layer-color: var(--md-filled-button-pressed-state-layer-color, var(--md-sys-color-on-primary, #fff));--_pressed-state-layer-opacity: var(--md-filled-button-pressed-state-layer-opacity, 0.12);--_disabled-icon-color: var(--md-filled-button-disabled-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-icon-opacity: var(--md-filled-button-disabled-icon-opacity, 0.38);--_focus-icon-color: var(--md-filled-button-focus-icon-color, var(--md-sys-color-on-primary, #fff));--_hover-icon-color: var(--md-filled-button-hover-icon-color, var(--md-sys-color-on-primary, #fff));--_icon-color: var(--md-filled-button-icon-color, var(--md-sys-color-on-primary, #fff));--_icon-size: var(--md-filled-button-icon-size, 18px);--_pressed-icon-color: var(--md-filled-button-pressed-icon-color, var(--md-sys-color-on-primary, #fff));--_container-shape-start-start: var(--md-filled-button-container-shape-start-start, var(--md-filled-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-start-end: var(--md-filled-button-container-shape-start-end, var(--md-filled-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-end: var(--md-filled-button-container-shape-end-end, var(--md-filled-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-start: var(--md-filled-button-container-shape-end-start, var(--md-filled-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_leading-space: var(--md-filled-button-leading-space, 24px);--_trailing-space: var(--md-filled-button-trailing-space, 24px);--_with-leading-icon-leading-space: var(--md-filled-button-with-leading-icon-leading-space, 16px);--_with-leading-icon-trailing-space: var(--md-filled-button-with-leading-icon-trailing-space, 24px);--_with-trailing-icon-leading-space: var(--md-filled-button-with-trailing-icon-leading-space, 24px);--_with-trailing-icon-trailing-space: var(--md-filled-button-with-trailing-icon-trailing-space, 16px)}
`,dt=l`md-elevation{transition-duration:280ms}:host(:is([disabled],[soft-disabled])) md-elevation{transition:none}md-elevation{--md-elevation-level: var(--_container-elevation);--md-elevation-shadow-color: var(--_container-shadow-color)}:host(:focus-within) md-elevation{--md-elevation-level: var(--_focus-container-elevation)}:host(:hover) md-elevation{--md-elevation-level: var(--_hover-container-elevation)}:host(:active) md-elevation{--md-elevation-level: var(--_pressed-container-elevation)}:host(:is([disabled],[soft-disabled])) md-elevation{--md-elevation-level: var(--_disabled-container-elevation)}
`,ht=l`:host{border-start-start-radius:var(--_container-shape-start-start);border-start-end-radius:var(--_container-shape-start-end);border-end-start-radius:var(--_container-shape-end-start);border-end-end-radius:var(--_container-shape-end-end);box-sizing:border-box;cursor:pointer;display:inline-flex;gap:8px;min-height:var(--_container-height);outline:none;padding-block:calc((var(--_container-height) - max(var(--_label-text-line-height),var(--_icon-size)))/2);padding-inline-start:var(--_leading-space);padding-inline-end:var(--_trailing-space);place-content:center;place-items:center;position:relative;font-family:var(--_label-text-font);font-size:var(--_label-text-size);line-height:var(--_label-text-line-height);font-weight:var(--_label-text-weight);text-overflow:ellipsis;text-wrap:nowrap;user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0);vertical-align:top;--md-ripple-hover-color: var(--_hover-state-layer-color);--md-ripple-pressed-color: var(--_pressed-state-layer-color);--md-ripple-hover-opacity: var(--_hover-state-layer-opacity);--md-ripple-pressed-opacity: var(--_pressed-state-layer-opacity)}md-focus-ring{--md-focus-ring-shape-start-start: var(--_container-shape-start-start);--md-focus-ring-shape-start-end: var(--_container-shape-start-end);--md-focus-ring-shape-end-end: var(--_container-shape-end-end);--md-focus-ring-shape-end-start: var(--_container-shape-end-start)}:host(:is([disabled],[soft-disabled])){cursor:default;pointer-events:none}.button{border-radius:inherit;cursor:inherit;display:inline-flex;align-items:center;justify-content:center;border:none;outline:none;-webkit-appearance:none;vertical-align:middle;background:rgba(0,0,0,0);text-decoration:none;min-width:calc(64px - var(--_leading-space) - var(--_trailing-space));width:100%;z-index:0;height:100%;font:inherit;color:var(--_label-text-color);padding:0;gap:inherit;text-transform:inherit}.button::-moz-focus-inner{padding:0;border:0}:host(:hover) .button{color:var(--_hover-label-text-color)}:host(:focus-within) .button{color:var(--_focus-label-text-color)}:host(:active) .button{color:var(--_pressed-label-text-color)}.background{background:var(--_container-color);border-radius:inherit;inset:0;position:absolute}.label{overflow:hidden}:is(.button,.label,.label slot),.label ::slotted(*){text-overflow:inherit}:host(:is([disabled],[soft-disabled])) .label{color:var(--_disabled-label-text-color);opacity:var(--_disabled-label-text-opacity)}:host(:is([disabled],[soft-disabled])) .background{background:var(--_disabled-container-color);opacity:var(--_disabled-container-opacity)}@media(forced-colors: active){.background{border:1px solid CanvasText}:host(:is([disabled],[soft-disabled])){--_disabled-icon-color: GrayText;--_disabled-icon-opacity: 1;--_disabled-container-opacity: 1;--_disabled-label-text-color: GrayText;--_disabled-label-text-opacity: 1}}:host([has-icon]:not([trailing-icon])){padding-inline-start:var(--_with-leading-icon-leading-space);padding-inline-end:var(--_with-leading-icon-trailing-space)}:host([has-icon][trailing-icon]){padding-inline-start:var(--_with-trailing-icon-leading-space);padding-inline-end:var(--_with-trailing-icon-trailing-space)}::slotted([slot=icon]){display:inline-flex;position:relative;writing-mode:horizontal-tb;fill:currentColor;flex-shrink:0;color:var(--_icon-color);font-size:var(--_icon-size);inline-size:var(--_icon-size);block-size:var(--_icon-size)}:host(:hover) ::slotted([slot=icon]){color:var(--_hover-icon-color)}:host(:focus-within) ::slotted([slot=icon]){color:var(--_focus-icon-color)}:host(:active) ::slotted([slot=icon]){color:var(--_pressed-icon-color)}:host(:is([disabled],[soft-disabled])) ::slotted([slot=icon]){color:var(--_disabled-icon-color);opacity:var(--_disabled-icon-opacity)}.touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}:host([touch-target=wrapper]){margin:max(0px,(48px - var(--_container-height))/2) 0}:host([touch-target=none]) .touch{display:none}
`
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let ut=class extends lt{};ut.styles=[ht,dt,ct],ut=t([i("md-filled-button")],ut);
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class pt extends at{renderElevationOrOutline(){return K`<md-elevation part="elevation"></md-elevation>`}}
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ft=l`:host{--_container-color: var(--md-filled-tonal-button-container-color, var(--md-sys-color-secondary-container, #e8def8));--_container-elevation: var(--md-filled-tonal-button-container-elevation, 0);--_container-height: var(--md-filled-tonal-button-container-height, 40px);--_container-shadow-color: var(--md-filled-tonal-button-container-shadow-color, var(--md-sys-color-shadow, #000));--_disabled-container-color: var(--md-filled-tonal-button-disabled-container-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-container-elevation: var(--md-filled-tonal-button-disabled-container-elevation, 0);--_disabled-container-opacity: var(--md-filled-tonal-button-disabled-container-opacity, 0.12);--_disabled-label-text-color: var(--md-filled-tonal-button-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-label-text-opacity: var(--md-filled-tonal-button-disabled-label-text-opacity, 0.38);--_focus-container-elevation: var(--md-filled-tonal-button-focus-container-elevation, 0);--_focus-label-text-color: var(--md-filled-tonal-button-focus-label-text-color, var(--md-sys-color-on-secondary-container, #1d192b));--_hover-container-elevation: var(--md-filled-tonal-button-hover-container-elevation, 1);--_hover-label-text-color: var(--md-filled-tonal-button-hover-label-text-color, var(--md-sys-color-on-secondary-container, #1d192b));--_hover-state-layer-color: var(--md-filled-tonal-button-hover-state-layer-color, var(--md-sys-color-on-secondary-container, #1d192b));--_hover-state-layer-opacity: var(--md-filled-tonal-button-hover-state-layer-opacity, 0.08);--_label-text-color: var(--md-filled-tonal-button-label-text-color, var(--md-sys-color-on-secondary-container, #1d192b));--_label-text-font: var(--md-filled-tonal-button-label-text-font, var(--md-sys-typescale-label-large-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-line-height: var(--md-filled-tonal-button-label-text-line-height, var(--md-sys-typescale-label-large-line-height, 1.25rem));--_label-text-size: var(--md-filled-tonal-button-label-text-size, var(--md-sys-typescale-label-large-size, 0.875rem));--_label-text-weight: var(--md-filled-tonal-button-label-text-weight, var(--md-sys-typescale-label-large-weight, var(--md-ref-typeface-weight-medium, 500)));--_pressed-container-elevation: var(--md-filled-tonal-button-pressed-container-elevation, 0);--_pressed-label-text-color: var(--md-filled-tonal-button-pressed-label-text-color, var(--md-sys-color-on-secondary-container, #1d192b));--_pressed-state-layer-color: var(--md-filled-tonal-button-pressed-state-layer-color, var(--md-sys-color-on-secondary-container, #1d192b));--_pressed-state-layer-opacity: var(--md-filled-tonal-button-pressed-state-layer-opacity, 0.12);--_disabled-icon-color: var(--md-filled-tonal-button-disabled-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-icon-opacity: var(--md-filled-tonal-button-disabled-icon-opacity, 0.38);--_focus-icon-color: var(--md-filled-tonal-button-focus-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_hover-icon-color: var(--md-filled-tonal-button-hover-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_icon-color: var(--md-filled-tonal-button-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_icon-size: var(--md-filled-tonal-button-icon-size, 18px);--_pressed-icon-color: var(--md-filled-tonal-button-pressed-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_container-shape-start-start: var(--md-filled-tonal-button-container-shape-start-start, var(--md-filled-tonal-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-start-end: var(--md-filled-tonal-button-container-shape-start-end, var(--md-filled-tonal-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-end: var(--md-filled-tonal-button-container-shape-end-end, var(--md-filled-tonal-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-start: var(--md-filled-tonal-button-container-shape-end-start, var(--md-filled-tonal-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_leading-space: var(--md-filled-tonal-button-leading-space, 24px);--_trailing-space: var(--md-filled-tonal-button-trailing-space, 24px);--_with-leading-icon-leading-space: var(--md-filled-tonal-button-with-leading-icon-leading-space, 16px);--_with-leading-icon-trailing-space: var(--md-filled-tonal-button-with-leading-icon-trailing-space, 24px);--_with-trailing-icon-leading-space: var(--md-filled-tonal-button-with-trailing-icon-leading-space, 24px);--_with-trailing-icon-trailing-space: var(--md-filled-tonal-button-with-trailing-icon-trailing-space, 16px)}
`
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let mt=class extends pt{};mt.styles=[ht,dt,ft],mt=t([i("md-filled-tonal-button")],mt);
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class gt extends at{renderElevationOrOutline(){return K`<div class="outline"></div>`}}
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vt=l`:host{--_container-height: var(--md-outlined-button-container-height, 40px);--_disabled-label-text-color: var(--md-outlined-button-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-label-text-opacity: var(--md-outlined-button-disabled-label-text-opacity, 0.38);--_disabled-outline-color: var(--md-outlined-button-disabled-outline-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-outline-opacity: var(--md-outlined-button-disabled-outline-opacity, 0.12);--_focus-label-text-color: var(--md-outlined-button-focus-label-text-color, var(--md-sys-color-primary, #6750a4));--_hover-label-text-color: var(--md-outlined-button-hover-label-text-color, var(--md-sys-color-primary, #6750a4));--_hover-state-layer-color: var(--md-outlined-button-hover-state-layer-color, var(--md-sys-color-primary, #6750a4));--_hover-state-layer-opacity: var(--md-outlined-button-hover-state-layer-opacity, 0.08);--_label-text-color: var(--md-outlined-button-label-text-color, var(--md-sys-color-primary, #6750a4));--_label-text-font: var(--md-outlined-button-label-text-font, var(--md-sys-typescale-label-large-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-line-height: var(--md-outlined-button-label-text-line-height, var(--md-sys-typescale-label-large-line-height, 1.25rem));--_label-text-size: var(--md-outlined-button-label-text-size, var(--md-sys-typescale-label-large-size, 0.875rem));--_label-text-weight: var(--md-outlined-button-label-text-weight, var(--md-sys-typescale-label-large-weight, var(--md-ref-typeface-weight-medium, 500)));--_outline-color: var(--md-outlined-button-outline-color, var(--md-sys-color-outline, #79747e));--_outline-width: var(--md-outlined-button-outline-width, 1px);--_pressed-label-text-color: var(--md-outlined-button-pressed-label-text-color, var(--md-sys-color-primary, #6750a4));--_pressed-outline-color: var(--md-outlined-button-pressed-outline-color, var(--md-sys-color-outline, #79747e));--_pressed-state-layer-color: var(--md-outlined-button-pressed-state-layer-color, var(--md-sys-color-primary, #6750a4));--_pressed-state-layer-opacity: var(--md-outlined-button-pressed-state-layer-opacity, 0.12);--_disabled-icon-color: var(--md-outlined-button-disabled-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-icon-opacity: var(--md-outlined-button-disabled-icon-opacity, 0.38);--_focus-icon-color: var(--md-outlined-button-focus-icon-color, var(--md-sys-color-primary, #6750a4));--_hover-icon-color: var(--md-outlined-button-hover-icon-color, var(--md-sys-color-primary, #6750a4));--_icon-color: var(--md-outlined-button-icon-color, var(--md-sys-color-primary, #6750a4));--_icon-size: var(--md-outlined-button-icon-size, 18px);--_pressed-icon-color: var(--md-outlined-button-pressed-icon-color, var(--md-sys-color-primary, #6750a4));--_container-shape-start-start: var(--md-outlined-button-container-shape-start-start, var(--md-outlined-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-start-end: var(--md-outlined-button-container-shape-start-end, var(--md-outlined-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-end: var(--md-outlined-button-container-shape-end-end, var(--md-outlined-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-start: var(--md-outlined-button-container-shape-end-start, var(--md-outlined-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_leading-space: var(--md-outlined-button-leading-space, 24px);--_trailing-space: var(--md-outlined-button-trailing-space, 24px);--_with-leading-icon-leading-space: var(--md-outlined-button-with-leading-icon-leading-space, 16px);--_with-leading-icon-trailing-space: var(--md-outlined-button-with-leading-icon-trailing-space, 24px);--_with-trailing-icon-leading-space: var(--md-outlined-button-with-trailing-icon-leading-space, 24px);--_with-trailing-icon-trailing-space: var(--md-outlined-button-with-trailing-icon-trailing-space, 16px);--_container-color: none;--_disabled-container-color: none;--_disabled-container-opacity: 0}.outline{inset:0;border-style:solid;position:absolute;box-sizing:border-box;border-color:var(--_outline-color);border-start-start-radius:var(--_container-shape-start-start);border-start-end-radius:var(--_container-shape-start-end);border-end-start-radius:var(--_container-shape-end-start);border-end-end-radius:var(--_container-shape-end-end)}:host(:active) .outline{border-color:var(--_pressed-outline-color)}:host(:is([disabled],[soft-disabled])) .outline{border-color:var(--_disabled-outline-color);opacity:var(--_disabled-outline-opacity)}@media(forced-colors: active){:host(:is([disabled],[soft-disabled])) .background{border-color:GrayText}:host(:is([disabled],[soft-disabled])) .outline{opacity:1}}.outline,md-ripple{border-width:var(--_outline-width)}md-ripple{inline-size:calc(100% - 2*var(--_outline-width));block-size:calc(100% - 2*var(--_outline-width));border-style:solid;border-color:rgba(0,0,0,0)}
`
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let Ot=class extends gt{};Ot.styles=[ht,vt],Ot=t([i("md-outlined-button")],Ot);
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class yt extends at{}
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bt=l`:host{--_container-height: var(--md-text-button-container-height, 40px);--_disabled-label-text-color: var(--md-text-button-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-label-text-opacity: var(--md-text-button-disabled-label-text-opacity, 0.38);--_focus-label-text-color: var(--md-text-button-focus-label-text-color, var(--md-sys-color-primary, #6750a4));--_hover-label-text-color: var(--md-text-button-hover-label-text-color, var(--md-sys-color-primary, #6750a4));--_hover-state-layer-color: var(--md-text-button-hover-state-layer-color, var(--md-sys-color-primary, #6750a4));--_hover-state-layer-opacity: var(--md-text-button-hover-state-layer-opacity, 0.08);--_label-text-color: var(--md-text-button-label-text-color, var(--md-sys-color-primary, #6750a4));--_label-text-font: var(--md-text-button-label-text-font, var(--md-sys-typescale-label-large-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-line-height: var(--md-text-button-label-text-line-height, var(--md-sys-typescale-label-large-line-height, 1.25rem));--_label-text-size: var(--md-text-button-label-text-size, var(--md-sys-typescale-label-large-size, 0.875rem));--_label-text-weight: var(--md-text-button-label-text-weight, var(--md-sys-typescale-label-large-weight, var(--md-ref-typeface-weight-medium, 500)));--_pressed-label-text-color: var(--md-text-button-pressed-label-text-color, var(--md-sys-color-primary, #6750a4));--_pressed-state-layer-color: var(--md-text-button-pressed-state-layer-color, var(--md-sys-color-primary, #6750a4));--_pressed-state-layer-opacity: var(--md-text-button-pressed-state-layer-opacity, 0.12);--_disabled-icon-color: var(--md-text-button-disabled-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-icon-opacity: var(--md-text-button-disabled-icon-opacity, 0.38);--_focus-icon-color: var(--md-text-button-focus-icon-color, var(--md-sys-color-primary, #6750a4));--_hover-icon-color: var(--md-text-button-hover-icon-color, var(--md-sys-color-primary, #6750a4));--_icon-color: var(--md-text-button-icon-color, var(--md-sys-color-primary, #6750a4));--_icon-size: var(--md-text-button-icon-size, 18px);--_pressed-icon-color: var(--md-text-button-pressed-icon-color, var(--md-sys-color-primary, #6750a4));--_container-shape-start-start: var(--md-text-button-container-shape-start-start, var(--md-text-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-start-end: var(--md-text-button-container-shape-start-end, var(--md-text-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-end: var(--md-text-button-container-shape-end-end, var(--md-text-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_container-shape-end-start: var(--md-text-button-container-shape-end-start, var(--md-text-button-container-shape, var(--md-sys-shape-corner-full, 9999px)));--_leading-space: var(--md-text-button-leading-space, 12px);--_trailing-space: var(--md-text-button-trailing-space, 12px);--_with-leading-icon-leading-space: var(--md-text-button-with-leading-icon-leading-space, 12px);--_with-leading-icon-trailing-space: var(--md-text-button-with-leading-icon-trailing-space, 16px);--_with-trailing-icon-leading-space: var(--md-text-button-with-trailing-icon-leading-space, 16px);--_with-trailing-icon-trailing-space: var(--md-text-button-with-trailing-icon-trailing-space, 12px);--_container-color: none;--_disabled-container-color: none;--_disabled-container-opacity: 0}
`
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let xt=class extends yt{};xt.styles=[ht,bt],xt=t([i("md-text-button")],xt);
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class wt extends ve{constructor(){super(...arguments),this.disabled=!1,this.error=!1,this.focused=!1,this.label="",this.noAsterisk=!1,this.populated=!1,this.required=!1,this.resizable=!1,this.supportingText="",this.errorText="",this.count=-1,this.max=-1,this.hasStart=!1,this.hasEnd=!1,this.isAnimating=!1,this.refreshErrorAlert=!1,this.disableTransitions=!1}get counterText(){const e=this.count??-1,t=this.max??-1;return e<0||t<=0?"":`${e} / ${t}`}get supportingOrErrorText(){return this.error&&this.errorText?this.errorText:this.supportingText}reannounceError(){this.refreshErrorAlert=!0}update(e){e.has("disabled")&&void 0!==e.get("disabled")&&(this.disableTransitions=!0),this.disabled&&this.focused&&(e.set("focused",!0),this.focused=!1),this.animateLabelIfNeeded({wasFocused:e.get("focused"),wasPopulated:e.get("populated")}),super.update(e)}render(){const e=this.renderLabel(!0),t=this.renderLabel(!1),i=this.renderOutline?.(e),r={disabled:this.disabled,"disable-transitions":this.disableTransitions,error:this.error&&!this.disabled,focused:this.focused,"with-start":this.hasStart,"with-end":this.hasEnd,populated:this.populated,resizable:this.resizable,required:this.required,"no-label":!this.label};return K`
      <div class="field ${De(r)}">
        <div class="container-overflow">
          ${this.renderBackground?.()}
          <slot name="container"></slot>
          ${this.renderStateLayer?.()} ${this.renderIndicator?.()} ${i}
          <div class="container">
            <div class="start">
              <slot name="start"></slot>
            </div>
            <div class="middle">
              <div class="label-wrapper">
                ${t} ${i?ee:e}
              </div>
              <div class="content">
                <slot></slot>
              </div>
            </div>
            <div class="end">
              <slot name="end"></slot>
            </div>
          </div>
        </div>
        ${this.renderSupportingText()}
      </div>
    `}updated(e){(e.has("supportingText")||e.has("errorText")||e.has("count")||e.has("max"))&&this.updateSlottedAriaDescribedBy(),this.refreshErrorAlert&&requestAnimationFrame(()=>{this.refreshErrorAlert=!1}),this.disableTransitions&&requestAnimationFrame(()=>{this.disableTransitions=!1})}renderSupportingText(){const{supportingOrErrorText:e,counterText:t}=this;if(!e&&!t)return ee;const i=K`<span>${e}</span>`,r=t?K`<span class="counter">${t}</span>`:ee,n=this.error&&this.errorText&&!this.refreshErrorAlert;return K`
      <div class="supporting-text" role=${n?"alert":ee}>${i}${r}</div>
      <slot
        name="aria-describedby"
        @slotchange=${this.updateSlottedAriaDescribedBy}></slot>
    `}updateSlottedAriaDescribedBy(){for(const e of this.slottedAriaDescribedBy)me(K`${this.supportingOrErrorText} ${this.counterText}`,e),e.setAttribute("hidden","")}renderLabel(e){if(!this.label)return ee;let t;t=e?this.focused||this.populated||this.isAnimating:!this.focused&&!this.populated&&!this.isAnimating;const i={hidden:!t,floating:e,resting:!e},r=`${this.label}${this.required&&!this.noAsterisk?"*":""}`;return K`
      <span class="label ${De(i)}" aria-hidden=${!t}
        >${r}</span
      >
    `}animateLabelIfNeeded({wasFocused:e,wasPopulated:t}){if(!this.label)return;e??=this.focused,t??=this.populated;(e||t)!==(this.focused||this.populated)&&(this.isAnimating=!0,this.labelAnimation?.cancel(),this.labelAnimation=this.floatingLabelEl?.animate(this.getLabelKeyframes(),{duration:150,easing:Me}),this.labelAnimation?.addEventListener("finish",()=>{this.isAnimating=!1}))}getLabelKeyframes(){const{floatingLabelEl:e,restingLabelEl:t}=this;if(!e||!t)return[];const{x:i,y:r,height:n}=e.getBoundingClientRect(),{x:o,y:s,height:a}=t.getBoundingClientRect(),l=e.scrollWidth,c=t.scrollWidth,d=c/l,h=`translateX(${o-i}px) translateY(${s-r+Math.round((a-n*d)/2)}px) scale(${d})`,u="translateX(0) translateY(0) scale(1)",p=t.clientWidth,f=c>p?p/d+"px":"";return this.focused||this.populated?[{transform:h,width:f},{transform:u,width:f}]:[{transform:u,width:f},{transform:h,width:f}]}getSurfacePositionClientRect(){return this.containerEl.getBoundingClientRect()}}t([C({type:Boolean})],wt.prototype,"disabled",void 0),t([C({type:Boolean})],wt.prototype,"error",void 0),t([C({type:Boolean})],wt.prototype,"focused",void 0),t([C()],wt.prototype,"label",void 0),t([C({type:Boolean,attribute:"no-asterisk"})],wt.prototype,"noAsterisk",void 0),t([C({type:Boolean})],wt.prototype,"populated",void 0),t([C({type:Boolean})],wt.prototype,"required",void 0),t([C({type:Boolean})],wt.prototype,"resizable",void 0),t([C({attribute:"supporting-text"})],wt.prototype,"supportingText",void 0),t([C({attribute:"error-text"})],wt.prototype,"errorText",void 0),t([C({type:Number})],wt.prototype,"count",void 0),t([C({type:Number})],wt.prototype,"max",void 0),t([C({type:Boolean,attribute:"has-start"})],wt.prototype,"hasStart",void 0),t([C({type:Boolean,attribute:"has-end"})],wt.prototype,"hasEnd",void 0),t([I({slot:"aria-describedby"})],wt.prototype,"slottedAriaDescribedBy",void 0),t([P()],wt.prototype,"isAnimating",void 0),t([P()],wt.prototype,"refreshErrorAlert",void 0),t([P()],wt.prototype,"disableTransitions",void 0),t([$(".label.floating")],wt.prototype,"floatingLabelEl",void 0),t([$(".label.resting")],wt.prototype,"restingLabelEl",void 0),t([$(".container")],wt.prototype,"containerEl",void 0);
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class kt extends wt{renderOutline(e){return K`
      <div class="outline">
        <div class="outline-start"></div>
        <div class="outline-notch">
          <div class="outline-panel-inactive"></div>
          <div class="outline-panel-active"></div>
          <div class="outline-label">${e}</div>
        </div>
        <div class="outline-end"></div>
      </div>
    `}}
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const St=l`@layer styles{:host{--_bottom-space: var(--md-outlined-field-bottom-space, 16px);--_content-color: var(--md-outlined-field-content-color, var(--md-sys-color-on-surface, #1d1b20));--_content-font: var(--md-outlined-field-content-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_content-line-height: var(--md-outlined-field-content-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_content-size: var(--md-outlined-field-content-size, var(--md-sys-typescale-body-large-size, 1rem));--_content-space: var(--md-outlined-field-content-space, 16px);--_content-weight: var(--md-outlined-field-content-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_disabled-content-color: var(--md-outlined-field-disabled-content-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-content-opacity: var(--md-outlined-field-disabled-content-opacity, 0.38);--_disabled-label-text-color: var(--md-outlined-field-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-label-text-opacity: var(--md-outlined-field-disabled-label-text-opacity, 0.38);--_disabled-leading-content-color: var(--md-outlined-field-disabled-leading-content-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-leading-content-opacity: var(--md-outlined-field-disabled-leading-content-opacity, 0.38);--_disabled-outline-color: var(--md-outlined-field-disabled-outline-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-outline-opacity: var(--md-outlined-field-disabled-outline-opacity, 0.12);--_disabled-outline-width: var(--md-outlined-field-disabled-outline-width, 1px);--_disabled-supporting-text-color: var(--md-outlined-field-disabled-supporting-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-supporting-text-opacity: var(--md-outlined-field-disabled-supporting-text-opacity, 0.38);--_disabled-trailing-content-color: var(--md-outlined-field-disabled-trailing-content-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-trailing-content-opacity: var(--md-outlined-field-disabled-trailing-content-opacity, 0.38);--_error-content-color: var(--md-outlined-field-error-content-color, var(--md-sys-color-on-surface, #1d1b20));--_error-focus-content-color: var(--md-outlined-field-error-focus-content-color, var(--md-sys-color-on-surface, #1d1b20));--_error-focus-label-text-color: var(--md-outlined-field-error-focus-label-text-color, var(--md-sys-color-error, #b3261e));--_error-focus-leading-content-color: var(--md-outlined-field-error-focus-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-focus-outline-color: var(--md-outlined-field-error-focus-outline-color, var(--md-sys-color-error, #b3261e));--_error-focus-supporting-text-color: var(--md-outlined-field-error-focus-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-focus-trailing-content-color: var(--md-outlined-field-error-focus-trailing-content-color, var(--md-sys-color-error, #b3261e));--_error-hover-content-color: var(--md-outlined-field-error-hover-content-color, var(--md-sys-color-on-surface, #1d1b20));--_error-hover-label-text-color: var(--md-outlined-field-error-hover-label-text-color, var(--md-sys-color-on-error-container, #410e0b));--_error-hover-leading-content-color: var(--md-outlined-field-error-hover-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-hover-outline-color: var(--md-outlined-field-error-hover-outline-color, var(--md-sys-color-on-error-container, #410e0b));--_error-hover-supporting-text-color: var(--md-outlined-field-error-hover-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-hover-trailing-content-color: var(--md-outlined-field-error-hover-trailing-content-color, var(--md-sys-color-on-error-container, #410e0b));--_error-label-text-color: var(--md-outlined-field-error-label-text-color, var(--md-sys-color-error, #b3261e));--_error-leading-content-color: var(--md-outlined-field-error-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-outline-color: var(--md-outlined-field-error-outline-color, var(--md-sys-color-error, #b3261e));--_error-supporting-text-color: var(--md-outlined-field-error-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-trailing-content-color: var(--md-outlined-field-error-trailing-content-color, var(--md-sys-color-error, #b3261e));--_focus-content-color: var(--md-outlined-field-focus-content-color, var(--md-sys-color-on-surface, #1d1b20));--_focus-label-text-color: var(--md-outlined-field-focus-label-text-color, var(--md-sys-color-primary, #6750a4));--_focus-leading-content-color: var(--md-outlined-field-focus-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_focus-outline-color: var(--md-outlined-field-focus-outline-color, var(--md-sys-color-primary, #6750a4));--_focus-outline-width: var(--md-outlined-field-focus-outline-width, 3px);--_focus-supporting-text-color: var(--md-outlined-field-focus-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_focus-trailing-content-color: var(--md-outlined-field-focus-trailing-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-content-color: var(--md-outlined-field-hover-content-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-label-text-color: var(--md-outlined-field-hover-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-leading-content-color: var(--md-outlined-field-hover-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-outline-color: var(--md-outlined-field-hover-outline-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-outline-width: var(--md-outlined-field-hover-outline-width, 1px);--_hover-supporting-text-color: var(--md-outlined-field-hover-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-trailing-content-color: var(--md-outlined-field-hover-trailing-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_label-text-color: var(--md-outlined-field-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_label-text-font: var(--md-outlined-field-label-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-line-height: var(--md-outlined-field-label-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_label-text-padding-bottom: var(--md-outlined-field-label-text-padding-bottom, 8px);--_label-text-populated-line-height: var(--md-outlined-field-label-text-populated-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_label-text-populated-size: var(--md-outlined-field-label-text-populated-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_label-text-size: var(--md-outlined-field-label-text-size, var(--md-sys-typescale-body-large-size, 1rem));--_label-text-weight: var(--md-outlined-field-label-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_leading-content-color: var(--md-outlined-field-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_leading-space: var(--md-outlined-field-leading-space, 16px);--_outline-color: var(--md-outlined-field-outline-color, var(--md-sys-color-outline, #79747e));--_outline-label-padding: var(--md-outlined-field-outline-label-padding, 4px);--_outline-width: var(--md-outlined-field-outline-width, 1px);--_supporting-text-color: var(--md-outlined-field-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_supporting-text-font: var(--md-outlined-field-supporting-text-font, var(--md-sys-typescale-body-small-font, var(--md-ref-typeface-plain, Roboto)));--_supporting-text-leading-space: var(--md-outlined-field-supporting-text-leading-space, 16px);--_supporting-text-line-height: var(--md-outlined-field-supporting-text-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_supporting-text-size: var(--md-outlined-field-supporting-text-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_supporting-text-top-space: var(--md-outlined-field-supporting-text-top-space, 4px);--_supporting-text-trailing-space: var(--md-outlined-field-supporting-text-trailing-space, 16px);--_supporting-text-weight: var(--md-outlined-field-supporting-text-weight, var(--md-sys-typescale-body-small-weight, var(--md-ref-typeface-weight-regular, 400)));--_top-space: var(--md-outlined-field-top-space, 16px);--_trailing-content-color: var(--md-outlined-field-trailing-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_trailing-space: var(--md-outlined-field-trailing-space, 16px);--_with-leading-content-leading-space: var(--md-outlined-field-with-leading-content-leading-space, 12px);--_with-trailing-content-trailing-space: var(--md-outlined-field-with-trailing-content-trailing-space, 12px);--_container-shape-start-start: var(--md-outlined-field-container-shape-start-start, var(--md-outlined-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_container-shape-start-end: var(--md-outlined-field-container-shape-start-end, var(--md-outlined-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_container-shape-end-end: var(--md-outlined-field-container-shape-end-end, var(--md-outlined-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_container-shape-end-start: var(--md-outlined-field-container-shape-end-start, var(--md-outlined-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)))}.outline{border-color:var(--_outline-color);border-radius:inherit;display:flex;pointer-events:none;height:100%;position:absolute;width:100%;z-index:1}.outline-start::before,.outline-start::after,.outline-panel-inactive::before,.outline-panel-inactive::after,.outline-panel-active::before,.outline-panel-active::after,.outline-end::before,.outline-end::after{border:inherit;content:"";inset:0;position:absolute}.outline-start,.outline-end{border:inherit;border-radius:inherit;box-sizing:border-box;position:relative}.outline-start::before,.outline-start::after,.outline-end::before,.outline-end::after{border-bottom-style:solid;border-top-style:solid}.outline-start::after,.outline-end::after{opacity:0;transition:opacity 150ms cubic-bezier(0.2, 0, 0, 1)}.focused .outline-start::after,.focused .outline-end::after{opacity:1}.outline-start::before,.outline-start::after{border-inline-start-style:solid;border-inline-end-style:none;border-start-start-radius:inherit;border-start-end-radius:0;border-end-start-radius:inherit;border-end-end-radius:0;margin-inline-end:var(--_outline-label-padding)}.outline-end{flex-grow:1;margin-inline-start:calc(-1*var(--_outline-label-padding))}.outline-end::before,.outline-end::after{border-inline-start-style:none;border-inline-end-style:solid;border-start-start-radius:0;border-start-end-radius:inherit;border-end-start-radius:0;border-end-end-radius:inherit}.outline-notch{align-items:flex-start;border:inherit;display:flex;margin-inline-start:calc(-1*var(--_outline-label-padding));margin-inline-end:var(--_outline-label-padding);max-width:calc(100% - var(--_leading-space) - var(--_trailing-space));padding:0 var(--_outline-label-padding);position:relative}.no-label .outline-notch{display:none}.outline-panel-inactive,.outline-panel-active{border:inherit;border-bottom-style:solid;inset:0;position:absolute}.outline-panel-inactive::before,.outline-panel-inactive::after,.outline-panel-active::before,.outline-panel-active::after{border-top-style:solid;border-bottom:none;bottom:auto;transform:scaleX(1);transition:transform 150ms cubic-bezier(0.2, 0, 0, 1)}.outline-panel-inactive::before,.outline-panel-active::before{right:50%;transform-origin:top left}.outline-panel-inactive::after,.outline-panel-active::after{left:50%;transform-origin:top right}.populated .outline-panel-inactive::before,.populated .outline-panel-inactive::after,.populated .outline-panel-active::before,.populated .outline-panel-active::after,.focused .outline-panel-inactive::before,.focused .outline-panel-inactive::after,.focused .outline-panel-active::before,.focused .outline-panel-active::after{transform:scaleX(0)}.outline-panel-active{opacity:0;transition:opacity 150ms cubic-bezier(0.2, 0, 0, 1)}.focused .outline-panel-active{opacity:1}.outline-label{display:flex;max-width:100%;transform:translateY(calc(-100% + var(--_label-text-padding-bottom)))}.outline-start,.field:not(.with-start) .content ::slotted(*){padding-inline-start:max(var(--_leading-space),max(var(--_container-shape-start-start),var(--_container-shape-end-start)) + var(--_outline-label-padding))}.field:not(.with-start) .label-wrapper{margin-inline-start:max(var(--_leading-space),max(var(--_container-shape-start-start),var(--_container-shape-end-start)) + var(--_outline-label-padding))}.field:not(.with-end) .content ::slotted(*){padding-inline-end:max(var(--_trailing-space),max(var(--_container-shape-start-end),var(--_container-shape-end-end)))}.field:not(.with-end) .label-wrapper{margin-inline-end:max(var(--_trailing-space),max(var(--_container-shape-start-end),var(--_container-shape-end-end)))}.outline-start::before,.outline-end::before,.outline-panel-inactive,.outline-panel-inactive::before,.outline-panel-inactive::after{border-width:var(--_outline-width)}:hover .outline{border-color:var(--_hover-outline-color);color:var(--_hover-outline-color)}:hover .outline-start::before,:hover .outline-end::before,:hover .outline-panel-inactive,:hover .outline-panel-inactive::before,:hover .outline-panel-inactive::after{border-width:var(--_hover-outline-width)}.focused .outline{border-color:var(--_focus-outline-color);color:var(--_focus-outline-color)}.outline-start::after,.outline-end::after,.outline-panel-active,.outline-panel-active::before,.outline-panel-active::after{border-width:var(--_focus-outline-width)}.disabled .outline{border-color:var(--_disabled-outline-color);color:var(--_disabled-outline-color)}.disabled .outline-start,.disabled .outline-end,.disabled .outline-panel-inactive{opacity:var(--_disabled-outline-opacity)}.disabled .outline-start::before,.disabled .outline-end::before,.disabled .outline-panel-inactive,.disabled .outline-panel-inactive::before,.disabled .outline-panel-inactive::after{border-width:var(--_disabled-outline-width)}.error .outline{border-color:var(--_error-outline-color);color:var(--_error-outline-color)}.error:hover .outline{border-color:var(--_error-hover-outline-color);color:var(--_error-hover-outline-color)}.error.focused .outline{border-color:var(--_error-focus-outline-color);color:var(--_error-focus-outline-color)}.resizable .container{bottom:var(--_focus-outline-width);inset-inline-end:var(--_focus-outline-width);clip-path:inset(var(--_focus-outline-width) 0 0 var(--_focus-outline-width))}.resizable .container>*{top:var(--_focus-outline-width);inset-inline-start:var(--_focus-outline-width)}.resizable .container:dir(rtl){clip-path:inset(var(--_focus-outline-width) var(--_focus-outline-width) 0 0)}}@layer hcm{@media(forced-colors: active){.disabled .outline{border-color:GrayText;color:GrayText}.disabled :is(.outline-start,.outline-end,.outline-panel-inactive){opacity:1}}}
`,_t=l`:host{display:inline-flex;resize:both}.field{display:flex;flex:1;flex-direction:column;writing-mode:horizontal-tb;max-width:100%}.container-overflow{border-start-start-radius:var(--_container-shape-start-start);border-start-end-radius:var(--_container-shape-start-end);border-end-end-radius:var(--_container-shape-end-end);border-end-start-radius:var(--_container-shape-end-start);display:flex;height:100%;position:relative}.container{align-items:center;border-radius:inherit;display:flex;flex:1;max-height:100%;min-height:100%;min-width:min-content;position:relative}.field,.container-overflow{resize:inherit}.resizable:not(.disabled) .container{resize:inherit;overflow:hidden}.disabled{pointer-events:none}slot[name=container]{border-radius:inherit}slot[name=container]::slotted(*){border-radius:inherit;inset:0;pointer-events:none;position:absolute}@layer styles{.start,.middle,.end{display:flex;box-sizing:border-box;height:100%;position:relative}.start{color:var(--_leading-content-color)}.end{color:var(--_trailing-content-color)}.start,.end{align-items:center;justify-content:center}.with-start .start{margin-inline:var(--_with-leading-content-leading-space) var(--_content-space)}.with-end .end{margin-inline:var(--_content-space) var(--_with-trailing-content-trailing-space)}.middle{align-items:stretch;align-self:baseline;flex:1}.content{color:var(--_content-color);display:flex;flex:1;opacity:0;transition:opacity 83ms cubic-bezier(0.2, 0, 0, 1)}.no-label .content,.focused .content,.populated .content{opacity:1;transition-delay:67ms}:is(.disabled,.disable-transitions) .content{transition:none}.content ::slotted(*){all:unset;color:currentColor;font-family:var(--_content-font);font-size:var(--_content-size);line-height:var(--_content-line-height);font-weight:var(--_content-weight);width:100%;overflow-wrap:revert;white-space:revert}.content ::slotted(:not(textarea)){padding-top:var(--_top-space);padding-bottom:var(--_bottom-space)}.content ::slotted(textarea){margin-top:var(--_top-space);margin-bottom:var(--_bottom-space)}:hover .content{color:var(--_hover-content-color)}:hover .start{color:var(--_hover-leading-content-color)}:hover .end{color:var(--_hover-trailing-content-color)}.focused .content{color:var(--_focus-content-color)}.focused .start{color:var(--_focus-leading-content-color)}.focused .end{color:var(--_focus-trailing-content-color)}.disabled .content{color:var(--_disabled-content-color)}.disabled.no-label .content,.disabled.focused .content,.disabled.populated .content{opacity:var(--_disabled-content-opacity)}.disabled .start{color:var(--_disabled-leading-content-color);opacity:var(--_disabled-leading-content-opacity)}.disabled .end{color:var(--_disabled-trailing-content-color);opacity:var(--_disabled-trailing-content-opacity)}.error .content{color:var(--_error-content-color)}.error .start{color:var(--_error-leading-content-color)}.error .end{color:var(--_error-trailing-content-color)}.error:hover .content{color:var(--_error-hover-content-color)}.error:hover .start{color:var(--_error-hover-leading-content-color)}.error:hover .end{color:var(--_error-hover-trailing-content-color)}.error.focused .content{color:var(--_error-focus-content-color)}.error.focused .start{color:var(--_error-focus-leading-content-color)}.error.focused .end{color:var(--_error-focus-trailing-content-color)}}@layer hcm{@media(forced-colors: active){.disabled :is(.start,.content,.end){color:GrayText;opacity:1}}}@layer styles{.label{box-sizing:border-box;color:var(--_label-text-color);overflow:hidden;max-width:100%;text-overflow:ellipsis;white-space:nowrap;z-index:1;font-family:var(--_label-text-font);font-size:var(--_label-text-size);line-height:var(--_label-text-line-height);font-weight:var(--_label-text-weight);width:min-content}.label-wrapper{inset:0;pointer-events:none;position:absolute}.label.resting{position:absolute;top:var(--_top-space)}.label.floating{font-size:var(--_label-text-populated-size);line-height:var(--_label-text-populated-line-height);transform-origin:top left}.label.hidden{opacity:0}.no-label .label{display:none}.label-wrapper{inset:0;position:absolute;text-align:initial}:hover .label{color:var(--_hover-label-text-color)}.focused .label{color:var(--_focus-label-text-color)}.disabled .label{color:var(--_disabled-label-text-color)}.disabled .label:not(.hidden){opacity:var(--_disabled-label-text-opacity)}.error .label{color:var(--_error-label-text-color)}.error:hover .label{color:var(--_error-hover-label-text-color)}.error.focused .label{color:var(--_error-focus-label-text-color)}}@layer hcm{@media(forced-colors: active){.disabled .label:not(.hidden){color:GrayText;opacity:1}}}@layer styles{.supporting-text{color:var(--_supporting-text-color);display:flex;font-family:var(--_supporting-text-font);font-size:var(--_supporting-text-size);line-height:var(--_supporting-text-line-height);font-weight:var(--_supporting-text-weight);gap:16px;justify-content:space-between;padding-inline-start:var(--_supporting-text-leading-space);padding-inline-end:var(--_supporting-text-trailing-space);padding-top:var(--_supporting-text-top-space)}.supporting-text :nth-child(2){flex-shrink:0}:hover .supporting-text{color:var(--_hover-supporting-text-color)}.focus .supporting-text{color:var(--_focus-supporting-text-color)}.disabled .supporting-text{color:var(--_disabled-supporting-text-color);opacity:var(--_disabled-supporting-text-opacity)}.error .supporting-text{color:var(--_error-supporting-text-color)}.error:hover .supporting-text{color:var(--_error-hover-supporting-text-color)}.error.focus .supporting-text{color:var(--_error-focus-supporting-text-color)}}@layer hcm{@media(forced-colors: active){.disabled .supporting-text{color:GrayText;opacity:1}}}
`
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Tt=class extends kt{};Tt.styles=[_t,St],Tt=t([i("md-outlined-field")],Tt);
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const Ct=Symbol.for(""),Pt=e=>{if(e?.r===Ct)return e?._$litStatic$},Et=(e,...t)=>({_$litStatic$:t.reduce((t,i,r)=>t+(e=>{if(void 0!==e._$litStatic$)return e._$litStatic$;throw Error(`Value passed to 'literal' function must be a 'literal' result: ${e}. Use 'unsafeStatic' to pass non-literal values, but\n            take care to ensure page security.`)})(i)+e[r+1],e[0]),r:Ct}),$t=new Map,At=(e=>(t,...i)=>{const r=i.length;let n,o;const s=[],a=[];let l,c=0,d=!1;for(;c<r;){for(l=t[c];c<r&&void 0!==(o=i[c],n=Pt(o));)l+=n+t[++c],d=!0;c!==r&&a.push(o),s.push(l),c++}if(c===r&&s.push(t[r]),d){const e=s.join("$$lit$$");void 0===(t=$t.get(e))&&(s.raw=s,$t.set(e,t=s)),i=a}return e(t,...i)})(K),It=l`:host{--_caret-color: var(--md-outlined-text-field-caret-color, var(--md-sys-color-primary, #6750a4));--_disabled-input-text-color: var(--md-outlined-text-field-disabled-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-input-text-opacity: var(--md-outlined-text-field-disabled-input-text-opacity, 0.38);--_disabled-label-text-color: var(--md-outlined-text-field-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-label-text-opacity: var(--md-outlined-text-field-disabled-label-text-opacity, 0.38);--_disabled-leading-icon-color: var(--md-outlined-text-field-disabled-leading-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-leading-icon-opacity: var(--md-outlined-text-field-disabled-leading-icon-opacity, 0.38);--_disabled-outline-color: var(--md-outlined-text-field-disabled-outline-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-outline-opacity: var(--md-outlined-text-field-disabled-outline-opacity, 0.12);--_disabled-outline-width: var(--md-outlined-text-field-disabled-outline-width, 1px);--_disabled-supporting-text-color: var(--md-outlined-text-field-disabled-supporting-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-supporting-text-opacity: var(--md-outlined-text-field-disabled-supporting-text-opacity, 0.38);--_disabled-trailing-icon-color: var(--md-outlined-text-field-disabled-trailing-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-trailing-icon-opacity: var(--md-outlined-text-field-disabled-trailing-icon-opacity, 0.38);--_error-focus-caret-color: var(--md-outlined-text-field-error-focus-caret-color, var(--md-sys-color-error, #b3261e));--_error-focus-input-text-color: var(--md-outlined-text-field-error-focus-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_error-focus-label-text-color: var(--md-outlined-text-field-error-focus-label-text-color, var(--md-sys-color-error, #b3261e));--_error-focus-leading-icon-color: var(--md-outlined-text-field-error-focus-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-focus-outline-color: var(--md-outlined-text-field-error-focus-outline-color, var(--md-sys-color-error, #b3261e));--_error-focus-supporting-text-color: var(--md-outlined-text-field-error-focus-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-focus-trailing-icon-color: var(--md-outlined-text-field-error-focus-trailing-icon-color, var(--md-sys-color-error, #b3261e));--_error-hover-input-text-color: var(--md-outlined-text-field-error-hover-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_error-hover-label-text-color: var(--md-outlined-text-field-error-hover-label-text-color, var(--md-sys-color-on-error-container, #410e0b));--_error-hover-leading-icon-color: var(--md-outlined-text-field-error-hover-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-hover-outline-color: var(--md-outlined-text-field-error-hover-outline-color, var(--md-sys-color-on-error-container, #410e0b));--_error-hover-supporting-text-color: var(--md-outlined-text-field-error-hover-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-hover-trailing-icon-color: var(--md-outlined-text-field-error-hover-trailing-icon-color, var(--md-sys-color-on-error-container, #410e0b));--_error-input-text-color: var(--md-outlined-text-field-error-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_error-label-text-color: var(--md-outlined-text-field-error-label-text-color, var(--md-sys-color-error, #b3261e));--_error-leading-icon-color: var(--md-outlined-text-field-error-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-outline-color: var(--md-outlined-text-field-error-outline-color, var(--md-sys-color-error, #b3261e));--_error-supporting-text-color: var(--md-outlined-text-field-error-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-trailing-icon-color: var(--md-outlined-text-field-error-trailing-icon-color, var(--md-sys-color-error, #b3261e));--_focus-input-text-color: var(--md-outlined-text-field-focus-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_focus-label-text-color: var(--md-outlined-text-field-focus-label-text-color, var(--md-sys-color-primary, #6750a4));--_focus-leading-icon-color: var(--md-outlined-text-field-focus-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_focus-outline-color: var(--md-outlined-text-field-focus-outline-color, var(--md-sys-color-primary, #6750a4));--_focus-outline-width: var(--md-outlined-text-field-focus-outline-width, 3px);--_focus-supporting-text-color: var(--md-outlined-text-field-focus-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_focus-trailing-icon-color: var(--md-outlined-text-field-focus-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-input-text-color: var(--md-outlined-text-field-hover-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-label-text-color: var(--md-outlined-text-field-hover-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-leading-icon-color: var(--md-outlined-text-field-hover-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-outline-color: var(--md-outlined-text-field-hover-outline-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-outline-width: var(--md-outlined-text-field-hover-outline-width, 1px);--_hover-supporting-text-color: var(--md-outlined-text-field-hover-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-trailing-icon-color: var(--md-outlined-text-field-hover-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_input-text-color: var(--md-outlined-text-field-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_input-text-font: var(--md-outlined-text-field-input-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_input-text-line-height: var(--md-outlined-text-field-input-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_input-text-placeholder-color: var(--md-outlined-text-field-input-text-placeholder-color, var(--md-sys-color-on-surface-variant, #49454f));--_input-text-prefix-color: var(--md-outlined-text-field-input-text-prefix-color, var(--md-sys-color-on-surface-variant, #49454f));--_input-text-size: var(--md-outlined-text-field-input-text-size, var(--md-sys-typescale-body-large-size, 1rem));--_input-text-suffix-color: var(--md-outlined-text-field-input-text-suffix-color, var(--md-sys-color-on-surface-variant, #49454f));--_input-text-weight: var(--md-outlined-text-field-input-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_label-text-color: var(--md-outlined-text-field-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_label-text-font: var(--md-outlined-text-field-label-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-line-height: var(--md-outlined-text-field-label-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_label-text-populated-line-height: var(--md-outlined-text-field-label-text-populated-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_label-text-populated-size: var(--md-outlined-text-field-label-text-populated-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_label-text-size: var(--md-outlined-text-field-label-text-size, var(--md-sys-typescale-body-large-size, 1rem));--_label-text-weight: var(--md-outlined-text-field-label-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_leading-icon-color: var(--md-outlined-text-field-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_leading-icon-size: var(--md-outlined-text-field-leading-icon-size, 24px);--_outline-color: var(--md-outlined-text-field-outline-color, var(--md-sys-color-outline, #79747e));--_outline-width: var(--md-outlined-text-field-outline-width, 1px);--_supporting-text-color: var(--md-outlined-text-field-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_supporting-text-font: var(--md-outlined-text-field-supporting-text-font, var(--md-sys-typescale-body-small-font, var(--md-ref-typeface-plain, Roboto)));--_supporting-text-line-height: var(--md-outlined-text-field-supporting-text-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_supporting-text-size: var(--md-outlined-text-field-supporting-text-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_supporting-text-weight: var(--md-outlined-text-field-supporting-text-weight, var(--md-sys-typescale-body-small-weight, var(--md-ref-typeface-weight-regular, 400)));--_trailing-icon-color: var(--md-outlined-text-field-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_trailing-icon-size: var(--md-outlined-text-field-trailing-icon-size, 24px);--_container-shape-start-start: var(--md-outlined-text-field-container-shape-start-start, var(--md-outlined-text-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_container-shape-start-end: var(--md-outlined-text-field-container-shape-start-end, var(--md-outlined-text-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_container-shape-end-end: var(--md-outlined-text-field-container-shape-end-end, var(--md-outlined-text-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_container-shape-end-start: var(--md-outlined-text-field-container-shape-end-start, var(--md-outlined-text-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_icon-input-space: var(--md-outlined-text-field-icon-input-space, 16px);--_leading-space: var(--md-outlined-text-field-leading-space, 16px);--_trailing-space: var(--md-outlined-text-field-trailing-space, 16px);--_top-space: var(--md-outlined-text-field-top-space, 16px);--_bottom-space: var(--md-outlined-text-field-bottom-space, 16px);--_input-text-prefix-trailing-space: var(--md-outlined-text-field-input-text-prefix-trailing-space, 2px);--_input-text-suffix-leading-space: var(--md-outlined-text-field-input-text-suffix-leading-space, 2px);--_focus-caret-color: var(--md-outlined-text-field-focus-caret-color, var(--md-sys-color-primary, #6750a4));--_with-leading-icon-leading-space: var(--md-outlined-text-field-with-leading-icon-leading-space, 12px);--_with-trailing-icon-trailing-space: var(--md-outlined-text-field-with-trailing-icon-trailing-space, 12px);--md-outlined-field-bottom-space: var(--_bottom-space);--md-outlined-field-container-shape-end-end: var(--_container-shape-end-end);--md-outlined-field-container-shape-end-start: var(--_container-shape-end-start);--md-outlined-field-container-shape-start-end: var(--_container-shape-start-end);--md-outlined-field-container-shape-start-start: var(--_container-shape-start-start);--md-outlined-field-content-color: var(--_input-text-color);--md-outlined-field-content-font: var(--_input-text-font);--md-outlined-field-content-line-height: var(--_input-text-line-height);--md-outlined-field-content-size: var(--_input-text-size);--md-outlined-field-content-space: var(--_icon-input-space);--md-outlined-field-content-weight: var(--_input-text-weight);--md-outlined-field-disabled-content-color: var(--_disabled-input-text-color);--md-outlined-field-disabled-content-opacity: var(--_disabled-input-text-opacity);--md-outlined-field-disabled-label-text-color: var(--_disabled-label-text-color);--md-outlined-field-disabled-label-text-opacity: var(--_disabled-label-text-opacity);--md-outlined-field-disabled-leading-content-color: var(--_disabled-leading-icon-color);--md-outlined-field-disabled-leading-content-opacity: var(--_disabled-leading-icon-opacity);--md-outlined-field-disabled-outline-color: var(--_disabled-outline-color);--md-outlined-field-disabled-outline-opacity: var(--_disabled-outline-opacity);--md-outlined-field-disabled-outline-width: var(--_disabled-outline-width);--md-outlined-field-disabled-supporting-text-color: var(--_disabled-supporting-text-color);--md-outlined-field-disabled-supporting-text-opacity: var(--_disabled-supporting-text-opacity);--md-outlined-field-disabled-trailing-content-color: var(--_disabled-trailing-icon-color);--md-outlined-field-disabled-trailing-content-opacity: var(--_disabled-trailing-icon-opacity);--md-outlined-field-error-content-color: var(--_error-input-text-color);--md-outlined-field-error-focus-content-color: var(--_error-focus-input-text-color);--md-outlined-field-error-focus-label-text-color: var(--_error-focus-label-text-color);--md-outlined-field-error-focus-leading-content-color: var(--_error-focus-leading-icon-color);--md-outlined-field-error-focus-outline-color: var(--_error-focus-outline-color);--md-outlined-field-error-focus-supporting-text-color: var(--_error-focus-supporting-text-color);--md-outlined-field-error-focus-trailing-content-color: var(--_error-focus-trailing-icon-color);--md-outlined-field-error-hover-content-color: var(--_error-hover-input-text-color);--md-outlined-field-error-hover-label-text-color: var(--_error-hover-label-text-color);--md-outlined-field-error-hover-leading-content-color: var(--_error-hover-leading-icon-color);--md-outlined-field-error-hover-outline-color: var(--_error-hover-outline-color);--md-outlined-field-error-hover-supporting-text-color: var(--_error-hover-supporting-text-color);--md-outlined-field-error-hover-trailing-content-color: var(--_error-hover-trailing-icon-color);--md-outlined-field-error-label-text-color: var(--_error-label-text-color);--md-outlined-field-error-leading-content-color: var(--_error-leading-icon-color);--md-outlined-field-error-outline-color: var(--_error-outline-color);--md-outlined-field-error-supporting-text-color: var(--_error-supporting-text-color);--md-outlined-field-error-trailing-content-color: var(--_error-trailing-icon-color);--md-outlined-field-focus-content-color: var(--_focus-input-text-color);--md-outlined-field-focus-label-text-color: var(--_focus-label-text-color);--md-outlined-field-focus-leading-content-color: var(--_focus-leading-icon-color);--md-outlined-field-focus-outline-color: var(--_focus-outline-color);--md-outlined-field-focus-outline-width: var(--_focus-outline-width);--md-outlined-field-focus-supporting-text-color: var(--_focus-supporting-text-color);--md-outlined-field-focus-trailing-content-color: var(--_focus-trailing-icon-color);--md-outlined-field-hover-content-color: var(--_hover-input-text-color);--md-outlined-field-hover-label-text-color: var(--_hover-label-text-color);--md-outlined-field-hover-leading-content-color: var(--_hover-leading-icon-color);--md-outlined-field-hover-outline-color: var(--_hover-outline-color);--md-outlined-field-hover-outline-width: var(--_hover-outline-width);--md-outlined-field-hover-supporting-text-color: var(--_hover-supporting-text-color);--md-outlined-field-hover-trailing-content-color: var(--_hover-trailing-icon-color);--md-outlined-field-label-text-color: var(--_label-text-color);--md-outlined-field-label-text-font: var(--_label-text-font);--md-outlined-field-label-text-line-height: var(--_label-text-line-height);--md-outlined-field-label-text-populated-line-height: var(--_label-text-populated-line-height);--md-outlined-field-label-text-populated-size: var(--_label-text-populated-size);--md-outlined-field-label-text-size: var(--_label-text-size);--md-outlined-field-label-text-weight: var(--_label-text-weight);--md-outlined-field-leading-content-color: var(--_leading-icon-color);--md-outlined-field-leading-space: var(--_leading-space);--md-outlined-field-outline-color: var(--_outline-color);--md-outlined-field-outline-width: var(--_outline-width);--md-outlined-field-supporting-text-color: var(--_supporting-text-color);--md-outlined-field-supporting-text-font: var(--_supporting-text-font);--md-outlined-field-supporting-text-line-height: var(--_supporting-text-line-height);--md-outlined-field-supporting-text-size: var(--_supporting-text-size);--md-outlined-field-supporting-text-weight: var(--_supporting-text-weight);--md-outlined-field-top-space: var(--_top-space);--md-outlined-field-trailing-content-color: var(--_trailing-icon-color);--md-outlined-field-trailing-space: var(--_trailing-space);--md-outlined-field-with-leading-content-leading-space: var(--_with-leading-icon-leading-space);--md-outlined-field-with-trailing-content-trailing-space: var(--_with-trailing-icon-trailing-space)}
`
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,Qt={},Rt=Qe(class extends Re{constructor(e){if(super(e),e.type!==Ae&&e.type!==$e&&e.type!==Ie)throw Error("The `live` directive is not allowed on child or event bindings");if(!(e=>void 0===e.strings)(e))throw Error("`live` bindings can only contain a single expression")}render(e){return e}update(e,[t]){if(t===J||t===ee)return t;const i=e.element,r=e.name;if(e.type===Ae){if(t===i[r])return J}else if(e.type===Ie){if(!!t===i.hasAttribute(r))return J}else if(e.type===$e&&i.getAttribute(r)===t+"")return J;return((e,t=Qt)=>{e._$AH=t;
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */})(e),t}}),Dt="important",Mt=" !"+Dt,Nt=Qe(class extends Re{constructor(e){if(super(e),e.type!==$e||"style"!==e.name||e.strings?.length>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(e){return Object.keys(e).reduce((t,i)=>{const r=e[i];return null==r?t:t+`${i=i.includes("-")?i:i.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${r};`},"")}update(e,[t]){const{style:i}=e.element;if(void 0===this.ft)return this.ft=new Set(Object.keys(t)),this.render(t);for(const e of this.ft)null==t[e]&&(this.ft.delete(e),e.includes("-")?i.removeProperty(e):i[e]=null);for(const e in t){const r=t[e];if(null!=r){this.ft.add(e);const t="string"==typeof r&&r.endsWith(Mt);e.includes("-")||t?i.setProperty(e,t?r.slice(0,-11):r,t?Dt:""):i[e]=r}}return J}}),Lt={fromAttribute:e=>e??"",toAttribute:e=>e||null};
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
function zt(e,t){!t.bubbles||e.shadowRoot&&!t.composed||t.stopPropagation();const i=Reflect.construct(t.constructor,[t.type,t]),r=e.dispatchEvent(i);return r||t.preventDefault(),r}
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Vt=Symbol("createValidator"),Ut=Symbol("getValidityAnchor"),qt=Symbol("privateValidator"),Xt=Symbol("privateSyncValidity"),Zt=Symbol("privateCustomValidationMessage");function Bt(e){var t;class i extends e{constructor(){super(...arguments),this[t]=""}get validity(){return this[Xt](),this[Je].validity}get validationMessage(){return this[Xt](),this[Je].validationMessage}get willValidate(){return this[Xt](),this[Je].willValidate}checkValidity(){return this[Xt](),this[Je].checkValidity()}reportValidity(){return this[Xt](),this[Je].reportValidity()}setCustomValidity(e){this[Zt]=e,this[Xt]()}requestUpdate(e,t,i){super.requestUpdate(e,t,i),this[Xt]()}firstUpdated(e){super.firstUpdated(e),this[Xt]()}[(t=Zt,Xt)](){this[qt]||(this[qt]=this[Vt]());const{validity:e,validationMessage:t}=this[qt].getValidity(),i=!!this[Zt],r=this[Zt]||t;this[Je].setValidity({...e,customError:i},r,this[Ut]()??void 0)}[Vt](){throw new Error("Implement [createValidator]")}[Ut](){throw new Error("Implement [getValidityAnchor]")}}return i}
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jt=Symbol("getFormValue"),Ft=Symbol("getFormState");function Wt(e){class i extends e{get form(){return this[Je].form}get labels(){return this[Je].labels}get name(){return this.getAttribute("name")??""}set name(e){this.setAttribute("name",e)}get disabled(){return this.hasAttribute("disabled")}set disabled(e){this.toggleAttribute("disabled",e)}attributeChangedCallback(e,t,i){if("name"===e||"disabled"===e){const i="disabled"===e?null!==t:t;return void this.requestUpdate(e,i)}super.attributeChangedCallback(e,t,i)}requestUpdate(e,t,i){super.requestUpdate(e,t,i),this[Je].setFormValue(this[jt](),this[Ft]())}[jt](){throw new Error("Implement [getFormValue]")}[Ft](){return this[jt]()}formDisabledCallback(e){this.disabled=e}}return i.formAssociated=!0,t([C({noAccessor:!0})],i.prototype,"name",null),t([C({type:Boolean,noAccessor:!0})],i.prototype,"disabled",null),i}
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Yt=Symbol("onReportValidity"),Gt=Symbol("privateCleanupFormListeners"),Ht=Symbol("privateDoNotReportInvalid"),Kt=Symbol("privateIsSelfReportingValidity"),Jt=Symbol("privateCallOnReportValidity");function ei(e){var t,i,r;class n extends e{constructor(...e){super(...e),this[t]=new AbortController,this[i]=!1,this[r]=!1,this.addEventListener("invalid",e=>{!this[Ht]&&e.isTrusted&&this.addEventListener("invalid",()=>{this[Jt](e)},{once:!0})},{capture:!0})}checkValidity(){this[Ht]=!0;const e=super.checkValidity();return this[Ht]=!1,e}reportValidity(){this[Kt]=!0;const e=super.reportValidity();return e&&this[Jt](null),this[Kt]=!1,e}[(t=Gt,i=Ht,r=Kt,Jt)](e){const t=e?.defaultPrevented;if(t)return;this[Yt](e);!t&&e?.defaultPrevented&&(this[Kt]||function(e,t){if(!e)return!0;let i;for(const t of e.elements)if(t.matches(":invalid")){i=t;break}return i===t}
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */(this[Je].form,this))&&this.focus()}[Yt](e){throw new Error("Implement [onReportValidity]")}formAssociatedCallback(e){super.formAssociatedCallback&&super.formAssociatedCallback(e),this[Gt].abort(),e&&(this[Gt]=new AbortController,function(e,t,i,r){const n=function(e){if(!ti.has(e)){const t=new EventTarget;ti.set(e,t);for(const i of["reportValidity","requestSubmit"]){const r=e[i];e[i]=function(){t.dispatchEvent(new Event("before"));const e=Reflect.apply(r,this,arguments);return t.dispatchEvent(new Event("after")),e}}}return ti.get(e)}(t);let o,s=!1,a=!1;n.addEventListener("before",()=>{a=!0,o=new AbortController,s=!1,e.addEventListener("invalid",()=>{s=!0},{signal:o.signal})},{signal:r}),n.addEventListener("after",()=>{a=!1,o?.abort(),s||i()},{signal:r}),t.addEventListener("submit",()=>{a||i()},{signal:r})}(this,e,()=>{this[Jt](null)},this[Gt].signal))}}return n}const ti=new WeakMap;class ii{constructor(e){this.getCurrentState=e,this.currentValidity={validity:{},validationMessage:""}}getValidity(){const e=this.getCurrentState();if(!(!this.prevState||!this.equals(this.prevState,e)))return this.currentValidity;const{validity:t,validationMessage:i}=this.computeValidity(e);return this.prevState=this.copy(e),this.currentValidity={validationMessage:i,validity:{badInput:t.badInput,customError:t.customError,patternMismatch:t.patternMismatch,rangeOverflow:t.rangeOverflow,rangeUnderflow:t.rangeUnderflow,stepMismatch:t.stepMismatch,tooLong:t.tooLong,tooShort:t.tooShort,typeMismatch:t.typeMismatch,valueMissing:t.valueMissing}},this.currentValidity}}
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ri extends ii{computeValidity({state:e,renderedControl:t}){let i=t;ni(e)&&!i?(i=this.inputControl||document.createElement("input"),this.inputControl=i):i||(i=this.textAreaControl||document.createElement("textarea"),this.textAreaControl=i);const r=ni(e)?i:null;if(r&&(r.type=e.type),i.value!==e.value&&(i.value=e.value),i.required=e.required,r){const t=e;t.pattern?r.pattern=t.pattern:r.removeAttribute("pattern"),t.min?r.min=t.min:r.removeAttribute("min"),t.max?r.max=t.max:r.removeAttribute("max"),t.step?r.step=t.step:r.removeAttribute("step")}return(e.minLength??-1)>-1?i.setAttribute("minlength",String(e.minLength)):i.removeAttribute("minlength"),(e.maxLength??-1)>-1?i.setAttribute("maxlength",String(e.maxLength)):i.removeAttribute("maxlength"),{validity:i.validity,validationMessage:i.validationMessage}}equals({state:e},{state:t}){const i=e.type===t.type&&e.value===t.value&&e.required===t.required&&e.minLength===t.minLength&&e.maxLength===t.maxLength;return ni(e)&&ni(t)?i&&e.pattern===t.pattern&&e.min===t.min&&e.max===t.max&&e.step===t.step:i}copy({state:e}){return{state:ni(e)?this.copyInput(e):this.copyTextArea(e),renderedControl:null}}copyInput(e){const{type:t,pattern:i,min:r,max:n,step:o}=e;return{...this.copySharedState(e),type:t,pattern:i,min:r,max:n,step:o}}copyTextArea(e){return{...this.copySharedState(e),type:e.type}}copySharedState({value:e,required:t,minLength:i,maxLength:r}){return{value:e,required:t,minLength:i,maxLength:r}}}function ni(e){return"textarea"!==e.type}
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oi=Ge(ei(Bt(Wt(tt(ve)))));class si extends oi{constructor(){super(...arguments),this.error=!1,this.errorText="",this.label="",this.noAsterisk=!1,this.required=!1,this.value="",this.prefixText="",this.suffixText="",this.hasLeadingIcon=!1,this.hasTrailingIcon=!1,this.supportingText="",this.textDirection="",this.rows=2,this.cols=20,this.inputMode="",this.max="",this.maxLength=-1,this.min="",this.minLength=-1,this.noSpinner=!1,this.pattern="",this.placeholder="",this.readOnly=!1,this.multiple=!1,this.step="",this.type="text",this.autocomplete="",this.dirty=!1,this.focused=!1,this.nativeError=!1,this.nativeErrorText=""}get selectionDirection(){return this.getInputOrTextarea().selectionDirection}set selectionDirection(e){this.getInputOrTextarea().selectionDirection=e}get selectionEnd(){return this.getInputOrTextarea().selectionEnd}set selectionEnd(e){this.getInputOrTextarea().selectionEnd=e}get selectionStart(){return this.getInputOrTextarea().selectionStart}set selectionStart(e){this.getInputOrTextarea().selectionStart=e}get valueAsNumber(){const e=this.getInput();return e?e.valueAsNumber:NaN}set valueAsNumber(e){const t=this.getInput();t&&(t.valueAsNumber=e,this.value=t.value)}get valueAsDate(){const e=this.getInput();return e?e.valueAsDate:null}set valueAsDate(e){const t=this.getInput();t&&(t.valueAsDate=e,this.value=t.value)}get hasError(){return this.error||this.nativeError}select(){this.getInputOrTextarea().select()}setRangeText(...e){this.getInputOrTextarea().setRangeText(...e),this.value=this.getInputOrTextarea().value}setSelectionRange(e,t,i){this.getInputOrTextarea().setSelectionRange(e,t,i)}showPicker(){const e=this.getInput();e&&e.showPicker()}stepDown(e){const t=this.getInput();t&&(t.stepDown(e),this.value=t.value)}stepUp(e){const t=this.getInput();t&&(t.stepUp(e),this.value=t.value)}reset(){this.dirty=!1,this.value=this.getAttribute("value")??"",this.nativeError=!1,this.nativeErrorText=""}attributeChangedCallback(e,t,i){"value"===e&&this.dirty||super.attributeChangedCallback(e,t,i)}render(){const e={disabled:this.disabled,error:!this.disabled&&this.hasError,textarea:"textarea"===this.type,"no-spinner":this.noSpinner};return K`
      <span class="text-field ${De(e)}">
        ${this.renderField()}
      </span>
    `}updated(e){const t=this.getInputOrTextarea().value;this.value!==t&&(this.value=t)}renderField(){return At`<${this.fieldTag}
      class="field"
      count=${this.value.length}
      ?disabled=${this.disabled}
      ?error=${this.hasError}
      error-text=${this.getErrorText()}
      ?focused=${this.focused}
      ?has-end=${this.hasTrailingIcon}
      ?has-start=${this.hasLeadingIcon}
      label=${this.label}
      ?no-asterisk=${this.noAsterisk}
      max=${this.maxLength}
      ?populated=${!!this.value}
      ?required=${this.required}
      ?resizable=${"textarea"===this.type}
      supporting-text=${this.supportingText}
    >
      ${this.renderLeadingIcon()}
      ${this.renderInputOrTextarea()}
      ${this.renderTrailingIcon()}
      <div id="description" slot="aria-describedby"></div>
      <slot name="container" slot="container"></slot>
    </${this.fieldTag}>`}renderLeadingIcon(){return K`
      <span class="icon leading" slot="start">
        <slot name="leading-icon" @slotchange=${this.handleIconChange}></slot>
      </span>
    `}renderTrailingIcon(){return K`
      <span class="icon trailing" slot="end">
        <slot name="trailing-icon" @slotchange=${this.handleIconChange}></slot>
      </span>
    `}renderInputOrTextarea(){const e={direction:this.textDirection},t=this.ariaLabel||this.label||ee,i=this.autocomplete,r=(this.maxLength??-1)>-1,n=(this.minLength??-1)>-1;if("textarea"===this.type)return K`
        <textarea
          class="input"
          style=${Nt(e)}
          aria-describedby="description"
          aria-invalid=${this.hasError}
          aria-label=${t}
          autocomplete=${i||ee}
          name=${this.name||ee}
          ?disabled=${this.disabled}
          maxlength=${r?this.maxLength:ee}
          minlength=${n?this.minLength:ee}
          placeholder=${this.placeholder||ee}
          ?readonly=${this.readOnly}
          ?required=${this.required}
          rows=${this.rows}
          cols=${this.cols}
          .value=${Rt(this.value)}
          @change=${this.redispatchEvent}
          @focus=${this.handleFocusChange}
          @blur=${this.handleFocusChange}
          @input=${this.handleInput}
          @select=${this.redispatchEvent}></textarea>
      `;const o=this.renderPrefix(),s=this.renderSuffix(),a=this.inputMode;return K`
      <div class="input-wrapper">
        ${o}
        <input
          class="input"
          style=${Nt(e)}
          aria-describedby="description"
          aria-invalid=${this.hasError}
          aria-label=${t}
          autocomplete=${i||ee}
          name=${this.name||ee}
          ?disabled=${this.disabled}
          inputmode=${a||ee}
          max=${this.max||ee}
          maxlength=${r?this.maxLength:ee}
          min=${this.min||ee}
          minlength=${n?this.minLength:ee}
          pattern=${this.pattern||ee}
          placeholder=${this.placeholder||ee}
          ?readonly=${this.readOnly}
          ?required=${this.required}
          ?multiple=${this.multiple}
          step=${this.step||ee}
          type=${this.type}
          .value=${Rt(this.value)}
          @change=${this.redispatchEvent}
          @focus=${this.handleFocusChange}
          @blur=${this.handleFocusChange}
          @input=${this.handleInput}
          @select=${this.redispatchEvent} />
        ${s}
      </div>
    `}renderPrefix(){return this.renderAffix(this.prefixText,!1)}renderSuffix(){return this.renderAffix(this.suffixText,!0)}renderAffix(e,t){if(!e)return ee;return K`<span class="${De({suffix:t,prefix:!t})}">${e}</span>`}getErrorText(){return this.error?this.errorText:this.nativeErrorText}handleFocusChange(){this.focused=this.inputOrTextarea?.matches(":focus")??!1}handleInput(e){this.dirty=!0,this.value=e.target.value}redispatchEvent(e){zt(this,e)}getInputOrTextarea(){return this.inputOrTextarea||(this.connectedCallback(),this.scheduleUpdate()),this.isUpdatePending&&this.scheduleUpdate(),this.inputOrTextarea}getInput(){return"textarea"===this.type?null:this.getInputOrTextarea()}handleIconChange(){this.hasLeadingIcon=this.leadingIcons.length>0,this.hasTrailingIcon=this.trailingIcons.length>0}[jt](){return this.value}formResetCallback(){this.reset()}formStateRestoreCallback(e){this.value=e}focus(){this.getInputOrTextarea().focus()}[Vt](){return new ri(()=>({state:this,renderedControl:this.inputOrTextarea}))}[Ut](){return this.inputOrTextarea}[Yt](e){e?.preventDefault();const t=this.getErrorText();this.nativeError=!!e,this.nativeErrorText=this.validationMessage,t===this.getErrorText()&&this.field?.reannounceError()}}si.shadowRootOptions={...ve.shadowRootOptions,delegatesFocus:!0},t([C({type:Boolean,reflect:!0})],si.prototype,"error",void 0),t([C({attribute:"error-text"})],si.prototype,"errorText",void 0),t([C()],si.prototype,"label",void 0),t([C({type:Boolean,attribute:"no-asterisk"})],si.prototype,"noAsterisk",void 0),t([C({type:Boolean,reflect:!0})],si.prototype,"required",void 0),t([C()],si.prototype,"value",void 0),t([C({attribute:"prefix-text"})],si.prototype,"prefixText",void 0),t([C({attribute:"suffix-text"})],si.prototype,"suffixText",void 0),t([C({type:Boolean,attribute:"has-leading-icon"})],si.prototype,"hasLeadingIcon",void 0),t([C({type:Boolean,attribute:"has-trailing-icon"})],si.prototype,"hasTrailingIcon",void 0),t([C({attribute:"supporting-text"})],si.prototype,"supportingText",void 0),t([C({attribute:"text-direction"})],si.prototype,"textDirection",void 0),t([C({type:Number})],si.prototype,"rows",void 0),t([C({type:Number})],si.prototype,"cols",void 0),t([C({reflect:!0})],si.prototype,"inputMode",void 0),t([C()],si.prototype,"max",void 0),t([C({type:Number})],si.prototype,"maxLength",void 0),t([C()],si.prototype,"min",void 0),t([C({type:Number})],si.prototype,"minLength",void 0),t([C({type:Boolean,attribute:"no-spinner"})],si.prototype,"noSpinner",void 0),t([C()],si.prototype,"pattern",void 0),t([C({reflect:!0,converter:Lt})],si.prototype,"placeholder",void 0),t([C({type:Boolean,reflect:!0})],si.prototype,"readOnly",void 0),t([C({type:Boolean,reflect:!0})],si.prototype,"multiple",void 0),t([C()],si.prototype,"step",void 0),t([C({reflect:!0})],si.prototype,"type",void 0),t([C({reflect:!0})],si.prototype,"autocomplete",void 0),t([P()],si.prototype,"dirty",void 0),t([P()],si.prototype,"focused",void 0),t([P()],si.prototype,"nativeError",void 0),t([P()],si.prototype,"nativeErrorText",void 0),t([$(".input")],si.prototype,"inputOrTextarea",void 0),t([$(".field")],si.prototype,"field",void 0),t([I({slot:"leading-icon"})],si.prototype,"leadingIcons",void 0),t([I({slot:"trailing-icon"})],si.prototype,"trailingIcons",void 0);
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class ai extends si{constructor(){super(...arguments),this.fieldTag=Et`md-outlined-field`}}
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const li=l`:host{display:inline-flex;outline:none;resize:both;text-align:start;-webkit-tap-highlight-color:rgba(0,0,0,0)}.text-field,.field{width:100%}.text-field{display:inline-flex}.field{cursor:text}.disabled .field{cursor:default}.text-field,.textarea .field{resize:inherit}slot[name=container]{border-radius:inherit}.icon{color:currentColor;display:flex;align-items:center;justify-content:center;fill:currentColor;position:relative}.icon ::slotted(*){display:flex;position:absolute}[has-start] .icon.leading{font-size:var(--_leading-icon-size);height:var(--_leading-icon-size);width:var(--_leading-icon-size)}[has-end] .icon.trailing{font-size:var(--_trailing-icon-size);height:var(--_trailing-icon-size);width:var(--_trailing-icon-size)}.input-wrapper{display:flex}.input-wrapper>*{all:inherit;padding:0}.input{caret-color:var(--_caret-color);overflow-x:hidden;text-align:inherit}.input::placeholder{color:currentColor;opacity:1}.input::-webkit-calendar-picker-indicator{display:none}.input::-webkit-search-decoration,.input::-webkit-search-cancel-button{display:none}@media(forced-colors: active){.input{background:none}}.no-spinner .input::-webkit-inner-spin-button,.no-spinner .input::-webkit-outer-spin-button{display:none}.no-spinner .input[type=number]{-moz-appearance:textfield}:focus-within .input{caret-color:var(--_focus-caret-color)}.error:focus-within .input{caret-color:var(--_error-focus-caret-color)}.text-field:not(.disabled) .prefix{color:var(--_input-text-prefix-color)}.text-field:not(.disabled) .suffix{color:var(--_input-text-suffix-color)}.text-field:not(.disabled) .input::placeholder{color:var(--_input-text-placeholder-color)}.prefix,.suffix{text-wrap:nowrap;width:min-content}.prefix{padding-inline-end:var(--_input-text-prefix-trailing-space)}.suffix{padding-inline-start:var(--_input-text-suffix-leading-space)}
`
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let ci=class extends ai{constructor(){super(...arguments),this.fieldTag=Et`md-outlined-field`}};ci.styles=[li,It],ci=t([i("md-outlined-text-field")],ci);
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class di extends wt{renderBackground(){return K` <div class="background"></div> `}renderStateLayer(){return K` <div class="state-layer"></div> `}renderIndicator(){return K`<div class="active-indicator"></div>`}}
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hi=l`@layer styles{:host{--_active-indicator-color: var(--md-filled-field-active-indicator-color, var(--md-sys-color-on-surface-variant, #49454f));--_active-indicator-height: var(--md-filled-field-active-indicator-height, 1px);--_bottom-space: var(--md-filled-field-bottom-space, 16px);--_container-color: var(--md-filled-field-container-color, var(--md-sys-color-surface-container-highest, #e6e0e9));--_content-color: var(--md-filled-field-content-color, var(--md-sys-color-on-surface, #1d1b20));--_content-font: var(--md-filled-field-content-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_content-line-height: var(--md-filled-field-content-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_content-size: var(--md-filled-field-content-size, var(--md-sys-typescale-body-large-size, 1rem));--_content-space: var(--md-filled-field-content-space, 16px);--_content-weight: var(--md-filled-field-content-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_disabled-active-indicator-color: var(--md-filled-field-disabled-active-indicator-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-active-indicator-height: var(--md-filled-field-disabled-active-indicator-height, 1px);--_disabled-active-indicator-opacity: var(--md-filled-field-disabled-active-indicator-opacity, 0.38);--_disabled-container-color: var(--md-filled-field-disabled-container-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-container-opacity: var(--md-filled-field-disabled-container-opacity, 0.04);--_disabled-content-color: var(--md-filled-field-disabled-content-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-content-opacity: var(--md-filled-field-disabled-content-opacity, 0.38);--_disabled-label-text-color: var(--md-filled-field-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-label-text-opacity: var(--md-filled-field-disabled-label-text-opacity, 0.38);--_disabled-leading-content-color: var(--md-filled-field-disabled-leading-content-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-leading-content-opacity: var(--md-filled-field-disabled-leading-content-opacity, 0.38);--_disabled-supporting-text-color: var(--md-filled-field-disabled-supporting-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-supporting-text-opacity: var(--md-filled-field-disabled-supporting-text-opacity, 0.38);--_disabled-trailing-content-color: var(--md-filled-field-disabled-trailing-content-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-trailing-content-opacity: var(--md-filled-field-disabled-trailing-content-opacity, 0.38);--_error-active-indicator-color: var(--md-filled-field-error-active-indicator-color, var(--md-sys-color-error, #b3261e));--_error-content-color: var(--md-filled-field-error-content-color, var(--md-sys-color-on-surface, #1d1b20));--_error-focus-active-indicator-color: var(--md-filled-field-error-focus-active-indicator-color, var(--md-sys-color-error, #b3261e));--_error-focus-content-color: var(--md-filled-field-error-focus-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-focus-label-text-color: var(--md-filled-field-error-focus-label-text-color, var(--md-sys-color-error, #b3261e));--_error-focus-leading-content-color: var(--md-filled-field-error-focus-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-focus-supporting-text-color: var(--md-filled-field-error-focus-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-focus-trailing-content-color: var(--md-filled-field-error-focus-trailing-content-color, var(--md-sys-color-error, #b3261e));--_error-hover-active-indicator-color: var(--md-filled-field-error-hover-active-indicator-color, var(--md-sys-color-on-error-container, #410e0b));--_error-hover-content-color: var(--md-filled-field-error-hover-content-color, var(--md-sys-color-on-surface, #1d1b20));--_error-hover-label-text-color: var(--md-filled-field-error-hover-label-text-color, var(--md-sys-color-on-error-container, #410e0b));--_error-hover-leading-content-color: var(--md-filled-field-error-hover-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-hover-state-layer-color: var(--md-filled-field-error-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_error-hover-state-layer-opacity: var(--md-filled-field-error-hover-state-layer-opacity, 0.08);--_error-hover-supporting-text-color: var(--md-filled-field-error-hover-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-hover-trailing-content-color: var(--md-filled-field-error-hover-trailing-content-color, var(--md-sys-color-on-error-container, #410e0b));--_error-label-text-color: var(--md-filled-field-error-label-text-color, var(--md-sys-color-error, #b3261e));--_error-leading-content-color: var(--md-filled-field-error-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-supporting-text-color: var(--md-filled-field-error-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-trailing-content-color: var(--md-filled-field-error-trailing-content-color, var(--md-sys-color-error, #b3261e));--_focus-active-indicator-color: var(--md-filled-field-focus-active-indicator-color, var(--md-sys-color-primary, #6750a4));--_focus-active-indicator-height: var(--md-filled-field-focus-active-indicator-height, 3px);--_focus-content-color: var(--md-filled-field-focus-content-color, var(--md-sys-color-on-surface, #1d1b20));--_focus-label-text-color: var(--md-filled-field-focus-label-text-color, var(--md-sys-color-primary, #6750a4));--_focus-leading-content-color: var(--md-filled-field-focus-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_focus-supporting-text-color: var(--md-filled-field-focus-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_focus-trailing-content-color: var(--md-filled-field-focus-trailing-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-active-indicator-color: var(--md-filled-field-hover-active-indicator-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-active-indicator-height: var(--md-filled-field-hover-active-indicator-height, 1px);--_hover-content-color: var(--md-filled-field-hover-content-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-label-text-color: var(--md-filled-field-hover-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-leading-content-color: var(--md-filled-field-hover-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-state-layer-color: var(--md-filled-field-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-state-layer-opacity: var(--md-filled-field-hover-state-layer-opacity, 0.08);--_hover-supporting-text-color: var(--md-filled-field-hover-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-trailing-content-color: var(--md-filled-field-hover-trailing-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_label-text-color: var(--md-filled-field-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_label-text-font: var(--md-filled-field-label-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-line-height: var(--md-filled-field-label-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_label-text-populated-line-height: var(--md-filled-field-label-text-populated-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_label-text-populated-size: var(--md-filled-field-label-text-populated-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_label-text-size: var(--md-filled-field-label-text-size, var(--md-sys-typescale-body-large-size, 1rem));--_label-text-weight: var(--md-filled-field-label-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_leading-content-color: var(--md-filled-field-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_leading-space: var(--md-filled-field-leading-space, 16px);--_supporting-text-color: var(--md-filled-field-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_supporting-text-font: var(--md-filled-field-supporting-text-font, var(--md-sys-typescale-body-small-font, var(--md-ref-typeface-plain, Roboto)));--_supporting-text-leading-space: var(--md-filled-field-supporting-text-leading-space, 16px);--_supporting-text-line-height: var(--md-filled-field-supporting-text-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_supporting-text-size: var(--md-filled-field-supporting-text-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_supporting-text-top-space: var(--md-filled-field-supporting-text-top-space, 4px);--_supporting-text-trailing-space: var(--md-filled-field-supporting-text-trailing-space, 16px);--_supporting-text-weight: var(--md-filled-field-supporting-text-weight, var(--md-sys-typescale-body-small-weight, var(--md-ref-typeface-weight-regular, 400)));--_top-space: var(--md-filled-field-top-space, 16px);--_trailing-content-color: var(--md-filled-field-trailing-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_trailing-space: var(--md-filled-field-trailing-space, 16px);--_with-label-bottom-space: var(--md-filled-field-with-label-bottom-space, 8px);--_with-label-top-space: var(--md-filled-field-with-label-top-space, 8px);--_with-leading-content-leading-space: var(--md-filled-field-with-leading-content-leading-space, 12px);--_with-trailing-content-trailing-space: var(--md-filled-field-with-trailing-content-trailing-space, 12px);--_container-shape-start-start: var(--md-filled-field-container-shape-start-start, var(--md-filled-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_container-shape-start-end: var(--md-filled-field-container-shape-start-end, var(--md-filled-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_container-shape-end-end: var(--md-filled-field-container-shape-end-end, var(--md-filled-field-container-shape, var(--md-sys-shape-corner-none, 0px)));--_container-shape-end-start: var(--md-filled-field-container-shape-end-start, var(--md-filled-field-container-shape, var(--md-sys-shape-corner-none, 0px)))}.background,.state-layer{border-radius:inherit;inset:0;pointer-events:none;position:absolute}.background{background:var(--_container-color)}.state-layer{visibility:hidden}.field:not(.disabled):hover .state-layer{visibility:visible}.label.floating{position:absolute;top:var(--_with-label-top-space)}.field:not(.with-start) .label-wrapper{margin-inline-start:var(--_leading-space)}.field:not(.with-end) .label-wrapper{margin-inline-end:var(--_trailing-space)}.active-indicator{inset:auto 0 0 0;pointer-events:none;position:absolute;width:100%;z-index:1}.active-indicator::before,.active-indicator::after{border-bottom:var(--_active-indicator-height) solid var(--_active-indicator-color);inset:auto 0 0 0;content:"";position:absolute;width:100%}.active-indicator::after{opacity:0;transition:opacity 150ms cubic-bezier(0.2, 0, 0, 1)}.focused .active-indicator::after{opacity:1}.field:not(.with-start) .content ::slotted(*){padding-inline-start:var(--_leading-space)}.field:not(.with-end) .content ::slotted(*){padding-inline-end:var(--_trailing-space)}.field:not(.no-label) .content ::slotted(:not(textarea)){padding-bottom:var(--_with-label-bottom-space);padding-top:calc(var(--_with-label-top-space) + var(--_label-text-populated-line-height))}.field:not(.no-label) .content ::slotted(textarea){margin-bottom:var(--_with-label-bottom-space);margin-top:calc(var(--_with-label-top-space) + var(--_label-text-populated-line-height))}:hover .active-indicator::before{border-bottom-color:var(--_hover-active-indicator-color);border-bottom-width:var(--_hover-active-indicator-height)}.active-indicator::after{border-bottom-color:var(--_focus-active-indicator-color);border-bottom-width:var(--_focus-active-indicator-height)}:hover .state-layer{background:var(--_hover-state-layer-color);opacity:var(--_hover-state-layer-opacity)}.disabled .active-indicator::before{border-bottom-color:var(--_disabled-active-indicator-color);border-bottom-width:var(--_disabled-active-indicator-height);opacity:var(--_disabled-active-indicator-opacity)}.disabled .background{background:var(--_disabled-container-color);opacity:var(--_disabled-container-opacity)}.error .active-indicator::before{border-bottom-color:var(--_error-active-indicator-color)}.error:hover .active-indicator::before{border-bottom-color:var(--_error-hover-active-indicator-color)}.error:hover .state-layer{background:var(--_error-hover-state-layer-color);opacity:var(--_error-hover-state-layer-opacity)}.error .active-indicator::after{border-bottom-color:var(--_error-focus-active-indicator-color)}.resizable .container{bottom:var(--_focus-active-indicator-height);clip-path:inset(var(--_focus-active-indicator-height) 0 0 0)}.resizable .container>*{top:var(--_focus-active-indicator-height)}}@layer hcm{@media(forced-colors: active){.disabled .active-indicator::before{border-color:GrayText;opacity:1}}}
`
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let ui=class extends di{};ui.styles=[_t,hi],ui=t([i("md-filled-field")],ui);
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const pi=l`:host{--_active-indicator-color: var(--md-filled-text-field-active-indicator-color, var(--md-sys-color-on-surface-variant, #49454f));--_active-indicator-height: var(--md-filled-text-field-active-indicator-height, 1px);--_caret-color: var(--md-filled-text-field-caret-color, var(--md-sys-color-primary, #6750a4));--_container-color: var(--md-filled-text-field-container-color, var(--md-sys-color-surface-container-highest, #e6e0e9));--_disabled-active-indicator-color: var(--md-filled-text-field-disabled-active-indicator-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-active-indicator-height: var(--md-filled-text-field-disabled-active-indicator-height, 1px);--_disabled-active-indicator-opacity: var(--md-filled-text-field-disabled-active-indicator-opacity, 0.38);--_disabled-container-color: var(--md-filled-text-field-disabled-container-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-container-opacity: var(--md-filled-text-field-disabled-container-opacity, 0.04);--_disabled-input-text-color: var(--md-filled-text-field-disabled-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-input-text-opacity: var(--md-filled-text-field-disabled-input-text-opacity, 0.38);--_disabled-label-text-color: var(--md-filled-text-field-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-label-text-opacity: var(--md-filled-text-field-disabled-label-text-opacity, 0.38);--_disabled-leading-icon-color: var(--md-filled-text-field-disabled-leading-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-leading-icon-opacity: var(--md-filled-text-field-disabled-leading-icon-opacity, 0.38);--_disabled-supporting-text-color: var(--md-filled-text-field-disabled-supporting-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-supporting-text-opacity: var(--md-filled-text-field-disabled-supporting-text-opacity, 0.38);--_disabled-trailing-icon-color: var(--md-filled-text-field-disabled-trailing-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-trailing-icon-opacity: var(--md-filled-text-field-disabled-trailing-icon-opacity, 0.38);--_error-active-indicator-color: var(--md-filled-text-field-error-active-indicator-color, var(--md-sys-color-error, #b3261e));--_error-focus-active-indicator-color: var(--md-filled-text-field-error-focus-active-indicator-color, var(--md-sys-color-error, #b3261e));--_error-focus-caret-color: var(--md-filled-text-field-error-focus-caret-color, var(--md-sys-color-error, #b3261e));--_error-focus-input-text-color: var(--md-filled-text-field-error-focus-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_error-focus-label-text-color: var(--md-filled-text-field-error-focus-label-text-color, var(--md-sys-color-error, #b3261e));--_error-focus-leading-icon-color: var(--md-filled-text-field-error-focus-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-focus-supporting-text-color: var(--md-filled-text-field-error-focus-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-focus-trailing-icon-color: var(--md-filled-text-field-error-focus-trailing-icon-color, var(--md-sys-color-error, #b3261e));--_error-hover-active-indicator-color: var(--md-filled-text-field-error-hover-active-indicator-color, var(--md-sys-color-on-error-container, #410e0b));--_error-hover-input-text-color: var(--md-filled-text-field-error-hover-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_error-hover-label-text-color: var(--md-filled-text-field-error-hover-label-text-color, var(--md-sys-color-on-error-container, #410e0b));--_error-hover-leading-icon-color: var(--md-filled-text-field-error-hover-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-hover-state-layer-color: var(--md-filled-text-field-error-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_error-hover-state-layer-opacity: var(--md-filled-text-field-error-hover-state-layer-opacity, 0.08);--_error-hover-supporting-text-color: var(--md-filled-text-field-error-hover-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-hover-trailing-icon-color: var(--md-filled-text-field-error-hover-trailing-icon-color, var(--md-sys-color-on-error-container, #410e0b));--_error-input-text-color: var(--md-filled-text-field-error-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_error-label-text-color: var(--md-filled-text-field-error-label-text-color, var(--md-sys-color-error, #b3261e));--_error-leading-icon-color: var(--md-filled-text-field-error-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-supporting-text-color: var(--md-filled-text-field-error-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-trailing-icon-color: var(--md-filled-text-field-error-trailing-icon-color, var(--md-sys-color-error, #b3261e));--_focus-active-indicator-color: var(--md-filled-text-field-focus-active-indicator-color, var(--md-sys-color-primary, #6750a4));--_focus-active-indicator-height: var(--md-filled-text-field-focus-active-indicator-height, 3px);--_focus-input-text-color: var(--md-filled-text-field-focus-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_focus-label-text-color: var(--md-filled-text-field-focus-label-text-color, var(--md-sys-color-primary, #6750a4));--_focus-leading-icon-color: var(--md-filled-text-field-focus-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_focus-supporting-text-color: var(--md-filled-text-field-focus-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_focus-trailing-icon-color: var(--md-filled-text-field-focus-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-active-indicator-color: var(--md-filled-text-field-hover-active-indicator-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-active-indicator-height: var(--md-filled-text-field-hover-active-indicator-height, 1px);--_hover-input-text-color: var(--md-filled-text-field-hover-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-label-text-color: var(--md-filled-text-field-hover-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-leading-icon-color: var(--md-filled-text-field-hover-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-state-layer-color: var(--md-filled-text-field-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-state-layer-opacity: var(--md-filled-text-field-hover-state-layer-opacity, 0.08);--_hover-supporting-text-color: var(--md-filled-text-field-hover-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-trailing-icon-color: var(--md-filled-text-field-hover-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_input-text-color: var(--md-filled-text-field-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_input-text-font: var(--md-filled-text-field-input-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_input-text-line-height: var(--md-filled-text-field-input-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_input-text-placeholder-color: var(--md-filled-text-field-input-text-placeholder-color, var(--md-sys-color-on-surface-variant, #49454f));--_input-text-prefix-color: var(--md-filled-text-field-input-text-prefix-color, var(--md-sys-color-on-surface-variant, #49454f));--_input-text-size: var(--md-filled-text-field-input-text-size, var(--md-sys-typescale-body-large-size, 1rem));--_input-text-suffix-color: var(--md-filled-text-field-input-text-suffix-color, var(--md-sys-color-on-surface-variant, #49454f));--_input-text-weight: var(--md-filled-text-field-input-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_label-text-color: var(--md-filled-text-field-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_label-text-font: var(--md-filled-text-field-label-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-line-height: var(--md-filled-text-field-label-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_label-text-populated-line-height: var(--md-filled-text-field-label-text-populated-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_label-text-populated-size: var(--md-filled-text-field-label-text-populated-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_label-text-size: var(--md-filled-text-field-label-text-size, var(--md-sys-typescale-body-large-size, 1rem));--_label-text-weight: var(--md-filled-text-field-label-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_leading-icon-color: var(--md-filled-text-field-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_leading-icon-size: var(--md-filled-text-field-leading-icon-size, 24px);--_supporting-text-color: var(--md-filled-text-field-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_supporting-text-font: var(--md-filled-text-field-supporting-text-font, var(--md-sys-typescale-body-small-font, var(--md-ref-typeface-plain, Roboto)));--_supporting-text-line-height: var(--md-filled-text-field-supporting-text-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_supporting-text-size: var(--md-filled-text-field-supporting-text-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_supporting-text-weight: var(--md-filled-text-field-supporting-text-weight, var(--md-sys-typescale-body-small-weight, var(--md-ref-typeface-weight-regular, 400)));--_trailing-icon-color: var(--md-filled-text-field-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_trailing-icon-size: var(--md-filled-text-field-trailing-icon-size, 24px);--_container-shape-start-start: var(--md-filled-text-field-container-shape-start-start, var(--md-filled-text-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_container-shape-start-end: var(--md-filled-text-field-container-shape-start-end, var(--md-filled-text-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_container-shape-end-end: var(--md-filled-text-field-container-shape-end-end, var(--md-filled-text-field-container-shape, var(--md-sys-shape-corner-none, 0px)));--_container-shape-end-start: var(--md-filled-text-field-container-shape-end-start, var(--md-filled-text-field-container-shape, var(--md-sys-shape-corner-none, 0px)));--_icon-input-space: var(--md-filled-text-field-icon-input-space, 16px);--_leading-space: var(--md-filled-text-field-leading-space, 16px);--_trailing-space: var(--md-filled-text-field-trailing-space, 16px);--_top-space: var(--md-filled-text-field-top-space, 16px);--_bottom-space: var(--md-filled-text-field-bottom-space, 16px);--_input-text-prefix-trailing-space: var(--md-filled-text-field-input-text-prefix-trailing-space, 2px);--_input-text-suffix-leading-space: var(--md-filled-text-field-input-text-suffix-leading-space, 2px);--_with-label-top-space: var(--md-filled-text-field-with-label-top-space, 8px);--_with-label-bottom-space: var(--md-filled-text-field-with-label-bottom-space, 8px);--_focus-caret-color: var(--md-filled-text-field-focus-caret-color, var(--md-sys-color-primary, #6750a4));--_with-leading-icon-leading-space: var(--md-filled-text-field-with-leading-icon-leading-space, 12px);--_with-trailing-icon-trailing-space: var(--md-filled-text-field-with-trailing-icon-trailing-space, 12px);--md-filled-field-active-indicator-color: var(--_active-indicator-color);--md-filled-field-active-indicator-height: var(--_active-indicator-height);--md-filled-field-bottom-space: var(--_bottom-space);--md-filled-field-container-color: var(--_container-color);--md-filled-field-container-shape-end-end: var(--_container-shape-end-end);--md-filled-field-container-shape-end-start: var(--_container-shape-end-start);--md-filled-field-container-shape-start-end: var(--_container-shape-start-end);--md-filled-field-container-shape-start-start: var(--_container-shape-start-start);--md-filled-field-content-color: var(--_input-text-color);--md-filled-field-content-font: var(--_input-text-font);--md-filled-field-content-line-height: var(--_input-text-line-height);--md-filled-field-content-size: var(--_input-text-size);--md-filled-field-content-space: var(--_icon-input-space);--md-filled-field-content-weight: var(--_input-text-weight);--md-filled-field-disabled-active-indicator-color: var(--_disabled-active-indicator-color);--md-filled-field-disabled-active-indicator-height: var(--_disabled-active-indicator-height);--md-filled-field-disabled-active-indicator-opacity: var(--_disabled-active-indicator-opacity);--md-filled-field-disabled-container-color: var(--_disabled-container-color);--md-filled-field-disabled-container-opacity: var(--_disabled-container-opacity);--md-filled-field-disabled-content-color: var(--_disabled-input-text-color);--md-filled-field-disabled-content-opacity: var(--_disabled-input-text-opacity);--md-filled-field-disabled-label-text-color: var(--_disabled-label-text-color);--md-filled-field-disabled-label-text-opacity: var(--_disabled-label-text-opacity);--md-filled-field-disabled-leading-content-color: var(--_disabled-leading-icon-color);--md-filled-field-disabled-leading-content-opacity: var(--_disabled-leading-icon-opacity);--md-filled-field-disabled-supporting-text-color: var(--_disabled-supporting-text-color);--md-filled-field-disabled-supporting-text-opacity: var(--_disabled-supporting-text-opacity);--md-filled-field-disabled-trailing-content-color: var(--_disabled-trailing-icon-color);--md-filled-field-disabled-trailing-content-opacity: var(--_disabled-trailing-icon-opacity);--md-filled-field-error-active-indicator-color: var(--_error-active-indicator-color);--md-filled-field-error-content-color: var(--_error-input-text-color);--md-filled-field-error-focus-active-indicator-color: var(--_error-focus-active-indicator-color);--md-filled-field-error-focus-content-color: var(--_error-focus-input-text-color);--md-filled-field-error-focus-label-text-color: var(--_error-focus-label-text-color);--md-filled-field-error-focus-leading-content-color: var(--_error-focus-leading-icon-color);--md-filled-field-error-focus-supporting-text-color: var(--_error-focus-supporting-text-color);--md-filled-field-error-focus-trailing-content-color: var(--_error-focus-trailing-icon-color);--md-filled-field-error-hover-active-indicator-color: var(--_error-hover-active-indicator-color);--md-filled-field-error-hover-content-color: var(--_error-hover-input-text-color);--md-filled-field-error-hover-label-text-color: var(--_error-hover-label-text-color);--md-filled-field-error-hover-leading-content-color: var(--_error-hover-leading-icon-color);--md-filled-field-error-hover-state-layer-color: var(--_error-hover-state-layer-color);--md-filled-field-error-hover-state-layer-opacity: var(--_error-hover-state-layer-opacity);--md-filled-field-error-hover-supporting-text-color: var(--_error-hover-supporting-text-color);--md-filled-field-error-hover-trailing-content-color: var(--_error-hover-trailing-icon-color);--md-filled-field-error-label-text-color: var(--_error-label-text-color);--md-filled-field-error-leading-content-color: var(--_error-leading-icon-color);--md-filled-field-error-supporting-text-color: var(--_error-supporting-text-color);--md-filled-field-error-trailing-content-color: var(--_error-trailing-icon-color);--md-filled-field-focus-active-indicator-color: var(--_focus-active-indicator-color);--md-filled-field-focus-active-indicator-height: var(--_focus-active-indicator-height);--md-filled-field-focus-content-color: var(--_focus-input-text-color);--md-filled-field-focus-label-text-color: var(--_focus-label-text-color);--md-filled-field-focus-leading-content-color: var(--_focus-leading-icon-color);--md-filled-field-focus-supporting-text-color: var(--_focus-supporting-text-color);--md-filled-field-focus-trailing-content-color: var(--_focus-trailing-icon-color);--md-filled-field-hover-active-indicator-color: var(--_hover-active-indicator-color);--md-filled-field-hover-active-indicator-height: var(--_hover-active-indicator-height);--md-filled-field-hover-content-color: var(--_hover-input-text-color);--md-filled-field-hover-label-text-color: var(--_hover-label-text-color);--md-filled-field-hover-leading-content-color: var(--_hover-leading-icon-color);--md-filled-field-hover-state-layer-color: var(--_hover-state-layer-color);--md-filled-field-hover-state-layer-opacity: var(--_hover-state-layer-opacity);--md-filled-field-hover-supporting-text-color: var(--_hover-supporting-text-color);--md-filled-field-hover-trailing-content-color: var(--_hover-trailing-icon-color);--md-filled-field-label-text-color: var(--_label-text-color);--md-filled-field-label-text-font: var(--_label-text-font);--md-filled-field-label-text-line-height: var(--_label-text-line-height);--md-filled-field-label-text-populated-line-height: var(--_label-text-populated-line-height);--md-filled-field-label-text-populated-size: var(--_label-text-populated-size);--md-filled-field-label-text-size: var(--_label-text-size);--md-filled-field-label-text-weight: var(--_label-text-weight);--md-filled-field-leading-content-color: var(--_leading-icon-color);--md-filled-field-leading-space: var(--_leading-space);--md-filled-field-supporting-text-color: var(--_supporting-text-color);--md-filled-field-supporting-text-font: var(--_supporting-text-font);--md-filled-field-supporting-text-line-height: var(--_supporting-text-line-height);--md-filled-field-supporting-text-size: var(--_supporting-text-size);--md-filled-field-supporting-text-weight: var(--_supporting-text-weight);--md-filled-field-top-space: var(--_top-space);--md-filled-field-trailing-content-color: var(--_trailing-icon-color);--md-filled-field-trailing-space: var(--_trailing-space);--md-filled-field-with-label-bottom-space: var(--_with-label-bottom-space);--md-filled-field-with-label-top-space: var(--_with-label-top-space);--md-filled-field-with-leading-content-leading-space: var(--_with-leading-icon-leading-space);--md-filled-field-with-trailing-content-trailing-space: var(--_with-trailing-icon-trailing-space)}
`
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;class fi extends si{constructor(){super(...arguments),this.fieldTag=Et`md-filled-field`}}
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let mi=class extends fi{constructor(){super(...arguments),this.fieldTag=Et`md-filled-field`}};
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
function gi(e,t=ki){const i=yi(e,t);return i&&(i.tabIndex=0,i.focus()),i}function vi(e,t=ki){const i=bi(e,t);return i&&(i.tabIndex=0,i.focus()),i}function Oi(e,t=ki){for(let i=0;i<e.length;i++){const r=e[i];if(0===r.tabIndex&&t(r))return{item:r,index:i}}return null}function yi(e,t=ki){for(const i of e)if(t(i))return i;return null}function bi(e,t=ki){for(let i=e.length-1;i>=0;i--){const r=e[i];if(t(r))return r}return null}function xi(e,t,i=ki,r=!0){if(t){const n=function(e,t,i=ki,r=!0){for(let n=1;n<e.length;n++){const o=(n+t)%e.length;if(o<t&&!r)return null;const s=e[o];if(i(s))return s}return e[t]?e[t]:null}(e,t.index,i,r);return n&&(n.tabIndex=0,n.focus()),n}return gi(e,i)}function wi(e,t,i=ki,r=!0){if(t){const n=function(e,t,i=ki,r=!0){for(let n=1;n<e.length;n++){const o=(t-n+e.length)%e.length;if(o>t&&!r)return null;const s=e[o];if(i(s))return s}return e[t]?e[t]:null}(e,t.index,i,r);return n&&(n.tabIndex=0,n.focus()),n}return vi(e,i)}function ki(e){return!e.disabled}
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */mi.styles=[li,pi],mi=t([i("md-filled-text-field")],mi);const Si="ArrowDown",_i="ArrowLeft",Ti="ArrowUp",Ci="ArrowRight",Pi="Home",Ei="End";class $i{constructor(e){this.handleKeydown=e=>{const t=e.key;if(e.defaultPrevented||!this.isNavigableKey(t))return;const i=this.items;if(!i.length)return;const r=Oi(i,this.isActivatable);e.preventDefault();const n=this.isRtl();let o=null;switch(t){case Si:case n?_i:Ci:o=xi(i,r,this.isActivatable,this.wrapNavigation());break;case Ti:case n?Ci:_i:o=wi(i,r,this.isActivatable,this.wrapNavigation());break;case Pi:o=gi(i,this.isActivatable);break;case Ei:o=vi(i,this.isActivatable)}o&&r&&r.item!==o&&(r.item.tabIndex=-1)},this.onDeactivateItems=()=>{const e=this.items;for(const t of e)this.deactivateItem(t)},this.onRequestActivation=e=>{this.onDeactivateItems();const t=e.target;this.activateItem(t),t.focus()},this.onSlotchange=()=>{const e=this.items;let t=!1;for(const i of e){!(!i.disabled&&i.tabIndex>-1)||t?i.tabIndex=-1:(t=!0,i.tabIndex=0)}if(t)return;const i=yi(e,this.isActivatable);i&&(i.tabIndex=0)};const{isItem:t,getPossibleItems:i,isRtl:r,deactivateItem:n,activateItem:o,isNavigableKey:s,isActivatable:a,wrapNavigation:l}=e;this.isItem=t,this.getPossibleItems=i,this.isRtl=r,this.deactivateItem=n,this.activateItem=o,this.isNavigableKey=s,this.isActivatable=a,this.wrapNavigation=l??(()=>!0)}get items(){const e=this.getPossibleItems(),t=[];for(const i of e){if(this.isItem(i)){t.push(i);continue}const e=i.item;e&&this.isItem(e)&&t.push(e)}return t}activateNextItem(){const e=this.items,t=Oi(e,this.isActivatable);return t&&(t.item.tabIndex=-1),xi(e,t,this.isActivatable,this.wrapNavigation())}activatePreviousItem(){const e=this.items,t=Oi(e,this.isActivatable);return t&&(t.item.tabIndex=-1),wi(e,t,this.isActivatable,this.wrapNavigation())}}
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ai=function(e,t){return new CustomEvent("close-menu",{bubbles:!0,composed:!0,detail:{initiator:e,reason:t,itemPath:[e]}})},Ii={SPACE:"Space",ENTER:"Enter"},Qi="click-selection",Ri="keydown",Di={ESCAPE:"Escape",SPACE:Ii.SPACE,ENTER:Ii.ENTER};function Mi(e){return Object.values(Di).some(t=>t===e)}function Ni(e,t){const i=new Event("md-contains",{bubbles:!0,composed:!0});let r=[];const n=e=>{r=e.composedPath()};t.addEventListener("md-contains",n),e.dispatchEvent(i),t.removeEventListener("md-contains",n);return r.length>0}const Li="none",zi="list-root",Vi="first-item",Ui="last-item",qi="end-start",Xi="start-start";
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zi{constructor(e,t){this.host=e,this.getProperties=t,this.surfaceStylesInternal={display:"none"},this.lastValues={isOpen:!1},this.host.addController(this)}get surfaceStyles(){return this.surfaceStylesInternal}async position(){const{surfaceEl:e,anchorEl:t,anchorCorner:i,surfaceCorner:r,positioning:n,xOffset:o,yOffset:s,disableBlockFlip:a,disableInlineFlip:l,repositionStrategy:c}=this.getProperties(),d=i.toLowerCase().trim(),h=r.toLowerCase().trim();if(!e||!t)return;const u=window.innerWidth,p=window.innerHeight,f=document.createElement("div");f.style.opacity="0",f.style.position="fixed",f.style.display="block",f.style.inset="0",document.body.appendChild(f);const m=f.getBoundingClientRect();f.remove();const g=window.innerHeight-m.bottom,v=window.innerWidth-m.right;this.surfaceStylesInternal={display:"block",opacity:"0"},this.host.requestUpdate(),await this.host.updateComplete,e.popover&&e.isConnected&&e.showPopover();const O=e.getSurfacePositionClientRect?e.getSurfacePositionClientRect():e.getBoundingClientRect(),y=t.getSurfacePositionClientRect?t.getSurfacePositionClientRect():t.getBoundingClientRect(),[b,x]=h.split("-"),[w,k]=d.split("-"),S="ltr"===getComputedStyle(e).direction;let{blockInset:_,blockOutOfBoundsCorrection:T,surfaceBlockProperty:C}=this.calculateBlock({surfaceRect:O,anchorRect:y,anchorBlock:w,surfaceBlock:b,yOffset:s,positioning:n,windowInnerHeight:p,blockScrollbarHeight:g});if(T&&!a){const e="start"===b?"end":"start",t="start"===w?"end":"start",i=this.calculateBlock({surfaceRect:O,anchorRect:y,anchorBlock:t,surfaceBlock:e,yOffset:s,positioning:n,windowInnerHeight:p,blockScrollbarHeight:g});T>i.blockOutOfBoundsCorrection&&(_=i.blockInset,T=i.blockOutOfBoundsCorrection,C=i.surfaceBlockProperty)}let{inlineInset:P,inlineOutOfBoundsCorrection:E,surfaceInlineProperty:$}=this.calculateInline({surfaceRect:O,anchorRect:y,anchorInline:k,surfaceInline:x,xOffset:o,positioning:n,isLTR:S,windowInnerWidth:u,inlineScrollbarWidth:v});if(E&&!l){const e="start"===x?"end":"start",t="start"===k?"end":"start",i=this.calculateInline({surfaceRect:O,anchorRect:y,anchorInline:t,surfaceInline:e,xOffset:o,positioning:n,isLTR:S,windowInnerWidth:u,inlineScrollbarWidth:v});Math.abs(E)>Math.abs(i.inlineOutOfBoundsCorrection)&&(P=i.inlineInset,E=i.inlineOutOfBoundsCorrection,$=i.surfaceInlineProperty)}"move"===c&&(_-=T,P-=E),this.surfaceStylesInternal={display:"block",opacity:"1",[C]:`${_}px`,[$]:`${P}px`},"resize"===c&&(T&&(this.surfaceStylesInternal.height=O.height-T+"px"),E&&(this.surfaceStylesInternal.width=O.width-E+"px")),this.host.requestUpdate()}calculateBlock(e){const{surfaceRect:t,anchorRect:i,anchorBlock:r,surfaceBlock:n,yOffset:o,positioning:s,windowInnerHeight:a,blockScrollbarHeight:l}=e,c="fixed"===s||"document"===s?1:0,d="document"===s?1:0,h="start"===n?1:0,u="end"===n?1:0,p=(r!==n?1:0)*i.height+o,f=h*i.top+u*(a-i.bottom-l);return{blockInset:c*f+d*(h*window.scrollY-u*window.scrollY)+p,blockOutOfBoundsCorrection:Math.abs(Math.min(0,a-f-p-t.height)),surfaceBlockProperty:"start"===n?"inset-block-start":"inset-block-end"}}calculateInline(e){const{isLTR:t,surfaceInline:i,anchorInline:r,anchorRect:n,surfaceRect:o,xOffset:s,positioning:a,windowInnerWidth:l,inlineScrollbarWidth:c}=e,d="fixed"===a||"document"===a?1:0,h="document"===a?1:0,u=t?1:0,p=t?0:1,f="start"===i?1:0,m="end"===i?1:0,g=(r!==i?1:0)*n.width+s,v=u*(f*n.left+m*(l-n.right-c))+p*(f*(l-n.right-c)+m*n.left);let O="start"===i?"inset-inline-start":"inset-inline-end";return"document"!==a&&"fixed"!==a||(O="start"===i&&t||"end"===i&&!t?"left":"right"),{inlineInset:d*v+g+h*(u*(f*window.scrollX-m*window.scrollX)+p*(m*window.scrollX-f*window.scrollX)),inlineOutOfBoundsCorrection:Math.abs(Math.min(0,l-v-g-o.width)),surfaceInlineProperty:O}}hostUpdate(){this.onUpdate()}hostUpdated(){this.onUpdate()}async onUpdate(){const e=this.getProperties();let t=!1;for(const[i,r]of Object.entries(e))if(t=t||r!==this.lastValues[i],t)break;const i=this.lastValues.isOpen!==e.isOpen,r=!!e.anchorEl,n=!!e.surfaceEl;t&&r&&n&&(this.lastValues.isOpen=e.isOpen,e.isOpen?(this.lastValues=e,await this.position(),e.onOpen()):i&&(await e.beforeClose(),this.close(),e.onClose()))}close(){this.surfaceStylesInternal={display:"none"},this.host.requestUpdate();const e=this.getProperties().surfaceEl;e?.popover&&e?.isConnected&&e.hidePopover()}}
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Bi=0,ji=1,Fi=2;class Wi{constructor(e){this.getProperties=e,this.typeaheadRecords=[],this.typaheadBuffer="",this.cancelTypeaheadTimeout=0,this.isTypingAhead=!1,this.lastActiveRecord=null,this.onKeydown=e=>{this.isTypingAhead?this.typeahead(e):this.beginTypeahead(e)},this.endTypeahead=()=>{this.isTypingAhead=!1,this.typaheadBuffer="",this.typeaheadRecords=[]}}get items(){return this.getProperties().getItems()}get active(){return this.getProperties().active}beginTypeahead(e){this.active&&("Space"===e.code||"Enter"===e.code||e.code.startsWith("Arrow")||"Escape"===e.code||(this.isTypingAhead=!0,this.typeaheadRecords=this.items.map((e,t)=>[t,e,e.typeaheadText.trim().toLowerCase()]),this.lastActiveRecord=this.typeaheadRecords.find(e=>0===e[ji].tabIndex)??null,this.lastActiveRecord&&(this.lastActiveRecord[ji].tabIndex=-1),this.typeahead(e)))}typeahead(e){if(e.defaultPrevented)return;if(clearTimeout(this.cancelTypeaheadTimeout),"Enter"===e.code||e.code.startsWith("Arrow")||"Escape"===e.code)return this.endTypeahead(),void(this.lastActiveRecord&&(this.lastActiveRecord[ji].tabIndex=-1));"Space"===e.code&&e.preventDefault(),this.cancelTypeaheadTimeout=setTimeout(this.endTypeahead,this.getProperties().typeaheadBufferTime),this.typaheadBuffer+=e.key.toLowerCase();const t=this.lastActiveRecord?this.lastActiveRecord[Bi]:-1,i=this.typeaheadRecords.length,r=e=>(e[Bi]+i-t)%i,n=this.typeaheadRecords.filter(e=>!e[ji].disabled&&e[Fi].startsWith(this.typaheadBuffer)).sort((e,t)=>r(e)-r(t));if(0===n.length)return clearTimeout(this.cancelTypeaheadTimeout),this.lastActiveRecord&&(this.lastActiveRecord[ji].tabIndex=-1),void this.endTypeahead();const o=1===this.typaheadBuffer.length;let s;s=this.lastActiveRecord===n[0]&&o?n[1]??n[0]:n[0],this.lastActiveRecord&&(this.lastActiveRecord[ji].tabIndex=-1),this.lastActiveRecord=s,s[ji].tabIndex=0,s[ji].focus()}}
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Yi=new Set([Si,Ti,Pi,Ei]),Gi=new Set([_i,Ci,...Yi]);class Hi extends ve{get openDirection(){return"start"===this.menuCorner.split("-")[0]?"DOWN":"UP"}get anchorElement(){return this.anchor?this.getRootNode().querySelector(`#${this.anchor}`):this.currentAnchorElement}set anchorElement(e){this.currentAnchorElement=e,this.requestUpdate("anchorElement")}constructor(){super(),this.anchor="",this.positioning="absolute",this.quick=!1,this.hasOverflow=!1,this.open=!1,this.xOffset=0,this.yOffset=0,this.noHorizontalFlip=!1,this.noVerticalFlip=!1,this.typeaheadDelay=200,this.anchorCorner=qi,this.menuCorner=Xi,this.stayOpenOnOutsideClick=!1,this.stayOpenOnFocusout=!1,this.skipRestoreFocus=!1,this.defaultFocus=Vi,this.noNavigationWrap=!1,this.typeaheadActive=!0,this.isSubmenu=!1,this.pointerPath=[],this.isRepositioning=!1,this.openCloseAnimationSignal=function(){let e=null;return{start:()=>(e?.abort(),e=new AbortController,e.signal),finish(){e=null}}}
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */(),this.listController=new $i({isItem:e=>e.hasAttribute("md-menu-item"),getPossibleItems:()=>this.slotItems,isRtl:()=>"rtl"===getComputedStyle(this).direction,deactivateItem:e=>{e.selected=!1,e.tabIndex=-1},activateItem:e=>{e.selected=!0,e.tabIndex=0},isNavigableKey:e=>{if(!this.isSubmenu)return Gi.has(e);return e===("rtl"===getComputedStyle(this).direction?_i:Ci)||Yi.has(e)},wrapNavigation:()=>!this.noNavigationWrap}),this.lastFocusedElement=null,this.typeaheadController=new Wi(()=>({getItems:()=>this.items,typeaheadBufferTime:this.typeaheadDelay,active:this.typeaheadActive})),this.currentAnchorElement=null,this.internals=this.attachInternals(),this.menuPositionController=new Zi(this,()=>({anchorCorner:this.anchorCorner,surfaceCorner:this.menuCorner,surfaceEl:this.surfaceEl,anchorEl:this.anchorElement,positioning:"popover"===this.positioning?"document":this.positioning,isOpen:this.open,xOffset:this.xOffset,yOffset:this.yOffset,disableBlockFlip:this.noVerticalFlip,disableInlineFlip:this.noHorizontalFlip,onOpen:this.onOpened,beforeClose:this.beforeClose,onClose:this.onClosed,repositionStrategy:this.hasOverflow&&"popover"!==this.positioning?"move":"resize"})),this.onWindowResize=()=>{this.isRepositioning||"document"!==this.positioning&&"fixed"!==this.positioning&&"popover"!==this.positioning||(this.isRepositioning=!0,this.reposition(),this.isRepositioning=!1)},this.handleFocusout=async e=>{const t=this.anchorElement;if(this.stayOpenOnFocusout||!this.open||this.pointerPath.includes(t))return;if(e.relatedTarget){if(Ni(e.relatedTarget,this)||0!==this.pointerPath.length&&Ni(e.relatedTarget,t))return}else if(this.pointerPath.includes(this))return;const i=this.skipRestoreFocus;this.skipRestoreFocus=!0,this.close(),await this.updateComplete,this.skipRestoreFocus=i},this.onOpened=async()=>{this.lastFocusedElement=function(e=document){let t=e.activeElement;for(;t&&t?.shadowRoot?.activeElement;)t=t.shadowRoot.activeElement;return t}();const e=this.items,t=Oi(e);t&&this.defaultFocus!==Li&&(t.item.tabIndex=-1);let i=!this.quick;switch(this.quick?this.dispatchEvent(new Event("opening")):i=!!await this.animateOpen(),this.defaultFocus){case Vi:const t=yi(e);t&&(t.tabIndex=0,t.focus(),await t.updateComplete);break;case Ui:const i=bi(e);i&&(i.tabIndex=0,i.focus(),await i.updateComplete);break;case zi:this.focus()}i||this.dispatchEvent(new Event("opened"))},this.beforeClose=async()=>{this.open=!1,this.skipRestoreFocus||this.lastFocusedElement?.focus?.(),this.quick||await this.animateClose()},this.onClosed=()=>{this.quick&&(this.dispatchEvent(new Event("closing")),this.dispatchEvent(new Event("closed")))},this.onWindowPointerdown=e=>{this.pointerPath=e.composedPath()},this.onDocumentClick=e=>{if(!this.open)return;const t=e.composedPath();this.stayOpenOnOutsideClick||t.includes(this)||t.includes(this.anchorElement)||(this.open=!1)},this.internals.role="menu",this.addEventListener("keydown",this.handleKeydown),this.addEventListener("keydown",this.captureKeydown,{capture:!0}),this.addEventListener("focusout",this.handleFocusout)}get items(){return this.listController.items}willUpdate(e){e.has("open")&&(this.open?this.removeAttribute("aria-hidden"):this.setAttribute("aria-hidden","true"))}update(e){e.has("open")&&(this.open?this.setUpGlobalEventListeners():this.cleanUpGlobalEventListeners()),e.has("positioning")&&"popover"===this.positioning&&!this.showPopover&&(this.positioning="fixed"),super.update(e)}connectedCallback(){super.connectedCallback(),this.open&&this.setUpGlobalEventListeners()}disconnectedCallback(){super.disconnectedCallback(),this.cleanUpGlobalEventListeners()}getBoundingClientRect(){return this.surfaceEl?this.surfaceEl.getBoundingClientRect():super.getBoundingClientRect()}getClientRects(){return this.surfaceEl?this.surfaceEl.getClientRects():super.getClientRects()}render(){return this.renderSurface()}renderSurface(){return K`
      <div
        class="menu ${De(this.getSurfaceClasses())}"
        style=${Nt(this.menuPositionController.surfaceStyles)}
        popover=${"popover"===this.positioning?"manual":ee}>
        ${this.renderElevation()}
        <div class="items">
          <div class="item-padding"> ${this.renderMenuItems()} </div>
        </div>
      </div>
    `}renderMenuItems(){return K`<slot
      @close-menu=${this.onCloseMenu}
      @deactivate-items=${this.onDeactivateItems}
      @request-activation=${this.onRequestActivation}
      @deactivate-typeahead=${this.handleDeactivateTypeahead}
      @activate-typeahead=${this.handleActivateTypeahead}
      @stay-open-on-focusout=${this.handleStayOpenOnFocusout}
      @close-on-focusout=${this.handleCloseOnFocusout}
      @slotchange=${this.listController.onSlotchange}></slot>`}renderElevation(){return K`<md-elevation part="elevation"></md-elevation>`}getSurfaceClasses(){return{open:this.open,fixed:"fixed"===this.positioning,"has-overflow":this.hasOverflow}}captureKeydown(e){e.target===this&&!e.defaultPrevented&&Mi(e.code)&&(e.preventDefault(),this.close()),this.typeaheadController.onKeydown(e)}async animateOpen(){const e=this.surfaceEl,t=this.slotEl;if(!e||!t)return!0;const i=this.openDirection;this.dispatchEvent(new Event("opening")),e.classList.toggle("animating",!0);const r=this.openCloseAnimationSignal.start(),n=e.offsetHeight,o="UP"===i,s=this.items,a=250/s.length,l=e.animate([{height:"0px"},{height:`${n}px`}],{duration:500,easing:Ne}),c=t.animate([{transform:o?`translateY(-${n}px)`:""},{transform:""}],{duration:500,easing:Ne}),d=e.animate([{opacity:0},{opacity:1}],50),h=[];for(let e=0;e<s.length;e++){const t=s[o?s.length-1-e:e],i=t.animate([{opacity:0},{opacity:1}],{duration:250,delay:a*e});t.classList.toggle("md-menu-hidden",!0),i.addEventListener("finish",()=>{t.classList.toggle("md-menu-hidden",!1)}),h.push([t,i])}let u=e=>{};const p=new Promise(e=>{u=e});return r.addEventListener("abort",()=>{l.cancel(),c.cancel(),d.cancel(),h.forEach(([e,t])=>{e.classList.toggle("md-menu-hidden",!1),t.cancel()}),u(!0)}),l.addEventListener("finish",()=>{e.classList.toggle("animating",!1),this.openCloseAnimationSignal.finish(),u(!1)}),await p}animateClose(){let e;const t=new Promise(t=>{e=t}),i=this.surfaceEl,r=this.slotEl;if(!i||!r)return e(!1),t;const n="UP"===this.openDirection;this.dispatchEvent(new Event("closing")),i.classList.toggle("animating",!0);const o=this.openCloseAnimationSignal.start(),s=i.offsetHeight,a=this.items,l=150,c=50/a.length,d=i.animate([{height:`${s}px`},{height:.35*s+"px"}],{duration:l,easing:Le}),h=r.animate([{transform:""},{transform:n?`translateY(-${.65*s}px)`:""}],{duration:l,easing:Le}),u=i.animate([{opacity:1},{opacity:0}],{duration:50,delay:100}),p=[];for(let e=0;e<a.length;e++){const t=a[n?e:a.length-1-e],i=t.animate([{opacity:1},{opacity:0}],{duration:50,delay:50+c*e});i.addEventListener("finish",()=>{t.classList.toggle("md-menu-hidden",!0)}),p.push([t,i])}return o.addEventListener("abort",()=>{d.cancel(),h.cancel(),u.cancel(),p.forEach(([e,t])=>{t.cancel(),e.classList.toggle("md-menu-hidden",!1)}),e(!1)}),d.addEventListener("finish",()=>{i.classList.toggle("animating",!1),p.forEach(([e])=>{e.classList.toggle("md-menu-hidden",!1)}),this.openCloseAnimationSignal.finish(),this.dispatchEvent(new Event("closed")),e(!0)}),t}handleKeydown(e){this.pointerPath=[],this.listController.handleKeydown(e)}setUpGlobalEventListeners(){document.addEventListener("click",this.onDocumentClick,{capture:!0}),window.addEventListener("pointerdown",this.onWindowPointerdown),document.addEventListener("resize",this.onWindowResize,{passive:!0}),window.addEventListener("resize",this.onWindowResize,{passive:!0})}cleanUpGlobalEventListeners(){document.removeEventListener("click",this.onDocumentClick,{capture:!0}),window.removeEventListener("pointerdown",this.onWindowPointerdown),document.removeEventListener("resize",this.onWindowResize),window.removeEventListener("resize",this.onWindowResize)}onCloseMenu(){this.close()}onDeactivateItems(e){e.stopPropagation(),this.listController.onDeactivateItems()}onRequestActivation(e){e.stopPropagation(),this.listController.onRequestActivation(e)}handleDeactivateTypeahead(e){e.stopPropagation(),this.typeaheadActive=!1}handleActivateTypeahead(e){e.stopPropagation(),this.typeaheadActive=!0}handleStayOpenOnFocusout(e){e.stopPropagation(),this.stayOpenOnFocusout=!0}handleCloseOnFocusout(e){e.stopPropagation(),this.stayOpenOnFocusout=!1}close(){this.open=!1;this.slotItems.forEach(e=>{e.close?.()})}show(){this.open=!0}activateNextItem(){return this.listController.activateNextItem()??null}activatePreviousItem(){return this.listController.activatePreviousItem()??null}reposition(){this.open&&this.menuPositionController.position()}}t([$(".menu")],Hi.prototype,"surfaceEl",void 0),t([$("slot")],Hi.prototype,"slotEl",void 0),t([C()],Hi.prototype,"anchor",void 0),t([C()],Hi.prototype,"positioning",void 0),t([C({type:Boolean})],Hi.prototype,"quick",void 0),t([C({type:Boolean,attribute:"has-overflow"})],Hi.prototype,"hasOverflow",void 0),t([C({type:Boolean,reflect:!0})],Hi.prototype,"open",void 0),t([C({type:Number,attribute:"x-offset"})],Hi.prototype,"xOffset",void 0),t([C({type:Number,attribute:"y-offset"})],Hi.prototype,"yOffset",void 0),t([C({type:Boolean,attribute:"no-horizontal-flip"})],Hi.prototype,"noHorizontalFlip",void 0),t([C({type:Boolean,attribute:"no-vertical-flip"})],Hi.prototype,"noVerticalFlip",void 0),t([C({type:Number,attribute:"typeahead-delay"})],Hi.prototype,"typeaheadDelay",void 0),t([C({attribute:"anchor-corner"})],Hi.prototype,"anchorCorner",void 0),t([C({attribute:"menu-corner"})],Hi.prototype,"menuCorner",void 0),t([C({type:Boolean,attribute:"stay-open-on-outside-click"})],Hi.prototype,"stayOpenOnOutsideClick",void 0),t([C({type:Boolean,attribute:"stay-open-on-focusout"})],Hi.prototype,"stayOpenOnFocusout",void 0),t([C({type:Boolean,attribute:"skip-restore-focus"})],Hi.prototype,"skipRestoreFocus",void 0),t([C({attribute:"default-focus"})],Hi.prototype,"defaultFocus",void 0),t([C({type:Boolean,attribute:"no-navigation-wrap"})],Hi.prototype,"noNavigationWrap",void 0),t([I({flatten:!0})],Hi.prototype,"slotItems",void 0),t([P()],Hi.prototype,"typeaheadActive",void 0);
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const Ki=l`:host{--md-elevation-level: var(--md-menu-container-elevation, 2);--md-elevation-shadow-color: var(--md-menu-container-shadow-color, var(--md-sys-color-shadow, #000));min-width:112px;color:unset;display:contents}md-focus-ring{--md-focus-ring-shape: var(--md-menu-container-shape, var(--md-sys-shape-corner-extra-small, 4px))}.menu{border-radius:var(--md-menu-container-shape, var(--md-sys-shape-corner-extra-small, 4px));display:none;inset:auto;border:none;padding:0px;overflow:visible;background-color:rgba(0,0,0,0);color:inherit;opacity:0;z-index:20;position:absolute;user-select:none;max-height:inherit;height:inherit;min-width:inherit;max-width:inherit;scrollbar-width:inherit}.menu::backdrop{display:none}.fixed{position:fixed}.items{display:block;list-style-type:none;margin:0;outline:none;box-sizing:border-box;background-color:var(--md-menu-container-color, var(--md-sys-color-surface-container, #f3edf7));height:inherit;max-height:inherit;overflow:auto;min-width:inherit;max-width:inherit;border-radius:inherit;scrollbar-width:inherit}.item-padding{padding-block:var(--md-menu-top-space, 8px) var(--md-menu-bottom-space, 8px)}.has-overflow:not([popover]) .items{overflow:visible}.has-overflow.animating .items,.animating .items{overflow:hidden}.has-overflow.animating .items{pointer-events:none}.animating ::slotted(.md-menu-hidden){opacity:0}slot{display:block;height:inherit;max-height:inherit}::slotted(:is(md-divider,[role=separator])){margin:8px 0}@media(forced-colors: active){.menu{border-style:solid;border-color:CanvasText;border-width:1px}}
`
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let Ji=class extends Hi{};Ji.styles=[Ki],Ji=t([i("md-menu")],Ji);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class er extends ii{computeValidity(e){return this.selectControl||(this.selectControl=document.createElement("select")),me(K`<option value=${e.value}></option>`,this.selectControl),this.selectControl.value=e.value,this.selectControl.required=e.required,{validity:this.selectControl.validity,validationMessage:this.selectControl.validationMessage}}equals(e,t){return e.value===t.value&&e.required===t.required}copy({value:e,required:t}){return{value:e,required:t}}}
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
var tr;const ir=Symbol("value"),rr=Ge(ei(Bt(Wt(tt(ve)))));class nr extends rr{get value(){return this[ir]}set value(e){this.lastUserSetValue=e,this.select(e)}get options(){return this.menu?.items??[]}get selectedIndex(){const[e,t]=(this.getSelectedOptions()??[])[0]??[];return t??-1}set selectedIndex(e){this.lastUserSetSelectedIndex=e,this.selectIndex(e)}get selectedOptions(){return(this.getSelectedOptions()??[]).map(([e])=>e)}get hasError(){return this.error||this.nativeError}constructor(){super(),this.quick=!1,this.required=!1,this.errorText="",this.label="",this.noAsterisk=!1,this.supportingText="",this.error=!1,this.menuPositioning="popover",this.clampMenuWidth=!1,this.typeaheadDelay=200,this.hasLeadingIcon=!1,this.displayText="",this.menuAlign="start",this[tr]="",this.lastUserSetValue=null,this.lastUserSetSelectedIndex=null,this.lastSelectedOption=null,this.lastSelectedOptionRecords=[],this.nativeError=!1,this.nativeErrorText="",this.focused=!1,this.open=!1,this.defaultFocus=Li,this.prevOpen=this.open,this.selectWidth=0,this.addEventListener("focus",this.handleFocus.bind(this)),this.addEventListener("blur",this.handleBlur.bind(this))}select(e){const t=this.options.find(t=>t.value===e);t&&this.selectItem(t)}selectIndex(e){const t=this.options[e];t&&this.selectItem(t)}reset(){for(const e of this.options)e.selected=e.hasAttribute("selected");this.updateValueAndDisplayText(),this.nativeError=!1,this.nativeErrorText=""}showPicker(){this.open=!0}[(tr=ir,Yt)](e){e?.preventDefault();const t=this.getErrorText();this.nativeError=!!e,this.nativeErrorText=this.validationMessage,t===this.getErrorText()&&this.field?.reannounceError()}update(e){if(this.hasUpdated||this.initUserSelection(),this.prevOpen!==this.open&&this.open){const e=this.getBoundingClientRect();this.selectWidth=e.width}this.prevOpen=this.open,super.update(e)}render(){return K`
      <span
        class="select ${De(this.getRenderClasses())}"
        @focusout=${this.handleFocusout}>
        ${this.renderField()} ${this.renderMenu()}
      </span>
    `}async firstUpdated(e){await(this.menu?.updateComplete),this.lastSelectedOptionRecords.length||this.initUserSelection(),this.lastSelectedOptionRecords.length||this.options.length||setTimeout(()=>{this.updateValueAndDisplayText()}),super.firstUpdated(e)}getRenderClasses(){return{disabled:this.disabled,error:this.error,open:this.open}}renderField(){const e=this.ariaLabel||this.label;return At`
      <${this.fieldTag}
          aria-haspopup="listbox"
          role="combobox"
          part="field"
          id="field"
          tabindex=${this.disabled?"-1":"0"}
          aria-label=${e||ee}
          aria-describedby="description"
          aria-expanded=${this.open?"true":"false"}
          aria-controls="listbox"
          class="field"
          label=${this.label}
          ?no-asterisk=${this.noAsterisk}
          .focused=${this.focused||this.open}
          .populated=${!!this.displayText}
          .disabled=${this.disabled}
          .required=${this.required}
          .error=${this.hasError}
          ?has-start=${this.hasLeadingIcon}
          has-end
          supporting-text=${this.supportingText}
          error-text=${this.getErrorText()}
          @keydown=${this.handleKeydown}
          @click=${this.handleClick}>
         ${this.renderFieldContent()}
         <div id="description" slot="aria-describedby"></div>
      </${this.fieldTag}>`}renderFieldContent(){return[this.renderLeadingIcon(),this.renderLabel(),this.renderTrailingIcon()]}renderLeadingIcon(){return K`
      <span class="icon leading" slot="start">
        <slot name="leading-icon" @slotchange=${this.handleIconChange}></slot>
      </span>
    `}renderTrailingIcon(){return K`
      <span class="icon trailing" slot="end">
        <slot name="trailing-icon" @slotchange=${this.handleIconChange}>
          <svg height="5" viewBox="7 10 10 5" focusable="false">
            <polygon
              class="down"
              stroke="none"
              fill-rule="evenodd"
              points="7 10 12 15 17 10"></polygon>
            <polygon
              class="up"
              stroke="none"
              fill-rule="evenodd"
              points="7 15 12 10 17 15"></polygon>
          </svg>
        </slot>
      </span>
    `}renderLabel(){return K`<div id="label">${this.displayText||K`&nbsp;`}</div>`}renderMenu(){const e=this.label||this.ariaLabel;return K`<div class="menu-wrapper">
      <md-menu
        id="listbox"
        .defaultFocus=${this.defaultFocus}
        role="listbox"
        tabindex="-1"
        aria-label=${e||ee}
        stay-open-on-focusout
        part="menu"
        exportparts="focus-ring: menu-focus-ring"
        anchor="field"
        style=${Nt({"--__menu-min-width":`${this.selectWidth}px`,"--__menu-max-width":this.clampMenuWidth?`${this.selectWidth}px`:void 0})}
        no-navigation-wrap
        .open=${this.open}
        .quick=${this.quick}
        .positioning=${this.menuPositioning}
        .typeaheadDelay=${this.typeaheadDelay}
        .anchorCorner=${"start"===this.menuAlign?"end-start":"end-end"}
        .menuCorner=${"start"===this.menuAlign?"start-start":"start-end"}
        @opening=${this.handleOpening}
        @opened=${this.redispatchEvent}
        @closing=${this.redispatchEvent}
        @closed=${this.handleClosed}
        @close-menu=${this.handleCloseMenu}
        @request-selection=${this.handleRequestSelection}
        @request-deselection=${this.handleRequestDeselection}>
        ${this.renderMenuContent()}
      </md-menu>
    </div>`}renderMenuContent(){return K`<slot></slot>`}handleKeydown(e){if(this.open||this.disabled||!this.menu)return;const t=this.menu.typeaheadController,i="Space"===e.code||"ArrowDown"===e.code||"ArrowUp"===e.code||"End"===e.code||"Home"===e.code||"Enter"===e.code;if(!t.isTypingAhead&&i){switch(e.preventDefault(),this.open=!0,e.code){case"Space":case"ArrowDown":case"Enter":this.defaultFocus=Li;break;case"End":this.defaultFocus=Ui;break;case"ArrowUp":case"Home":this.defaultFocus=Vi}return}if(1===e.key.length){t.onKeydown(e),e.preventDefault();const{lastActiveRecord:i}=t;if(!i)return;this.labelEl?.setAttribute?.("aria-live","polite");this.selectItem(i[ji])&&this.dispatchInteractionEvents()}}handleClick(){this.open=!this.open}handleFocus(){this.focused=!0}handleBlur(){this.focused=!1}handleFocusout(e){e.relatedTarget&&Ni(e.relatedTarget,this)||(this.open=!1)}getSelectedOptions(){if(!this.menu)return this.lastSelectedOptionRecords=[],null;const e=this.menu.items;return this.lastSelectedOptionRecords=function(e){const t=[];for(let i=0;i<e.length;i++){const r=e[i];r.selected&&t.push([r,i])}return t}(e),this.lastSelectedOptionRecords}async getUpdateComplete(){return await(this.menu?.updateComplete),super.getUpdateComplete()}updateValueAndDisplayText(){const e=this.getSelectedOptions()??[];let t=!1;if(e.length){const[i]=e[0];t=this.lastSelectedOption!==i,this.lastSelectedOption=i,this[ir]=i.value,this.displayText=i.displayText}else t=null!==this.lastSelectedOption,this.lastSelectedOption=null,this[ir]="",this.displayText="";return t}async handleOpening(e){if(this.labelEl?.removeAttribute?.("aria-live"),this.redispatchEvent(e),this.defaultFocus!==Li)return;const t=this.menu.items,i=Oi(t)?.item;let[r]=this.lastSelectedOptionRecords[0]??[null];i&&i!==r&&(i.tabIndex=-1),r=r??t[0],r&&(r.tabIndex=0,r.focus())}redispatchEvent(e){zt(this,e)}handleClosed(e){this.open=!1,this.redispatchEvent(e)}handleCloseMenu(e){const t=e.detail.reason,i=e.detail.itemPath[0];this.open=!1;let r=!1;"click-selection"===t.kind||"keydown"===t.kind&&function(e){return Object.values(Ii).some(t=>t===e)}(t.key)?r=this.selectItem(i):(i.tabIndex=-1,i.blur()),r&&this.dispatchInteractionEvents()}selectItem(e){return(this.getSelectedOptions()??[]).forEach(([t])=>{e!==t&&(t.selected=!1)}),e.selected=!0,this.updateValueAndDisplayText()}handleRequestSelection(e){const t=e.target;this.lastSelectedOptionRecords.some(([e])=>e===t)||this.selectItem(t)}handleRequestDeselection(e){const t=e.target;this.lastSelectedOptionRecords.some(([e])=>e===t)&&this.updateValueAndDisplayText()}initUserSelection(){this.lastUserSetValue&&!this.lastSelectedOptionRecords.length?this.select(this.lastUserSetValue):null===this.lastUserSetSelectedIndex||this.lastSelectedOptionRecords.length?this.updateValueAndDisplayText():this.selectIndex(this.lastUserSetSelectedIndex)}handleIconChange(){this.hasLeadingIcon=this.leadingIcons.length>0}dispatchInteractionEvents(){this.dispatchEvent(new Event("input",{bubbles:!0,composed:!0})),this.dispatchEvent(new Event("change",{bubbles:!0}))}getErrorText(){return this.error?this.errorText:this.nativeErrorText}[jt](){return this.value}formResetCallback(){this.reset()}formStateRestoreCallback(e){this.value=e}click(){this.field?.click()}[Vt](){return new er(()=>this)}[Ut](){return this.field}}nr.shadowRootOptions={...ve.shadowRootOptions,delegatesFocus:!0},t([C({type:Boolean})],nr.prototype,"quick",void 0),t([C({type:Boolean})],nr.prototype,"required",void 0),t([C({type:String,attribute:"error-text"})],nr.prototype,"errorText",void 0),t([C()],nr.prototype,"label",void 0),t([C({type:Boolean,attribute:"no-asterisk"})],nr.prototype,"noAsterisk",void 0),t([C({type:String,attribute:"supporting-text"})],nr.prototype,"supportingText",void 0),t([C({type:Boolean,reflect:!0})],nr.prototype,"error",void 0),t([C({attribute:"menu-positioning"})],nr.prototype,"menuPositioning",void 0),t([C({type:Boolean,attribute:"clamp-menu-width"})],nr.prototype,"clampMenuWidth",void 0),t([C({type:Number,attribute:"typeahead-delay"})],nr.prototype,"typeaheadDelay",void 0),t([C({type:Boolean,attribute:"has-leading-icon"})],nr.prototype,"hasLeadingIcon",void 0),t([C({attribute:"display-text"})],nr.prototype,"displayText",void 0),t([C({attribute:"menu-align"})],nr.prototype,"menuAlign",void 0),t([C()],nr.prototype,"value",null),t([C({type:Number,attribute:"selected-index"})],nr.prototype,"selectedIndex",null),t([P()],nr.prototype,"nativeError",void 0),t([P()],nr.prototype,"nativeErrorText",void 0),t([P()],nr.prototype,"focused",void 0),t([P()],nr.prototype,"open",void 0),t([P()],nr.prototype,"defaultFocus",void 0),t([$(".field")],nr.prototype,"field",void 0),t([$("md-menu")],nr.prototype,"menu",void 0),t([$("#label")],nr.prototype,"labelEl",void 0),t([I({slot:"leading-icon",flatten:!0})],nr.prototype,"leadingIcons",void 0);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class or extends nr{constructor(){super(...arguments),this.fieldTag=Et`md-filled-field`}}
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sr=l`:host{--_text-field-active-indicator-color: var(--md-filled-select-text-field-active-indicator-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-active-indicator-height: var(--md-filled-select-text-field-active-indicator-height, 1px);--_text-field-container-color: var(--md-filled-select-text-field-container-color, var(--md-sys-color-surface-container-highest, #e6e0e9));--_text-field-disabled-active-indicator-color: var(--md-filled-select-text-field-disabled-active-indicator-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-active-indicator-height: var(--md-filled-select-text-field-disabled-active-indicator-height, 1px);--_text-field-disabled-active-indicator-opacity: var(--md-filled-select-text-field-disabled-active-indicator-opacity, 0.38);--_text-field-disabled-container-color: var(--md-filled-select-text-field-disabled-container-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-container-opacity: var(--md-filled-select-text-field-disabled-container-opacity, 0.04);--_text-field-disabled-input-text-color: var(--md-filled-select-text-field-disabled-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-input-text-opacity: var(--md-filled-select-text-field-disabled-input-text-opacity, 0.38);--_text-field-disabled-label-text-color: var(--md-filled-select-text-field-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-label-text-opacity: var(--md-filled-select-text-field-disabled-label-text-opacity, 0.38);--_text-field-disabled-leading-icon-color: var(--md-filled-select-text-field-disabled-leading-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-leading-icon-opacity: var(--md-filled-select-text-field-disabled-leading-icon-opacity, 0.38);--_text-field-disabled-supporting-text-color: var(--md-filled-select-text-field-disabled-supporting-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-supporting-text-opacity: var(--md-filled-select-text-field-disabled-supporting-text-opacity, 0.38);--_text-field-disabled-trailing-icon-color: var(--md-filled-select-text-field-disabled-trailing-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-trailing-icon-opacity: var(--md-filled-select-text-field-disabled-trailing-icon-opacity, 0.38);--_text-field-error-active-indicator-color: var(--md-filled-select-text-field-error-active-indicator-color, var(--md-sys-color-error, #b3261e));--_text-field-error-focus-active-indicator-color: var(--md-filled-select-text-field-error-focus-active-indicator-color, var(--md-sys-color-error, #b3261e));--_text-field-error-focus-input-text-color: var(--md-filled-select-text-field-error-focus-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-error-focus-label-text-color: var(--md-filled-select-text-field-error-focus-label-text-color, var(--md-sys-color-error, #b3261e));--_text-field-error-focus-leading-icon-color: var(--md-filled-select-text-field-error-focus-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-error-focus-supporting-text-color: var(--md-filled-select-text-field-error-focus-supporting-text-color, var(--md-sys-color-error, #b3261e));--_text-field-error-focus-trailing-icon-color: var(--md-filled-select-text-field-error-focus-trailing-icon-color, var(--md-sys-color-error, #b3261e));--_text-field-error-hover-active-indicator-color: var(--md-filled-select-text-field-error-hover-active-indicator-color, var(--md-sys-color-on-error-container, #410e0b));--_text-field-error-hover-input-text-color: var(--md-filled-select-text-field-error-hover-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-error-hover-label-text-color: var(--md-filled-select-text-field-error-hover-label-text-color, var(--md-sys-color-on-error-container, #410e0b));--_text-field-error-hover-leading-icon-color: var(--md-filled-select-text-field-error-hover-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-error-hover-state-layer-color: var(--md-filled-select-text-field-error-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-error-hover-state-layer-opacity: var(--md-filled-select-text-field-error-hover-state-layer-opacity, 0.08);--_text-field-error-hover-supporting-text-color: var(--md-filled-select-text-field-error-hover-supporting-text-color, var(--md-sys-color-error, #b3261e));--_text-field-error-hover-trailing-icon-color: var(--md-filled-select-text-field-error-hover-trailing-icon-color, var(--md-sys-color-on-error-container, #410e0b));--_text-field-error-input-text-color: var(--md-filled-select-text-field-error-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-error-label-text-color: var(--md-filled-select-text-field-error-label-text-color, var(--md-sys-color-error, #b3261e));--_text-field-error-leading-icon-color: var(--md-filled-select-text-field-error-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-error-supporting-text-color: var(--md-filled-select-text-field-error-supporting-text-color, var(--md-sys-color-error, #b3261e));--_text-field-error-trailing-icon-color: var(--md-filled-select-text-field-error-trailing-icon-color, var(--md-sys-color-error, #b3261e));--_text-field-focus-active-indicator-color: var(--md-filled-select-text-field-focus-active-indicator-color, var(--md-sys-color-primary, #6750a4));--_text-field-focus-active-indicator-height: var(--md-filled-select-text-field-focus-active-indicator-height, 3px);--_text-field-focus-input-text-color: var(--md-filled-select-text-field-focus-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-focus-label-text-color: var(--md-filled-select-text-field-focus-label-text-color, var(--md-sys-color-primary, #6750a4));--_text-field-focus-leading-icon-color: var(--md-filled-select-text-field-focus-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-focus-supporting-text-color: var(--md-filled-select-text-field-focus-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-focus-trailing-icon-color: var(--md-filled-select-text-field-focus-trailing-icon-color, var(--md-sys-color-primary, #6750a4));--_text-field-hover-active-indicator-color: var(--md-filled-select-text-field-hover-active-indicator-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-hover-active-indicator-height: var(--md-filled-select-text-field-hover-active-indicator-height, 1px);--_text-field-hover-input-text-color: var(--md-filled-select-text-field-hover-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-hover-label-text-color: var(--md-filled-select-text-field-hover-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-hover-leading-icon-color: var(--md-filled-select-text-field-hover-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-hover-state-layer-color: var(--md-filled-select-text-field-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-hover-state-layer-opacity: var(--md-filled-select-text-field-hover-state-layer-opacity, 0.08);--_text-field-hover-supporting-text-color: var(--md-filled-select-text-field-hover-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-hover-trailing-icon-color: var(--md-filled-select-text-field-hover-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-input-text-color: var(--md-filled-select-text-field-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-input-text-font: var(--md-filled-select-text-field-input-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_text-field-input-text-line-height: var(--md-filled-select-text-field-input-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_text-field-input-text-size: var(--md-filled-select-text-field-input-text-size, var(--md-sys-typescale-body-large-size, 1rem));--_text-field-input-text-weight: var(--md-filled-select-text-field-input-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_text-field-label-text-color: var(--md-filled-select-text-field-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-label-text-font: var(--md-filled-select-text-field-label-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_text-field-label-text-line-height: var(--md-filled-select-text-field-label-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_text-field-label-text-populated-line-height: var(--md-filled-select-text-field-label-text-populated-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_text-field-label-text-populated-size: var(--md-filled-select-text-field-label-text-populated-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_text-field-label-text-size: var(--md-filled-select-text-field-label-text-size, var(--md-sys-typescale-body-large-size, 1rem));--_text-field-label-text-weight: var(--md-filled-select-text-field-label-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_text-field-leading-icon-color: var(--md-filled-select-text-field-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-leading-icon-size: var(--md-filled-select-text-field-leading-icon-size, 24px);--_text-field-supporting-text-color: var(--md-filled-select-text-field-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-supporting-text-font: var(--md-filled-select-text-field-supporting-text-font, var(--md-sys-typescale-body-small-font, var(--md-ref-typeface-plain, Roboto)));--_text-field-supporting-text-line-height: var(--md-filled-select-text-field-supporting-text-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_text-field-supporting-text-size: var(--md-filled-select-text-field-supporting-text-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_text-field-supporting-text-weight: var(--md-filled-select-text-field-supporting-text-weight, var(--md-sys-typescale-body-small-weight, var(--md-ref-typeface-weight-regular, 400)));--_text-field-trailing-icon-color: var(--md-filled-select-text-field-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-trailing-icon-size: var(--md-filled-select-text-field-trailing-icon-size, 24px);--_text-field-container-shape-start-start: var(--md-filled-select-text-field-container-shape-start-start, var(--md-filled-select-text-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_text-field-container-shape-start-end: var(--md-filled-select-text-field-container-shape-start-end, var(--md-filled-select-text-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_text-field-container-shape-end-end: var(--md-filled-select-text-field-container-shape-end-end, var(--md-filled-select-text-field-container-shape, var(--md-sys-shape-corner-none, 0px)));--_text-field-container-shape-end-start: var(--md-filled-select-text-field-container-shape-end-start, var(--md-filled-select-text-field-container-shape, var(--md-sys-shape-corner-none, 0px)));--md-filled-field-active-indicator-color: var(--_text-field-active-indicator-color);--md-filled-field-active-indicator-height: var(--_text-field-active-indicator-height);--md-filled-field-container-color: var(--_text-field-container-color);--md-filled-field-container-shape-end-end: var(--_text-field-container-shape-end-end);--md-filled-field-container-shape-end-start: var(--_text-field-container-shape-end-start);--md-filled-field-container-shape-start-end: var(--_text-field-container-shape-start-end);--md-filled-field-container-shape-start-start: var(--_text-field-container-shape-start-start);--md-filled-field-content-color: var(--_text-field-input-text-color);--md-filled-field-content-font: var(--_text-field-input-text-font);--md-filled-field-content-line-height: var(--_text-field-input-text-line-height);--md-filled-field-content-size: var(--_text-field-input-text-size);--md-filled-field-content-weight: var(--_text-field-input-text-weight);--md-filled-field-disabled-active-indicator-color: var(--_text-field-disabled-active-indicator-color);--md-filled-field-disabled-active-indicator-height: var(--_text-field-disabled-active-indicator-height);--md-filled-field-disabled-active-indicator-opacity: var(--_text-field-disabled-active-indicator-opacity);--md-filled-field-disabled-container-color: var(--_text-field-disabled-container-color);--md-filled-field-disabled-container-opacity: var(--_text-field-disabled-container-opacity);--md-filled-field-disabled-content-color: var(--_text-field-disabled-input-text-color);--md-filled-field-disabled-content-opacity: var(--_text-field-disabled-input-text-opacity);--md-filled-field-disabled-label-text-color: var(--_text-field-disabled-label-text-color);--md-filled-field-disabled-label-text-opacity: var(--_text-field-disabled-label-text-opacity);--md-filled-field-disabled-leading-content-color: var(--_text-field-disabled-leading-icon-color);--md-filled-field-disabled-leading-content-opacity: var(--_text-field-disabled-leading-icon-opacity);--md-filled-field-disabled-supporting-text-color: var(--_text-field-disabled-supporting-text-color);--md-filled-field-disabled-supporting-text-opacity: var(--_text-field-disabled-supporting-text-opacity);--md-filled-field-disabled-trailing-content-color: var(--_text-field-disabled-trailing-icon-color);--md-filled-field-disabled-trailing-content-opacity: var(--_text-field-disabled-trailing-icon-opacity);--md-filled-field-error-active-indicator-color: var(--_text-field-error-active-indicator-color);--md-filled-field-error-content-color: var(--_text-field-error-input-text-color);--md-filled-field-error-focus-active-indicator-color: var(--_text-field-error-focus-active-indicator-color);--md-filled-field-error-focus-content-color: var(--_text-field-error-focus-input-text-color);--md-filled-field-error-focus-label-text-color: var(--_text-field-error-focus-label-text-color);--md-filled-field-error-focus-leading-content-color: var(--_text-field-error-focus-leading-icon-color);--md-filled-field-error-focus-supporting-text-color: var(--_text-field-error-focus-supporting-text-color);--md-filled-field-error-focus-trailing-content-color: var(--_text-field-error-focus-trailing-icon-color);--md-filled-field-error-hover-active-indicator-color: var(--_text-field-error-hover-active-indicator-color);--md-filled-field-error-hover-content-color: var(--_text-field-error-hover-input-text-color);--md-filled-field-error-hover-label-text-color: var(--_text-field-error-hover-label-text-color);--md-filled-field-error-hover-leading-content-color: var(--_text-field-error-hover-leading-icon-color);--md-filled-field-error-hover-state-layer-color: var(--_text-field-error-hover-state-layer-color);--md-filled-field-error-hover-state-layer-opacity: var(--_text-field-error-hover-state-layer-opacity);--md-filled-field-error-hover-supporting-text-color: var(--_text-field-error-hover-supporting-text-color);--md-filled-field-error-hover-trailing-content-color: var(--_text-field-error-hover-trailing-icon-color);--md-filled-field-error-label-text-color: var(--_text-field-error-label-text-color);--md-filled-field-error-leading-content-color: var(--_text-field-error-leading-icon-color);--md-filled-field-error-supporting-text-color: var(--_text-field-error-supporting-text-color);--md-filled-field-error-trailing-content-color: var(--_text-field-error-trailing-icon-color);--md-filled-field-focus-active-indicator-color: var(--_text-field-focus-active-indicator-color);--md-filled-field-focus-active-indicator-height: var(--_text-field-focus-active-indicator-height);--md-filled-field-focus-content-color: var(--_text-field-focus-input-text-color);--md-filled-field-focus-label-text-color: var(--_text-field-focus-label-text-color);--md-filled-field-focus-leading-content-color: var(--_text-field-focus-leading-icon-color);--md-filled-field-focus-supporting-text-color: var(--_text-field-focus-supporting-text-color);--md-filled-field-focus-trailing-content-color: var(--_text-field-focus-trailing-icon-color);--md-filled-field-hover-active-indicator-color: var(--_text-field-hover-active-indicator-color);--md-filled-field-hover-active-indicator-height: var(--_text-field-hover-active-indicator-height);--md-filled-field-hover-content-color: var(--_text-field-hover-input-text-color);--md-filled-field-hover-label-text-color: var(--_text-field-hover-label-text-color);--md-filled-field-hover-leading-content-color: var(--_text-field-hover-leading-icon-color);--md-filled-field-hover-state-layer-color: var(--_text-field-hover-state-layer-color);--md-filled-field-hover-state-layer-opacity: var(--_text-field-hover-state-layer-opacity);--md-filled-field-hover-supporting-text-color: var(--_text-field-hover-supporting-text-color);--md-filled-field-hover-trailing-content-color: var(--_text-field-hover-trailing-icon-color);--md-filled-field-label-text-color: var(--_text-field-label-text-color);--md-filled-field-label-text-font: var(--_text-field-label-text-font);--md-filled-field-label-text-line-height: var(--_text-field-label-text-line-height);--md-filled-field-label-text-populated-line-height: var(--_text-field-label-text-populated-line-height);--md-filled-field-label-text-populated-size: var(--_text-field-label-text-populated-size);--md-filled-field-label-text-size: var(--_text-field-label-text-size);--md-filled-field-label-text-weight: var(--_text-field-label-text-weight);--md-filled-field-leading-content-color: var(--_text-field-leading-icon-color);--md-filled-field-supporting-text-color: var(--_text-field-supporting-text-color);--md-filled-field-supporting-text-font: var(--_text-field-supporting-text-font);--md-filled-field-supporting-text-line-height: var(--_text-field-supporting-text-line-height);--md-filled-field-supporting-text-size: var(--_text-field-supporting-text-size);--md-filled-field-supporting-text-weight: var(--_text-field-supporting-text-weight);--md-filled-field-trailing-content-color: var(--_text-field-trailing-icon-color)}[has-start] .icon.leading{font-size:var(--_text-field-leading-icon-size);height:var(--_text-field-leading-icon-size);width:var(--_text-field-leading-icon-size)}.icon.trailing{font-size:var(--_text-field-trailing-icon-size);height:var(--_text-field-trailing-icon-size);width:var(--_text-field-trailing-icon-size)}
`,ar=l`:host{color:unset;min-width:210px;display:flex}.field{cursor:default;outline:none}.select{position:relative;flex-direction:column}.icon.trailing svg,.icon ::slotted(*){fill:currentColor}.icon ::slotted(*){width:inherit;height:inherit;font-size:inherit}.icon slot{display:flex;height:100%;width:100%;align-items:center;justify-content:center}.icon.trailing :is(.up,.down){opacity:0;transition:opacity 75ms linear 75ms}.select:not(.open) .down,.select.open .up{opacity:1}.field,.select,md-menu{min-width:inherit;width:inherit;max-width:inherit;display:flex}md-menu{min-width:var(--__menu-min-width);max-width:var(--__menu-max-width, inherit)}.menu-wrapper{width:0px;height:0px;max-width:inherit}md-menu ::slotted(:not[disabled]){cursor:pointer}.field,.select{width:100%}:host{display:inline-flex}:host([disabled]){pointer-events:none}
`
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let lr=class extends or{};lr.styles=[ar,sr],lr=t([i("md-filled-select")],lr);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class cr extends nr{constructor(){super(...arguments),this.fieldTag=Et`md-outlined-field`}}
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dr=l`:host{--_text-field-disabled-input-text-color: var(--md-outlined-select-text-field-disabled-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-input-text-opacity: var(--md-outlined-select-text-field-disabled-input-text-opacity, 0.38);--_text-field-disabled-label-text-color: var(--md-outlined-select-text-field-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-label-text-opacity: var(--md-outlined-select-text-field-disabled-label-text-opacity, 0.38);--_text-field-disabled-leading-icon-color: var(--md-outlined-select-text-field-disabled-leading-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-leading-icon-opacity: var(--md-outlined-select-text-field-disabled-leading-icon-opacity, 0.38);--_text-field-disabled-outline-color: var(--md-outlined-select-text-field-disabled-outline-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-outline-opacity: var(--md-outlined-select-text-field-disabled-outline-opacity, 0.12);--_text-field-disabled-outline-width: var(--md-outlined-select-text-field-disabled-outline-width, 1px);--_text-field-disabled-supporting-text-color: var(--md-outlined-select-text-field-disabled-supporting-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-supporting-text-opacity: var(--md-outlined-select-text-field-disabled-supporting-text-opacity, 0.38);--_text-field-disabled-trailing-icon-color: var(--md-outlined-select-text-field-disabled-trailing-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-trailing-icon-opacity: var(--md-outlined-select-text-field-disabled-trailing-icon-opacity, 0.38);--_text-field-error-focus-input-text-color: var(--md-outlined-select-text-field-error-focus-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-error-focus-label-text-color: var(--md-outlined-select-text-field-error-focus-label-text-color, var(--md-sys-color-error, #b3261e));--_text-field-error-focus-leading-icon-color: var(--md-outlined-select-text-field-error-focus-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-error-focus-outline-color: var(--md-outlined-select-text-field-error-focus-outline-color, var(--md-sys-color-error, #b3261e));--_text-field-error-focus-supporting-text-color: var(--md-outlined-select-text-field-error-focus-supporting-text-color, var(--md-sys-color-error, #b3261e));--_text-field-error-focus-trailing-icon-color: var(--md-outlined-select-text-field-error-focus-trailing-icon-color, var(--md-sys-color-error, #b3261e));--_text-field-error-hover-input-text-color: var(--md-outlined-select-text-field-error-hover-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-error-hover-label-text-color: var(--md-outlined-select-text-field-error-hover-label-text-color, var(--md-sys-color-on-error-container, #410e0b));--_text-field-error-hover-leading-icon-color: var(--md-outlined-select-text-field-error-hover-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-error-hover-outline-color: var(--md-outlined-select-text-field-error-hover-outline-color, var(--md-sys-color-on-error-container, #410e0b));--_text-field-error-hover-supporting-text-color: var(--md-outlined-select-text-field-error-hover-supporting-text-color, var(--md-sys-color-error, #b3261e));--_text-field-error-hover-trailing-icon-color: var(--md-outlined-select-text-field-error-hover-trailing-icon-color, var(--md-sys-color-on-error-container, #410e0b));--_text-field-error-input-text-color: var(--md-outlined-select-text-field-error-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-error-label-text-color: var(--md-outlined-select-text-field-error-label-text-color, var(--md-sys-color-error, #b3261e));--_text-field-error-leading-icon-color: var(--md-outlined-select-text-field-error-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-error-outline-color: var(--md-outlined-select-text-field-error-outline-color, var(--md-sys-color-error, #b3261e));--_text-field-error-supporting-text-color: var(--md-outlined-select-text-field-error-supporting-text-color, var(--md-sys-color-error, #b3261e));--_text-field-error-trailing-icon-color: var(--md-outlined-select-text-field-error-trailing-icon-color, var(--md-sys-color-error, #b3261e));--_text-field-focus-input-text-color: var(--md-outlined-select-text-field-focus-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-focus-label-text-color: var(--md-outlined-select-text-field-focus-label-text-color, var(--md-sys-color-primary, #6750a4));--_text-field-focus-leading-icon-color: var(--md-outlined-select-text-field-focus-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-focus-outline-color: var(--md-outlined-select-text-field-focus-outline-color, var(--md-sys-color-primary, #6750a4));--_text-field-focus-outline-width: var(--md-outlined-select-text-field-focus-outline-width, 3px);--_text-field-focus-supporting-text-color: var(--md-outlined-select-text-field-focus-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-focus-trailing-icon-color: var(--md-outlined-select-text-field-focus-trailing-icon-color, var(--md-sys-color-primary, #6750a4));--_text-field-hover-input-text-color: var(--md-outlined-select-text-field-hover-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-hover-label-text-color: var(--md-outlined-select-text-field-hover-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-hover-leading-icon-color: var(--md-outlined-select-text-field-hover-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-hover-outline-color: var(--md-outlined-select-text-field-hover-outline-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-hover-outline-width: var(--md-outlined-select-text-field-hover-outline-width, 1px);--_text-field-hover-supporting-text-color: var(--md-outlined-select-text-field-hover-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-hover-trailing-icon-color: var(--md-outlined-select-text-field-hover-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-input-text-color: var(--md-outlined-select-text-field-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-input-text-font: var(--md-outlined-select-text-field-input-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_text-field-input-text-line-height: var(--md-outlined-select-text-field-input-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_text-field-input-text-size: var(--md-outlined-select-text-field-input-text-size, var(--md-sys-typescale-body-large-size, 1rem));--_text-field-input-text-weight: var(--md-outlined-select-text-field-input-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_text-field-label-text-color: var(--md-outlined-select-text-field-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-label-text-font: var(--md-outlined-select-text-field-label-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_text-field-label-text-line-height: var(--md-outlined-select-text-field-label-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_text-field-label-text-populated-line-height: var(--md-outlined-select-text-field-label-text-populated-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_text-field-label-text-populated-size: var(--md-outlined-select-text-field-label-text-populated-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_text-field-label-text-size: var(--md-outlined-select-text-field-label-text-size, var(--md-sys-typescale-body-large-size, 1rem));--_text-field-label-text-weight: var(--md-outlined-select-text-field-label-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_text-field-leading-icon-color: var(--md-outlined-select-text-field-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-leading-icon-size: var(--md-outlined-select-text-field-leading-icon-size, 24px);--_text-field-outline-color: var(--md-outlined-select-text-field-outline-color, var(--md-sys-color-outline, #79747e));--_text-field-outline-width: var(--md-outlined-select-text-field-outline-width, 1px);--_text-field-supporting-text-color: var(--md-outlined-select-text-field-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-supporting-text-font: var(--md-outlined-select-text-field-supporting-text-font, var(--md-sys-typescale-body-small-font, var(--md-ref-typeface-plain, Roboto)));--_text-field-supporting-text-line-height: var(--md-outlined-select-text-field-supporting-text-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_text-field-supporting-text-size: var(--md-outlined-select-text-field-supporting-text-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_text-field-supporting-text-weight: var(--md-outlined-select-text-field-supporting-text-weight, var(--md-sys-typescale-body-small-weight, var(--md-ref-typeface-weight-regular, 400)));--_text-field-trailing-icon-color: var(--md-outlined-select-text-field-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-trailing-icon-size: var(--md-outlined-select-text-field-trailing-icon-size, 24px);--_text-field-container-shape-start-start: var(--md-outlined-select-text-field-container-shape-start-start, var(--md-outlined-select-text-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_text-field-container-shape-start-end: var(--md-outlined-select-text-field-container-shape-start-end, var(--md-outlined-select-text-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_text-field-container-shape-end-end: var(--md-outlined-select-text-field-container-shape-end-end, var(--md-outlined-select-text-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--_text-field-container-shape-end-start: var(--md-outlined-select-text-field-container-shape-end-start, var(--md-outlined-select-text-field-container-shape, var(--md-sys-shape-corner-extra-small, 4px)));--md-outlined-field-container-shape-end-end: var(--_text-field-container-shape-end-end);--md-outlined-field-container-shape-end-start: var(--_text-field-container-shape-end-start);--md-outlined-field-container-shape-start-end: var(--_text-field-container-shape-start-end);--md-outlined-field-container-shape-start-start: var(--_text-field-container-shape-start-start);--md-outlined-field-content-color: var(--_text-field-input-text-color);--md-outlined-field-content-font: var(--_text-field-input-text-font);--md-outlined-field-content-line-height: var(--_text-field-input-text-line-height);--md-outlined-field-content-size: var(--_text-field-input-text-size);--md-outlined-field-content-weight: var(--_text-field-input-text-weight);--md-outlined-field-disabled-content-color: var(--_text-field-disabled-input-text-color);--md-outlined-field-disabled-content-opacity: var(--_text-field-disabled-input-text-opacity);--md-outlined-field-disabled-label-text-color: var(--_text-field-disabled-label-text-color);--md-outlined-field-disabled-label-text-opacity: var(--_text-field-disabled-label-text-opacity);--md-outlined-field-disabled-leading-content-color: var(--_text-field-disabled-leading-icon-color);--md-outlined-field-disabled-leading-content-opacity: var(--_text-field-disabled-leading-icon-opacity);--md-outlined-field-disabled-outline-color: var(--_text-field-disabled-outline-color);--md-outlined-field-disabled-outline-opacity: var(--_text-field-disabled-outline-opacity);--md-outlined-field-disabled-outline-width: var(--_text-field-disabled-outline-width);--md-outlined-field-disabled-supporting-text-color: var(--_text-field-disabled-supporting-text-color);--md-outlined-field-disabled-supporting-text-opacity: var(--_text-field-disabled-supporting-text-opacity);--md-outlined-field-disabled-trailing-content-color: var(--_text-field-disabled-trailing-icon-color);--md-outlined-field-disabled-trailing-content-opacity: var(--_text-field-disabled-trailing-icon-opacity);--md-outlined-field-error-content-color: var(--_text-field-error-input-text-color);--md-outlined-field-error-focus-content-color: var(--_text-field-error-focus-input-text-color);--md-outlined-field-error-focus-label-text-color: var(--_text-field-error-focus-label-text-color);--md-outlined-field-error-focus-leading-content-color: var(--_text-field-error-focus-leading-icon-color);--md-outlined-field-error-focus-outline-color: var(--_text-field-error-focus-outline-color);--md-outlined-field-error-focus-supporting-text-color: var(--_text-field-error-focus-supporting-text-color);--md-outlined-field-error-focus-trailing-content-color: var(--_text-field-error-focus-trailing-icon-color);--md-outlined-field-error-hover-content-color: var(--_text-field-error-hover-input-text-color);--md-outlined-field-error-hover-label-text-color: var(--_text-field-error-hover-label-text-color);--md-outlined-field-error-hover-leading-content-color: var(--_text-field-error-hover-leading-icon-color);--md-outlined-field-error-hover-outline-color: var(--_text-field-error-hover-outline-color);--md-outlined-field-error-hover-supporting-text-color: var(--_text-field-error-hover-supporting-text-color);--md-outlined-field-error-hover-trailing-content-color: var(--_text-field-error-hover-trailing-icon-color);--md-outlined-field-error-label-text-color: var(--_text-field-error-label-text-color);--md-outlined-field-error-leading-content-color: var(--_text-field-error-leading-icon-color);--md-outlined-field-error-outline-color: var(--_text-field-error-outline-color);--md-outlined-field-error-supporting-text-color: var(--_text-field-error-supporting-text-color);--md-outlined-field-error-trailing-content-color: var(--_text-field-error-trailing-icon-color);--md-outlined-field-focus-content-color: var(--_text-field-focus-input-text-color);--md-outlined-field-focus-label-text-color: var(--_text-field-focus-label-text-color);--md-outlined-field-focus-leading-content-color: var(--_text-field-focus-leading-icon-color);--md-outlined-field-focus-outline-color: var(--_text-field-focus-outline-color);--md-outlined-field-focus-outline-width: var(--_text-field-focus-outline-width);--md-outlined-field-focus-supporting-text-color: var(--_text-field-focus-supporting-text-color);--md-outlined-field-focus-trailing-content-color: var(--_text-field-focus-trailing-icon-color);--md-outlined-field-hover-content-color: var(--_text-field-hover-input-text-color);--md-outlined-field-hover-label-text-color: var(--_text-field-hover-label-text-color);--md-outlined-field-hover-leading-content-color: var(--_text-field-hover-leading-icon-color);--md-outlined-field-hover-outline-color: var(--_text-field-hover-outline-color);--md-outlined-field-hover-outline-width: var(--_text-field-hover-outline-width);--md-outlined-field-hover-supporting-text-color: var(--_text-field-hover-supporting-text-color);--md-outlined-field-hover-trailing-content-color: var(--_text-field-hover-trailing-icon-color);--md-outlined-field-label-text-color: var(--_text-field-label-text-color);--md-outlined-field-label-text-font: var(--_text-field-label-text-font);--md-outlined-field-label-text-line-height: var(--_text-field-label-text-line-height);--md-outlined-field-label-text-populated-line-height: var(--_text-field-label-text-populated-line-height);--md-outlined-field-label-text-populated-size: var(--_text-field-label-text-populated-size);--md-outlined-field-label-text-size: var(--_text-field-label-text-size);--md-outlined-field-label-text-weight: var(--_text-field-label-text-weight);--md-outlined-field-leading-content-color: var(--_text-field-leading-icon-color);--md-outlined-field-outline-color: var(--_text-field-outline-color);--md-outlined-field-outline-width: var(--_text-field-outline-width);--md-outlined-field-supporting-text-color: var(--_text-field-supporting-text-color);--md-outlined-field-supporting-text-font: var(--_text-field-supporting-text-font);--md-outlined-field-supporting-text-line-height: var(--_text-field-supporting-text-line-height);--md-outlined-field-supporting-text-size: var(--_text-field-supporting-text-size);--md-outlined-field-supporting-text-weight: var(--_text-field-supporting-text-weight);--md-outlined-field-trailing-content-color: var(--_text-field-trailing-icon-color)}[has-start] .icon.leading{font-size:var(--_text-field-leading-icon-size);height:var(--_text-field-leading-icon-size);width:var(--_text-field-leading-icon-size)}.icon.trailing{font-size:var(--_text-field-trailing-icon-size);height:var(--_text-field-trailing-icon-size);width:var(--_text-field-trailing-icon-size)}
`
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let hr=class extends cr{};hr.styles=[ar,dr],hr=t([i("md-outlined-select")],hr);
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const ur=l`:host{display:flex;--md-ripple-hover-color: var(--md-menu-item-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--md-ripple-hover-opacity: var(--md-menu-item-hover-state-layer-opacity, 0.08);--md-ripple-pressed-color: var(--md-menu-item-pressed-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--md-ripple-pressed-opacity: var(--md-menu-item-pressed-state-layer-opacity, 0.12)}:host([disabled]){opacity:var(--md-menu-item-disabled-opacity, 0.3);pointer-events:none}md-focus-ring{z-index:1;--md-focus-ring-shape: 8px}a,button,li{background:none;border:none;padding:0;margin:0;text-align:unset;text-decoration:none}.list-item{border-radius:inherit;display:flex;flex:1;max-width:inherit;min-width:inherit;outline:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.list-item:not(.disabled){cursor:pointer}[slot=container]{pointer-events:none}md-ripple{border-radius:inherit}md-item{border-radius:inherit;flex:1;color:var(--md-menu-item-label-text-color, var(--md-sys-color-on-surface, #1d1b20));font-family:var(--md-menu-item-label-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));font-size:var(--md-menu-item-label-text-size, var(--md-sys-typescale-body-large-size, 1rem));line-height:var(--md-menu-item-label-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));font-weight:var(--md-menu-item-label-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));min-height:var(--md-menu-item-one-line-container-height, 56px);padding-top:var(--md-menu-item-top-space, 12px);padding-bottom:var(--md-menu-item-bottom-space, 12px);padding-inline-start:var(--md-menu-item-leading-space, 16px);padding-inline-end:var(--md-menu-item-trailing-space, 16px)}md-item[multiline]{min-height:var(--md-menu-item-two-line-container-height, 72px)}[slot=supporting-text]{color:var(--md-menu-item-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));font-family:var(--md-menu-item-supporting-text-font, var(--md-sys-typescale-body-medium-font, var(--md-ref-typeface-plain, Roboto)));font-size:var(--md-menu-item-supporting-text-size, var(--md-sys-typescale-body-medium-size, 0.875rem));line-height:var(--md-menu-item-supporting-text-line-height, var(--md-sys-typescale-body-medium-line-height, 1.25rem));font-weight:var(--md-menu-item-supporting-text-weight, var(--md-sys-typescale-body-medium-weight, var(--md-ref-typeface-weight-regular, 400)))}[slot=trailing-supporting-text]{color:var(--md-menu-item-trailing-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));font-family:var(--md-menu-item-trailing-supporting-text-font, var(--md-sys-typescale-label-small-font, var(--md-ref-typeface-plain, Roboto)));font-size:var(--md-menu-item-trailing-supporting-text-size, var(--md-sys-typescale-label-small-size, 0.6875rem));line-height:var(--md-menu-item-trailing-supporting-text-line-height, var(--md-sys-typescale-label-small-line-height, 1rem));font-weight:var(--md-menu-item-trailing-supporting-text-weight, var(--md-sys-typescale-label-small-weight, var(--md-ref-typeface-weight-medium, 500)))}:is([slot=start],[slot=end])::slotted(*){fill:currentColor}[slot=start]{color:var(--md-menu-item-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f))}[slot=end]{color:var(--md-menu-item-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f))}.list-item{background-color:var(--md-menu-item-container-color, transparent)}.list-item.selected{background-color:var(--md-menu-item-selected-container-color, var(--md-sys-color-secondary-container, #e8def8))}.selected:not(.disabled) ::slotted(*){color:var(--md-menu-item-selected-label-text-color, var(--md-sys-color-on-secondary-container, #1d192b))}@media(forced-colors: active){:host([disabled]),:host([disabled]) slot{color:GrayText;opacity:1}.list-item{position:relative}.list-item.selected::before{content:"";position:absolute;inset:0;box-sizing:border-box;border-radius:inherit;pointer-events:none;border:3px double CanvasText}}
`
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;class pr extends ve{constructor(){super(...arguments),this.multiline=!1}render(){return K`
      <slot name="container"></slot>
      <slot class="non-text" name="start"></slot>
      <div class="text">
        <slot name="overline" @slotchange=${this.handleTextSlotChange}></slot>
        <slot
          class="default-slot"
          @slotchange=${this.handleTextSlotChange}></slot>
        <slot name="headline" @slotchange=${this.handleTextSlotChange}></slot>
        <slot
          name="supporting-text"
          @slotchange=${this.handleTextSlotChange}></slot>
      </div>
      <slot class="non-text" name="trailing-supporting-text"></slot>
      <slot class="non-text" name="end"></slot>
    `}handleTextSlotChange(){let e=!1,t=0;for(const i of this.textSlots)if(fr(i)&&(t+=1),t>1){e=!0;break}this.multiline=e}}function fr(e){for(const t of e.assignedNodes({flatten:!0})){const e=t.nodeType===Node.ELEMENT_NODE,i=t.nodeType===Node.TEXT_NODE&&t.textContent?.match(/\S/);if(e||i)return!0}return!1}
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */t([C({type:Boolean,reflect:!0})],pr.prototype,"multiline",void 0),t([function(e){return(t,i)=>E(t,i,{get(){return(this.renderRoot??(A??=document.createDocumentFragment())).querySelectorAll(e)}})}(".text slot")],pr.prototype,"textSlots",void 0);const mr=l`:host{color:var(--md-sys-color-on-surface, #1d1b20);font-family:var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto));font-size:var(--md-sys-typescale-body-large-size, 1rem);font-weight:var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400));line-height:var(--md-sys-typescale-body-large-line-height, 1.5rem);align-items:center;box-sizing:border-box;display:flex;gap:16px;min-height:56px;overflow:hidden;padding:12px 16px;position:relative;text-overflow:ellipsis}:host([multiline]){min-height:72px}[name=overline]{color:var(--md-sys-color-on-surface-variant, #49454f);font-family:var(--md-sys-typescale-label-small-font, var(--md-ref-typeface-plain, Roboto));font-size:var(--md-sys-typescale-label-small-size, 0.6875rem);font-weight:var(--md-sys-typescale-label-small-weight, var(--md-ref-typeface-weight-medium, 500));line-height:var(--md-sys-typescale-label-small-line-height, 1rem)}[name=supporting-text]{color:var(--md-sys-color-on-surface-variant, #49454f);font-family:var(--md-sys-typescale-body-medium-font, var(--md-ref-typeface-plain, Roboto));font-size:var(--md-sys-typescale-body-medium-size, 0.875rem);font-weight:var(--md-sys-typescale-body-medium-weight, var(--md-ref-typeface-weight-regular, 400));line-height:var(--md-sys-typescale-body-medium-line-height, 1.25rem)}[name=trailing-supporting-text]{color:var(--md-sys-color-on-surface-variant, #49454f);font-family:var(--md-sys-typescale-label-small-font, var(--md-ref-typeface-plain, Roboto));font-size:var(--md-sys-typescale-label-small-size, 0.6875rem);font-weight:var(--md-sys-typescale-label-small-weight, var(--md-ref-typeface-weight-medium, 500));line-height:var(--md-sys-typescale-label-small-line-height, 1rem)}[name=container]::slotted(*){inset:0;position:absolute}.default-slot{display:inline}.default-slot,.text ::slotted(*){overflow:hidden;text-overflow:ellipsis}.text{display:flex;flex:1;flex-direction:column;overflow:hidden}
`
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let gr=class extends pr{};gr.styles=[mr],gr=t([i("md-item")],gr);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class vr{constructor(e,t){this.host=e,this.internalTypeaheadText=null,this.onClick=()=>{this.host.keepOpen||this.host.dispatchEvent(Ai(this.host,{kind:Qi}))},this.onKeydown=e=>{if(this.host.href&&"Enter"===e.code){const e=this.getInteractiveElement();e instanceof HTMLAnchorElement&&e.click()}if(e.defaultPrevented)return;const t=e.code;this.host.keepOpen&&"Escape"!==t||Mi(t)&&(e.preventDefault(),this.host.dispatchEvent(Ai(this.host,{kind:Ri,key:t})))},this.getHeadlineElements=t.getHeadlineElements,this.getSupportingTextElements=t.getSupportingTextElements,this.getDefaultElements=t.getDefaultElements,this.getInteractiveElement=t.getInteractiveElement,this.host.addController(this)}get typeaheadText(){if(null!==this.internalTypeaheadText)return this.internalTypeaheadText;const e=this.getHeadlineElements(),t=[];return e.forEach(e=>{e.textContent&&e.textContent.trim()&&t.push(e.textContent.trim())}),0===t.length&&this.getDefaultElements().forEach(e=>{e.textContent&&e.textContent.trim()&&t.push(e.textContent.trim())}),0===t.length&&this.getSupportingTextElements().forEach(e=>{e.textContent&&e.textContent.trim()&&t.push(e.textContent.trim())}),t.join(" ")}get tagName(){switch(this.host.type){case"link":return"a";case"button":return"button";default:return"li"}}get role(){return"option"===this.host.type?"option":"menuitem"}hostConnected(){this.host.toggleAttribute("md-menu-item",!0)}hostUpdate(){this.host.href&&(this.host.type="link")}setTypeaheadText(e){this.internalTypeaheadText=e}}
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Or{get role(){return this.menuItemController.role}get typeaheadText(){return this.menuItemController.typeaheadText}setTypeaheadText(e){this.menuItemController.setTypeaheadText(e)}get displayText(){return null!==this.internalDisplayText?this.internalDisplayText:this.menuItemController.typeaheadText}setDisplayText(e){this.internalDisplayText=e}constructor(e,t){this.host=e,this.internalDisplayText=null,this.firstUpdate=!0,this.onClick=()=>{this.menuItemController.onClick()},this.onKeydown=e=>{this.menuItemController.onKeydown(e)},this.lastSelected=this.host.selected,this.menuItemController=new vr(e,t),e.addController(this)}hostUpdate(){this.lastSelected!==this.host.selected&&(this.host.ariaSelected=this.host.selected?"true":"false")}hostUpdated(){this.lastSelected===this.host.selected||this.firstUpdate||(this.host.selected?this.host.dispatchEvent(new Event("request-selection",{bubbles:!0,composed:!0})):this.host.dispatchEvent(new Event("request-deselection",{bubbles:!0,composed:!0}))),this.lastSelected=this.host.selected,this.firstUpdate=!1}}
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yr=Ge(ve);class br extends yr{constructor(){super(...arguments),this.disabled=!1,this.isMenuItem=!0,this.selected=!1,this.value="",this.type="option",this.selectOptionController=new Or(this,{getHeadlineElements:()=>this.headlineElements,getSupportingTextElements:()=>this.supportingTextElements,getDefaultElements:()=>this.defaultElements,getInteractiveElement:()=>this.listItemRoot})}get typeaheadText(){return this.selectOptionController.typeaheadText}set typeaheadText(e){this.selectOptionController.setTypeaheadText(e)}get displayText(){return this.selectOptionController.displayText}set displayText(e){this.selectOptionController.setDisplayText(e)}render(){return this.renderListItem(K`
      <md-item>
        <div slot="container">
          ${this.renderRipple()} ${this.renderFocusRing()}
        </div>
        <slot name="start" slot="start"></slot>
        <slot name="end" slot="end"></slot>
        ${this.renderBody()}
      </md-item>
    `)}renderListItem(e){return K`
      <li
        id="item"
        tabindex=${this.disabled?-1:0}
        role=${this.selectOptionController.role}
        aria-label=${this.ariaLabel||ee}
        aria-selected=${this.ariaSelected||ee}
        aria-checked=${this.ariaChecked||ee}
        aria-expanded=${this.ariaExpanded||ee}
        aria-haspopup=${this.ariaHasPopup||ee}
        class="list-item ${De(this.getRenderClasses())}"
        @click=${this.selectOptionController.onClick}
        @keydown=${this.selectOptionController.onKeydown}
        >${e}</li
      >
    `}renderRipple(){return K` <md-ripple
      part="ripple"
      for="item"
      ?disabled=${this.disabled}></md-ripple>`}renderFocusRing(){return K` <md-focus-ring
      part="focus-ring"
      for="item"
      inward></md-focus-ring>`}getRenderClasses(){return{disabled:this.disabled,selected:this.selected}}renderBody(){return K`
      <slot></slot>
      <slot name="overline" slot="overline"></slot>
      <slot name="headline" slot="headline"></slot>
      <slot name="supporting-text" slot="supporting-text"></slot>
      <slot
        name="trailing-supporting-text"
        slot="trailing-supporting-text"></slot>
    `}focus(){this.listItemRoot?.focus()}}br.shadowRootOptions={...ve.shadowRootOptions,delegatesFocus:!0},t([C({type:Boolean,reflect:!0})],br.prototype,"disabled",void 0),t([C({type:Boolean,attribute:"md-menu-item",reflect:!0})],br.prototype,"isMenuItem",void 0),t([C({type:Boolean})],br.prototype,"selected",void 0),t([C()],br.prototype,"value",void 0),t([$(".list-item")],br.prototype,"listItemRoot",void 0),t([I({slot:"headline"})],br.prototype,"headlineElements",void 0),t([I({slot:"supporting-text"})],br.prototype,"supportingTextElements",void 0),t([function(e){return(t,i)=>{const{slot:r}=e??{},n="slot"+(r?`[name=${r}]`:":not([name])");return E(t,i,{get(){const t=this.renderRoot?.querySelector(n);return t?.assignedNodes(e)??[]}})}}({slot:""})],br.prototype,"defaultElements",void 0),t([C({attribute:"typeahead-text"})],br.prototype,"typeaheadText",null),t([C({attribute:"display-text"})],br.prototype,"displayText",null);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
let xr=class extends br{};xr.styles=[ur],xr=t([i("md-select-option")],xr);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const wr=Ge(ve);class kr extends wr{constructor(){super(...arguments),this.value=0,this.max=1,this.indeterminate=!1,this.fourColor=!1}render(){const{ariaLabel:e}=this;return K`
      <div
        class="progress ${De(this.getRenderClasses())}"
        role="progressbar"
        aria-label="${e||ee}"
        aria-valuemin="0"
        aria-valuemax=${this.max}
        aria-valuenow=${this.indeterminate?ee:this.value}
        >${this.renderIndicator()}</div
      >
    `}getRenderClasses(){return{indeterminate:this.indeterminate,"four-color":this.fourColor}}}t([C({type:Number})],kr.prototype,"value",void 0),t([C({type:Number})],kr.prototype,"max",void 0),t([C({type:Boolean})],kr.prototype,"indeterminate",void 0),t([C({type:Boolean,attribute:"four-color"})],kr.prototype,"fourColor",void 0);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class Sr extends kr{renderIndicator(){return this.indeterminate?this.renderIndeterminateContainer():this.renderDeterminateContainer()}renderDeterminateContainer(){const e=100*(1-this.value/this.max);return K`
      <svg viewBox="0 0 4800 4800">
        <circle class="track" pathLength="100"></circle>
        <circle
          class="active-track"
          pathLength="100"
          stroke-dashoffset=${e}></circle>
      </svg>
    `}renderIndeterminateContainer(){return K` <div class="spinner">
      <div class="left">
        <div class="circle"></div>
      </div>
      <div class="right">
        <div class="circle"></div>
      </div>
    </div>`}}
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _r=l`:host{--_active-indicator-color: var(--md-circular-progress-active-indicator-color, var(--md-sys-color-primary, #6750a4));--_active-indicator-width: var(--md-circular-progress-active-indicator-width, 10);--_four-color-active-indicator-four-color: var(--md-circular-progress-four-color-active-indicator-four-color, var(--md-sys-color-tertiary-container, #ffd8e4));--_four-color-active-indicator-one-color: var(--md-circular-progress-four-color-active-indicator-one-color, var(--md-sys-color-primary, #6750a4));--_four-color-active-indicator-three-color: var(--md-circular-progress-four-color-active-indicator-three-color, var(--md-sys-color-tertiary, #7d5260));--_four-color-active-indicator-two-color: var(--md-circular-progress-four-color-active-indicator-two-color, var(--md-sys-color-primary-container, #eaddff));--_size: var(--md-circular-progress-size, 48px);display:inline-flex;vertical-align:middle;width:var(--_size);height:var(--_size);position:relative;align-items:center;justify-content:center;contain:strict;content-visibility:auto}.progress{flex:1;align-self:stretch;margin:4px}.progress,.spinner,.left,.right,.circle,svg,.track,.active-track{position:absolute;inset:0}svg{transform:rotate(-90deg)}circle{cx:50%;cy:50%;r:calc(50%*(1 - var(--_active-indicator-width)/100));stroke-width:calc(var(--_active-indicator-width)*1%);stroke-dasharray:100;fill:rgba(0,0,0,0)}.active-track{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1);stroke:var(--_active-indicator-color)}.track{stroke:rgba(0,0,0,0)}.progress.indeterminate{animation:linear infinite linear-rotate;animation-duration:1568.2352941176ms}.spinner{animation:infinite both rotate-arc;animation-duration:5332ms;animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}.left{overflow:hidden;inset:0 50% 0 0}.right{overflow:hidden;inset:0 0 0 50%}.circle{box-sizing:border-box;border-radius:50%;border:solid calc(var(--_active-indicator-width)/100*(var(--_size) - 8px));border-color:var(--_active-indicator-color) var(--_active-indicator-color) rgba(0,0,0,0) rgba(0,0,0,0);animation:expand-arc;animation-iteration-count:infinite;animation-fill-mode:both;animation-duration:1333ms,5332ms;animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}.four-color .circle{animation-name:expand-arc,four-color}.left .circle{rotate:135deg;inset:0 -100% 0 0}.right .circle{rotate:100deg;inset:0 0 0 -100%;animation-delay:-666.5ms,0ms}@media(forced-colors: active){.active-track{stroke:CanvasText}.circle{border-color:CanvasText CanvasText Canvas Canvas}}@keyframes expand-arc{0%{transform:rotate(265deg)}50%{transform:rotate(130deg)}100%{transform:rotate(265deg)}}@keyframes rotate-arc{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes linear-rotate{to{transform:rotate(360deg)}}@keyframes four-color{0%{border-top-color:var(--_four-color-active-indicator-one-color);border-right-color:var(--_four-color-active-indicator-one-color)}15%{border-top-color:var(--_four-color-active-indicator-one-color);border-right-color:var(--_four-color-active-indicator-one-color)}25%{border-top-color:var(--_four-color-active-indicator-two-color);border-right-color:var(--_four-color-active-indicator-two-color)}40%{border-top-color:var(--_four-color-active-indicator-two-color);border-right-color:var(--_four-color-active-indicator-two-color)}50%{border-top-color:var(--_four-color-active-indicator-three-color);border-right-color:var(--_four-color-active-indicator-three-color)}65%{border-top-color:var(--_four-color-active-indicator-three-color);border-right-color:var(--_four-color-active-indicator-three-color)}75%{border-top-color:var(--_four-color-active-indicator-four-color);border-right-color:var(--_four-color-active-indicator-four-color)}90%{border-top-color:var(--_four-color-active-indicator-four-color);border-right-color:var(--_four-color-active-indicator-four-color)}100%{border-top-color:var(--_four-color-active-indicator-one-color);border-right-color:var(--_four-color-active-indicator-one-color)}}
`
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let Tr=class extends Sr{};Tr.styles=[_r],Tr=t([i("md-circular-progress")],Tr);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class Cr extends kr{constructor(){super(...arguments),this.buffer=0}renderIndicator(){const e={transform:`scaleX(${100*(this.indeterminate?1:this.value/this.max)}%)`},t=this.buffer??0,i=t>0,r={transform:`scaleX(${100*(this.indeterminate||!i?1:t/this.max)}%)`},n=this.indeterminate||!i||t>=this.max||this.value>=this.max;return K`
      <div class="dots" ?hidden=${n}></div>
      <div class="inactive-track" style=${Nt(r)}></div>
      <div class="bar primary-bar" style=${Nt(e)}>
        <div class="bar-inner"></div>
      </div>
      <div class="bar secondary-bar">
        <div class="bar-inner"></div>
      </div>
    `}}t([C({type:Number})],Cr.prototype,"buffer",void 0);
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const Pr=l`:host{--_active-indicator-color: var(--md-linear-progress-active-indicator-color, var(--md-sys-color-primary, #6750a4));--_active-indicator-height: var(--md-linear-progress-active-indicator-height, 4px);--_four-color-active-indicator-four-color: var(--md-linear-progress-four-color-active-indicator-four-color, var(--md-sys-color-tertiary-container, #ffd8e4));--_four-color-active-indicator-one-color: var(--md-linear-progress-four-color-active-indicator-one-color, var(--md-sys-color-primary, #6750a4));--_four-color-active-indicator-three-color: var(--md-linear-progress-four-color-active-indicator-three-color, var(--md-sys-color-tertiary, #7d5260));--_four-color-active-indicator-two-color: var(--md-linear-progress-four-color-active-indicator-two-color, var(--md-sys-color-primary-container, #eaddff));--_track-color: var(--md-linear-progress-track-color, var(--md-sys-color-surface-container-highest, #e6e0e9));--_track-height: var(--md-linear-progress-track-height, 4px);--_track-shape: var(--md-linear-progress-track-shape, var(--md-sys-shape-corner-none, 0px));border-radius:var(--_track-shape);display:flex;position:relative;min-width:80px;height:var(--_track-height);content-visibility:auto;contain:strict}.progress,.dots,.inactive-track,.bar,.bar-inner{position:absolute}.progress{direction:ltr;inset:0;border-radius:inherit;overflow:hidden;display:flex;align-items:center}.bar{animation:none;width:100%;height:var(--_active-indicator-height);transform-origin:left center;transition:transform 250ms cubic-bezier(0.4, 0, 0.6, 1)}.secondary-bar{display:none}.bar-inner{inset:0;animation:none;background:var(--_active-indicator-color)}.inactive-track{background:var(--_track-color);inset:0;transition:transform 250ms cubic-bezier(0.4, 0, 0.6, 1);transform-origin:left center}.dots{inset:0;animation:linear infinite 250ms;animation-name:buffering;background-color:var(--_track-color);background-repeat:repeat-x;-webkit-mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");z-index:-1}.dots[hidden]{display:none}.indeterminate .bar{transition:none}.indeterminate .primary-bar{inset-inline-start:-145.167%}.indeterminate .secondary-bar{inset-inline-start:-54.8889%;display:block}.indeterminate .primary-bar{animation:linear infinite 2s;animation-name:primary-indeterminate-translate}.indeterminate .primary-bar>.bar-inner{animation:linear infinite 2s primary-indeterminate-scale}.indeterminate.four-color .primary-bar>.bar-inner{animation-name:primary-indeterminate-scale,four-color;animation-duration:2s,4s}.indeterminate .secondary-bar{animation:linear infinite 2s;animation-name:secondary-indeterminate-translate}.indeterminate .secondary-bar>.bar-inner{animation:linear infinite 2s secondary-indeterminate-scale}.indeterminate.four-color .secondary-bar>.bar-inner{animation-name:secondary-indeterminate-scale,four-color;animation-duration:2s,4s}:host(:dir(rtl)){transform:scale(-1)}@keyframes primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.00432);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes buffering{0%{transform:translateX(calc(var(--_track-height) / 2 * 5))}}@keyframes primary-indeterminate-translate{0%{transform:translateX(0px)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0px)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.6714%)}100%{transform:translateX(200.611%)}}@keyframes secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0px)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.6519%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.3862%)}100%{transform:translateX(160.278%)}}@keyframes four-color{0%{background:var(--_four-color-active-indicator-one-color)}15%{background:var(--_four-color-active-indicator-one-color)}25%{background:var(--_four-color-active-indicator-two-color)}40%{background:var(--_four-color-active-indicator-two-color)}50%{background:var(--_four-color-active-indicator-three-color)}65%{background:var(--_four-color-active-indicator-three-color)}75%{background:var(--_four-color-active-indicator-four-color)}90%{background:var(--_four-color-active-indicator-four-color)}100%{background:var(--_four-color-active-indicator-one-color)}}@media(forced-colors: active){:host{outline:1px solid CanvasText}.bar-inner,.dots{background-color:CanvasText}}
`
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let Er=class extends Cr{};Er.styles=[Pr],Er=t([i("md-linear-progress")],Er);
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class $r extends ve{render(){return K`<slot></slot>`}connectedCallback(){super.connectedCallback();"false"!==this.getAttribute("aria-hidden")?this.setAttribute("aria-hidden","true"):this.removeAttribute("aria-hidden")}}
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ar=l`:host{font-size:var(--md-icon-size, 24px);width:var(--md-icon-size, 24px);height:var(--md-icon-size, 24px);color:inherit;font-variation-settings:inherit;font-weight:400;font-family:var(--md-icon-font, Material Symbols Outlined);display:inline-flex;font-style:normal;place-items:center;place-content:center;line-height:1;overflow:hidden;letter-spacing:normal;text-transform:none;user-select:none;white-space:nowrap;word-wrap:normal;flex-shrink:0;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;-moz-osx-font-smoothing:grayscale}::slotted(svg){fill:currentColor}::slotted(*){height:100%;width:100%}
`
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let Ir=class extends $r{};
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
function Qr(e,t=!0){return t&&"rtl"===getComputedStyle(e).getPropertyValue("direction").trim()}
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */Ir.styles=[Ar],Ir=t([i("md-icon")],Ir);const Rr=Ge(tt(ve));class Dr extends Rr{get name(){return this.getAttribute("name")??""}set name(e){this.setAttribute("name",e)}get form(){return this[Je].form}get labels(){return this[Je].labels}constructor(){super(),this.disabled=!1,this.softDisabled=!1,this.flipIconInRtl=!1,this.href="",this.download="",this.target="",this.ariaLabelSelected="",this.toggle=!1,this.selected=!1,this.type="submit",this.value="",this.flipIcon=Qr(this,this.flipIconInRtl),this.addEventListener("click",this.handleClick.bind(this))}willUpdate(){this.href&&(this.disabled=!1,this.softDisabled=!1)}render(){const e=this.href?Et`div`:Et`button`,{ariaLabel:t,ariaHasPopup:i,ariaExpanded:r}=this,n=t&&this.ariaLabelSelected,o=this.toggle?this.selected:ee;let s=ee;return this.href||(s=n&&this.selected?this.ariaLabelSelected:t),At`<${e}
        class="icon-button ${De(this.getRenderClasses())}"
        id="button"
        aria-label="${s||ee}"
        aria-haspopup="${!this.href&&i||ee}"
        aria-expanded="${!this.href&&r||ee}"
        aria-pressed="${o}"
        aria-disabled=${!this.href&&this.softDisabled||ee}
        ?disabled="${!this.href&&this.disabled}"
        @click="${this.handleClickOnChild}">
        ${this.renderFocusRing()}
        ${this.renderRipple()}
        ${this.selected?ee:this.renderIcon()}
        ${this.selected?this.renderSelectedIcon():ee}
        ${this.href?this.renderLink():this.renderTouchTarget()}
  </${e}>`}renderLink(){const{ariaLabel:e}=this;return K`
      <a
        class="link"
        id="link"
        href="${this.href}"
        download="${this.download||ee}"
        target="${this.target||ee}"
        aria-label="${e||ee}">
        ${this.renderTouchTarget()}
      </a>
    `}getRenderClasses(){return{"flip-icon":this.flipIcon,selected:this.toggle&&this.selected}}renderIcon(){return K`<span class="icon"><slot></slot></span>`}renderSelectedIcon(){return K`<span class="icon icon--selected"
      ><slot name="selected"><slot></slot></slot
    ></span>`}renderTouchTarget(){return K`<span class="touch"></span>`}renderFocusRing(){return K`<md-focus-ring
      part="focus-ring"
      for=${this.href?"link":"button"}></md-focus-ring>`}renderRipple(){const e=!this.href&&(this.disabled||this.softDisabled);return K`<md-ripple
      for=${this.href?"link":ee}
      ?disabled="${e}"></md-ripple>`}connectedCallback(){this.flipIcon=Qr(this,this.flipIconInRtl),super.connectedCallback()}handleClick(e){if(!this.href&&this.softDisabled)return e.stopImmediatePropagation(),void e.preventDefault()}async handleClickOnChild(e){await 0,!this.toggle||this.disabled||this.softDisabled||e.defaultPrevented||(this.selected=!this.selected,this.dispatchEvent(new InputEvent("input",{bubbles:!0,composed:!0})),this.dispatchEvent(new Event("change",{bubbles:!0})))}}it(Dr),Dr.formAssociated=!0,Dr.shadowRootOptions={mode:"open",delegatesFocus:!0},t([C({type:Boolean,reflect:!0})],Dr.prototype,"disabled",void 0),t([C({type:Boolean,attribute:"soft-disabled",reflect:!0})],Dr.prototype,"softDisabled",void 0),t([C({type:Boolean,attribute:"flip-icon-in-rtl"})],Dr.prototype,"flipIconInRtl",void 0),t([C()],Dr.prototype,"href",void 0),t([C()],Dr.prototype,"download",void 0),t([C()],Dr.prototype,"target",void 0),t([C({attribute:"aria-label-selected"})],Dr.prototype,"ariaLabelSelected",void 0),t([C({type:Boolean})],Dr.prototype,"toggle",void 0),t([C({type:Boolean,reflect:!0})],Dr.prototype,"selected",void 0),t([C()],Dr.prototype,"type",void 0),t([C({reflect:!0})],Dr.prototype,"value",void 0),t([P()],Dr.prototype,"flipIcon",void 0);
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const Mr=l`:host{display:inline-flex;outline:none;-webkit-tap-highlight-color:rgba(0,0,0,0);height:var(--_container-height);width:var(--_container-width);justify-content:center}:host([touch-target=wrapper]){margin:max(0px,(48px - var(--_container-height))/2) max(0px,(48px - var(--_container-width))/2)}md-focus-ring{--md-focus-ring-shape-start-start: var(--_container-shape-start-start);--md-focus-ring-shape-start-end: var(--_container-shape-start-end);--md-focus-ring-shape-end-end: var(--_container-shape-end-end);--md-focus-ring-shape-end-start: var(--_container-shape-end-start)}:host(:is([disabled],[soft-disabled])){pointer-events:none}.icon-button{place-items:center;background:none;border:none;box-sizing:border-box;cursor:pointer;display:flex;place-content:center;outline:none;padding:0;position:relative;text-decoration:none;user-select:none;z-index:0;flex:1;border-start-start-radius:var(--_container-shape-start-start);border-start-end-radius:var(--_container-shape-start-end);border-end-start-radius:var(--_container-shape-end-start);border-end-end-radius:var(--_container-shape-end-end)}.icon ::slotted(*){font-size:var(--_icon-size);height:var(--_icon-size);width:var(--_icon-size);font-weight:inherit}md-ripple{z-index:-1;border-start-start-radius:var(--_container-shape-start-start);border-start-end-radius:var(--_container-shape-start-end);border-end-start-radius:var(--_container-shape-end-start);border-end-end-radius:var(--_container-shape-end-end)}.flip-icon .icon{transform:scaleX(-1)}.icon{display:inline-flex}.link{display:grid;height:100%;outline:none;place-items:center;position:absolute;width:100%}.touch{position:absolute;height:max(48px,100%);width:max(48px,100%)}:host([touch-target=none]) .touch{display:none}@media(forced-colors: active){:host(:is([disabled],[soft-disabled])){--_disabled-icon-color: GrayText;--_disabled-icon-opacity: 1}}
`,Nr=l`:host{--_disabled-icon-color: var(--md-icon-button-disabled-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-icon-opacity: var(--md-icon-button-disabled-icon-opacity, 0.38);--_icon-size: var(--md-icon-button-icon-size, 24px);--_selected-focus-icon-color: var(--md-icon-button-selected-focus-icon-color, var(--md-sys-color-primary, #6750a4));--_selected-hover-icon-color: var(--md-icon-button-selected-hover-icon-color, var(--md-sys-color-primary, #6750a4));--_selected-hover-state-layer-color: var(--md-icon-button-selected-hover-state-layer-color, var(--md-sys-color-primary, #6750a4));--_selected-hover-state-layer-opacity: var(--md-icon-button-selected-hover-state-layer-opacity, 0.08);--_selected-icon-color: var(--md-icon-button-selected-icon-color, var(--md-sys-color-primary, #6750a4));--_selected-pressed-icon-color: var(--md-icon-button-selected-pressed-icon-color, var(--md-sys-color-primary, #6750a4));--_selected-pressed-state-layer-color: var(--md-icon-button-selected-pressed-state-layer-color, var(--md-sys-color-primary, #6750a4));--_selected-pressed-state-layer-opacity: var(--md-icon-button-selected-pressed-state-layer-opacity, 0.12);--_state-layer-height: var(--md-icon-button-state-layer-height, 40px);--_state-layer-shape: var(--md-icon-button-state-layer-shape, var(--md-sys-shape-corner-full, 9999px));--_state-layer-width: var(--md-icon-button-state-layer-width, 40px);--_focus-icon-color: var(--md-icon-button-focus-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-icon-color: var(--md-icon-button-hover-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-state-layer-color: var(--md-icon-button-hover-state-layer-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-state-layer-opacity: var(--md-icon-button-hover-state-layer-opacity, 0.08);--_icon-color: var(--md-icon-button-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_pressed-icon-color: var(--md-icon-button-pressed-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_pressed-state-layer-color: var(--md-icon-button-pressed-state-layer-color, var(--md-sys-color-on-surface-variant, #49454f));--_pressed-state-layer-opacity: var(--md-icon-button-pressed-state-layer-opacity, 0.12);--_container-shape-start-start: 0;--_container-shape-start-end: 0;--_container-shape-end-end: 0;--_container-shape-end-start: 0;--_container-height: 0;--_container-width: 0;height:var(--_state-layer-height);width:var(--_state-layer-width)}:host([touch-target=wrapper]){margin:max(0px,(48px - var(--_state-layer-height))/2) max(0px,(48px - var(--_state-layer-width))/2)}md-focus-ring{--md-focus-ring-shape-start-start: var(--_state-layer-shape);--md-focus-ring-shape-start-end: var(--_state-layer-shape);--md-focus-ring-shape-end-end: var(--_state-layer-shape);--md-focus-ring-shape-end-start: var(--_state-layer-shape)}.standard{background-color:rgba(0,0,0,0);color:var(--_icon-color);--md-ripple-hover-color: var(--_hover-state-layer-color);--md-ripple-hover-opacity: var(--_hover-state-layer-opacity);--md-ripple-pressed-color: var(--_pressed-state-layer-color);--md-ripple-pressed-opacity: var(--_pressed-state-layer-opacity)}.standard:hover{color:var(--_hover-icon-color)}.standard:focus{color:var(--_focus-icon-color)}.standard:active{color:var(--_pressed-icon-color)}.standard:is(:disabled,[aria-disabled=true]){color:var(--_disabled-icon-color)}md-ripple{border-radius:var(--_state-layer-shape)}.standard:is(:disabled,[aria-disabled=true]){opacity:var(--_disabled-icon-opacity)}.selected{--md-ripple-hover-color: var(--_selected-hover-state-layer-color);--md-ripple-hover-opacity: var(--_selected-hover-state-layer-opacity);--md-ripple-pressed-color: var(--_selected-pressed-state-layer-color);--md-ripple-pressed-opacity: var(--_selected-pressed-state-layer-opacity)}.selected:not(:disabled,[aria-disabled=true]){color:var(--_selected-icon-color)}.selected:not(:disabled,[aria-disabled=true]):hover{color:var(--_selected-hover-icon-color)}.selected:not(:disabled,[aria-disabled=true]):focus{color:var(--_selected-focus-icon-color)}.selected:not(:disabled,[aria-disabled=true]):active{color:var(--_selected-pressed-icon-color)}
`
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Lr=class extends Dr{getRenderClasses(){return{...super.getRenderClasses(),standard:!0}}};Lr.styles=[Mr,Nr],Lr=t([i("md-icon-button")],Lr);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class zr extends ve{constructor(){super(...arguments),this.inset=!1,this.insetStart=!1,this.insetEnd=!1}}t([C({type:Boolean,reflect:!0})],zr.prototype,"inset",void 0),t([C({type:Boolean,reflect:!0,attribute:"inset-start"})],zr.prototype,"insetStart",void 0),t([C({type:Boolean,reflect:!0,attribute:"inset-end"})],zr.prototype,"insetEnd",void 0);
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const Vr=l`:host{box-sizing:border-box;color:var(--md-divider-color, var(--md-sys-color-outline-variant, #cac4d0));display:flex;height:var(--md-divider-thickness, 1px);width:100%}:host([inset]),:host([inset-start]){padding-inline-start:16px}:host([inset]),:host([inset-end]){padding-inline-end:16px}:host::before{background:currentColor;content:"";height:100%;width:100%}@media(forced-colors: active){:host::before{background:CanvasText}}
`
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let Ur=class extends zr{};Ur.styles=[Vr],Ur=t([i("md-divider")],Ur);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const qr={dialog:[[[{transform:"translateY(-50px)"},{transform:"translateY(0)"}],{duration:500,easing:Ne}]],scrim:[[[{opacity:0},{opacity:.32}],{duration:500,easing:"linear"}]],container:[[[{opacity:0},{opacity:1}],{duration:50,easing:"linear",pseudoElement:"::before"}],[[{height:"35%"},{height:"100%"}],{duration:500,easing:Ne,pseudoElement:"::before"}]],headline:[[[{opacity:0},{opacity:0,offset:.2},{opacity:1}],{duration:250,easing:"linear",fill:"forwards"}]],content:[[[{opacity:0},{opacity:0,offset:.2},{opacity:1}],{duration:250,easing:"linear",fill:"forwards"}]],actions:[[[{opacity:0},{opacity:0,offset:.5},{opacity:1}],{duration:300,easing:"linear",fill:"forwards"}]]},Xr={dialog:[[[{transform:"translateY(0)"},{transform:"translateY(-50px)"}],{duration:150,easing:Le}]],scrim:[[[{opacity:.32},{opacity:0}],{duration:150,easing:"linear"}]],container:[[[{height:"100%"},{height:"35%"}],{duration:150,easing:Le,pseudoElement:"::before"}],[[{opacity:"1"},{opacity:"0"}],{delay:100,duration:50,easing:"linear",pseudoElement:"::before"}]],headline:[[[{opacity:1},{opacity:0}],{duration:100,easing:"linear",fill:"forwards"}]],content:[[[{opacity:1},{opacity:0}],{duration:100,easing:"linear",fill:"forwards"}]],actions:[[[{opacity:1},{opacity:0}],{duration:100,easing:"linear",fill:"forwards"}]]},Zr=Ge(ve);class Br extends Zr{get open(){return this.isOpen}set open(e){e!==this.isOpen&&(this.isOpen=e,e?(this.setAttribute("open",""),this.show()):(this.removeAttribute("open"),this.close()))}constructor(){super(),this.quick=!1,this.returnValue="",this.noFocusTrap=!1,this.getOpenAnimation=()=>qr,this.getCloseAnimation=()=>Xr,this.isOpen=!1,this.isOpening=!1,this.isConnectedPromise=this.getIsConnectedPromise(),this.isAtScrollTop=!1,this.isAtScrollBottom=!1,this.nextClickIsFromContent=!1,this.hasHeadline=!1,this.hasActions=!1,this.hasIcon=!1,this.escapePressedWithoutCancel=!1,this.treewalker=document.createTreeWalker(this,NodeFilter.SHOW_ELEMENT),this.addEventListener("submit",this.handleSubmit)}async show(){this.isOpening=!0,await this.isConnectedPromise,await this.updateComplete;const e=this.dialog;if(e.open||!this.isOpening)return void(this.isOpening=!1);if(!this.dispatchEvent(new Event("open",{cancelable:!0})))return this.open=!1,void(this.isOpening=!1);e.showModal(),this.open=!0,this.scroller&&(this.scroller.scrollTop=0),this.querySelector("[autofocus]")?.focus(),await this.animateDialog(this.getOpenAnimation()),this.dispatchEvent(new Event("opened")),this.isOpening=!1}async close(e=this.returnValue){if(this.isOpening=!1,!this.isConnected)return void(this.open=!1);await this.updateComplete;const t=this.dialog;if(!t.open||this.isOpening)return void(this.open=!1);const i=this.returnValue;this.returnValue=e;this.dispatchEvent(new Event("close",{cancelable:!0}))?(await this.animateDialog(this.getCloseAnimation()),t.close(e),this.open=!1,this.dispatchEvent(new Event("closed"))):this.returnValue=i}connectedCallback(){super.connectedCallback(),this.isConnectedPromiseResolve()}disconnectedCallback(){super.disconnectedCallback(),this.isConnectedPromise=this.getIsConnectedPromise()}render(){const e=this.open&&!(this.isAtScrollTop&&this.isAtScrollBottom),t={"has-headline":this.hasHeadline,"has-actions":this.hasActions,"has-icon":this.hasIcon,scrollable:e,"show-top-divider":e&&!this.isAtScrollTop,"show-bottom-divider":e&&!this.isAtScrollBottom},i=this.open&&!this.noFocusTrap,r=K`
      <div
        class="focus-trap"
        tabindex="0"
        aria-hidden="true"
        @focus=${this.handleFocusTrapFocus}></div>
    `,{ariaLabel:n}=this;return K`
      <div class="scrim"></div>
      <dialog
        class=${De(t)}
        aria-label=${n||ee}
        aria-labelledby=${this.hasHeadline?"headline":ee}
        role=${"alert"===this.type?"alertdialog":ee}
        @cancel=${this.handleCancel}
        @click=${this.handleDialogClick}
        @close=${this.handleClose}
        @keydown=${this.handleKeydown}
        .returnValue=${this.returnValue||ee}>
        ${i?r:ee}
        <div class="container" @click=${this.handleContentClick}>
          <div class="headline">
            <div class="icon" aria-hidden="true">
              <slot name="icon" @slotchange=${this.handleIconChange}></slot>
            </div>
            <h2 id="headline" aria-hidden=${!this.hasHeadline||ee}>
              <slot
                name="headline"
                @slotchange=${this.handleHeadlineChange}></slot>
            </h2>
            <md-divider></md-divider>
          </div>
          <div class="scroller">
            <div class="content">
              <div class="top anchor"></div>
              <slot name="content"></slot>
              <div class="bottom anchor"></div>
            </div>
          </div>
          <div class="actions">
            <md-divider></md-divider>
            <slot name="actions" @slotchange=${this.handleActionsChange}></slot>
          </div>
        </div>
        ${i?r:ee}
      </dialog>
    `}firstUpdated(){this.intersectionObserver=new IntersectionObserver(e=>{for(const t of e)this.handleAnchorIntersection(t)},{root:this.scroller}),this.intersectionObserver.observe(this.topAnchor),this.intersectionObserver.observe(this.bottomAnchor)}handleDialogClick(){if(this.nextClickIsFromContent)return void(this.nextClickIsFromContent=!1);!this.dispatchEvent(new Event("cancel",{cancelable:!0}))||this.close()}handleContentClick(){this.nextClickIsFromContent=!0}handleSubmit(e){const t=e.target,{submitter:i}=e;"dialog"===t.getAttribute("method")&&i&&this.close(i.getAttribute("value")??this.returnValue)}handleCancel(e){if(e.target!==this.dialog)return;this.escapePressedWithoutCancel=!1;const t=!zt(this,e);e.preventDefault(),t||this.close()}handleClose(){this.escapePressedWithoutCancel&&(this.escapePressedWithoutCancel=!1,this.dialog?.dispatchEvent(new Event("cancel",{cancelable:!0})))}handleKeydown(e){"Escape"===e.key&&(this.escapePressedWithoutCancel=!0,setTimeout(()=>{this.escapePressedWithoutCancel=!1}))}async animateDialog(e){if(this.cancelAnimations?.abort(),this.cancelAnimations=new AbortController,this.quick)return;const{dialog:t,scrim:i,container:r,headline:n,content:o,actions:s}=this;if(!(t&&i&&r&&n&&o&&s))return;const{container:a,dialog:l,scrim:c,headline:d,content:h,actions:u}=e,p=[[t,l??[]],[i,c??[]],[r,a??[]],[n,d??[]],[o,h??[]],[s,u??[]]],f=[];for(const[e,t]of p)for(const i of t){const t=e.animate(...i);this.cancelAnimations.signal.addEventListener("abort",()=>{t.cancel()}),f.push(t)}await Promise.all(f.map(e=>e.finished.catch(()=>{})))}handleHeadlineChange(e){const t=e.target;this.hasHeadline=t.assignedElements().length>0}handleActionsChange(e){const t=e.target;this.hasActions=t.assignedElements().length>0}handleIconChange(e){const t=e.target;this.hasIcon=t.assignedElements().length>0}handleAnchorIntersection(e){const{target:t,isIntersecting:i}=e;t===this.topAnchor&&(this.isAtScrollTop=i),t===this.bottomAnchor&&(this.isAtScrollBottom=i)}getIsConnectedPromise(){return new Promise(e=>{this.isConnectedPromiseResolve=e})}handleFocusTrapFocus(e){const[t,i]=this.getFirstAndLastFocusableChildren();if(!t||!i)return void this.dialog?.focus();const r=e.target===this.firstFocusTrap,n=!r,o=e.relatedTarget===t,s=e.relatedTarget===i,a=!o&&!s;if(n&&s||r&&a)return void t.focus();(r&&o||n&&a)&&i.focus()}getFirstAndLastFocusableChildren(){if(!this.treewalker)return[null,null];let e=null,t=null;for(this.treewalker.currentNode=this.treewalker.root;this.treewalker.nextNode();){const i=this.treewalker.currentNode;jr(i)&&(e||(e=i),t=i)}return[e,t]}}function jr(e){const t=":not(:disabled,[disabled])";if(e.matches(":is(button,input,select,textarea,object,:is(a,area)[href],[tabindex],[contenteditable=true])"+t+':not([tabindex^="-"])'))return!0;return!!e.localName.includes("-")&&(!!e.matches(t)&&(e.shadowRoot?.delegatesFocus??!1))}
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */t([C({type:Boolean})],Br.prototype,"open",null),t([C({type:Boolean})],Br.prototype,"quick",void 0),t([C({attribute:!1})],Br.prototype,"returnValue",void 0),t([C()],Br.prototype,"type",void 0),t([C({type:Boolean,attribute:"no-focus-trap"})],Br.prototype,"noFocusTrap",void 0),t([$("dialog")],Br.prototype,"dialog",void 0),t([$(".scrim")],Br.prototype,"scrim",void 0),t([$(".container")],Br.prototype,"container",void 0),t([$(".headline")],Br.prototype,"headline",void 0),t([$(".content")],Br.prototype,"content",void 0),t([$(".actions")],Br.prototype,"actions",void 0),t([P()],Br.prototype,"isAtScrollTop",void 0),t([P()],Br.prototype,"isAtScrollBottom",void 0),t([$(".scroller")],Br.prototype,"scroller",void 0),t([$(".top.anchor")],Br.prototype,"topAnchor",void 0),t([$(".bottom.anchor")],Br.prototype,"bottomAnchor",void 0),t([$(".focus-trap")],Br.prototype,"firstFocusTrap",void 0),t([P()],Br.prototype,"hasHeadline",void 0),t([P()],Br.prototype,"hasActions",void 0),t([P()],Br.prototype,"hasIcon",void 0);const Fr=l`:host{border-start-start-radius:var(--md-dialog-container-shape-start-start, var(--md-dialog-container-shape, var(--md-sys-shape-corner-extra-large, 28px)));border-start-end-radius:var(--md-dialog-container-shape-start-end, var(--md-dialog-container-shape, var(--md-sys-shape-corner-extra-large, 28px)));border-end-end-radius:var(--md-dialog-container-shape-end-end, var(--md-dialog-container-shape, var(--md-sys-shape-corner-extra-large, 28px)));border-end-start-radius:var(--md-dialog-container-shape-end-start, var(--md-dialog-container-shape, var(--md-sys-shape-corner-extra-large, 28px)));display:contents;margin:auto;max-height:min(560px,100% - 48px);max-width:min(560px,100% - 48px);min-height:140px;min-width:280px;position:fixed;height:fit-content;width:fit-content}dialog{background:rgba(0,0,0,0);border:none;border-radius:inherit;flex-direction:column;height:inherit;margin:inherit;max-height:inherit;max-width:inherit;min-height:inherit;min-width:inherit;outline:none;overflow:visible;padding:0;width:inherit}dialog[open]{display:flex}::backdrop{background:none}.scrim{background:var(--md-sys-color-scrim, #000);display:none;inset:0;opacity:32%;pointer-events:none;position:fixed;z-index:1}:host([open]) .scrim{display:flex}h2{all:unset;align-self:stretch}.headline{align-items:center;color:var(--md-dialog-headline-color, var(--md-sys-color-on-surface, #1d1b20));display:flex;flex-direction:column;font-family:var(--md-dialog-headline-font, var(--md-sys-typescale-headline-small-font, var(--md-ref-typeface-brand, Roboto)));font-size:var(--md-dialog-headline-size, var(--md-sys-typescale-headline-small-size, 1.5rem));line-height:var(--md-dialog-headline-line-height, var(--md-sys-typescale-headline-small-line-height, 2rem));font-weight:var(--md-dialog-headline-weight, var(--md-sys-typescale-headline-small-weight, var(--md-ref-typeface-weight-regular, 400)));position:relative}slot[name=headline]::slotted(*){align-items:center;align-self:stretch;box-sizing:border-box;display:flex;gap:8px;padding:24px 24px 0}.icon{display:flex}slot[name=icon]::slotted(*){color:var(--md-dialog-icon-color, var(--md-sys-color-secondary, #625b71));fill:currentColor;font-size:var(--md-dialog-icon-size, 24px);margin-top:24px;height:var(--md-dialog-icon-size, 24px);width:var(--md-dialog-icon-size, 24px)}.has-icon slot[name=headline]::slotted(*){justify-content:center;padding-top:16px}.scrollable slot[name=headline]::slotted(*){padding-bottom:16px}.scrollable.has-headline slot[name=content]::slotted(*){padding-top:8px}.container{border-radius:inherit;display:flex;flex-direction:column;flex-grow:1;overflow:hidden;position:relative;transform-origin:top}.container::before{background:var(--md-dialog-container-color, var(--md-sys-color-surface-container-high, #ece6f0));border-radius:inherit;content:"";inset:0;position:absolute}.scroller{display:flex;flex:1;flex-direction:column;overflow:hidden;z-index:1}.scrollable .scroller{overflow-y:scroll}.content{color:var(--md-dialog-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));font-family:var(--md-dialog-supporting-text-font, var(--md-sys-typescale-body-medium-font, var(--md-ref-typeface-plain, Roboto)));font-size:var(--md-dialog-supporting-text-size, var(--md-sys-typescale-body-medium-size, 0.875rem));line-height:var(--md-dialog-supporting-text-line-height, var(--md-sys-typescale-body-medium-line-height, 1.25rem));flex:1;font-weight:var(--md-dialog-supporting-text-weight, var(--md-sys-typescale-body-medium-weight, var(--md-ref-typeface-weight-regular, 400)));height:min-content;position:relative}slot[name=content]::slotted(*){box-sizing:border-box;padding:24px}.anchor{position:absolute}.top.anchor{top:0}.bottom.anchor{bottom:0}.actions{position:relative}slot[name=actions]::slotted(*){box-sizing:border-box;display:flex;gap:8px;justify-content:flex-end;padding:16px 24px 24px}.has-actions slot[name=content]::slotted(*){padding-bottom:8px}md-divider{display:none;position:absolute}.has-headline.show-top-divider .headline md-divider,.has-actions.show-bottom-divider .actions md-divider{display:flex}.headline md-divider{bottom:0}.actions md-divider{top:0}@media(forced-colors: active){dialog{outline:2px solid WindowText}}
`
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let Wr=class extends Br{};Wr.styles=[Fr],Wr=t([i("md-dialog")],Wr);var Yr=function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let Gr=class extends ve{static{this.styles=l`
    :host {
      display: block;
      padding: 2rem;
      background: var(--md-sys-color-surface-variant, #f5f5f5);
      border-radius: 0.5rem;
      border: 1px solid var(--md-sys-color-outline, #ccc);
      font-family: var(--md-sys-typescale-body-large-font, system-ui, sans-serif);
      color: var(--md-sys-color-on-surface, #1f1f1f);
    }
  `}render(){return K`
      <p>placeholder - your shared web components go here</p>
    `}};Gr=Yr([i("remove-replace-me")],Gr);var Hr=function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let Kr=class extends ve{static{this.styles=l`
    :host {
      display: block;
      border: solid 1px gray;
      padding: 16px;
      max-width: 800px;
    }
  `}constructor(){super(),this.name="World",this.count=0}render(){return K`
      <h1>${this.sayHello(this.name)}!</h1>
      <button @click=${this.onClick} part="button">
        Click Count: ${this.count}
      </button>
      <slot></slot>
    `}onClick(){this.count+=1,this.dispatchEvent(new CustomEvent("count-changed"))}sayHello(e){return`Hello, ${e}`}};Hr([C()],Kr.prototype,"name",void 0),Hr([C({type:Number})],Kr.prototype,"count",void 0),Kr=Hr([i("my-element")],Kr);var Jr=function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let en=class extends ve{constructor(){super(),this.selected="0",this.disabledOptions=[]}static{this.styles=l`
    :host {
      display: block;
      font-family: 'Roboto', sans-serif;
    }

    .container {
      display: flex;
      border: 1px solid var(--md-sys-color-outline, #c6c6c6);
      border-radius: 12px;
      overflow: hidden;
    }

    .button {
      flex: 1;
      padding: 2px 8px;
      text-align: center;
      cursor: pointer;
      background-color: var(--md-sys-color-surface, #ffffff);
      color: var(--md-sys-color-on-surface, #000000);
      border: none;
      outline: none;
      font-size: 14px;
      line-height: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 4px;
    }

    .button.selected {
      background-color: var(--md-sys-color-primary, #6200ea);
      color: var(--md-sys-color-on-primary, #ffffff);
    }

    .button:not(.selected):hover {
      background-color: var(--md-sys-color-surface-variant, #f5f5f5);
    }

    .button:not(:last-child) {
      border-right: 1px solid var(--md-sys-color-outline, #c6c6c6);
    }

    svg {
      width: 20px;
      height: 20px;
      fill: currentColor;
    }

    .icon {
      display: flex;
      align-items: center;
      justify-content: center;
    }
  `}handleSelect(e){this.selected=e,this.dispatchEvent(new CustomEvent("df-segmented-button-change",{detail:{id:e},bubbles:!0,composed:!0}))}render(){const e=[{value:"0",label:"",icon:K`
          <svg xmlns="http://www.w3.org/2000/svg" height="16px" viewBox="0 -960 960 960">
            <path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z" />
          </svg>
        `},{value:"Upload",label:"",icon:K`
          <svg xmlns="http://www.w3.org/2000/svg" height="16px" viewBox="0 -960 960 960">
            <path
              d="M720-330q0 104-73 177T470-80q-104 0-177-73t-73-177v-370q0-75 52.5-127.5T400-880q75 0 127.5 52.5T580-700v350q0 46-32 78t-78 32q-46 0-78-32t-32-78v-370h80v370q0 13 8.5 21.5T470-320q13 0 21.5-8.5T500-350v-350q-1-42-29.5-71T400-800q-42 0-71 29t-29 71v370q-1 71 49 120.5T470-160q70 0 119-49.5T640-330v-390h80v390Z"
            />
          </svg>
        `},{value:"Site",label:"",icon:K`
          <svg xmlns="http://www.w3.org/2000/svg" height="16px" viewBox="0 -960 960 960">
            <path
              d="M440-280H280q-83 0-141.5-58.5T80-480q0-83 58.5-141.5T280-680h160v80H280q-50 0-85 35t-35 85q0 50 35 85t85 35h160v80ZM320-440v-80h320v80H320Zm200 160v-80h160q50 0 85-35t35-85q0-50-35-85t-85-35H520v-80h160q83 0 141.5 58.5T880-480q0 83-58.5 141.5T680-280H520Z"
            />
          </svg>
        `},{value:"Add",label:"",icon:K`
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
            <path d="M440-440H200v-80h240v-240h80v240h240v80H520v240h-80v-240Z" />
          </svg>
        `}];return K`
      <div class="container">
        ${e.filter(({value:e})=>!this.disabledOptions.includes(e)).map(({value:e,label:t,icon:i})=>K`
              <button
                class=${De({button:!0,selected:this.selected===e})}
                type="button"
                role="radio"
                aria-checked=${this.selected===e}
                @click=${()=>this.handleSelect(e)}
              >
                ${i?K`<span class="icon">${i}</span>`:""} ${t}
              </button>
            `)}
      </div>
    `}};Jr([C({type:String})],en.prototype,"selected",void 0),Jr([C({type:Array})],en.prototype,"disabledOptions",void 0),en=Jr([i("df-segmented-button")],en);var tn=Object.defineProperty,rn=(e,t,i)=>(((e,t,i)=>{t in e?tn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i})(e,"symbol"!=typeof t?t+"":t,i),i),nn=(e,t)=>{if(Object(t)!==t)throw TypeError('Cannot use the "in" operator on this value');return e.has(t)},on=(e,t,i)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,i)},sn=(e,t,i)=>(((e,t,i)=>{if(!t.has(e))throw TypeError("Cannot "+i)})(e,t,"access private method"),i);
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
function an(e,t){return Object.is(e,t)}
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */let ln=null,cn=!1,dn=1;const hn=Symbol("SIGNAL");function un(e){const t=ln;return ln=e,t}const pn={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function fn(e){if(cn)throw new Error("undefined"!=typeof ngDevMode&&ngDevMode?"Assertion error: signal read during notification phase":"");if(null===ln)return;ln.consumerOnSignalRead(e);const t=ln.nextProducerIndex++;if(xn(ln),t<ln.producerNode.length&&ln.producerNode[t]!==e&&bn(ln)){yn(ln.producerNode[t],ln.producerIndexOfThis[t])}ln.producerNode[t]!==e&&(ln.producerNode[t]=e,ln.producerIndexOfThis[t]=bn(ln)?On(e,ln,t):0),ln.producerLastReadVersion[t]=e.version}function mn(e){if(e.dirty||e.lastCleanEpoch!==dn){if(!e.producerMustRecompute(e)&&!function(e){xn(e);for(let t=0;t<e.producerNode.length;t++){const i=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==i.version)return!0;if(mn(i),r!==i.version)return!0}return!1}(e))return e.dirty=!1,void(e.lastCleanEpoch=dn);e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=dn}}function gn(e){if(void 0===e.liveConsumerNode)return;const t=cn;cn=!0;try{for(const t of e.liveConsumerNode)t.dirty||vn(t)}finally{cn=t}}function vn(e){var t;e.dirty=!0,gn(e),null==(t=e.consumerMarkedDirty)||t.call(e.wrapper??e)}function On(e,t,i){var r;if(wn(e),xn(e),0===e.liveConsumerNode.length){null==(r=e.watched)||r.call(e.wrapper);for(let t=0;t<e.producerNode.length;t++)e.producerIndexOfThis[t]=On(e.producerNode[t],e,t)}return e.liveConsumerIndexOfThis.push(i),e.liveConsumerNode.push(t)-1}function yn(e,t){var i;if(wn(e),xn(e),"undefined"!=typeof ngDevMode&&ngDevMode&&t>=e.liveConsumerNode.length)throw new Error(`Assertion error: active consumer index ${t} is out of bounds of ${e.liveConsumerNode.length} consumers)`);if(1===e.liveConsumerNode.length){null==(i=e.unwatched)||i.call(e.wrapper);for(let t=0;t<e.producerNode.length;t++)yn(e.producerNode[t],e.producerIndexOfThis[t])}const r=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[r],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[r],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){const i=e.liveConsumerIndexOfThis[t],r=e.liveConsumerNode[t];xn(r),r.producerIndexOfThis[i]=t}}function bn(e){var t;return e.consumerIsAlwaysLive||((null==(t=null==e?void 0:e.liveConsumerNode)?void 0:t.length)??0)>0}function xn(e){e.producerNode??(e.producerNode=[]),e.producerIndexOfThis??(e.producerIndexOfThis=[]),e.producerLastReadVersion??(e.producerLastReadVersion=[])}function wn(e){e.liveConsumerNode??(e.liveConsumerNode=[]),e.liveConsumerIndexOfThis??(e.liveConsumerIndexOfThis=[])}
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */function kn(e){if(mn(e),fn(e),e.value===Tn)throw e.error;return e.value}const Sn=Symbol("UNSET"),_n=Symbol("COMPUTING"),Tn=Symbol("ERRORED"),Cn=(()=>({...pn,value:Sn,dirty:!0,error:null,equal:an,producerMustRecompute:e=>e.value===Sn||e.value===_n,producerRecomputeValue(e){if(e.value===_n)throw new Error("Detected cycle in computations.");const t=e.value;e.value=_n;const i=function(e){return e&&(e.nextProducerIndex=0),un(e)}(e);let r,n=!1;try{r=e.computation.call(e.wrapper);n=t!==Sn&&t!==Tn&&e.equal.call(e.wrapper,t,r)}catch(t){r=Tn,e.error=t}finally{!function(e,t){if(un(t),e&&void 0!==e.producerNode&&void 0!==e.producerIndexOfThis&&void 0!==e.producerLastReadVersion){if(bn(e))for(let t=e.nextProducerIndex;t<e.producerNode.length;t++)yn(e.producerNode[t],e.producerIndexOfThis[t]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}(e,i)}n?e.value=t:(e.value=r,e.version++)}}))();let Pn=
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
function(){throw new Error};function En(){return fn(this),this.value}function $n(e,t){!1===(null==ln?void 0:ln.consumerAllowSignalWrites)&&Pn(),e.equal.call(e.wrapper,e.value,t)||(e.value=t,function(e){e.version++,dn++,gn(e)}
/**
 * @license
 * Copyright 2024 Bloomberg Finance L.P.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e))}const An=(()=>({...pn,equal:an,value:void 0}))();const In=Symbol("node");var Qn;(e=>{var t,i,r,n;t=In,i=new WeakSet,e.isState=e=>"object"==typeof e&&nn(i,e),e.State=class{constructor(r,n={}){on(this,i),rn(this,t);const o=
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
function(e){const t=Object.create(An);t.value=e;const i=()=>(fn(t),t.value);return i[hn]=t,i}(r),s=o[hn];if(this[In]=s,s.wrapper=this,n){const t=n.equals;t&&(s.equal=t),s.watched=n[e.subtle.watched],s.unwatched=n[e.subtle.unwatched]}}get(){if(!(0,e.isState)(this))throw new TypeError("Wrong receiver type for Signal.State.prototype.get");return En.call(this[In])}set(t){if(!(0,e.isState)(this))throw new TypeError("Wrong receiver type for Signal.State.prototype.set");if(cn)throw new Error("Writes to signals not permitted during Watcher callback");$n(this[In],t)}};r=In,n=new WeakSet,e.isComputed=e=>"object"==typeof e&&nn(n,e),e.Computed=class{constructor(t,i){on(this,n),rn(this,r);const o=function(e){const t=Object.create(Cn);t.computation=e;const i=()=>kn(t);return i[hn]=t,i}(t),s=o[hn];if(s.consumerAllowSignalWrites=!0,this[In]=s,s.wrapper=this,i){const t=i.equals;t&&(s.equal=t),s.watched=i[e.subtle.watched],s.unwatched=i[e.subtle.unwatched]}}get(){if(!(0,e.isComputed)(this))throw new TypeError("Wrong receiver type for Signal.Computed.prototype.get");return kn(this[In])}},(t=>{var i,r,n,o;t.untrack=function(e){let t,i=null;try{i=un(null),t=e()}finally{un(i)}return t},t.introspectSources=function(t){var i;if(!(0,e.isComputed)(t)&&!(0,e.isWatcher)(t))throw new TypeError("Called introspectSources without a Computed or Watcher argument");return(null==(i=t[In].producerNode)?void 0:i.map(e=>e.wrapper))??[]},t.introspectSinks=function(t){var i;if(!(0,e.isComputed)(t)&&!(0,e.isState)(t))throw new TypeError("Called introspectSinks without a Signal argument");return(null==(i=t[In].liveConsumerNode)?void 0:i.map(e=>e.wrapper))??[]},t.hasSinks=function(t){if(!(0,e.isComputed)(t)&&!(0,e.isState)(t))throw new TypeError("Called hasSinks without a Signal argument");const i=t[In].liveConsumerNode;return!!i&&i.length>0},t.hasSources=function(t){if(!(0,e.isComputed)(t)&&!(0,e.isWatcher)(t))throw new TypeError("Called hasSources without a Computed or Watcher argument");const i=t[In].producerNode;return!!i&&i.length>0};i=In,r=new WeakSet,n=new WeakSet,o=function(t){for(const i of t)if(!(0,e.isComputed)(i)&&!(0,e.isState)(i))throw new TypeError("Called watch/unwatch without a Computed or State argument")},e.isWatcher=e=>nn(r,e),t.Watcher=class{constructor(e){on(this,r),on(this,n),rn(this,i);let t=Object.create(pn);t.wrapper=this,t.consumerMarkedDirty=e,t.consumerIsAlwaysLive=!0,t.consumerAllowSignalWrites=!1,t.producerNode=[],this[In]=t}watch(...t){if(!(0,e.isWatcher)(this))throw new TypeError("Called unwatch without Watcher receiver");sn(this,n,o).call(this,t);const i=this[In];i.dirty=!1;const r=un(i);for(const e of t)fn(e[In]);un(r)}unwatch(...t){if(!(0,e.isWatcher)(this))throw new TypeError("Called unwatch without Watcher receiver");sn(this,n,o).call(this,t);const i=this[In];xn(i);for(let e=i.producerNode.length-1;e>=0;e--)if(t.includes(i.producerNode[e].wrapper)){yn(i.producerNode[e],i.producerIndexOfThis[e]);const t=i.producerNode.length-1;if(i.producerNode[e]=i.producerNode[t],i.producerIndexOfThis[e]=i.producerIndexOfThis[t],i.producerNode.length--,i.producerIndexOfThis.length--,i.nextProducerIndex--,e<i.producerNode.length){const t=i.producerIndexOfThis[e],r=i.producerNode[e];wn(r),r.liveConsumerIndexOfThis[t]=e}}}getPending(){if(!(0,e.isWatcher)(this))throw new TypeError("Called getPending without Watcher receiver");return this[In].producerNode.filter(e=>e.dirty).map(e=>e.wrapper)}},t.currentComputed=function(){var e;return null==(e=ln)?void 0:e.wrapper},t.watched=Symbol("watched"),t.unwatched=Symbol("unwatched")})(e.subtle||(e.subtle={}))})(Qn||(Qn={}));
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const Rn=Symbol("SignalWatcherBrand"),Dn=new FinalizationRegistry(({watcher:e,signal:t})=>{e.unwatch(t)}),Mn=new WeakMap;function Nn(e){return!0===e[Rn]?(console.warn("SignalWatcher should not be applied to the same class more than once."),e):class extends e{constructor(){super(...arguments),this._$St=new Qn.State(0),this._$Si=!1,this._$So=!0,this._$Sh=new Set}_$Sl(){if(void 0!==this._$Su)return;this._$Sv=new Qn.Computed(()=>{this._$St.get(),super.performUpdate()});const e=this._$Su=new Qn.subtle.Watcher(function(){const e=Mn.get(this);void 0!==e&&(!1===e._$Si&&e.requestUpdate(),this.watch())});Mn.set(e,this),Dn.register(this,{watcher:e,signal:this._$Sv}),e.watch(this._$Sv)}_$Sp(){void 0!==this._$Su&&(this._$Su.unwatch(this._$Sv),this._$Sv=void 0,this._$Su=void 0)}performUpdate(){this.isUpdatePending&&(this._$Sl(),this._$Si=!0,this._$St.set(this._$St.get()+1),this._$Si=!1,this._$Sv.get())}update(e){try{this._$So?(this._$So=!1,super.update(e)):this._$Sh.forEach(e=>e.commit())}finally{this.isUpdatePending=!1,this._$Sh.clear()}}requestUpdate(e,t,i){this._$So=!0,super.requestUpdate(e,t,i)}connectedCallback(){super.connectedCallback(),this.requestUpdate()}disconnectedCallback(){super.disconnectedCallback(),queueMicrotask(()=>{!1===this.isConnected&&this._$Sp()})}_(e){this._$Sh.add(e);const t=this._$So;this.requestUpdate(),this._$So=t}m(e){this._$Sh.delete(e)}}}
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */Qn.State,Qn.Computed;const Ln=(e,t)=>new Qn.State(e,t),zn=(e,t)=>new Qn.Computed(e,t),Vn=function(e){const t=[];let i=0;for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);n<128?t[i++]=n:n<2048?(t[i++]=n>>6|192,t[i++]=63&n|128):55296==(64512&n)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(n=65536+((1023&n)<<10)+(1023&e.charCodeAt(++r)),t[i++]=n>>18|240,t[i++]=n>>12&63|128,t[i++]=n>>6&63|128,t[i++]=63&n|128):(t[i++]=n>>12|224,t[i++]=n>>6&63|128,t[i++]=63&n|128)}return t},Un={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){const n=e[t],o=t+1<e.length,s=o?e[t+1]:0,a=t+2<e.length,l=a?e[t+2]:0,c=n>>2,d=(3&n)<<4|s>>4;let h=(15&s)<<2|l>>6,u=63&l;a||(u=64,o||(h=64)),r.push(i[c],i[d],i[h],i[u])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Vn(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let i=0,r=0;for(;i<e.length;){const n=e[i++];if(n<128)t[r++]=String.fromCharCode(n);else if(n>191&&n<224){const o=e[i++];t[r++]=String.fromCharCode((31&n)<<6|63&o)}else if(n>239&&n<365){const o=((7&n)<<18|(63&e[i++])<<12|(63&e[i++])<<6|63&e[i++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[i++],s=e[i++];t[r++]=String.fromCharCode((15&n)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const i=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){const n=i[e.charAt(t++)],o=t<e.length?i[e.charAt(t)]:0;++t;const s=t<e.length?i[e.charAt(t)]:64;++t;const a=t<e.length?i[e.charAt(t)]:64;if(++t,null==n||null==o||null==s||null==a)throw new qn;const l=n<<2|o>>4;if(r.push(l),64!==s){const e=o<<4&240|s>>2;if(r.push(e),64!==a){const e=s<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};
/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Xn=function(e){return function(e){const t=Vn(e);return Un.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Zn=function(e){try{return Un.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Bn(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn=()=>{try{return Bn().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&Zn(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},Fn=e=>{var t,i;return null===(i=null===(t=jn())||void 0===t?void 0:t.emulatorHosts)||void 0===i?void 0:i[e]},Wn=e=>{const t=Fn(e);if(!t)return;const i=t.lastIndexOf(":");if(i<=0||i+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(i+1),10);return"["===t[0]?[t.substring(1,i-1),r]:[t.substring(0,i),r]},Yn=()=>{var e;return null===(e=jn())||void 0===e?void 0:e.config},Gn=e=>{var t;return null===(t=jn())||void 0===t?void 0:t[`_${e}`]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Hn{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,i))}}}
/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(e){return!1}}async function Jn(e){return(await fetch(e,{credentials:"include"})).ok}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eo(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i=t||"demo-project",r=e.iat||0,n=e.sub||e.user_id;if(!n)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:n,user_id:n,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Xn(JSON.stringify({alg:"none",type:"JWT"})),Xn(JSON.stringify(o)),""].join(".")}const to={};let io=!1;function ro(e,t){if("undefined"==typeof window||"undefined"==typeof document||!Kn(window.location.host)||to[e]===t||to[e]||io)return;function i(e){return`__firebase__banner__${e}`}to[e]=t;const r="__firebase__banner",n=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(to))to[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function o(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{io=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function s(){const e=function(e){let t=document.getElementById(e),i=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),i=!0),{created:i,element:t}}(r),t=i("text"),s=document.getElementById(t)||document.createElement("span"),a=i("learnmore"),l=document.getElementById(a)||document.createElement("a"),c=i("preprendIcon"),d=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,a);const i=o();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(d,c),t.append(d,s,l,i),document.body.appendChild(t)}n?(s.innerText="Preview backend disconnected.",d.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(d.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',s.innerText="Preview backend running in this workspace."),s.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",s):s()}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function no(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function oo(){var e;const t=null===(e=jn())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}}function so(){return!oo()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ao(){return!oo()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function lo(){try{return"object"==typeof indexedDB}catch(e){return!1}}class co extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name="FirebaseError",Object.setPrototypeOf(this,co.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ho.prototype.create)}}class ho{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},r=`${this.service}/${e}`,n=this.errors[e],o=n?function(e,t){return e.replace(uo,(e,i)=>{const r=t[i];return null!=r?String(r):`<${i}?>`})}(n,i):"Error",s=`${this.serviceName}: ${o} (${r}).`;return new co(r,s,i)}}const uo=/\{\$([^}]+)}/g;function po(e,t){if(e===t)return!0;const i=Object.keys(e),r=Object.keys(t);for(const n of i){if(!r.includes(n))return!1;const i=e[n],o=t[n];if(fo(i)&&fo(o)){if(!po(i,o))return!1}else if(i!==o)return!1}for(const e of r)if(!i.includes(e))return!1;return!0}function fo(e){return null!==e&&"object"==typeof e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mo(e){const t=[];for(const[i,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(i)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(i)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function go(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[i,r]=e.split("=");t[decodeURIComponent(i)]=decodeURIComponent(r)}}),t}function vo(e){const t=e.indexOf("?");if(!t)return"";const i=e.indexOf("#",t);return e.substring(t,i>0?i:void 0)}class Oo{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(void 0===e&&void 0===t&&void 0===i)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const i of t)if(i in e&&"function"==typeof e[i])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:i},void 0===r.next&&(r.next=yo),void 0===r.error&&(r.error=yo),void 0===r.complete&&(r.complete=yo);const n=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),n}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yo(){}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bo(e){return e&&e._delegate?e._delegate:e}class xo{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wo="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Hn;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&e.resolve(i)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(e){if(r)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e))try{this.getOrInitializeService({instanceIdentifier:wo})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:i});t.resolve(e)}catch(e){}}}}clearInstance(e=wo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=wo){return this.instances.has(e)}getOptions(e=wo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[e,t]of this.instancesDeferred.entries()){i===this.normalizeInstanceIdentifier(e)&&t.resolve(r)}return r}onInit(e,t){var i;const r=this.normalizeInstanceIdentifier(t),n=null!==(i=this.onInitCallbacks.get(r))&&void 0!==i?i:new Set;n.add(e),this.onInitCallbacks.set(r,n);const o=this.instances.get(r);return o&&e(o,r),()=>{n.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const r of i)try{r(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:So(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch(e){}return i||null}normalizeInstanceIdentifier(e=wo){return this.component?this.component.multipleInstances?e:wo:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function So(e){return e===wo?void 0:e}class _o{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ko(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var To;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(To||(To={}));const Co={debug:To.DEBUG,verbose:To.VERBOSE,info:To.INFO,warn:To.WARN,error:To.ERROR,silent:To.SILENT},Po=To.INFO,Eo={[To.DEBUG]:"log",[To.VERBOSE]:"log",[To.INFO]:"info",[To.WARN]:"warn",[To.ERROR]:"error"},$o=(e,t,...i)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),n=Eo[t];if(!n)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[n](`[${r}]  ${e.name}:`,...i)};class Ao{constructor(e){this.name=e,this._logLevel=Po,this._logHandler=$o,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in To))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?Co[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,To.DEBUG,...e),this._logHandler(this,To.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,To.VERBOSE,...e),this._logHandler(this,To.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,To.INFO,...e),this._logHandler(this,To.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,To.WARN,...e),this._logHandler(this,To.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,To.ERROR,...e),this._logHandler(this,To.ERROR,...e)}}let Io,Qo;const Ro=new WeakMap,Do=new WeakMap,Mo=new WeakMap,No=new WeakMap,Lo=new WeakMap;let zo={get(e,t,i){if(e instanceof IDBTransaction){if("done"===t)return Do.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Mo.get(e);if("store"===t)return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return qo(e[t])},set:(e,t,i)=>(e[t]=i,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Vo(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Qo||(Qo=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(Xo(this),t),qo(Ro.get(this))}:function(...t){return qo(e.apply(Xo(this),t))}:function(t,...i){const r=e.call(Xo(this),t,...i);return Mo.set(r,t.sort?t.sort():[t]),qo(r)}}function Uo(e){return"function"==typeof e?Vo(e):(e instanceof IDBTransaction&&function(e){if(Do.has(e))return;const t=new Promise((t,i)=>{const r=()=>{e.removeEventListener("complete",n),e.removeEventListener("error",o),e.removeEventListener("abort",o)},n=()=>{t(),r()},o=()=>{i(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",n),e.addEventListener("error",o),e.addEventListener("abort",o)});Do.set(e,t)}(e),t=e,(Io||(Io=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,zo):e);var t}function qo(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,i)=>{const r=()=>{e.removeEventListener("success",n),e.removeEventListener("error",o)},n=()=>{t(qo(e.result)),r()},o=()=>{i(e.error),r()};e.addEventListener("success",n),e.addEventListener("error",o)});return t.then(t=>{t instanceof IDBCursor&&Ro.set(t,e)}).catch(()=>{}),Lo.set(t,e),t}(e);if(No.has(e))return No.get(e);const t=Uo(e);return t!==e&&(No.set(e,t),Lo.set(t,e)),t}const Xo=e=>Lo.get(e);const Zo=["get","getKey","getAll","getAllKeys","count"],Bo=["put","add","delete","clear"],jo=new Map;function Fo(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(jo.get(t))return jo.get(t);const i=t.replace(/FromIndex$/,""),r=t!==i,n=Bo.includes(i);if(!(i in(r?IDBIndex:IDBObjectStore).prototype)||!n&&!Zo.includes(i))return;const o=async function(e,...t){const o=this.transaction(e,n?"readwrite":"readonly");let s=o.store;return r&&(s=s.index(t.shift())),(await Promise.all([s[i](...t),n&&o.done]))[0]};return jo.set(t,o),o}zo=(e=>({...e,get:(t,i,r)=>Fo(t,i)||e.get(t,i,r),has:(t,i)=>!!Fo(t,i)||e.has(t,i)}))(zo);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Wo{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const Yo="@firebase/app",Go="0.13.2",Ho=new Ao("@firebase/app"),Ko="@firebase/app-compat",Jo="@firebase/analytics-compat",es="@firebase/analytics",ts="@firebase/app-check-compat",is="@firebase/app-check",rs="@firebase/auth",ns="@firebase/auth-compat",os="@firebase/database",ss="@firebase/data-connect",as="@firebase/database-compat",ls="@firebase/functions",cs="@firebase/functions-compat",ds="@firebase/installations",hs="@firebase/installations-compat",us="@firebase/messaging",ps="@firebase/messaging-compat",fs="@firebase/performance",ms="@firebase/performance-compat",gs="@firebase/remote-config",vs="@firebase/remote-config-compat",Os="@firebase/storage",ys="@firebase/storage-compat",bs="@firebase/firestore",xs="@firebase/ai",ws="@firebase/firestore-compat",ks="firebase",Ss="[DEFAULT]",_s={[Yo]:"fire-core",[Ko]:"fire-core-compat",[es]:"fire-analytics",[Jo]:"fire-analytics-compat",[is]:"fire-app-check",[ts]:"fire-app-check-compat",[rs]:"fire-auth",[ns]:"fire-auth-compat",[os]:"fire-rtdb",[ss]:"fire-data-connect",[as]:"fire-rtdb-compat",[ls]:"fire-fn",[cs]:"fire-fn-compat",[ds]:"fire-iid",[hs]:"fire-iid-compat",[us]:"fire-fcm",[ps]:"fire-fcm-compat",[fs]:"fire-perf",[ms]:"fire-perf-compat",[gs]:"fire-rc",[vs]:"fire-rc-compat",[Os]:"fire-gcs",[ys]:"fire-gcs-compat",[bs]:"fire-fst",[ws]:"fire-fst-compat",[xs]:"fire-vertex","fire-js":"fire-js",[ks]:"fire-js-all"},Ts=new Map,Cs=new Map,Ps=new Map;function Es(e,t){try{e.container.addComponent(t)}catch(i){Ho.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,i)}}function $s(e){const t=e.name;if(Ps.has(t))return Ho.debug(`There were multiple attempts to register component ${t}.`),!1;Ps.set(t,e);for(const t of Ts.values())Es(t,e);for(const t of Cs.values())Es(t,e);return!0}function As(e,t){const i=e.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),e.container.getProvider(t)}function Is(e){return null!=e&&void 0!==e.settings}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs=new ho("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Rs{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new xo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qs.create("app-deleted",{appName:this._name})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds="11.10.0";function Ms(e,t={}){let i=e;if("object"!=typeof t){t={name:t}}const r=Object.assign({name:Ss,automaticDataCollectionEnabled:!0},t),n=r.name;if("string"!=typeof n||!n)throw Qs.create("bad-app-name",{appName:String(n)});if(i||(i=Yn()),!i)throw Qs.create("no-options");const o=Ts.get(n);if(o){if(po(i,o.options)&&po(r,o.config))return o;throw Qs.create("duplicate-app",{appName:n})}const s=new _o(n);for(const e of Ps.values())s.addComponent(e);const a=new Rs(i,r,s);return Ts.set(n,a),a}function Ns(e=Ss){const t=Ts.get(e);if(!t&&e===Ss&&Yn())return Ms();if(!t)throw Qs.create("no-app",{appName:e});return t}function Ls(e,t,i){var r;let n=null!==(r=_s[e])&&void 0!==r?r:e;i&&(n+=`-${i}`);const o=n.match(/\s|\//),s=t.match(/\s|\//);if(o||s){const e=[`Unable to register library "${n}" with version "${t}":`];return o&&e.push(`library name "${n}" contains illegal characters (whitespace or "/")`),o&&s&&e.push("and"),s&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Ho.warn(e.join(" "))}$s(new xo(`${n}-version`,()=>({library:n,version:t}),"VERSION"))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs="firebase-heartbeat-store";let Vs=null;function Us(){return Vs||(Vs=function(e,t,{blocked:i,upgrade:r,blocking:n,terminated:o}={}){const s=indexedDB.open(e,t),a=qo(s);return r&&s.addEventListener("upgradeneeded",e=>{r(qo(s.result),e.oldVersion,e.newVersion,qo(s.transaction),e)}),i&&s.addEventListener("blocked",e=>i(e.oldVersion,e.newVersion,e)),a.then(e=>{o&&e.addEventListener("close",()=>o()),n&&e.addEventListener("versionchange",e=>n(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(zs)}catch(e){console.warn(e)}}}).catch(e=>{throw Qs.create("idb-open",{originalErrorMessage:e.message})})),Vs}async function qs(e,t){try{const i=(await Us()).transaction(zs,"readwrite"),r=i.objectStore(zs);await r.put(t,Xs(e)),await i.done}catch(e){if(e instanceof co)Ho.warn(e.message);else{const t=Qs.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});Ho.warn(t.message)}}}function Xs(e){return`${e.name}!${e.options.appId}`}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new js(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Bs();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:i}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,i=e[0].date;for(let r=1;r<e.length;r++)e[r].date<i&&(i=e[r].date,t=r);return t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ho.warn(e)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Bs(),{heartbeatsToSend:i,unsentEntries:r}=function(e,t=1024){const i=[];let r=e.slice();for(const n of e){const e=i.find(e=>e.agent===n.agent);if(e){if(e.dates.push(n.date),Fs(i)>t){e.dates.pop();break}}else if(i.push({agent:n.agent,dates:[n.date]}),Fs(i)>t){i.pop();break}r=r.slice(1)}return{heartbeatsToSend:i,unsentEntries:r}}(this._heartbeatsCache.heartbeats),n=Xn(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),n}catch(e){return Ho.warn(e),""}}}function Bs(){return(new Date).toISOString().substring(0,10)}class js{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!lo()&&new Promise((e,t)=>{try{let i=!0;const r="validate-browser-context-for-indexeddb-analytics-module",n=self.indexedDB.open(r);n.onsuccess=()=>{n.result.close(),i||self.indexedDB.deleteDatabase(r),e(!0)},n.onupgradeneeded=()=>{i=!1},n.onerror=()=>{var e;t((null===(e=n.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Us()).transaction(zs),i=await t.objectStore(zs).get(Xs(e));return await t.done,i}catch(e){if(e instanceof co)Ho.warn(e.message);else{const t=Qs.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});Ho.warn(t.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return qs(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return qs(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}}}function Fs(e){return Xn(JSON.stringify({version:2,heartbeats:e})).length}var Ws;Ws="",$s(new xo("platform-logger",e=>new Wo(e),"PRIVATE")),$s(new xo("heartbeat",e=>new Zs(e),"PRIVATE")),Ls(Yo,Go,Ws),Ls(Yo,Go,"esm2017"),Ls("fire-js","");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Ys="firebasestorage.googleapis.com",Gs="storageBucket";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Hs extends co{constructor(e,t,i=0){super(ea(e),`Firebase Storage: ${t} (${ea(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Hs.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ea(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ks,Js;function ea(e){return"storage/"+e}function ta(){return new Hs(Ks.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function ia(){return new Hs(Ks.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ra(){return new Hs(Ks.CANCELED,"User canceled the upload/download.")}function na(){return new Hs(Ks.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function oa(e){return new Hs(Ks.INVALID_ARGUMENT,e)}function sa(){return new Hs(Ks.APP_DELETED,"The Firebase app was deleted.")}function aa(e,t){return new Hs(Ks.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function la(e){throw new Hs(Ks.INTERNAL_ERROR,"Internal error: "+e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Ks||(Ks={}));class ca{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=ca.makeFromUrl(e,t)}catch(t){return new ca(e,"")}if(""===i.path)return i;throw r=e,new Hs(Ks.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let i=null;const r="([A-Za-z0-9.\\-_]+)";const n=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}const s=t.replace(/[.]/g,"\\."),a=[{regex:n,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${s}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp(`^https?://${t===Ys?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:o}];for(let t=0;t<a.length;t++){const r=a[t],n=r.regex.exec(e);if(n){const e=n[r.indices.bucket];let t=n[r.indices.path];t||(t=""),i=new ca(e,t),r.postModify(i);break}}if(null==i)throw function(e){return new Hs(Ks.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return i}}class da{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ha(e){return"string"==typeof e||e instanceof String}function ua(e){return pa()&&e instanceof Blob}function pa(){return"undefined"!=typeof Blob}function fa(e,t,i,r){if(r<t)throw oa(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>i)throw oa(`Invalid value for '${e}'. Expected ${i} or less.`)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ma(e,t,i){let r=t;return null==i&&(r=`https://${t}`),`${i}://${r}/v0${e}`}function ga(e){const t=encodeURIComponent;let i="?";for(const r in e)if(e.hasOwnProperty(r)){i=i+(t(r)+"="+t(e[r]))+"&"}return i=i.slice(0,-1),i}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function va(e,t){const i=e>=500&&e<600,r=-1!==[408,429].indexOf(e),n=-1!==t.indexOf(e);return i||r||n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Js||(Js={}));class Oa{constructor(e,t,i,r,n,o,s,a,l,c,d,h=!0,u=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=r,this.successCodes_=n,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=d,this.retry=h,this.isUsingEmulator=u,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new ya(!1,null,!0));const i=this.connectionFactory_();this.pendingConnection_=i;const r=e=>{const t=e.loaded,i=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,i)};null!==this.progressCallback_&&i.addUploadProgressListener(r),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&i.removeUploadProgressListener(r),this.pendingConnection_=null;const t=i.getErrorCode()===Js.NO_ERROR,n=i.getStatus();if(!t||va(n,this.additionalRetryCodes_)&&this.retry){const t=i.getErrorCode()===Js.ABORT;return void e(!1,new ya(!1,null,t))}const o=-1!==this.successCodes_.indexOf(n);e(!0,new ya(o,i))})},t=(e,t)=>{const i=this.resolve_,r=this.reject_,n=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(n,n.getResponse());!
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){return void 0!==e}(e)?i():i(e)}catch(e){r(e)}else if(null!==n){const e=ta();e.serverResponse=n.getErrorText(),this.errorCallback_?r(this.errorCallback_(n,e)):r(e)}else if(t.canceled){r(this.appDelete_?sa():ra())}else{r(ia())}};this.canceled_?t(0,new ya(!1,null,!0)):this.backoffId_=function(e,t,i){let r=1,n=null,o=null,s=!1,a=0;function l(){return 2===a}let c=!1;function d(...e){c||(c=!0,t.apply(null,e))}function h(t){n=setTimeout(()=>{n=null,e(p,l())},t)}function u(){o&&clearTimeout(o)}function p(e,...t){if(c)return void u();if(e)return u(),void d.call(null,e,...t);if(l()||s)return u(),void d.call(null,e,...t);let i;r<64&&(r*=2),1===a?(a=2,i=0):i=1e3*(r+Math.random()),h(i)}let f=!1;function m(e){f||(f=!0,u(),c||(null!==n?(e||(a=2),clearTimeout(n),h(0)):e||(a=1)))}return h(0),o=setTimeout(()=>{s=!0,m(!0)},i),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class ya{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ba(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function xa(...e){const t=ba();if(void 0!==t){const i=new t;for(let t=0;t<e.length;t++)i.append(e[t]);return i.getBlob()}if(pa())return new Blob(e);throw new Hs(Ks.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function wa(e){if("undefined"==typeof atob)throw t="base-64",new Hs(Ks.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`);var t;return atob(e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka="raw",Sa="base64",_a="base64url",Ta="data_url";class Ca{constructor(e,t){this.data=e,this.contentType=t||null}}function Pa(e,t){switch(e){case ka:return new Ca(Ea(t));case Sa:case _a:return new Ca($a(e,t));case Ta:return new Ca(function(e){const t=new Aa(e);return t.base64?$a(Sa,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(e){throw aa(Ta,"Malformed data URL.")}return Ea(t)}(t.rest)}(t),new Aa(t).contentType)}throw ta()}function Ea(e){const t=[];for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296==(64512&r)){if(i<e.length-1&&56320==(64512&e.charCodeAt(i+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++i),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function $a(e,t){switch(e){case Sa:{const i=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(i||r){throw aa(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?")}break}case _a:{const i=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(i||r){throw aa(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let i;try{i=wa(t)}catch(t){if(t.message.includes("polyfill"))throw t;throw aa(e,"Invalid character found")}const r=new Uint8Array(i.length);for(let e=0;e<i.length;e++)r[e]=i.charCodeAt(e);return r}class Aa{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw aa(Ta,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;null!=i&&(this.base64=function(e,t){const i=e.length>=t.length;if(!i)return!1;return e.substring(e.length-t.length)===t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}class Ia{constructor(e,t){let i=0,r="";ua(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(ua(this.data_)){const i=function(e,t,i){return e.webkitSlice?e.webkitSlice(t,i):e.mozSlice?e.mozSlice(t,i):e.slice?e.slice(t,i):null}(this.data_,e,t);return null===i?null:new Ia(i)}{const i=new Uint8Array(this.data_.buffer,e,t-e);return new Ia(i,!0)}}static getBlob(...e){if(pa()){const t=e.map(e=>e instanceof Ia?e.data_:e);return new Ia(xa.apply(null,t))}{const t=e.map(e=>ha(e)?Pa(ka,e).data:e.data_);let i=0;t.forEach(e=>{i+=e.byteLength});const r=new Uint8Array(i);let n=0;return t.forEach(e=>{for(let t=0;t<e.length;t++)r[n++]=e[t]}),new Ia(r,!0)}}uploadData(){return this.data_}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qa(e){let t;try{t=JSON.parse(e)}catch(e){return null}return function(e){return"object"==typeof e&&!Array.isArray(e)}(t)?t:null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ra(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Da(e,t){return t}class Ma{constructor(e,t,i,r){this.server=e,this.local=t||e,this.writable=!!i,this.xform=r||Da}}let Na=null;function La(){if(Na)return Na;const e=[];e.push(new Ma("bucket")),e.push(new Ma("generation")),e.push(new Ma("metageneration")),e.push(new Ma("name","fullPath",!0));const t=new Ma("name");t.xform=function(e,t){return function(e){return!ha(e)||e.length<2?e:Ra(e)}(t)},e.push(t);const i=new Ma("size");return i.xform=function(e,t){return void 0!==t?Number(t):t},e.push(i),e.push(new Ma("timeCreated")),e.push(new Ma("updated")),e.push(new Ma("md5Hash",null,!0)),e.push(new Ma("cacheControl",null,!0)),e.push(new Ma("contentDisposition",null,!0)),e.push(new Ma("contentEncoding",null,!0)),e.push(new Ma("contentLanguage",null,!0)),e.push(new Ma("contentType",null,!0)),e.push(new Ma("metadata","customMetadata",!0)),Na=e,Na}function za(e,t,i){const r={type:"file"},n=i.length;for(let e=0;e<n;e++){const n=i[e];r[n.local]=n.xform(r,t[n.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const i=e.bucket,r=e.fullPath,n=new ca(i,r);return t._makeStorageReference(n)}})}(r,e),r}function Va(e,t,i){const r=Qa(t);if(null===r)return null;return za(e,r,i)}function Ua(e,t){const i={},r=t.length;for(let n=0;n<r;n++){const r=t[n];r.writable&&(i[r.server]=e[r.local])}return JSON.stringify(i)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qa="prefixes",Xa="items";function Za(e,t,i){const r=Qa(i);if(null===r)return null;return function(e,t,i){const r={prefixes:[],items:[],nextPageToken:i.nextPageToken};if(i[qa])for(const n of i[qa]){const i=n.replace(/\/$/,""),o=e._makeStorageReference(new ca(t,i));r.prefixes.push(o)}if(i[Xa])for(const n of i[Xa]){const i=e._makeStorageReference(new ca(t,n.name));r.items.push(i)}return r}(e,t,r)}class Ba{constructor(e,t,i,r){this.url=e,this.method=t,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ja(e){if(!e)throw ta()}function Fa(e,t){return function(i,r){const n=Va(e,r,t);return ja(null!==n),n}}function Wa(e,t){return function(i,r){const n=Va(e,r,t);return ja(null!==n),function(e,t,i,r){const n=Qa(t);if(null===n)return null;if(!ha(n.downloadTokens))return null;const o=n.downloadTokens;if(0===o.length)return null;const s=encodeURIComponent;return o.split(",").map(t=>{const n=e.bucket,o=e.fullPath;return ma("/b/"+s(n)+"/o/"+s(o),i,r)+ga({alt:"media",token:t})})[0]}(n,r,e.host,e._protocol)}}function Ya(e){return function(t,i){let r;var n,o;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new Hs(Ks.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new Hs(Ks.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(o=e.bucket,r=new Hs(Ks.QUOTA_EXCEEDED,"Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(n=e.path,r=new Hs(Ks.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")):r=i,r.status=t.getStatus(),r.serverResponse=i.serverResponse,r}}function Ga(e){const t=Ya(e);return function(i,r){let n=t(i,r);var o;return 404===i.getStatus()&&(o=e.path,n=new Hs(Ks.OBJECT_NOT_FOUND,"Object '"+o+"' does not exist.")),n.serverResponse=r.serverResponse,n}}function Ha(e,t,i){const r=ma(t.fullServerUrl(),e.host,e._protocol),n=e.maxOperationRetryTime,o=new Ba(r,"GET",Fa(e,i),n);return o.errorHandler=Ga(t),o}function Ka(e,t,i,r,n){const o={};t.isRoot?o.prefix="":o.prefix=t.path+"/",i.length>0&&(o.delimiter=i),r&&(o.pageToken=r),n&&(o.maxResults=n);const s=ma(t.bucketOnlyServerUrl(),e.host,e._protocol),a=e.maxOperationRetryTime,l=new Ba(s,"GET",function(e,t){return function(i,r){const n=Za(e,t,r);return ja(null!==n),n}}(e,t.bucket),a);return l.urlParams=o,l.errorHandler=Ya(t),l}function Ja(e,t,i){const r=Object.assign({},i);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}class el{constructor(e,t,i,r){this.current=e,this.total=t,this.finalized=!!i,this.metadata=r||null}}function tl(e,t){let i=null;try{i=e.getResponseHeader("X-Goog-Upload-Status")}catch(e){ja(!1)}return ja(!!i&&-1!==(t||["active"]).indexOf(i)),i}const il=262144;function rl(e,t,i,r,n,o,s,a){const l=new el(0,0);if(s?(l.current=s.current,l.total=s.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw new Hs(Ks.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");const c=l.total-l.current;let d=c;n>0&&(d=Math.min(d,n));const h=l.current,u=h+d;let p="";p=0===d?"finalize":c===d?"upload, finalize":"upload";const f={"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":`${l.current}`},m=r.slice(h,u);if(null===m)throw na();const g=t.maxUploadRetryTime,v=new Ba(i,"POST",function(e,i){const n=tl(e,["active","final"]),s=l.current+d,a=r.size();let c;return c="final"===n?Fa(t,o)(e,i):null,new el(s,a,"final"===n,c)},g);return v.headers=f,v.body=m.uploadData(),v.progressCallback=a||null,v.errorHandler=Ya(e),v}const nl="running",ol="paused",sl="success",al="canceled",ll="error";function cl(e){switch(e){case"running":case"pausing":case"canceling":return nl;case"paused":return ol;case"success":return sl;case"canceled":return al;default:return ll}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,t,i){const r=function(e){return"function"==typeof e}(e)||null!=t||null!=i;if(r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=i?i:void 0;else{const t=e;this.next=t.next,this.error=t.error,this.complete=t.complete}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hl(e){return(...t)=>{Promise.resolve().then(()=>e(...t))}}class ul{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Js.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Js.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Js.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,r,n){if(this.sent_)throw la("cannot .send() more than once");if(Kn(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==n)for(const e in n)n.hasOwnProperty(e)&&this.xhr_.setRequestHeader(e,n[e].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw la("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw la("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw la("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw la("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class pl extends ul{initXhr(){this.xhr_.responseType="text"}}function fl(){return new pl}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,t,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=i,this._mappings=La(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=e=>{if(this._request=void 0,this._chunkMultiplier=1,e._codeEquals(Ks.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const t=this.isExponentialBackoffExpired();if(va(e.status,[])){if(!t)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();e=ia()}this._error=e,this._transition("error")}},this._metadataErrorHandler=e=>{this._request=void 0,e._codeEquals(Ks.CANCELED)?this.completeTransitions_():(this._error=e,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((e,t)=>{this._resolve=e,this._reject=t,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,i])=>{switch(this._state){case"running":e(t,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const i=function(e,t,i,r,n){const o=t.bucketOnlyServerUrl(),s=Ja(t,r,n),a={name:s.fullPath},l=ma(o,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},d=Ua(s,i),h=e.maxUploadRetryTime,u=new Ba(l,"POST",function(e){let t;tl(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(e){ja(!1)}return ja(ha(t)),t},h);return u.urlParams=a,u.headers=c,u.body=d,u.errorHandler=Ya(t),u}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,fl,e,t);this._request=r,r.getPromise().then(e=>{this._request=void 0,this._uploadUrl=e,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,i)=>{const r=function(e,t,i,r){const n=e.maxUploadRetryTime,o=new Ba(i,"POST",function(e){const t=tl(e,["active","final"]);let i=null;try{i=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(e){ja(!1)}i||ja(!1);const n=Number(i);return ja(!isNaN(n)),new el(n,r.size(),"final"===t)},n);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=Ya(t),o}(this._ref.storage,this._ref._location,e,this._blob),n=this._ref.storage._makeRequest(r,fl,t,i);this._request=n,n.getPromise().then(e=>{this._request=void 0,this._updateProgress(e.current),this._needToFetchStatus=!1,e.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=il*this._chunkMultiplier,t=new el(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,n)=>{let o;try{o=rl(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(e){return this._error=e,void this._transition("error")}const s=this._ref.storage._makeRequest(o,fl,r,n,!1);this._request=s,s.getPromise().then(e=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(e.current),e.finalized?(this._metadata=e.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){2*(il*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const i=Ha(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,fl,e,t);this._request=r,r.getPromise().then(e=>{this._request=void 0,this._metadata=e,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const i=function(e,t,i,r,n){const o=t.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();s["Content-Type"]="multipart/related; boundary="+a;const l=Ja(t,r,n),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Ua(l,i)+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",d="\r\n--"+a+"--",h=Ia.getBlob(c,r,d);if(null===h)throw na();const u={name:l.fullPath},p=ma(o,e.host,e._protocol),f=e.maxUploadRetryTime,m=new Ba(p,"POST",Fa(e,i),f);return m.urlParams=u,m.headers=s,m.body=h.uploadData(),m.errorHandler=Ya(t),m}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,fl,e,t);this._request=r,r.getPromise().then(e=>{this._request=void 0,this._metadata=e,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=ra(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=cl(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,i,r){const n=new dl(t||void 0,i||void 0,r||void 0);return this._addObserver(n),()=>{this._removeObserver(n)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise();this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(cl(this._state)){case sl:hl(this._resolve.bind(null,this.snapshot))();break;case al:case ll:hl(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(cl(this._state)){case nl:case ol:e.next&&hl(e.next.bind(e,this.snapshot))();break;case sl:e.complete&&hl(e.complete.bind(e))();break;default:e.error&&hl(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e,t){this._service=e,this._location=t instanceof ca?t:ca.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new gl(e,t)}get root(){const e=new ca(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Ra(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new ca(this._location.bucket,e);return new gl(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new Hs(Ks.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function vl(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,i){const r=ma(t.fullServerUrl(),e.host,e._protocol),n=e.maxOperationRetryTime,o=new Ba(r,"GET",Wa(e,i),n);return o.errorHandler=Ga(t),o}(e.storage,e._location,La());return e.storage.makeRequestWithTokens(t,fl).then(e=>{if(null===e)throw new Hs(Ks.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e})}function Ol(e){e._throwIfRoot("deleteObject");const t=function(e,t){const i=ma(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,n=new Ba(i,"DELETE",function(e,t){},r);return n.successCodes=[200,204],n.errorHandler=Ga(t),n}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,fl)}function yl(e,t){if(e instanceof wl){const i=e;if(null==i._bucket)throw new Hs(Ks.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Gs+"' property when initializing the app?");const r=new gl(i,i._bucket);return null!=t?yl(r,t):r}return void 0!==t?function(e,t){const i=function(e,t){const i=t.split("/").filter(e=>e.length>0).join("/");return 0===e.length?i:e+"/"+i}(e._location.path,t),r=new ca(e._location.bucket,i);return new gl(e.storage,r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,t):e}function bl(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof wl)return new gl(e,t);throw oa("To use ref(service, url), the first argument must be a Storage instance.")}return yl(e,t)}function xl(e,t){const i=null==t?void 0:t[Gs];return null==i?null:ca.makeFromBucketSpec(i,e)}class wl{constructor(e,t,i,r,n,o=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=r,this._firebaseVersion=n,this._isUsingEmulator=o,this._bucket=null,this._host=Ys,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?ca.makeFromBucketSpec(r,this._host):xl(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=ca.makeFromBucketSpec(this._url,e):this._bucket=xl(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){fa("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){fa("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){if(Is(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new gl(this,e)}_makeRequest(e,t,i,r,n=!0){if(this._deleted)return new da(sa());{const o=function(e,t,i,r,n,o,s=!0,a=!1){const l=ga(e.urlParams),c=e.url+l,d=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(d,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(d,i),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(d,o),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(d,r),new Oa(c,e.method,d,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,n,s,a)}(e,this._appId,i,r,t,this._firebaseVersion,n,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,r).getPromise()}}const kl="@firebase/storage",Sl="0.13.14",_l="storage";function Tl(e,t,i){return function(e,t,i){return e._throwIfRoot("uploadBytesResumable"),new ml(e,new Ia(t),i)}(e=bo(e),t,i)}function Cl(e){return function(e){e._throwIfRoot("getMetadata");const t=Ha(e.storage,e._location,La());return e.storage.makeRequestWithTokens(t,fl)}(e=bo(e))}function Pl(e,t){return function(e,t){null!=t&&"number"==typeof t.maxResults&&fa("options.maxResults",1,1e3,t.maxResults);const i=t||{},r=Ka(e.storage,e._location,"/",i.pageToken,i.maxResults);return e.storage.makeRequestWithTokens(r,fl)}(e=bo(e),t)}function El(e){return vl(e=bo(e))}function $l(e,t){return bl(e=bo(e),t)}function Al(e,t,i,r={}){!function(e,t,i,r={}){e.host=`${t}:${i}`;const n=Kn(t);n&&(Jn(`https://${e.host}/b`),ro("Storage",!0)),e._isUsingEmulator=!0,e._protocol=n?"https":"http";const{mockUserToken:o}=r;o&&(e._overrideAuthToken="string"==typeof o?o:eo(o,e.app.options.projectId))}(e,t,i,r)}function Il(e,{instanceIdentifier:t}){const i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),n=e.getProvider("app-check-internal");return new wl(i,r,n,t,Ds)}$s(new xo(_l,Il,"PUBLIC").setMultipleInstances(!0)),Ls(kl,Sl,""),Ls(kl,Sl,"esm2017");const Ql=Ln("World"),Rl=Ln(0),Dl=Ln(null);zn(()=>{const e=Ql.get();return{name:e,greeting:`Hello, ${e}!`,clickCount:Rl.get(),lastInteractionTs:Dl.get()}});const Ml=Ln(""),Nl=Ln(null),Ll=Ln("idle"),zl=Ln(null),Vl=Ln(null),Ul=zn(()=>({packageName:Ml.get(),packageData:Nl.get(),status:Ll.get(),lastUpdated:zl.get(),errorMessage:Vl.get()}));function ql(e){Ml.get()!==e&&Ml.set(e)}const Xl=["web-components","signals","monorepo"],Zl=["intro","intermediate","advanced"],Bl=Ln(Xl[0]),jl=Ln([]),Fl=Ln("idle"),Wl=Ln(null),Yl=Ln(0),Gl=Ln(null),Hl=Ln(!1),Kl=Ln(!1);let Jl=0,ec=null;const tc=[...Xl],ic=zn(()=>({version:Yl.get(),topic:Bl.get(),tasks:jl.get(),status:Fl.get(),lastUpdated:Wl.get(),isAutoRefreshing:Kl.get(),errorMessage:Gl.get()}));if("object"==typeof globalThis){const e=globalThis;e.__dfPracticeForcePracticeErrorSetter=function(e){Hl.set(e)},e.__dfPracticeGetForcePracticeError=()=>Hl.get()}function rc(e){return Bl.get()!==e&&(Bl.set(e),Yl.set(Yl.get()+1),!0)}async function nc(e){const t=e??Bl.get();Bl.set(t),Yl.set(Yl.get()+1),Jl+=1;const i=Jl;if(Fl.set("loading"),Gl.set(null),cc())return jl.set([]),Fl.set("error"),Gl.set("Practice tasks fetch forced failure"),void Yl.set(Yl.get()+1);try{const e=await async function(e){if(cc())throw new Error("Practice tasks fetch forced failure");await(t=450+550*Math.random(),new Promise(e=>{cc()?e():setTimeout(e,t)}));var t;const i=e,r=Date.now();return Array.from({length:3},(t,n)=>{const o=Zl[n%Zl.length];return{id:`${i}-${r}-${n}`,title:ac(e,o,n+1),summary:lc(e,o),difficulty:o}})}(t);if(i!==Jl)return;jl.set(e),Fl.set("ready"),Wl.set(Date.now()),Yl.set(Yl.get()+1)}catch(e){if(i!==Jl)return;Fl.set("error"),Gl.set(e instanceof Error?e.message:"Unknown error"),Yl.set(Yl.get()+1)}}function oc(e=15e3){sc(),Kl.set(!0),nc(),Yl.set(Yl.get()+1),ec=setInterval(()=>{nc()},e)}function sc(){null!==ec&&(clearInterval(ec),ec=null),Kl.set(!1),Yl.set(Yl.get()+1)}function ac(e,t,i){return`${r=e,r.charAt(0).toUpperCase()+r.slice(1)} practice #${i} (${t})`;var r}function lc(e,t){switch(e){case"web-components":return"advanced"===t?"Wire a custom element into a host app without leaking implementation details.":"intermediate"===t?"Refactor lifecycle logic behind a Lit controller to prep for reuse.":"Author a Lit element with reactive properties and slots.";case"signals":return"advanced"===t?"Compose computed signals across packages to flow derived state into UI.":"intermediate"===t?"Replace event-driven updates with signal setters in a form workflow.":"Connect a Lit component to a signal-backed store to mirror state.";case"monorepo":return"advanced"===t?"Split a shared package and rehydrate Turbo caches after dependency changes.":"intermediate"===t?"Promote a feature into a shared workspace while keeping storybook coverage.":"Add a new app workspace and register its build artifacts with Turbo.";default:return"Practice focus not yet documented."}}function cc(){return Hl.get()||Boolean(globalThis.__dfPracticeForcePracticeError)}const dc=Ln([]),hc=Ln("none"),uc=Ln([{id:"none",label:"None"},{id:"upload",label:"Upload"},{id:"site",label:"Site"},{id:"add",label:"Add"}]);zn(()=>({options:uc.get(),selectedId:hc.get(),disabledIds:dc.get()}));const pc=Ln("none"),fc=Ln(""),mc=Ln("Select File to Upload"),gc=Ln(!1),vc=Ln(0),Oc=Ln(!1),yc=Ln("void");zn(()=>({mode:pc.get(),linkUrl:fc.get(),fileName:mc.get(),isUploading:gc.get(),uploadProgress:vc.get(),isValid:Oc.get(),mediaType:yc.get()}));const bc=Ln(0),xc=Ln(""),wc=Ln("idle"),kc=Ln(null),Sc=Ln(null);function _c(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}zn(()=>({tokenCount:bc.get(),documentContent:xc.get(),status:wc.get(),lastUpdated:kc.get(),errorMessage:Sc.get()}));const Tc=_c,Cc=new ho("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Pc=new Ao("@firebase/auth");function Ec(e,...t){Pc.logLevel<=To.ERROR&&Pc.error(`Auth (${Ds}): ${e}`,...t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(e,...t){throw Rc(e,...t)}function Ac(e,...t){return Rc(e,...t)}function Ic(e,t,i){const r=Object.assign(Object.assign({},Tc()),{[t]:i});return new ho("auth","Firebase",r).create(t,{appName:e.name})}function Qc(e){return Ic(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Rc(e,...t){if("string"!=typeof e){const i=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(i,...r)}return Cc.create(e,...t)}function Dc(e,t,...i){if(!e)throw Rc(t,...i)}function Mc(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Ec(t),new Error(t)}function Nc(e,t){e||Mc(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lc(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function zc(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vc(){return"undefined"==typeof navigator||!navigator||!("onLine"in navigator)||"boolean"!=typeof navigator.onLine||"http:"!==zc()&&"https:"!==zc()&&!function(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}()&&!("connection"in navigator)||navigator.onLine}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Uc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Nc(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(no())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return Vc()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qc(e,t){Nc(e.emulator,"Emulator should always be set here");const{url:i}=e.emulator;return t?`${i}${t.startsWith("/")?t.slice(1):t}`:i}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void Mc("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void Mc("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void Mc("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zc={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Bc=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],jc=new Uc(3e4,6e4);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Wc(e,t,i,r,n={}){return Yc(e,n,async()=>{let n={},o={};r&&("GET"===t?o=r:n={body:JSON.stringify(r)});const s=mo(Object.assign({key:e.config.apiKey},o)).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:a},n);return"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&Kn(e.emulatorConfig.host)&&(l.credentials="include"),Xc.fetch()(await Hc(e,e.config.apiHost,i,s),l)})}async function Yc(e,t,i){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Zc),t);try{const t=new Jc(e),n=await Promise.race([i(),t.promise]);t.clearNetworkTimeout();const o=await n.json();if("needConfirmation"in o)throw ed(e,"account-exists-with-different-credential",o);if(n.ok&&!("errorMessage"in o))return o;{const t=n.ok?o.errorMessage:o.error.message,[i,s]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===i)throw ed(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===i)throw ed(e,"email-already-in-use",o);if("USER_DISABLED"===i)throw ed(e,"user-disabled",o);const a=r[i]||i.toLowerCase().replace(/[_\s]+/g,"-");if(s)throw Ic(e,a,s);$c(e,a)}}catch(t){if(t instanceof co)throw t;$c(e,"network-request-failed",{message:String(t)})}}async function Gc(e,t,i,r,n={}){const o=await Wc(e,t,i,r,n);return"mfaPendingCredential"in o&&$c(e,"multi-factor-auth-required",{_serverResponse:o}),o}async function Hc(e,t,i,r){const n=`${t}${i}?${r}`,o=e,s=o.config.emulator?qc(e.config,n):`${e.config.apiScheme}://${n}`;if(Bc.includes(i)&&(await o._persistenceManagerAvailable,"COOKIE"===o._getPersistenceType())){return o._getPersistence()._getFinalTarget(s).toString()}return s}function Kc(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Jc{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Ac(this.auth,"network-request-failed")),jc.get())})}}function ed(e,t,i){const r={appName:e.name};i.email&&(r.email=i.email),i.phoneNumber&&(r.phoneNumber=i.phoneNumber);const n=Ac(e,t,r);return n.customData._tokenResponse=i,n}function td(e){return void 0!==e&&void 0!==e.enterprise}class id{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Kc(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function rd(e,t){return Wc(e,"POST","/v1/accounts:lookup",t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nd(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}function od(e){return 1e3*Number(e)}function sd(e){const[t,i,r]=e.split(".");if(void 0===t||void 0===i||void 0===r)return Ec("JWT malformed, contained fewer than 3 sections"),null;try{const e=Zn(i);return e?JSON.parse(e):(Ec("Failed to decode base64 JWT payload"),null)}catch(e){return Ec("Caught error parsing JWT payload as JSON",null==e?void 0:e.toString()),null}}function ad(e){const t=sd(e);return Dc(t,"internal-error"),Dc(void 0!==t.exp,"internal-error"),Dc(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ld(e,t,i=!1){if(i)return t;try{return await t}catch(t){throw t instanceof co&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class cd{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null==e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=nd(this.lastLoginAt),this.creationTime=nd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hd(e){var t;const i=e.auth,r=await e.getIdToken(),n=await ld(e,rd(i,{idToken:r}));Dc(null==n?void 0:n.users.length,i,"internal-error");const o=n.users[0];e._notifyReloadListener(o);const s=(null===(t=o.providerUserInfo)||void 0===t?void 0:t.length)?ud(o.providerUserInfo):[],a=function(e,t){const i=e.filter(e=>!t.some(t=>t.providerId===e.providerId));return[...i,...t]}(e.providerData,s),l=e.isAnonymous,c=!(e.email&&o.passwordHash||(null==a?void 0:a.length)),d=!!l&&c,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new dd(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(e,h)}function ud(t){return t.map(t=>{var{providerId:i}=t,r=e(t,["providerId"]);return{providerId:i,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class pd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Dc(e.idToken,"internal-error"),Dc(void 0!==e.idToken,"internal-error"),Dc(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):ad(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Dc(0!==e.length,"internal-error");const t=ad(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return t||!this.accessToken||this.isExpired?(Dc(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:r,expiresIn:n}=await async function(e,t){const i=await Yc(e,{},async()=>{const i=mo({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:n}=e.config,o=await Hc(e,r,"/v1/token",`key=${n}`),s=await e._getAdditionalHeaders();s["Content-Type"]="application/x-www-form-urlencoded";const a={method:"POST",headers:s,body:i};return e.emulatorConfig&&Kn(e.emulatorConfig.host)&&(a.credentials="include"),Xc.fetch()(o,a)});return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}(e,t);this.updateTokensAndExpiration(i,r,Number(n))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*i}static fromJSON(e,t){const{refreshToken:i,accessToken:r,expirationTime:n}=t,o=new pd;return i&&(Dc("string"==typeof i,"internal-error",{appName:e}),o.refreshToken=i),r&&(Dc("string"==typeof r,"internal-error",{appName:e}),o.accessToken=r),n&&(Dc("number"==typeof n,"internal-error",{appName:e}),o.expirationTime=n),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new pd,this.toJSON())}_performRefresh(){return Mc("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fd(e,t){Dc("string"==typeof e||void 0===e,"internal-error",{appName:t})}class md{constructor(t){var{uid:i,auth:r,stsTokenManager:n}=t,o=e(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new cd(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=i,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new dd(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await ld(this,this.stsTokenManager.getToken(this.auth,e));return Dc(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const i=bo(e),r=await i.getIdToken(t),n=sd(r);Dc(n&&n.exp&&n.auth_time&&n.iat,i.auth,"internal-error");const o="object"==typeof n.firebase?n.firebase:void 0,s=null==o?void 0:o.sign_in_provider;return{claims:n,token:r,authTime:nd(od(n.auth_time)),issuedAtTime:nd(od(n.iat)),expirationTime:nd(od(n.exp)),signInProvider:s||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=bo(e);await hd(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Dc(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new md(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Dc(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await hd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Is(this.auth.app))return Promise.reject(Qc(this.auth));const e=await this.getIdToken();return await ld(this,
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(e,t){return Wc(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,n,o,s,a,l,c;const d=null!==(i=t.displayName)&&void 0!==i?i:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,u=null!==(n=t.phoneNumber)&&void 0!==n?n:void 0,p=null!==(o=t.photoURL)&&void 0!==o?o:void 0,f=null!==(s=t.tenantId)&&void 0!==s?s:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:O,emailVerified:y,isAnonymous:b,providerData:x,stsTokenManager:w}=t;Dc(O&&w,e,"internal-error");const k=pd.fromJSON(this.name,w);Dc("string"==typeof O,e,"internal-error"),fd(d,e.name),fd(h,e.name),Dc("boolean"==typeof y,e,"internal-error"),Dc("boolean"==typeof b,e,"internal-error"),fd(u,e.name),fd(p,e.name),fd(f,e.name),fd(m,e.name),fd(g,e.name),fd(v,e.name);const S=new md({uid:O,auth:e,email:h,emailVerified:y,displayName:d,isAnonymous:b,photoURL:p,phoneNumber:u,tenantId:f,stsTokenManager:k,createdAt:g,lastLoginAt:v});return x&&Array.isArray(x)&&(S.providerData=x.map(e=>Object.assign({},e))),m&&(S._redirectEventId=m),S}static async _fromIdTokenResponse(e,t,i=!1){const r=new pd;r.updateFromServerResponse(t);const n=new md({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await hd(n),n}static async _fromGetAccountInfoResponse(e,t,i){const r=t.users[0];Dc(void 0!==r.localId,"internal-error");const n=void 0!==r.providerUserInfo?ud(r.providerUserInfo):[],o=!(r.email&&r.passwordHash||(null==n?void 0:n.length)),s=new pd;s.updateFromIdToken(i);const a=new md({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:o}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:n,metadata:new dd(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash||(null==n?void 0:n.length))};return Object.assign(a,l),a}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd=new Map;function vd(e){Nc(e instanceof Function,"Expected a class definition");let t=gd.get(e);return t?(Nc(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,gd.set(e,t),t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Od.type="NONE";const yd=Od;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bd(e,t,i){return`firebase:${e}:${t}:${i}`}class xd{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:r,name:n}=this.auth;this.fullUserKey=bd(this.userKey,r.apiKey,n),this.fullPersistenceKey=bd("persistence",r.apiKey,n),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"==typeof e){const t=await rd(this.auth,{idToken:e}).catch(()=>{});return t?md._fromGetAccountInfoResponse(this.auth,t,e):null}return md._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new xd(vd(yd),e,i);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let n=r[0]||vd(yd);const o=bd(i,e.config.apiKey,e.name);let s=null;for(const i of t)try{const t=await i._get(o);if(t){let r;if("string"==typeof t){const i=await rd(e,{idToken:t}).catch(()=>{});if(!i)break;r=await md._fromGetAccountInfoResponse(e,i,t)}else r=md._fromJSON(e,t);i!==n&&(s=r),n=i;break}}catch(e){}const a=r.filter(e=>e._shouldAllowMigration);return n._shouldAllowMigration&&a.length?(n=a[0],s&&await n._set(o,s.toJSON()),await Promise.all(t.map(async e=>{if(e!==n)try{await e._remove(o)}catch(e){}})),new xd(n,e,i)):new xd(n,e,i)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wd(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Td(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(kd(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Pd(t))return"Blackberry";if(Ed(t))return"Webos";if(Sd(t))return"Safari";if((t.includes("chrome/")||_d(t))&&!t.includes("edge/"))return"Chrome";if(Cd(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=e.match(t);if(2===(null==i?void 0:i.length))return i[1]}return"Other"}function kd(e=no()){return/firefox\//i.test(e)}function Sd(e=no()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function _d(e=no()){return/crios\//i.test(e)}function Td(e=no()){return/iemobile/i.test(e)}function Cd(e=no()){return/android/i.test(e)}function Pd(e=no()){return/blackberry/i.test(e)}function Ed(e=no()){return/webos/i.test(e)}function $d(e=no()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Ad(){return function(){const e=no();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Id(e=no()){return $d(e)||Cd(e)||Ed(e)||Pd(e)||/windows phone/i.test(e)||Td(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qd(e,t=[]){let i;switch(e){case"Browser":i=wd(no());break;case"Worker":i=`${wd(no())}-${e}`;break;default:i=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${i}/JsCore/${Ds}/${r}`}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=t=>new Promise((i,r)=>{try{i(e(t))}catch(e){r(e)}});i.onAbort=t,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(e){t.reverse();for(const e of t)try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==e?void 0:e.message})}}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e){var t,i,r,n;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(i=e.allowedNonAlphanumericCharacters)||void 0===i?void 0:i.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(n=e.forceUpgradeOnSignin)&&void 0!==n&&n,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,r,n,o,s;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(i=a.meetsMaxPasswordLength)||void 0===i||i),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(n=a.containsUppercaseLetter)||void 0===n||n),a.isValid&&(a.isValid=null===(o=a.containsNumericCharacter)||void 0===o||o),a.isValid&&(a.isValid=null===(s=a.containsNonAlphanumericCharacter)||void 0===s||s),a}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let i;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,n){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=n))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ld(this),this.idTokenSubscription=new Ld(this),this.beforeStateQueue=new Rd(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Cc,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=vd(t)),this._initializationPromise=this.queue(async()=>{var i,r,n;if(!this._deleted&&(this.persistenceManager=await xd.create(this,e),null===(i=this._resolvePersistenceManagerAvailable)||void 0===i||i.call(this),!this._deleted)){if(null===(r=this._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(n=this.currentUser)||void 0===n?void 0:n.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await rd(this,{idToken:e}),i=await md._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Is(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,n=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,o=null==r?void 0:r._redirectEventId,s=await this.tryRedirectSignIn(e);i&&i!==o||!(null==s?void 0:s.user)||(r=s.user,n=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(n)try{await this.beforeStateQueue.runMiddleware(r)}catch(e){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(e))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Dc(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await hd(e)}catch(e){if("auth/network-request-failed"!==(null==e?void 0:e.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Is(this.app))return Promise.reject(Qc(this));const t=e?bo(e):null;return t&&Dc(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Dc(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Is(this.app)?Promise.reject(Qc(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Is(this.app)?Promise.reject(Qc(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(vd(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e,t={}){return Wc(e,"GET","/v2/passwordPolicy",Fc(e,t))}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this),t=new Dd(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ho("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Wc(e,"POST","/v2/accounts:revokeToken",Fc(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&vd(e)||this._popupRedirectResolver;Dc(t,this,"argument-error"),this.redirectPersistenceManager=await xd.create(this,[vd(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(i=this.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};const n="function"==typeof t?t:t.next.bind(t);let o=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(Dc(s,this,"internal-error"),s.then(()=>{o||n(this.currentUser)}),"function"==typeof t){const n=e.addObserver(t,i,r);return()=>{o=!0,n()}}{const i=e.addObserver(t);return()=>{o=!0,i()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Dc(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Qd(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(Is(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){Pc.logLevel<=To.WARN&&Pc.warn(`Auth (${Ds}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}function Nd(e){return bo(e)}class Ld{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const i=new Oo(e,t);return i.subscribe.bind(i)}(e=>this.observer=e)}get next(){return Dc(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Vd(e){return zd.loadJS(e)}class Ud{constructor(){this.enterprise=new qd}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class qd{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Xd="NO_RECAPTCHA";class Zd{constructor(e){this.type="recaptcha-enterprise",this.auth=Nd(e)}async verify(e="verify",t=!1){async function i(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,i)=>{(async function(e,t){return Wc(e,"GET","/v2/recaptchaConfig",Fc(e,t))})(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const i=new id(r);return null==e.tenantId?e._agentRecaptchaConfig=i:e._tenantRecaptchaConfigs[e.tenantId]=i,t(i.siteKey)}i(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{i(e)})})}function r(t,i,r){const n=window.grecaptcha;td(n)?n.enterprise.ready(()=>{n.enterprise.execute(t,{action:e}).then(e=>{i(e)}).catch(()=>{i(Xd)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Ud).execute("siteKey",{action:"verify"})}return new Promise((e,n)=>{i(this.auth).then(i=>{if(!t&&td(window.grecaptcha))r(i,e,n);else{if("undefined"==typeof window)return void n(new Error("RecaptchaVerifier is only supported in browser"));let t=zd.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Vd(t).then(()=>{r(i,e,n)}).catch(e=>{n(e)})}}).catch(e=>{n(e)})})}}async function Bd(e,t,i,r=!1,n=!1){const o=new Zd(e);let s;if(n)s=Xd;else try{s=await o.verify(i)}catch(e){s=await o.verify(i,!0)}const a=Object.assign({},t);if("mfaSmsEnrollment"===i||"mfaSmsSignIn"===i){if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function jd(e,t,i,r,n){var o;if(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const n=await Bd(e,t,i,"getOobCode"===i);return r(e,n)}return r(e,t).catch(async n=>{if("auth/missing-recaptcha-token"===n.code){console.log(`${i} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const n=await Bd(e,t,i,"getOobCode"===i);return r(e,n)}return Promise.reject(n)})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fd(e,t,i){const r=Nd(e);Dc(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const n=!!(null==i?void 0:i.disableWarnings),o=Wd(t),{host:s,port:a}=function(e){const t=Wd(e),i=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!i)return{host:"",port:null};const r=i[2].split("@").pop()||"",n=/^(\[[^\]]+\])(:|$)/.exec(r);if(n){const e=n[1];return{host:e,port:Yd(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Yd(t)}}}(t),l=null===a?"":`:${a}`,c={url:`${o}//${s}${l}/`},d=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:n})});if(!r._canInitEmulator)return Dc(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void Dc(po(c,r.config.emulator)&&po(d,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Kn(s)?(Jn(`${o}//${s}${l}`),ro("Auth",!0)):n||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */()}function Wd(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Yd(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Gd{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Mc("not implemented")}_getIdTokenResponse(e){return Mc("not implemented")}_linkToIdToken(e,t){return Mc("not implemented")}_getReauthenticationResolver(e){return Mc("not implemented")}}async function Hd(e,t){return Wc(e,"POST","/v1/accounts:signUp",t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kd(e,t){return Gc(e,"POST","/v1/accounts:signInWithPassword",Fc(e,t))}async function Jd(e,t){return async function(e,t){return Wc(e,"POST","/v1/accounts:sendOobCode",Fc(e,t))}(e,t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class eh extends Gd{constructor(e,t,i,r=null){super("password",i),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new eh(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new eh(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return jd(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Kd);case"emailLink":return async function(e,t){return Gc(e,"POST","/v1/accounts:signInWithEmailLink",Fc(e,t))}(e,{email:this._email,oobCode:this._password});default:$c(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return jd(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Hd);case"emailLink":return async function(e,t){return Gc(e,"POST","/v1/accounts:signInWithEmailLink",Fc(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:$c(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function th(e,t){return Gc(e,"POST","/v1/accounts:signInWithIdp",Fc(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih extends Gd{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ih(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):$c("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const i="string"==typeof t?JSON.parse(t):t,{providerId:r,signInMethod:n}=i,o=e(i,["providerId","signInMethod"]);if(!r||!n)return null;const s=new ih(r,n);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){return th(e,this.buildRequest())}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,th(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,th(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=mo(t)}return e}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e){var t,i,r,n,o,s;const a=go(vo(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(i=a.oobCode)&&void 0!==i?i:null,d=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Dc(l&&c&&d,"argument-error"),this.apiKey=l,this.operation=d,this.code=c,this.continueUrl=null!==(n=a.continueUrl)&&void 0!==n?n:null,this.languageCode=null!==(o=a.lang)&&void 0!==o?o:null,this.tenantId=null!==(s=a.tenantId)&&void 0!==s?s:null}static parseLink(e){const t=function(e){const t=go(vo(e)).link,i=t?go(vo(t)).deep_link_id:null,r=go(vo(e)).deep_link_id;return(r?go(vo(r)).link:null)||r||i||t||e}(e);try{return new rh(t)}catch(e){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(){this.providerId=nh.PROVIDER_ID}static credential(e,t){return eh._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=rh.parseLink(t);return Dc(i,"argument-error"),eh._fromEmailAndCode(e,i.code,i.tenantId)}}nh.PROVIDER_ID="password",nh.EMAIL_PASSWORD_SIGN_IN_METHOD="password",nh.EMAIL_LINK_SIGN_IN_METHOD="emailLink";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class oh{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh extends oh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah extends sh{constructor(){super("facebook.com")}static credential(e){return ih._fromParams({providerId:ah.PROVIDER_ID,signInMethod:ah.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ah.credentialFromTaggedObject(e)}static credentialFromError(e){return ah.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return ah.credential(e.oauthAccessToken)}catch(e){return null}}}ah.FACEBOOK_SIGN_IN_METHOD="facebook.com",ah.PROVIDER_ID="facebook.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class lh extends sh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ih._fromParams({providerId:lh.PROVIDER_ID,signInMethod:lh.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return lh.credentialFromTaggedObject(e)}static credentialFromError(e){return lh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return lh.credential(t,i)}catch(e){return null}}}lh.GOOGLE_SIGN_IN_METHOD="google.com",lh.PROVIDER_ID="google.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ch extends sh{constructor(){super("github.com")}static credential(e){return ih._fromParams({providerId:ch.PROVIDER_ID,signInMethod:ch.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ch.credentialFromTaggedObject(e)}static credentialFromError(e){return ch.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return ch.credential(e.oauthAccessToken)}catch(e){return null}}}ch.GITHUB_SIGN_IN_METHOD="github.com",ch.PROVIDER_ID="github.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class dh extends sh{constructor(){super("twitter.com")}static credential(e,t){return ih._fromParams({providerId:dh.PROVIDER_ID,signInMethod:dh.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return dh.credentialFromTaggedObject(e)}static credentialFromError(e){return dh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return dh.credential(t,i)}catch(e){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function hh(e,t){return Gc(e,"POST","/v1/accounts:signUp",Fc(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dh.TWITTER_SIGN_IN_METHOD="twitter.com",dh.PROVIDER_ID="twitter.com";class uh{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,r=!1){const n=await md._fromIdTokenResponse(e,i,r),o=ph(i);return new uh({user:n,providerId:o,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const r=ph(i);return new uh({user:e,providerId:r,_tokenResponse:i,operationType:t})}}function ph(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh extends co{constructor(e,t,i,r){var n;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,fh.prototype),this.customData={appName:e.name,tenantId:null!==(n=e.tenantId)&&void 0!==n?n:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new fh(e,t,i,r)}}function mh(e,t,i,r){return("reauthenticate"===t?i._getReauthenticationResolver(e):i._getIdTokenResponse(e)).catch(i=>{if("auth/multi-factor-auth-required"===i.code)throw fh._fromErrorAndOperation(e,i,t,r);throw i})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function gh(e,t,i=!1){if(Is(e.app))return Promise.reject(Qc(e));const r="signIn",n=await mh(e,r,t),o=await uh._fromIdTokenResponse(e,r,n);return i||await e._updateCurrentUser(o.user),o}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function vh(e){const t=Nd(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function Oh(e,t,i){return Is(e.app)?Promise.reject(Qc(e)):async function(e,t){return gh(Nd(e),t)}(bo(e),nh.credential(t,i)).catch(async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&vh(e),t})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function yh(e,{displayName:t,photoURL:i}){if(void 0===t&&void 0===i)return;const r=bo(e),n={idToken:await r.getIdToken(),displayName:t,photoUrl:i,returnSecureToken:!0},o=await ld(r,async function(e,t){return Wc(e,"POST","/v1/accounts:update",t)}(r.auth,n));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const s=r.providerData.find(({providerId:e})=>"password"===e);s&&(s.displayName=r.displayName,s.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}const bh="__sak";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(bh,"1"),this.storage.removeItem(bh),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh extends xh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Id(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),r=this.localCache[t];i!==r&&e(t,r,i)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((e,t,i)=>{this.notifyListeners(e,i)});const i=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(i);(t||this.localCache[i]!==e)&&this.notifyListeners(i,e)},n=this.storage.getItem(i);Ad()&&n!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const e of Array.from(i))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}wh.type="LOCAL";const kh=wh;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh extends xh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Sh.type="SESSION";const _h=Sh;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Th{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const i=new Th(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:r,data:n}=t.data,o=this.handlersMap[r];if(!(null==o?void 0:o.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const s=Array.from(o).map(async e=>e(t.origin,n)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}}))}(s);t.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ch(e="",t=10){let i="";for(let e=0;e<t;e++)i+=Math.floor(10*Math.random());return e+i}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Th.receivers=[];class Ph{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let n,o;return new Promise((s,a)=>{const l=Ch("",20);r.port1.start();const c=setTimeout(()=>{a(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),n=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(n),s(t.data.response);break;default:clearTimeout(c),clearTimeout(n),a(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eh(){return window}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function $h(){return void 0!==Eh().WorkerGlobalScope&&"function"==typeof Eh().importScripts}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Ah="firebaseLocalStorageDb",Ih="firebaseLocalStorage",Qh="fbase_key";class Rh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Dh(e,t){return e.transaction([Ih],t?"readwrite":"readonly").objectStore(Ih)}function Mh(){const e=indexedDB.open(Ah,1);return new Promise((t,i)=>{e.addEventListener("error",()=>{i(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Ih,{keyPath:Qh})}catch(e){i(e)}}),e.addEventListener("success",async()=>{const i=e.result;i.objectStoreNames.contains(Ih)?t(i):(i.close(),await function(){const e=indexedDB.deleteDatabase(Ah);return new Rh(e).toPromise()}(),t(await Mh()))})})}async function Nh(e,t,i){const r=Dh(e,!0).put({[Qh]:t,value:i});return new Rh(r).toPromise()}function Lh(e,t){const i=Dh(e,!0).delete(t);return new Rh(i).toPromise()}class zh{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Mh()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $h()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Th._getInstance($h()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Ph(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&(null===(e=i[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=i[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Mh();return await Nh(e,bh,"1"),await Lh(e,bh),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Nh(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const i=Dh(e,!1).get(t),r=await new Rh(i).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Lh(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Dh(e,!1).getAll();return new Rh(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],i=new Set;if(0!==e.length)for(const{fbase_key:r,value:n}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(n)&&(this.notifyListeners(r,n),t.push(r));for(const e of Object.keys(this.localCache))this.localCache[e]&&!i.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const e of Array.from(i))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}zh.type="LOCAL";const Vh=zh;
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Uh(e,t){return t?vd(t):(Dc(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Uc(3e4,6e4);class qh extends Gd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return th(e,this._buildIdpRequest())}_linkToIdToken(e,t){return th(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return th(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Xh(e){return gh(e.auth,new qh(e),e.bypassAuthState)}function Zh(e){const{auth:t,user:i}=e;return Dc(i,t,"internal-error"),
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(e,t,i=!1){const{auth:r}=e;if(Is(r.app))return Promise.reject(Qc(r));const n="reauthenticate";try{const o=await ld(e,mh(r,n,t,e),i);Dc(o.idToken,r,"internal-error");const s=sd(o.idToken);Dc(s,r,"internal-error");const{sub:a}=s;return Dc(e.uid===a,r,"user-mismatch"),uh._forOperation(e,n,o)}catch(e){throw"auth/user-not-found"===(null==e?void 0:e.code)&&$c(r,"user-mismatch"),e}}(i,new qh(e),e.bypassAuthState)}async function Bh(e){const{auth:t,user:i}=e;return Dc(i,t,"internal-error"),async function(e,t,i=!1){const r=await ld(e,t._linkToIdToken(e.auth,await e.getIdToken()),i);return uh._forOperation(e,"link",r)}(i,new qh(e),e.bypassAuthState)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,t,i,r,n=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=n,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:r,tenantId:n,error:o,type:s}=e;if(o)return void this.reject(o);const a={auth:this.auth,requestUri:t,sessionId:i,tenantId:n||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(a))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Xh;case"linkViaPopup":case"linkViaRedirect":return Bh;case"reauthViaPopup":case"reauthViaRedirect":return Zh;default:$c(this.auth,"internal-error")}}resolve(e){Nc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Nc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh=new Uc(2e3,1e4);async function Wh(e,t,i){if(Is(e.app))return Promise.reject(Ac(e,"operation-not-supported-in-this-environment"));const r=Nd(e);!function(e,t,i){if(!(t instanceof i))throw i.name!==t.constructor.name&&$c(e,"argument-error"),Ic(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}(e,t,oh);const n=Uh(r,i);return new Yh(r,"signInViaPopup",t,n).executeNotNull()}class Yh extends jh{constructor(e,t,i,r,n){super(e,t,r,n),this.provider=i,this.authWindow=null,this.pollId=null,Yh.currentPopupAction&&Yh.currentPopupAction.cancel(),Yh.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Dc(e,this.auth,"internal-error"),e}async onExecution(){Nc(1===this.filter.length,"Popup operations only handle one event");const e=Ch();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Ac(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Ac(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Yh.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;(null===(i=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===i?void 0:i.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ac(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Fh.get())};e()}}Yh.currentPopupAction=null;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Gh="pendingRedirect",Hh=new Map;class Kh extends jh{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Hh.get(this.auth._key());if(!e){try{const t=await async function(e,t){const i=function(e){return bd(Gh,e.config.apiKey,e.name)}(t),r=function(e){return vd(e._redirectPersistence)}(e);if(!await r._isAvailable())return!1;const n="true"===await r._get(i);return await r._remove(i),n}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}Hh.set(this.auth._key(),e)}return this.bypassAuthState||Hh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Jh(e,t){Hh.set(e._key(),t)}async function eu(e,t,i=!1){if(Is(e.app))return Promise.reject(Qc(e));const r=Nd(e),n=Uh(r,t),o=new Kh(r,n,i),s=await o.execute();return s&&!i&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,t)),s}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ru(e);default:return!1}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!ru(e)){const r=(null===(i=e.error.code)||void 0===i?void 0:i.split("auth/")[1])||"internal-error";t.onError(Ac(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(iu(e))}saveEventToCache(e){this.cachedEventUids.add(iu(e)),this.lastProcessedEventTime=Date.now()}}function iu(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function ru({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const nu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ou=/^https?/;async function su(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return Wc(e,"GET","/v1/projects",t)}(e);for(const e of t)try{if(au(e))return}catch(e){}$c(e,"unauthorized-domain")}function au(e){const t=Lc(),{protocol:i,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const n=new URL(e);return""===n.hostname&&""===r?"chrome-extension:"===i&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===i&&n.hostname===r}if(!ou.test(i))return!1;if(nu.test(e))return r===e;const n=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+n+"|"+n+")$","i").test(r)}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lu=new Uc(3e4,6e4);function cu(){const e=Eh().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}function du(e){return new Promise((t,i)=>{var r,n,o;function s(){cu(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{cu(),i(Ac(e,"network-request-failed"))},timeout:lu.get()})}if(null===(n=null===(r=Eh().gapi)||void 0===r?void 0:r.iframes)||void 0===n?void 0:n.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=Eh().gapi)||void 0===o?void 0:o.load)){const t=`__${"iframefcb"}${Math.floor(1e6*Math.random())}`;return Eh()[t]=()=>{gapi.load?s():i(Ac(e,"network-request-failed"))},Vd(`${zd.gapiScript}?onload=${t}`).catch(e=>i(e))}s()}}).catch(e=>{throw hu=null,e})}let hu=null;
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const uu=new Uc(5e3,15e3),pu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mu(e){const t=e.config;Dc(t.authDomain,e,"auth-domain-config-required");const i=t.emulator?qc(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:Ds},n=fu.get(e.config.apiHost);n&&(r.eid=n);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),`${i}?${mo(r).slice(1)}`}async function gu(e){const t=await function(e){return hu=hu||du(e),hu}(e),i=Eh().gapi;return Dc(i,e,"internal-error"),t.open({where:document.body,url:mu(e),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pu,dontclear:!0},t=>new Promise(async(i,r)=>{await t.restyle({setHideOnLeave:!1});const n=Ac(e,"network-request-failed"),o=Eh().setTimeout(()=>{r(n)},uu.get());function s(){Eh().clearTimeout(o),i(t)}t.ping(s).then(s,()=>{r(n)})}))}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ou{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function yu(e,t,i,r=500,n=600){const o=Math.max((window.screen.availHeight-n)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},vu),{width:r.toString(),height:n.toString(),top:o,left:s}),c=no().toLowerCase();i&&(a=_d(c)?"_blank":i),kd(c)&&(t=t||"http://localhost",l.scrollbars="yes");const d=Object.entries(l).reduce((e,[t,i])=>`${e}${t}=${i},`,"");if(function(e=no()){var t;return $d(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(c)&&"_self"!==a)return function(e,t){const i=document.createElement("a");i.href=e,i.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),i.dispatchEvent(r)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t||"",a),new Ou(null);const h=window.open(t||"",a,d);Dc(h,e,"popup-blocked");try{h.focus()}catch(e){}return new Ou(h)}const bu="__/auth/handler",xu="emulator/auth/handler",wu=encodeURIComponent("fac");async function ku(e,t,i,r,n,o){Dc(e.config.authDomain,e,"auth-domain-config-required"),Dc(e.config.apiKey,e,"invalid-api-key");const s={apiKey:e.config.apiKey,appName:e.name,authType:i,redirectUrl:r,v:Ds,eventId:n};if(t instanceof oh){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries({}))s[e]=t}if(t instanceof sh){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(s.scopes=e.join(","))}e.tenantId&&(s.tid=e.tenantId);const a=s;for(const e of Object.keys(a))void 0===a[e]&&delete a[e];const l=await e._getAppCheckToken(),c=l?`#${wu}=${encodeURIComponent(l)}`:"";return`${function({config:e}){if(!e.emulator)return`https://${e.authDomain}/${bu}`;return qc(e,xu)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)}?${mo(a).slice(1)}${c}`}const Su="webStorageSupport";const _u=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_h,this._completeRedirectFn=eu,this._overrideRedirectResult=Jh}async _openPopup(e,t,i,r){var n;Nc(null===(n=this.eventManagers[e._key()])||void 0===n?void 0:n.manager,"_initialize() not called before _openPopup()");return yu(e,await ku(e,t,i,Lc(),r),Ch())}async _openRedirect(e,t,i,r){await this._originValidation(e);return function(e){Eh().location.href=e}(await ku(e,t,i,Lc(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:i}=this.eventManagers[t];return e?Promise.resolve(e):(Nc(i,"If manager is not set, promise should be"),i)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await gu(e),i=new tu(e);return t.register("authEvent",t=>{Dc(null==t?void 0:t.authEvent,e,"invalid-auth-event");return{status:i.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Su,{type:Su},i=>{var r;const n=null===(r=null==i?void 0:i[0])||void 0===r?void 0:r[Su];void 0!==n&&t(!!n),$c(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=su(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Id()||Sd()||$d()}};var Tu="@firebase/auth",Cu="1.10.8";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Pu{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Dc(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Eu=Gn("authIdTokenMaxAge")||300;let $u=null;function Au(e=Ns()){const t=As(e,"auth");if(t.isInitialized())return t.getImmediate();const i=function(e,t){const i=As(e,"auth");if(i.isInitialized()){const e=i.getImmediate();if(po(i.getOptions(),null!=t?t:{}))return e;$c(e,"already-initialized")}return i.initialize({options:t})}(e,{popupRedirectResolver:_u,persistence:[Vh,kh,_h]}),r=Gn("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(n=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),i=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>Eu)return;const r=null==t?void 0:t.token;$u!==r&&($u=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,i){bo(e).beforeAuthStateChanged(t,i)}(i,t,()=>t(i.currentUser)),function(e,t,i,r){bo(e).onIdTokenChanged(t,i,r)}(i,e=>t(e))}}var n;const o=Fn("auth");return o&&Fd(i,`http://${o}`),i}var Iu;!function(e){zd=e}({loadJS:e=>new Promise((t,i)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Ac("internal-error");t.customData=e,i(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),Iu="Browser",$s(new xo("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),n=e.getProvider("app-check-internal"),{apiKey:o,authDomain:s}=i.options;Dc(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const a={apiKey:o,authDomain:s,clientPlatform:Iu,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Qd(Iu)},l=new Md(i,r,n,a);return function(e,t){const i=(null==t?void 0:t.persistence)||[],r=(Array.isArray(i)?i:[i]).map(vd);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),$s(new xo("auth-internal",e=>(e=>new Pu(e))(Nd(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Ls(Tu,Cu,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Iu)),Ls(Tu,Cu,"esm2017");var Qu,Ru,Du="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/(function(){var e;
/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(e,t,i){i||(i=0);var r=Array(16);if("string"==typeof t)for(var n=0;16>n;++n)r[n]=t.charCodeAt(i++)|t.charCodeAt(i++)<<8|t.charCodeAt(i++)<<16|t.charCodeAt(i++)<<24;else for(n=0;16>n;++n)r[n]=t[i++]|t[i++]<<8|t[i++]<<16|t[i++]<<24;t=e.g[0],i=e.g[1],n=e.g[2];var o=e.g[3],s=t+(o^i&(n^o))+r[0]+3614090360&4294967295;s=(i=(n=(o=(t=(i=(n=(o=(t=(i=(n=(o=(t=(i=(n=(o=(t=(i=(n=(o=(t=(i=(n=(o=(t=(i=(n=(o=(t=(i=(n=(o=(t=(i=(n=(o=(t=(i=(n=(o=(t=(i=(n=(o=(t=(i=(n=(o=(t=(i=(n=(o=(t=(i=(n=(o=(t=(i=(n=(o=(t=i+(s<<7&4294967295|s>>>25))+((s=o+(n^t&(i^n))+r[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=n+(i^o&(t^i))+r[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=i+(t^n&(o^t))+r[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^i&(n^o))+r[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=o+(n^t&(i^n))+r[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=n+(i^o&(t^i))+r[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=i+(t^n&(o^t))+r[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^i&(n^o))+r[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=o+(n^t&(i^n))+r[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=n+(i^o&(t^i))+r[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=i+(t^n&(o^t))+r[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^i&(n^o))+r[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=o+(n^t&(i^n))+r[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=n+(i^o&(t^i))+r[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=i+(t^n&(o^t))+r[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=t+(n^o&(i^n))+r[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=o+(i^n&(t^i))+r[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=n+(t^i&(o^t))+r[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=i+(o^t&(n^o))+r[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=t+(n^o&(i^n))+r[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=o+(i^n&(t^i))+r[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=n+(t^i&(o^t))+r[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=i+(o^t&(n^o))+r[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=t+(n^o&(i^n))+r[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=o+(i^n&(t^i))+r[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=n+(t^i&(o^t))+r[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=i+(o^t&(n^o))+r[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=t+(n^o&(i^n))+r[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=o+(i^n&(t^i))+r[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=n+(t^i&(o^t))+r[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=i+(o^t&(n^o))+r[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^n^o)+r[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^i^n)+r[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=n+(o^t^i)+r[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=i+(n^o^t)+r[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=t+(i^n^o)+r[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^i^n)+r[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=n+(o^t^i)+r[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=i+(n^o^t)+r[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=t+(i^n^o)+r[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^i^n)+r[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=n+(o^t^i)+r[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=i+(n^o^t)+r[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=t+(i^n^o)+r[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^i^n)+r[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=n+(o^t^i)+r[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=i+(n^o^t)+r[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^(i|~o))+r[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=o+(i^(t|~n))+r[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=n+(t^(o|~i))+r[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=i+(o^(n|~t))+r[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=t+(n^(i|~o))+r[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=o+(i^(t|~n))+r[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=n+(t^(o|~i))+r[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=i+(o^(n|~t))+r[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=t+(n^(i|~o))+r[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=o+(i^(t|~n))+r[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=n+(t^(o|~i))+r[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=i+(o^(n|~t))+r[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((o=(t=i+((s=t+(n^(i|~o))+r[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=o+(i^(t|~n))+r[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((n=o+((s=n+(t^(o|~i))+r[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(n+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+n&4294967295,e.g[3]=e.g[3]+o&4294967295}function r(e,t){this.h=t;for(var i=[],r=!0,n=e.length-1;0<=n;n--){var o=0|e[n];r&&o==t||(i[n]=o,r=!1)}this.g=i}!function(e,t){function i(){}i.prototype=t.prototype,e.D=t.prototype,e.prototype=new i,e.prototype.constructor=e,e.C=function(e,i,r){for(var n=Array(arguments.length-2),o=2;o<arguments.length;o++)n[o-2]=arguments[o];return t.prototype[i].apply(e,n)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,n=this.B,o=this.h,s=0;s<t;){if(0==o)for(;s<=r;)i(this,e,s),s+=this.blockSize;if("string"==typeof e){for(;s<t;)if(n[o++]=e.charCodeAt(s++),o==this.blockSize){i(this,n),o=0;break}}else for(;s<t;)if(n[o++]=e[s++],o==this.blockSize){i(this,n),o=0;break}}this.h=o,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var i=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&i,i/=256;for(this.u(e),e=Array(16),t=i=0;4>t;++t)for(var r=0;32>r;r+=8)e[i++]=this.g[t]>>>r&255;return e};var n={};function o(e){return-128<=e&&128>e?function(e,t){var i=n;return Object.prototype.hasOwnProperty.call(i,e)?i[e]:i[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function s(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return u(s(-e));for(var t=[],i=1,n=0;e>=i;n++)t[n]=e/i|0,i*=4294967296;return new r(t,0)}var a=o(0),l=o(1),c=o(16777216);function d(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function u(e){for(var t=e.g.length,i=[],n=0;n<t;n++)i[n]=~e.g[n];return new r(i,~e.h).add(l)}function p(e,t){return e.add(u(t))}function f(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(d(t))throw Error("division by zero");if(d(e))return new m(a,a);if(h(e))return t=g(u(e),t),new m(u(t.g),u(t.h));if(h(t))return t=g(e,u(t)),new m(u(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var i=l,r=t;0>=r.l(e);)i=v(i),r=v(r);var n=O(i,1),o=O(r,1);for(r=O(r,2),i=O(i,2);!d(r);){var c=o.add(r);0>=c.l(e)&&(n=n.add(i),o=c),r=O(r,1),i=O(i,1)}return t=p(e,n.j(t)),new m(n,t)}for(n=a;0<=e.l(t);){for(i=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(i)/Math.LN2))?1:Math.pow(2,r-48),c=(o=s(i)).j(t);h(c)||0<c.l(e);)c=(o=s(i-=r)).j(t);d(o)&&(o=l),n=n.add(o),e=p(e,c)}return new m(n,e)}function v(e){for(var t=e.g.length+1,i=[],n=0;n<t;n++)i[n]=e.i(n)<<1|e.i(n-1)>>>31;return new r(i,e.h)}function O(e,t){var i=t>>5;t%=32;for(var n=e.g.length-i,o=[],s=0;s<n;s++)o[s]=0<t?e.i(s+i)>>>t|e.i(s+i+1)<<32-t:e.i(s+i);return new r(o,e.h)}(e=r.prototype).m=function(){if(h(this))return-u(this).m();for(var e=0,t=1,i=0;i<this.g.length;i++){var r=this.i(i);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(d(this))return"0";if(h(this))return"-"+u(this).toString(e);for(var t=s(Math.pow(e,6)),i=this,r="";;){var n=g(i,t).g,o=((0<(i=p(i,n.j(t))).g.length?i.g[0]:i.h)>>>0).toString(e);if(d(i=n))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=p(this,e))?-1:d(e)?0:1},e.abs=function(){return h(this)?u(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),i=[],n=0,o=0;o<=t;o++){var s=n+(65535&this.i(o))+(65535&e.i(o)),a=(s>>>16)+(this.i(o)>>>16)+(e.i(o)>>>16);n=a>>>16,s&=65535,a&=65535,i[o]=a<<16|s}return new r(i,-2147483648&i[i.length-1]?-1:0)},e.j=function(e){if(d(this)||d(e))return a;if(h(this))return h(e)?u(this).j(u(e)):u(u(this).j(e));if(h(e))return u(this.j(u(e)));if(0>this.l(c)&&0>e.l(c))return s(this.m()*e.m());for(var t=this.g.length+e.g.length,i=[],n=0;n<2*t;n++)i[n]=0;for(n=0;n<this.g.length;n++)for(var o=0;o<e.g.length;o++){var l=this.i(n)>>>16,p=65535&this.i(n),m=e.i(o)>>>16,g=65535&e.i(o);i[2*n+2*o]+=p*g,f(i,2*n+2*o),i[2*n+2*o+1]+=l*g,f(i,2*n+2*o+1),i[2*n+2*o+1]+=p*m,f(i,2*n+2*o+1),i[2*n+2*o+2]+=l*m,f(i,2*n+2*o+2)}for(n=0;n<t;n++)i[n]=i[2*n+1]<<16|i[2*n];for(n=t;n<2*t;n++)i[n]=0;return new r(i,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),i=[],n=0;n<t;n++)i[n]=this.i(n)&e.i(n);return new r(i,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),i=[],n=0;n<t;n++)i[n]=this.i(n)|e.i(n);return new r(i,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),i=[],n=0;n<t;n++)i[n]=this.i(n)^e.i(n);return new r(i,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Ru=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=s,r.fromString=function e(t,i){if(0==t.length)throw Error("number format error: empty string");if(2>(i=i||10)||36<i)throw Error("radix out of range: "+i);if("-"==t.charAt(0))return u(e(t.substring(1),i));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=s(Math.pow(i,8)),n=a,o=0;o<t.length;o+=8){var l=Math.min(8,t.length-o),c=parseInt(t.substring(o,o+l),i);8>l?(l=s(Math.pow(i,l)),n=n.j(l).add(s(c))):n=(n=n.j(r)).add(s(c))}return n},Qu=r}).apply(void 0!==Du?Du:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Mu,Nu,Lu,zu,Vu,Uu,qu,Xu,Zu="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,i){return e==Array.prototype||e==Object.prototype||(e[t]=i.value),e};var i=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Zu&&Zu];for(var t=0;t<e.length;++t){var i=e[t];if(i&&i.Math==Math)return i}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var n=i;e=e.split(".");for(var o=0;o<e.length-1;o++){var s=e[o];if(!(s in n))break e;n=n[s]}(r=r(o=n[e=e[e.length-1]]))!=o&&null!=r&&t(n,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var i=0,r=!1,n={next:function(){if(!r&&i<e.length){var n=i++;return{value:t(n,e[n]),done:!1}}return r=!0,{done:!0,value:void 0}}};return n[Symbol.iterator]=function(){return n},n}(this,function(e,t){return t})}});
/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
var r=r||{},n=this||self;function o(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function s(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,i){return e.call.apply(e.bind,arguments)}function l(e,t,i){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),e.apply(t,i)}}return function(){return e.apply(t,arguments)}}function c(e,t,i){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function d(e,t){var i=Array.prototype.slice.call(arguments,1);return function(){var t=i.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function i(){}i.prototype=t.prototype,e.aa=t.prototype,e.prototype=new i,e.prototype.constructor=e,e.Qb=function(e,i,r){for(var n=Array(arguments.length-2),o=2;o<arguments.length;o++)n[o-2]=arguments[o];return t.prototype[i].apply(e,n)}}function u(e){const t=e.length;if(0<t){const i=Array(t);for(let r=0;r<t;r++)i[r]=e[r];return i}return[]}function p(e,t){for(let t=1;t<arguments.length;t++){const i=arguments[t];if(o(i)){const t=e.length||0,r=i.length||0;e.length=t+r;for(let n=0;n<r;n++)e[t+n]=i[n]}else e.push(i)}}function f(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=n.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var v=!(-1==m().indexOf("Gecko")||-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge")||-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE")||-1!=m().indexOf("Edge"));function O(e,t,i){for(const r in e)t.call(i,e[r],r,e)}function y(e){const t={};for(const i in e)t[i]=e[i];return t}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(e,t){let i,r;for(let t=1;t<arguments.length;t++){for(i in r=arguments[t],r)e[i]=r[i];for(let t=0;t<b.length;t++)i=b[t],Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}}function w(e){var t=1;e=e.split(":");const i=[];for(;0<t&&e.length;)i.push(e.shift()),t--;return e.length&&i.push(e.join(":")),i}function k(e){n.setTimeout(()=>{throw e},0)}function S(){var e=E;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var _=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new T,e=>e.reset());class T{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let C,P=!1,E=new class{constructor(){this.h=this.g=null}add(e,t){const i=_.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}},$=()=>{const e=n.Promise.resolve(void 0);C=()=>{e.then(A)}};var A=()=>{for(var e;e=S();){try{e.h.call(e.g)}catch(e){k(e)}var t=_;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}P=!1};function I(){this.s=this.s,this.C=this.C}function Q(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}I.prototype.s=!1,I.prototype.ma=function(){this.s||(this.s=!0,this.N())},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Q.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!n.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};n.addEventListener("test",e,t),n.removeEventListener("test",e,t)}catch(e){}return e}();function D(e,t){if(Q.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var i=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(v){e:{try{g(t.nodeName);var n=!0;break e}catch(e){}n=!1}n||(t=null)}}else"mouseover"==i?t=e.fromElement:"mouseout"==i&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:M[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&D.aa.h.call(this)}}h(D,Q);var M={2:"touch",3:"pen",4:"mouse"};D.prototype.h=function(){D.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var N="closure_listenable_"+(1e6*Math.random()|0),L=0;function z(e,t,i,r,n){this.listener=e,this.proxy=null,this.src=t,this.type=i,this.capture=!!r,this.ha=n,this.key=++L,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function U(e){this.src=e,this.g={},this.h=0}function q(e,t){var i=t.type;if(i in e.g){var r,n=e.g[i],o=Array.prototype.indexOf.call(n,t,void 0);(r=0<=o)&&Array.prototype.splice.call(n,o,1),r&&(V(t),0==e.g[i].length&&(delete e.g[i],e.h--))}}function X(e,t,i,r){for(var n=0;n<e.length;++n){var o=e[n];if(!o.da&&o.listener==t&&o.capture==!!i&&o.ha==r)return n}return-1}U.prototype.add=function(e,t,i,r,n){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var s=X(e,t,r,n);return-1<s?(t=e[s],i||(t.fa=!1)):((t=new z(t,this.src,o,!!r,n)).fa=i,e.push(t)),t};var Z="closure_lm_"+(1e6*Math.random()|0),B={};function j(e,t,i,r,n){if(Array.isArray(t)){for(var o=0;o<t.length;o++)j(e,t[o],i,r,n);return null}return i=J(i),e&&e[N]?e.K(t,i,!!s(r)&&!!r.capture,n):function(e,t,i,r,n,o){if(!t)throw Error("Invalid event type");var a=s(n)?!!n.capture:!!n,l=H(e);if(l||(e[Z]=l=new U(e)),i=l.add(t,i,r,a,o),i.proxy)return i;if(r=function(){function e(i){return t.call(e.src,e.listener,i)}const t=G;return e}(),i.proxy=r,r.src=e,r.listener=i,e.addEventListener)R||(n=a),void 0===n&&(n=!1),e.addEventListener(t.toString(),r,n);else if(e.attachEvent)e.attachEvent(Y(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return i}(e,t,i,!1,r,n)}function F(e,t,i,r,n){if(Array.isArray(t))for(var o=0;o<t.length;o++)F(e,t[o],i,r,n);else r=s(r)?!!r.capture:!!r,i=J(i),e&&e[N]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(i=X(o=e.g[t],i,r,n))&&(V(o[i]),Array.prototype.splice.call(o,i,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=H(e))&&(t=e.g[t.toString()],e=-1,t&&(e=X(t,i,r,n)),(i=-1<e?t[e]:null)&&W(i))}function W(e){if("number"!=typeof e&&e&&!e.da){var t=e.src;if(t&&t[N])q(t.i,e);else{var i=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(i,r,e.capture):t.detachEvent?t.detachEvent(Y(i),r):t.addListener&&t.removeListener&&t.removeListener(r),(i=H(t))?(q(i,e),0==i.h&&(i.src=null,t[Z]=null)):V(e)}}}function Y(e){return e in B?B[e]:B[e]="on"+e}function G(e,t){if(e.da)e=!0;else{t=new D(t,this);var i=e.listener,r=e.ha||e.src;e.fa&&W(e),e=i.call(r,t)}return e}function H(e){return(e=e[Z])instanceof U?e:null}var K="__closure_events_fn_"+(1e9*Math.random()>>>0);function J(e){return"function"==typeof e?e:(e[K]||(e[K]=function(t){return e.handleEvent(t)}),e[K])}function ee(){I.call(this),this.i=new U(this),this.M=this,this.F=null}function te(e,t){var i,r=e.F;if(r)for(i=[];r;r=r.F)i.push(r);if(e=e.M,r=t.type||t,"string"==typeof t)t=new Q(t,e);else if(t instanceof Q)t.target=t.target||e;else{var n=t;x(t=new Q(r,e),n)}if(n=!0,i)for(var o=i.length-1;0<=o;o--){var s=t.g=i[o];n=ie(s,r,!0,t)&&n}if(n=ie(s=t.g=e,r,!0,t)&&n,n=ie(s,r,!1,t)&&n,i)for(o=0;o<i.length;o++)n=ie(s=t.g=i[o],r,!1,t)&&n}function ie(e,t,i,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var n=!0,o=0;o<t.length;++o){var s=t[o];if(s&&!s.da&&s.capture==i){var a=s.listener,l=s.ha||s.src;s.fa&&q(e.i,s),n=!1!==a.call(l,r)&&n}}return n&&!r.defaultPrevented}function re(e,t,i){if("function"==typeof e)i&&(e=c(e,i));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:n.setTimeout(e,t||0)}function ne(e){e.g=re(()=>{e.g=null,e.i&&(e.i=!1,ne(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ee,I),ee.prototype[N]=!0,ee.prototype.removeEventListener=function(e,t,i,r){F(this,e,t,i,r)},ee.prototype.N=function(){if(ee.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var i=t.g[e],r=0;r<i.length;r++)V(i[r]);delete t.g[e],t.h--}}this.F=null},ee.prototype.K=function(e,t,i,r){return this.i.add(String(e),t,!1,i,r)},ee.prototype.L=function(e,t,i,r){return this.i.add(String(e),t,!0,i,r)};class oe extends I{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ne(this)}N(){super.N(),this.g&&(n.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function se(e){I.call(this),this.h=e,this.g={}}h(se,I);var ae=[];function le(e){O(e.g,function(e,t){this.g.hasOwnProperty(t)&&W(e)},e),e.g={}}se.prototype.N=function(){se.aa.N.call(this),le(this)},se.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ce=n.JSON.stringify,de=n.JSON.parse,he=class{stringify(e){return n.JSON.stringify(e,void 0)}parse(e){return n.JSON.parse(e,void 0)}};function ue(){}function pe(e){return e.h||(e.h=e.i())}function fe(){}ue.prototype.h=null;var me={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ge(){Q.call(this,"d")}function ve(){Q.call(this,"c")}h(ge,Q),h(ve,Q);var Oe={},ye=null;function be(){return ye=ye||new ee}function xe(e){Q.call(this,Oe.La,e)}function we(e){const t=be();te(t,new xe(t))}function ke(e,t){Q.call(this,Oe.STAT_EVENT,e),this.stat=t}function Se(e){const t=be();te(t,new ke(t,e))}function _e(e,t){Q.call(this,Oe.Ma,e),this.size=t}function Te(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return n.setTimeout(function(){e()},t)}function Ce(){this.g=!0}function Pe(e,t,i,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var i=JSON.parse(t);if(i)for(e=0;e<i.length;e++)if(Array.isArray(i[e])){var r=i[e];if(!(2>r.length)){var n=r[1];if(Array.isArray(n)&&!(1>n.length)){var o=n[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<n.length;s++)n[s]=""}}}return ce(i)}catch(e){return t}}(e,i)+(r?" "+r:"")})}Oe.La="serverreachability",h(xe,Q),Oe.STAT_EVENT="statevent",h(ke,Q),Oe.Ma="timingevent",h(_e,Q),Ce.prototype.xa=function(){this.g=!1},Ce.prototype.info=function(){};var Ee,$e={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ae={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Ie(){}function Qe(e,t,i,r){this.j=e,this.i=t,this.l=i,this.R=r||1,this.U=new se(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Re}function Re(){this.i=null,this.g="",this.h=!1}h(Ie,ue),Ie.prototype.g=function(){return new XMLHttpRequest},Ie.prototype.i=function(){return{}},Ee=new Ie;var De={},Me={};function Ne(e,t,i){e.L=1,e.v=ct(nt(t)),e.m=i,e.P=!0,Le(e,null)}function Le(e,t){e.F=Date.now(),Ue(e),e.A=nt(e.v);var i=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),wt(i.i,"t",r),e.C=0,i=e.j.J,e.h=new Re,e.g=ci(e.j,i?t:null,!e.m),0<e.O&&(e.M=new oe(c(e.Y,e,e.g),e.O)),t=e.U,i=e.g,r=e.ca;var n="readystatechange";Array.isArray(n)||(n&&(ae[0]=n.toString()),n=ae);for(var o=0;o<n.length;o++){var s=j(i,n[o],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}t=e.H?y(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),we(),function(e,t,i,r,n,o){e.info(function(){if(e.g)if(o)for(var s="",a=o.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var d=c[0];c=c[1];var h=d.split("_");s=2<=h.length&&"type"==h[1]?s+(d+"=")+c+"&":s+(d+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+n+"]: "+t+"\n"+i+"\n"+s})}(e.i,e.u,e.A,e.l,e.R,e.m)}function ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Ve(e,t){var i=e.C,r=t.indexOf("\n",i);return-1==r?Me:(i=Number(t.substring(i,r)),isNaN(i)?De:(r+=1)+i>t.length?Me:(t=t.slice(r,r+i),e.C=r+i,t))}function Ue(e){e.S=Date.now()+e.I,qe(e,e.I)}function qe(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Te(c(e.ba,e),t)}function Xe(e){e.B&&(n.clearTimeout(e.B),e.B=null)}function Ze(e){0==e.j.G||e.J||ni(e.j,e)}function Be(e){Xe(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,le(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function je(e,t){try{var i=e.j;if(0!=i.G&&(i.g==e||He(i.h,e)))if(!e.K&&He(i.h,e)&&3==i.G){try{var r=i.Da.g.parse(t)}catch(e){r=null}if(Array.isArray(r)&&3==r.length){var n=r;if(0==n[0]){e:if(!i.u){if(i.g){if(!(i.g.F+3e3<e.F))break e;ri(i),Ft(i)}ei(i),Se(18)}}else i.za=n[1],0<i.za-i.T&&37500>n[2]&&i.F&&0==i.v&&!i.C&&(i.C=Te(c(i.Za,i),6e3));if(1>=Ge(i.h)&&i.ca){try{i.ca()}catch(e){}i.ca=void 0}}else si(i,11)}else if((e.K||i.g==e)&&ri(i),!f(t))for(n=i.Da.g.parse(t),t=0;t<n.length;t++){let c=n[t];if(i.T=c[0],c=c[1],2==i.G)if("c"==c[0]){i.K=c[1],i.ia=c[2];const t=c[3];null!=t&&(i.la=t,i.j.info("VER="+i.la));const n=c[4];null!=n&&(i.Aa=n,i.j.info("SVER="+i.Aa));const d=c[5];null!=d&&"number"==typeof d&&0<d&&(r=1.5*d,i.L=r,i.j.info("backChannelRequestTimeoutMs_="+r)),r=i;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.h;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(Ke(o,o.h),o.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,lt(r.I,r.D,e))}}i.G=3,i.l&&i.l.ua(),i.ba&&(i.R=Date.now()-e.F,i.j.info("Handshake RTT: "+i.R+"ms"));var s=e;if((r=i).qa=li(r,r.J?r.ia:null,r.W),s.K){Je(r.h,s);var a=s,l=r.L;l&&(a.I=l),a.B&&(Xe(a),Ue(a)),r.g=s}else Jt(r);0<i.i.length&&Yt(i)}else"stop"!=c[0]&&"close"!=c[0]||si(i,7);else 3==i.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?si(i,7):jt(i):"noop"!=c[0]&&i.l&&i.l.ta(c),i.v=0)}we()}catch(e){}}Qe.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==qt(e)?t.j():this.Y(e)},Qe.prototype.Y=function(e){try{if(e==this.g)e:{const u=qt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>u)&&(3!=u||this.g&&(this.h.h||this.g.oa()||Xt(this.g)))){this.J||4!=u||7==t||we(),Xe(this);var i=this.g.Z();this.X=i;t:if(ze(this)){var r=Xt(this.g);e="";var o=r.length,s=4==qt(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Be(this),Ze(this);var a="";break t}this.h.i=new n.TextDecoder}for(t=0;t<o;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(s&&t==o-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==i,function(e,t,i,r,n,o,s){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+n+"]: "+t+"\n"+i+"\n"+o+" "+s})}(this.i,this.u,this.A,this.l,this.R,u,i),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!f(l)){var d=l;break t}}d=null}if(!(i=d)){this.o=!1,this.s=3,Se(12),Be(this),Ze(this);break e}Pe(this.i,this.l,i,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,je(this,i)}if(this.P){let e;for(i=!0;!this.J&&this.C<a.length;){if(e=Ve(this,a),e==Me){4==u&&(this.s=4,Se(14),i=!1),Pe(this.i,this.l,null,"[Incomplete Response]");break}if(e==De){this.s=4,Se(15),Pe(this.i,this.l,a,"[Invalid Chunk]"),i=!1;break}Pe(this.i,this.l,e,null),je(this,e)}if(ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=u||0!=a.length||this.h.h||(this.s=1,Se(16),i=!1),this.o=this.o&&i,i){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),ti(h),h.M=!0,Se(11))}}else Pe(this.i,this.l,a,"[Invalid Chunked Response]"),Be(this),Ze(this)}else Pe(this.i,this.l,a,null),je(this,a);4==u&&Be(this),this.o&&!this.J&&(4==u?ni(this.j,this):(this.o=!1,Ue(this)))}else(function(e){const t={};e=(e.g&&2<=qt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(f(e[r]))continue;var i=w(e[r]);const n=i[0];if("string"!=typeof(i=i[1]))continue;i=i.trim();const o=t[n]||[];t[n]=o,o.push(i)}!function(e,t){for(const i in e)t.call(void 0,e[i],i,e)}(t,function(e){return e.join(", ")})})(this.g),400==i&&0<a.indexOf("Unknown SID")?(this.s=3,Se(12)):(this.s=0,Se(13)),Be(this),Ze(this)}}}catch(e){}},Qe.prototype.cancel=function(){this.J=!0,Be(this)},Qe.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(we(),Se(17)),Be(this),this.s=2,Ze(this)):qe(this,this.S-e)};var Fe=class{constructor(e,t){this.g=e,this.map=t}};function We(e){this.l=e||10,n.PerformanceNavigationTiming?e=0<(e=n.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(n.chrome&&n.chrome.loadTimes&&n.chrome.loadTimes()&&n.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ye(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ge(e){return e.h?1:e.g?e.g.size:0}function He(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ke(e,t){e.g?e.g.add(t):e.h=t}function Je(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function et(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const i of e.g.values())t=t.concat(i.D);return t}return u(e.i)}function tt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(o(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var i=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(o(e)||"string"==typeof e){var t=[];e=e.length;for(var i=0;i<e;i++)t.push(i);return t}t=[],i=0;for(const r in e)t[i++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(o(e)){for(var t=[],i=e.length,r=0;r<i;r++)t.push(e[r]);return t}for(r in t=[],i=0,e)t[i++]=e[r];return t}(e),n=r.length,s=0;s<n;s++)t.call(void 0,r[s],i&&i[s],e)}We.prototype.cancel=function(){if(this.i=et(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rt(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof rt){this.h=e.h,ot(this,e.j),this.o=e.o,this.g=e.g,st(this,e.s),this.l=e.l;var t=e.i,i=new Ot;i.i=t.i,t.g&&(i.g=new Map(t.g),i.h=t.h),at(this,i),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,ot(this,t[1]||"",!0),this.o=dt(t[2]||""),this.g=dt(t[3]||"",!0),st(this,t[4]),this.l=dt(t[5]||"",!0),at(this,t[6]||"",!0),this.m=dt(t[7]||"")):(this.h=!1,this.i=new Ot(null,this.h))}function nt(e){return new rt(e)}function ot(e,t,i){e.j=i?dt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function st(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function at(e,t,i){t instanceof Ot?(e.i=t,function(e,t){t&&!e.j&&(yt(e),e.i=null,e.g.forEach(function(e,t){var i=t.toLowerCase();t!=i&&(bt(this,t),wt(this,i,e))},e)),e.j=t}(e.i,e.h)):(i||(t=ht(t,gt)),e.i=new Ot(t,e.h))}function lt(e,t,i){e.i.set(t,i)}function ct(e){return lt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function dt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ht(e,t,i){return"string"==typeof e?(e=encodeURI(e).replace(t,ut),i&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ut(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}rt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ht(t,pt,!0),":");var i=this.g;return(i||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ht(t,pt,!0),"@"),e.push(encodeURIComponent(String(i)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(i=this.s)&&e.push(":",String(i))),(i=this.l)&&(this.g&&"/"!=i.charAt(0)&&e.push("/"),e.push(ht(i,"/"==i.charAt(0)?mt:ft,!0))),(i=this.i.toString())&&e.push("?",i),(i=this.m)&&e.push("#",ht(i,vt)),e.join("")};var pt=/[#\/\?@]/g,ft=/[#\?:]/g,mt=/[#\?]/g,gt=/[#\?@]/g,vt=/#/g;function Ot(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function yt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var i=0;i<e.length;i++){var r=e[i].indexOf("="),n=null;if(0<=r){var o=e[i].substring(0,r);n=e[i].substring(r+1)}else o=e[i];t(o,n?decodeURIComponent(n.replace(/\+/g," ")):"")}}}(e.i,function(t,i){e.add(decodeURIComponent(t.replace(/\+/g," ")),i)}))}function bt(e,t){yt(e),t=kt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function xt(e,t){return yt(e),t=kt(e,t),e.g.has(t)}function wt(e,t,i){bt(e,t),0<i.length&&(e.i=null,e.g.set(kt(e,t),u(i)),e.h+=i.length)}function kt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function St(e,t,i,r,n){try{n&&(n.onload=null,n.onerror=null,n.onabort=null,n.ontimeout=null),r(i)}catch(e){}}function _t(){this.g=new he}function Tt(e,t,i){const r=i||"";try{tt(e,function(e,i){let n=e;s(e)&&(n=ce(e)),t.push(r+i+"="+encodeURIComponent(n))})}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function Ct(e){this.l=e.Ub||null,this.j=e.eb||!1}function Pt(e,t){ee.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Et(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function $t(e){e.readyState=4,e.l=null,e.j=null,e.v=null,At(e)}function At(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function It(e){let t="";return O(e,function(e,i){t+=i,t+=":",t+=e,t+="\r\n"}),t}function Qt(e,t,i){e:{for(r in i){var r=!1;break e}r=!0}r||(i=It(i),"string"==typeof e?null!=i&&encodeURIComponent(String(i)):lt(e,t,i))}function Rt(e){ee.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=Ot.prototype).add=function(e,t){yt(this),this.i=null,e=kt(this,e);var i=this.g.get(e);return i||this.g.set(e,i=[]),i.push(t),this.h+=1,this},e.forEach=function(e,t){yt(this),this.g.forEach(function(i,r){i.forEach(function(i){e.call(t,i,r,this)},this)},this)},e.na=function(){yt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),i=[];for(let r=0;r<t.length;r++){const n=e[r];for(let e=0;e<n.length;e++)i.push(t[r])}return i},e.V=function(e){yt(this);let t=[];if("string"==typeof e)xt(this,e)&&(t=t.concat(this.g.get(kt(this,e))));else{e=Array.from(this.g.values());for(let i=0;i<e.length;i++)t=t.concat(e[i])}return t},e.set=function(e,t){return yt(this),this.i=null,xt(this,e=kt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var i=0;i<t.length;i++){var r=t[i];const o=encodeURIComponent(String(r)),s=this.V(r);for(r=0;r<s.length;r++){var n=o;""!==s[r]&&(n+="="+encodeURIComponent(String(s[r]))),e.push(n)}}return this.i=e.join("&")},h(Ct,ue),Ct.prototype.g=function(){return new Pt(this.l,this.j)},Ct.prototype.i=function(e){return function(){return e}}({}),h(Pt,ee),(e=Pt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,At(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||n).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,$t(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,At(this)),this.g&&(this.readyState=3,At(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(void 0!==n.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Et(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?$t(this):At(this),3==this.readyState&&Et(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,$t(this))},e.Qa=function(e){this.g&&(this.response=e,$t(this))},e.ga=function(){this.g&&$t(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var i=t.next();!i.done;)i=i.value,e.push(i[0]+": "+i[1]),i=t.next();return e.join("\r\n")},Object.defineProperty(Pt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Rt,ee);var Dt=/^https?$/i,Mt=["POST","PUT"];function Nt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Lt(e),Vt(e)}function Lt(e){e.A||(e.A=!0,te(e,"complete"),te(e,"error"))}function zt(e){if(e.h&&void 0!==r&&(!e.v[1]||4!=qt(e)||2!=e.Z()))if(e.u&&4==qt(e))re(e.Ea,0,e);else if(te(e,"readystatechange"),4==qt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var i;if(!(i=t)){var o;if(o=0===r){var s=String(e.D).match(it)[1]||null;!s&&n.self&&n.self.location&&(s=n.self.location.protocol.slice(0,-1)),o=!Dt.test(s?s.toLowerCase():"")}i=o}if(i)te(e,"complete"),te(e,"success");else{e.m=6;try{var a=2<qt(e)?e.g.statusText:""}catch(e){a=""}e.l=a+" ["+e.Z()+"]",Lt(e)}}finally{Vt(e)}}}function Vt(e,t){if(e.g){Ut(e);const i=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||te(e,"ready");try{i.onreadystatechange=r}catch(e){}}}function Ut(e){e.I&&(n.clearTimeout(e.I),e.I=null)}function qt(e){return e.g?e.g.readyState:0}function Xt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Zt(e,t,i){return i&&i.internalChannelParams&&i.internalChannelParams[e]||t}function Bt(e){this.Aa=0,this.i=[],this.j=new Ce,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Zt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Zt("baseRetryDelayMs",5e3,e),this.cb=Zt("retryDelaySeedMs",1e4,e),this.Wa=Zt("forwardChannelMaxRetries",2,e),this.wa=Zt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new We(e&&e.concurrentRequestLimit),this.Da=new _t,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function jt(e){if(Wt(e),3==e.G){var t=e.U++,i=nt(e.I);if(lt(i,"SID",e.K),lt(i,"RID",t),lt(i,"TYPE","terminate"),Ht(e,i),(t=new Qe(e,e.j,t)).L=2,t.v=ct(nt(i)),i=!1,n.navigator&&n.navigator.sendBeacon)try{i=n.navigator.sendBeacon(t.v.toString(),"")}catch(e){}!i&&n.Image&&((new Image).src=t.v,i=!0),i||(t.g=ci(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Ue(t)}ai(e)}function Ft(e){e.g&&(ti(e),e.g.cancel(),e.g=null)}function Wt(e){Ft(e),e.u&&(n.clearTimeout(e.u),e.u=null),ri(e),e.h.cancel(),e.s&&("number"==typeof e.s&&n.clearTimeout(e.s),e.s=null)}function Yt(e){if(!Ye(e.h)&&!e.s){e.s=!0;var t=e.Ga;C||$(),P||(C(),P=!0),E.add(t,e),e.B=0}}function Gt(e,t){var i;i=t?t.l:e.U++;const r=nt(e.I);lt(r,"SID",e.K),lt(r,"RID",i),lt(r,"AID",e.T),Ht(e,r),e.m&&e.o&&Qt(r,e.m,e.o),i=new Qe(e,e.j,i,e.B+1),null===e.m&&(i.H=e.o),t&&(e.i=t.D.concat(e.i)),t=Kt(e,i,1e3),i.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),Ke(e.h,i),Ne(i,r,t)}function Ht(e,t){e.H&&O(e.H,function(e,i){lt(t,i,e)}),e.l&&tt({},function(e,i){lt(t,i,e)})}function Kt(e,t,i){i=Math.min(e.i.length,i);var r=e.l?c(e.l.Na,e.l,e):null;e:{var n=e.i;let t=-1;for(;;){const e=["count="+i];-1==t?0<i?(t=n[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let s=0;s<i;s++){let i=n[s].g;const a=n[s].map;if(i-=t,0>i)t=Math.max(0,n[s].g-100),o=!1;else try{Tt(a,e,"req"+i+"_")}catch(e){r&&r(a)}}if(o){r=e.join("&");break e}}}return e=e.i.splice(0,i),t.D=e,r}function Jt(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;C||$(),P||(C(),P=!0),E.add(t,e),e.v=0}}function ei(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Te(c(e.Fa,e),oi(e,e.v)),e.v++,!0)}function ti(e){null!=e.A&&(n.clearTimeout(e.A),e.A=null)}function ii(e){e.g=new Qe(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=nt(e.qa);lt(t,"RID","rpc"),lt(t,"SID",e.K),lt(t,"AID",e.T),lt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&lt(t,"TO",e.ja),lt(t,"TYPE","xmlhttp"),Ht(e,t),e.m&&e.o&&Qt(t,e.m,e.o),e.L&&(e.g.I=e.L);var i=e.g;e=e.ia,i.L=1,i.v=ct(nt(t)),i.m=null,i.P=!0,Le(i,e)}function ri(e){null!=e.C&&(n.clearTimeout(e.C),e.C=null)}function ni(e,t){var i=null;if(e.g==t){ri(e),ti(e),e.g=null;var r=2}else{if(!He(e.h,t))return;i=t.D,Je(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){i=t.m?t.m.length:0,t=Date.now()-t.F;var n=e.B;te(r=be(),new _e(r,i)),Yt(e)}else Jt(e);else if(3==(n=t.s)||0==n&&0<t.X||!(1==r&&function(e,t){return!(Ge(e.h)>=e.h.j-(e.s?1:0)||(e.s?(e.i=t.D.concat(e.i),0):1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa)||(e.s=Te(c(e.Ga,e,t),oi(e,e.B)),e.B++,0)))}(e,t)||2==r&&ei(e)))switch(i&&0<i.length&&(t=e.h,t.i=t.i.concat(i)),n){case 1:si(e,5);break;case 4:si(e,10);break;case 3:si(e,6);break;default:si(e,2)}}function oi(e,t){let i=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(i*=2),i*t}function si(e,t){if(e.j.info("Error code "+t),2==t){var i=c(e.fb,e),r=e.Xa;const t=!r;r=new rt(r||"//www.google.com/images/cleardot.gif"),n.location&&"http"==n.location.protocol||ot(r,"https"),ct(r),t?function(e,t){const i=new Ce;if(n.Image){const r=new Image;r.onload=d(St,i,"TestLoadImage: loaded",!0,t,r),r.onerror=d(St,i,"TestLoadImage: error",!1,t,r),r.onabort=d(St,i,"TestLoadImage: abort",!1,t,r),r.ontimeout=d(St,i,"TestLoadImage: timeout",!1,t,r),n.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),i):function(e,t){new Ce;const i=new AbortController,r=setTimeout(()=>{i.abort(),St(0,0,!1,t)},1e4);fetch(e,{signal:i.signal}).then(e=>{clearTimeout(r),e.ok?St(0,0,!0,t):St(0,0,!1,t)}).catch(()=>{clearTimeout(r),St(0,0,!1,t)})}(r.toString(),i)}else Se(2);e.G=0,e.l&&e.l.sa(t),ai(e),Wt(e)}function ai(e){if(e.G=0,e.ka=[],e.l){const t=et(e.h);0==t.length&&0==e.i.length||(p(e.ka,t),p(e.ka,e.i),e.h.i.length=0,u(e.i),e.i.length=0),e.l.ra()}}function li(e,t,i){var r=i instanceof rt?nt(i):new rt(i);if(""!=r.g)t&&(r.g=t+"."+r.g),st(r,r.s);else{var o=n.location;r=o.protocol,t=t?t+"."+o.hostname:o.hostname,o=+o.port;var s=new rt(null);r&&ot(s,r),t&&(s.g=t),o&&st(s,o),i&&(s.l=i),r=s}return i=e.D,t=e.ya,i&&t&&lt(r,i,t),lt(r,"VER",e.la),Ht(e,r),r}function ci(e,t,i){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Rt(new Ct({eb:i})):new Rt(e.pa)).Ha(e.J),t}function di(){}function hi(){}function ui(e,t){ee.call(this),this.g=new Bt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!f(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!f(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new mi(this)}function pi(e){ge.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const i in t){e=i;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function fi(){ve.call(this),this.status=1}function mi(e){this.g=e}(e=Rt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,i,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ee.g(),this.v=this.o?pe(this.o):pe(Ee),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(e){return void Nt(this,e)}if(e=i||"",i=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)i.set(o,r[o]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())i.set(e,r.get(e))}r=Array.from(i.keys()).find(e=>"content-type"==e.toLowerCase()),o=n.FormData&&e instanceof n.FormData,!(0<=Array.prototype.indexOf.call(Mt,t,void 0))||r||o||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[e,t]of i)this.g.setRequestHeader(e,t);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ut(this),this.u=!0,this.g.send(e),this.u=!1}catch(e){Nt(this,e)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,te(this,"complete"),te(this,"abort"),Vt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vt(this,!0)),Rt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?zt(this):this.bb())},e.bb=function(){zt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<qt(this)?this.g.status:-1}catch(e){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),de(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(e=Bt.prototype).la=8,e.G=1,e.connect=function(e,t,i,r){Se(0),this.W=e,this.H=t||{},i&&void 0!==r&&(this.H.OSID=i,this.H.OAID=r),this.F=this.X,this.I=li(this,null,this.W),Yt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const n=new Qe(this,this.j,e);let o=this.o;if(this.S&&(o?(o=y(o),x(o,this.S)):o=this.S),null!==this.m||this.O||(n.H=o,o=null),this.P)e:{for(var t=0,i=0;i<this.i.length;i++){var r=this.i[i];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=i;break e}if(4096===t||i===this.i.length-1){t=i+1;break e}}t=1e3}else t=1e3;t=Kt(this,n,t),lt(i=nt(this.I),"RID",e),lt(i,"CVER",22),this.D&&lt(i,"X-HTTP-Session-Id",this.D),Ht(this,i),o&&(this.O?t="headers="+encodeURIComponent(String(It(o)))+"&"+t:this.m&&Qt(i,this.m,o)),Ke(this.h,n),this.Ua&&lt(i,"TYPE","init"),this.P?(lt(i,"$req",t),lt(i,"SID","null"),n.T=!0,Ne(n,i,null)):Ne(n,i,t),this.G=2}}else 3==this.G&&(e?Gt(this,e):0==this.i.length||Ye(this.h)||Gt(this))},e.Fa=function(){if(this.u=null,ii(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Te(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Se(10),Ft(this),ii(this))},e.Za=function(){null!=this.C&&(this.C=null,Ft(this),ei(this),Se(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Se(2)):(this.j.info("Failed to ping google.com"),Se(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=di.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},hi.prototype.g=function(e,t){return new ui(e,t)},h(ui,ee),ui.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ui.prototype.close=function(){jt(this.g)},ui.prototype.o=function(e){var t=this.g;if("string"==typeof e){var i={};i.__data__=e,e=i}else this.u&&((i={}).__data__=ce(e),e=i);t.i.push(new Fe(t.Ya++,e)),3==t.G&&Yt(t)},ui.prototype.N=function(){this.g.l=null,delete this.j,jt(this.g),delete this.g,ui.aa.N.call(this)},h(pi,ge),h(fi,ve),h(mi,di),mi.prototype.ua=function(){te(this.g,"a")},mi.prototype.ta=function(e){te(this.g,new pi(e))},mi.prototype.sa=function(e){te(this.g,new fi)},mi.prototype.ra=function(){te(this.g,"b")},hi.prototype.createWebChannel=hi.prototype.g,ui.prototype.send=ui.prototype.o,ui.prototype.open=ui.prototype.m,ui.prototype.close=ui.prototype.close,Xu=function(){return new hi},qu=function(){return be()},Uu=Oe,Vu={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},$e.NO_ERROR=0,$e.TIMEOUT=8,$e.HTTP_ERROR=6,zu=$e,Ae.COMPLETE="complete",Lu=Ae,fe.EventType=me,me.OPEN="a",me.CLOSE="b",me.ERROR="c",me.MESSAGE="d",ee.prototype.listen=ee.prototype.K,Nu=fe,Rt.prototype.listenOnce=Rt.prototype.L,Rt.prototype.getLastError=Rt.prototype.Ka,Rt.prototype.getLastErrorCode=Rt.prototype.Ba,Rt.prototype.getStatus=Rt.prototype.Z,Rt.prototype.getResponseJson=Rt.prototype.Oa,Rt.prototype.getResponseText=Rt.prototype.oa,Rt.prototype.send=Rt.prototype.ea,Rt.prototype.setWithCredentials=Rt.prototype.Ha,Mu=Rt}).apply(void 0!==Zu?Zu:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});const Bu="@firebase/firestore",ju="4.8.0";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Fu.UNAUTHENTICATED=new Fu(null),Fu.GOOGLE_CREDENTIALS=new Fu("google-credentials-uid"),Fu.FIRST_PARTY=new Fu("first-party-uid"),Fu.MOCK_USER=new Fu("mock-user");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let Wu="11.10.0";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yu=new Ao("@firebase/firestore");function Gu(){return Yu.logLevel}function Hu(e,...t){if(Yu.logLevel<=To.DEBUG){const i=t.map(ep);Yu.debug(`Firestore (${Wu}): ${e}`,...i)}}function Ku(e,...t){if(Yu.logLevel<=To.ERROR){const i=t.map(ep);Yu.error(`Firestore (${Wu}): ${e}`,...i)}}function Ju(e,...t){if(Yu.logLevel<=To.WARN){const i=t.map(ep);Yu.warn(`Firestore (${Wu}): ${e}`,...i)}}function ep(e){if("string"==typeof e)return e;try{
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tp(e,t,i){let r="Unexpected state";"string"==typeof t?r=t:i=t,ip(e,r,i)}function ip(e,t,i){let r=`FIRESTORE (${Wu}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(void 0!==i)try{r+=" CONTEXT: "+JSON.stringify(i)}catch(e){r+=" CONTEXT: "+i}throw Ku(r),new Error(r)}function rp(e,t,i,r){let n="Unexpected state";"string"==typeof i?n=i:r=i,e||ip(t,n,r)}function np(e,t){return e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class sp extends co{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cp{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Fu.UNAUTHENTICATED))}shutdown(){}}class dp{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class hp{constructor(e){this.t=e,this.currentUser=Fu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){rp(void 0===this.o,42304);let i=this.i;const r=e=>this.i!==i?(i=this.i,t(e)):Promise.resolve();let n=new ap;this.o=()=>{this.i++,this.currentUser=this.u(),n.resolve(),n=new ap,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const t=n;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},s=e=>{Hu("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(e=>s(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?s(e):(Hu("FirebaseAuthCredentialsProvider","Auth not yet detected"),n.resolve(),n=new ap)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Hu("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(rp("string"==typeof t.accessToken,31837,{l:t}),new lp(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return rp(null===e||"string"==typeof e,2055,{h:e}),new Fu(e)}}class up{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Fu.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class pp{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new up(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Fu.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fp{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mp{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Is(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){rp(void 0===this.o,3512);const i=e=>{null!=e.error&&Hu("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const i=e.token!==this.m;return this.m=e.token,Hu("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>i(t))};const r=e=>{Hu("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):Hu("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new fp(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(rp("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new fp(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gp(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),i=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(i);else for(let t=0;t<e;t++)i[t]=Math.floor(256*Math.random());return i}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vp(){return new TextEncoder}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const i=gp(40);for(let r=0;r<i.length;++r)t.length<20&&i[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[r]%62))}return t}}function yp(e,t){return e<t?-1:e>t?1:0}function bp(e,t){let i=0;for(;i<e.length&&i<t.length;){const r=e.codePointAt(i),n=t.codePointAt(i);if(r!==n){if(r<128&&n<128)return yp(r,n);{const o=vp(),s=wp(o.encode(xp(e,i)),o.encode(xp(t,i)));return 0!==s?s:yp(r,n)}}i+=r>65535?2:1}return yp(e.length,t.length)}function xp(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function wp(e,t){for(let i=0;i<e.length&&i<t.length;++i)if(e[i]!==t[i])return yp(e[i],t[i]);return yp(e.length,t.length)}function kp(e,t,i){return e.length===t.length&&e.every((e,r)=>i(e,t[r]))}function Sp(e){return e+"\0"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _p="__name__";class Tp{constructor(e,t,i){void 0===t?t=0:t>e.length&&tp(637,{offset:t,range:e.length}),void 0===i?i=e.length-t:i>e.length-t&&tp(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===Tp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Tp?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const i=Tp.compareSegments(e.get(r),t.get(r));if(0!==i)return i}return yp(e.length,t.length)}static compareSegments(e,t){const i=Tp.isNumericId(e),r=Tp.isNumericId(t);return i&&!r?-1:!i&&r?1:i&&r?Tp.extractNumericId(e).compare(Tp.extractNumericId(t)):bp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Qu.fromString(e.substring(4,e.length-2))}}class Cp extends Tp{construct(e,t,i){return new Cp(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new sp(op.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(e=>e.length>0))}return new Cp(t)}static emptyPath(){return new Cp([])}}const Pp=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ep extends Tp{construct(e,t,i){return new Ep(e,t,i)}static isValidIdentifier(e){return Pp.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ep.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===_p}static keyField(){return new Ep([_p])}static fromServerFormat(e){const t=[];let i="",r=0;const n=()=>{if(0===i.length)throw new sp(op.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new sp(op.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new sp(op.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(i+=t,r++):(n(),r++)}if(n(),o)throw new sp(op.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ep(t)}static emptyPath(){return new Ep([])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e){this.path=e}static fromPath(e){return new $p(Cp.fromString(e))}static fromName(e){return new $p(Cp.fromString(e).popFirst(5))}static empty(){return new $p(Cp.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Cp.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Cp.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $p(new Cp(e.slice()))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(e,t,i){if(!i)throw new sp(op.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Ip(e){if(!$p.isDocumentKey(e))throw new sp(op.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Qp(e){if($p.isDocumentKey(e))throw new sp(op.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Rp(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function Dp(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":tp(12329,{type:typeof e})}function Mp(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new sp(op.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=Dp(e);throw new sp(op.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${i}`)}}return e}
/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Np(e,t){const i={typeString:e};return t&&(i.value=t),i}function Lp(e,t){if(!Rp(e))throw new sp(op.INVALID_ARGUMENT,"JSON must be an object");let i;for(const r in t)if(t[r]){const n=t[r].typeString,o="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){i=`JSON missing required field: '${r}'`;break}const s=e[r];if(n&&typeof s!==n){i=`JSON field '${r}' must be a ${n}.`;break}if(void 0!==o&&s!==o.value){i=`Expected '${r}' field to equal '${o.value}'`;break}}if(i)throw new sp(op.INVALID_ARGUMENT,i);return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zp=-62135596800,Vp=1e6;class Up{static now(){return Up.fromMillis(Date.now())}static fromDate(e){return Up.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Vp);return new Up(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new sp(op.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new sp(op.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<zp)throw new sp(op.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new sp(op.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Vp}_compareTo(e){return this.seconds===e.seconds?yp(this.nanoseconds,e.nanoseconds):yp(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Up._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Lp(e,Up._jsonSchema))return new Up(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-zp;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Up._jsonSchemaVersion="firestore/timestamp/1.0",Up._jsonSchema={type:Np("string",Up._jsonSchemaVersion),seconds:Np("number"),nanoseconds:Np("number")};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class qp{static fromTimestamp(e){return new qp(e)}static min(){return new qp(new Up(0,0))}static max(){return new qp(new Up(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}}function Zp(e){return e.fields.find(e=>2===e.kind)}function Bp(e){return e.fields.filter(e=>2!==e.kind)}Xp.UNKNOWN_ID=-1;class jp{constructor(e,t){this.fieldPath=e,this.kind=t}}class Fp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Fp(0,Yp.min())}}function Wp(e){return new Yp(e.readTime,e.key,-1)}class Yp{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Yp(qp.min(),$p.empty(),-1)}static max(){return new Yp(qp.max(),$p.empty(),-1)}}function Gp(e,t){let i=e.readTime.compareTo(t.readTime);return 0!==i?i:(i=$p.comparator(e.documentKey,t.documentKey),0!==i?i:yp(e.largestBatchId,t.largestBatchId)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)}const Hp="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Kp{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jp(e){if(e.code!==op.FAILED_PRECONDITION||e.message!==Hp)throw e;Hu("LocalStore","Unexpectedly lost primary lease")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&tp(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ef((i,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(i,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ef?t:ef.resolve(t)}catch(e){return ef.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ef.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ef.reject(t)}static resolve(e){return new ef((t,i)=>{t(e)})}static reject(e){return new ef((t,i)=>{i(e)})}static waitFor(e){return new ef((t,i)=>{let r=0,n=0,o=!1;e.forEach(e=>{++r,e.next(()=>{++n,o&&n===r&&t()},e=>i(e))}),o=!0,n===r&&t()})}static or(e){let t=ef.resolve(!1);for(const i of e)t=t.next(e=>e?ef.resolve(e):i());return t}static forEach(e,t){const i=[];return e.forEach((e,r)=>{i.push(t.call(this,e,r))}),this.waitFor(i)}static mapArray(e,t){return new ef((i,r)=>{const n=e.length,o=new Array(n);let s=0;for(let a=0;a<n;a++){const l=a;t(e[l]).next(e=>{o[l]=e,++s,s===n&&i(o)},e=>r(e))}})}static doWhile(e,t){return new ef((i,r)=>{const n=()=>{!0===e()?t().next(()=>{n()},r):i()};n()})}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tf="SimpleDb";class rf{static open(e,t,i,r){try{return new rf(t,e.transaction(r,i))}catch(e){throw new af(t,e)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new ap,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new af(e,t.error)):this.S.resolve()},this.transaction.onerror=t=>{const i=uf(t.target.error);this.S.reject(new af(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Hu(tf,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new cf(t)}}class nf{static delete(e){return Hu(tf,"Removing database:",e),df(Bn().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!lo())return!1;if(nf.F())return!0;const e=no(),t=nf.M(e),i=0<t&&t<10,r=of(e),n=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||n)}static F(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.O)}static N(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(e,t,i){this.name=e,this.version=t,this.B=i,this.L=null,12.2===nf.M(no())&&Ku("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async k(e){return this.db||(Hu(tf,"Opening database:",this.name),this.db=await new Promise((t,i)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const i=e.target.result;t(i)},r.onblocked=()=>{i(new af(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?i(new sp(op.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?i(new sp(op.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):i(new af(e,r))},r.onupgradeneeded=e=>{Hu(tf,'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;if(null!==this.L&&this.L!==e.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${e.oldVersion}, event.newVersion=${e.newVersion}, db.version=${t.version}`);this.B.q(t,r.transaction,e.oldVersion,this.version).next(()=>{Hu(tf,"Database upgrade to version "+this.version+" complete")})}}),this.db.addEventListener("close",e=>{const t=e.target;this.L=t.version},{passive:!0})),this.db.addEventListener("versionchange",e=>{var t;null===e.newVersion&&(Ju('Received "versionchange" event with newVersion===null; notifying the registered DatabaseDeletedListener, if any'),null===(t=this.databaseDeletedListener)||void 0===t||t.call(this))},{passive:!0}),this.db}setDatabaseDeletedListener(e){if(this.databaseDeletedListener)throw new Error("setDatabaseDeletedListener() may only be called once, and it has already been called");this.databaseDeletedListener=e}async runTransaction(e,t,i,r){const n="readonly"===t;let o=0;for(;;){++o;try{this.db=await this.k(e);const t=rf.open(this.db,e,n?"readonly":"readwrite",i),o=r(t).next(e=>(t.v(),e)).catch(e=>(t.abort(e),ef.reject(e))).toPromise();return o.catch(()=>{}),await t.D,o}catch(e){const t=e,i="FirebaseError"!==t.name&&o<3;if(Hu(tf,"Transaction failed with error:",t.message,"Retrying:",i),this.close(),!i)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}function of(e){const t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}class sf{constructor(e){this.$=e,this.U=!1,this.K=null}get isDone(){return this.U}get W(){return this.K}set cursor(e){this.$=e}done(){this.U=!0}G(e){this.K=e}delete(){return df(this.$.delete())}}class af extends sp{constructor(e,t){super(op.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function lf(e){return"IndexedDbTransactionError"===e.name}class cf{constructor(e){this.store=e}put(e,t){let i;return void 0!==t?(Hu(tf,"PUT",this.store.name,e,t),i=this.store.put(t,e)):(Hu(tf,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),df(i)}add(e){return Hu(tf,"ADD",this.store.name,e,e),df(this.store.add(e))}get(e){return df(this.store.get(e)).next(t=>(void 0===t&&(t=null),Hu(tf,"GET",this.store.name,e,t),t))}delete(e){return Hu(tf,"DELETE",this.store.name,e),df(this.store.delete(e))}count(){return Hu(tf,"COUNT",this.store.name),df(this.store.count())}j(e,t){const i=this.options(e,t),r=i.index?this.store.index(i.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(i.range);return new ef((t,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{t(e.target.result)}})}{const e=this.cursor(i),t=[];return this.J(e,(e,i)=>{t.push(i)}).next(()=>t)}}H(e,t){const i=this.store.getAll(e,null===t?void 0:t);return new ef((e,t)=>{i.onerror=e=>{t(e.target.error)},i.onsuccess=t=>{e(t.target.result)}})}Y(e,t){Hu(tf,"DELETE ALL",this.store.name);const i=this.options(e,t);i.Z=!1;const r=this.cursor(i);return this.J(r,(e,t,i)=>i.delete())}X(e,t){let i;t?i=e:(i={},t=e);const r=this.cursor(i);return this.J(r,t)}ee(e){const t=this.cursor({});return new ef((i,r)=>{t.onerror=e=>{const t=uf(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next(e=>{e?r.continue():i()}):i()}})}J(e,t){const i=[];return new ef((r,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{const n=e.target.result;if(!n)return void r();const o=new sf(n),s=t(n.primaryKey,n.value,o);if(s instanceof ef){const e=s.catch(e=>(o.done(),ef.reject(e)));i.push(e)}o.isDone?r():null===o.W?n.continue():n.continue(o.W)}}).next(()=>ef.waitFor(i))}options(e,t){let i;return void 0!==e&&("string"==typeof e?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.Z?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function df(e){return new ef((t,i)=>{e.onsuccess=e=>{const i=e.target.result;t(i)},e.onerror=e=>{const t=uf(e.target.error);i(t)}})}let hf=!1;function uf(e){const t=nf.M(no());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new sp("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return hf||(hf=!0,setTimeout(()=>{throw e},0)),e}}return e}const pf="IndexBackfiller";class ff{constructor(e,t){this.asyncQueue=e,this.te=t,this.task=null}start(){this.ne(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ne(e){Hu(pf,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const e=await this.te.re();Hu(pf,`Documents written: ${e}`)}catch(e){lf(e)?Hu(pf,"Ignoring IndexedDB error during index backfill: ",e):await Jp(e)}await this.ne(6e4)})}}class mf{constructor(e,t){this.localStore=e,this.persistence=t}async re(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.ie(t,e))}ie(e,t){const i=new Set;let r=t,n=!0;return ef.doWhile(()=>!0===n&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(t=>{if(null!==t&&!i.has(t))return Hu(pf,`Processing collection: ${t}`),this.se(e,t,r).next(e=>{r-=e,i.add(t)});n=!1})).next(()=>t-r)}se(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,i).next(i=>{const n=i.changes;return this.localStore.indexManager.updateIndexEntries(e,n).next(()=>this.oe(r,i)).next(i=>(Hu(pf,`Updating offset: ${i}`),this.localStore.indexManager.updateCollectionGroup(e,t,i))).next(()=>n.size)}))}oe(e,t){let i=e;return t.changes.forEach((e,t)=>{const r=Wp(t);Gp(r,i)>0&&(i=r)}),new Yp(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this._e(e),this.ae=e=>t.writeSequenceNumber(e))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}gf.ue=-1;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const vf=-1;function Of(e){return null==e}function yf(e){return 0===e&&1/e==-1/0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const bf="";function xf(e){let t="";for(let i=0;i<e.length;i++)t.length>0&&(t=kf(t)),t=wf(e.get(i),t);return kf(t)}function wf(e,t){let i=t;const r=e.length;for(let t=0;t<r;t++){const r=e.charAt(t);switch(r){case"\0":i+="";break;case bf:i+="";break;default:i+=r}}return i}function kf(e){return e+bf+""}function Sf(e){const t=e.length;if(rp(t>=2,64408,{path:e}),2===t)return rp(e.charAt(0)===bf&&""===e.charAt(1),56145,{path:e}),Cp.emptyPath();const i=t-2,r=[];let n="";for(let o=0;o<t;){const t=e.indexOf(bf,o);switch((t<0||t>i)&&tp(50515,{path:e}),e.charAt(t+1)){case"":const i=e.substring(o,t);let s;0===n.length?s=i:(n+=i,s=n,n=""),r.push(s);break;case"":n+=e.substring(o,t),n+="\0";break;case"":n+=e.substring(o,t+1);break;default:tp(61167,{path:e})}o=t+2}return new Cp(r)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _f="remoteDocuments",Tf="owner",Cf="owner",Pf="mutationQueues",Ef="mutations",$f="batchId",Af="userMutationsIndex",If=["userId","batchId"];
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(e,t){return[e,xf(t)]}function Rf(e,t,i){return[e,xf(t),i]}const Df={},Mf="documentMutations",Nf="remoteDocumentsV14",Lf=["prefixPath","collectionGroup","readTime","documentId"],zf="documentKeyIndex",Vf=["prefixPath","collectionGroup","documentId"],Uf="collectionGroupIndex",qf=["collectionGroup","readTime","prefixPath","documentId"],Xf="remoteDocumentGlobal",Zf="remoteDocumentGlobalKey",Bf="targets",jf="queryTargetsIndex",Ff=["canonicalId","targetId"],Wf="targetDocuments",Yf=["targetId","path"],Gf="documentTargetsIndex",Hf=["path","targetId"],Kf="targetGlobalKey",Jf="targetGlobal",em="collectionParents",tm=["collectionId","parent"],im="clientMetadata",rm="bundles",nm="namedQueries",om="indexConfiguration",sm="collectionGroupIndex",am="indexState",lm=["indexId","uid"],cm="sequenceNumberIndex",dm=["uid","sequenceNumber"],hm="indexEntries",um=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],pm="documentKeyIndex",fm=["indexId","uid","orderedDocumentKey"],mm="documentOverlays",gm=["userId","collectionPath","documentId"],vm="collectionPathOverlayIndex",Om=["userId","collectionPath","largestBatchId"],ym="collectionGroupOverlayIndex",bm=["userId","collectionGroup","largestBatchId"],xm="globals",wm=[Pf,Ef,Mf,_f,Bf,Tf,Jf,Wf,im,Xf,em,rm,nm],km=[...wm,mm],Sm=[Pf,Ef,Mf,Nf,Bf,Tf,Jf,Wf,im,Xf,em,rm,nm,mm],_m=Sm,Tm=[..._m,om,am,hm],Cm=Tm,Pm=[...Tm,xm],Em=Pm;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m extends Kp{constructor(e,t){super(),this.ce=e,this.currentSequenceNumber=t}}function Am(e,t){const i=np(e);return nf.N(i.ce,t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(e){let t=0;for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&t++;return t}function Qm(e,t){for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&t(i,e[i])}function Rm(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(e,t){this.comparator=e,this.root=t||Nm.EMPTY}insert(e,t){return new Dm(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Nm.BLACK,null,null))}remove(e){return new Dm(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nm.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(0===r)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Mm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Mm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Mm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Mm(this.root,e,this.comparator,!0)}}class Mm{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let n=1;for(;!e.isEmpty();)if(n=t?i(e.key,t):1,t&&r&&(n*=-1),n<0)e=this.isReverse?e.left:e.right;else{if(0===n){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nm{constructor(e,t,i,r,n){this.key=e,this.value=t,this.color=null!=i?i:Nm.RED,this.left=null!=r?r:Nm.EMPTY,this.right=null!=n?n:Nm.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,n){return new Nm(null!=e?e:this.key,null!=t?t:this.value,null!=i?i:this.color,null!=r?r:this.left,null!=n?n:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const n=i(e,r.key);return r=n<0?r.copy(null,null,null,r.left.insert(e,t,i),null):0===n?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Nm.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Nm.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nm.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nm.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw tp(43730,{key:this.key,value:this.value});if(this.right.isRed())throw tp(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw tp(27949);return e+(this.isRed()?0:1)}}Nm.EMPTY=null,Nm.RED=!0,Nm.BLACK=!1,Nm.EMPTY=new class{constructor(){this.size=0}get key(){throw tp(57766)}get value(){throw tp(16141)}get color(){throw tp(16727)}get left(){throw tp(29726)}get right(){throw tp(36894)}copy(e,t,i,r,n){return this}insert(e,t,i){return new Nm(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Lm{constructor(e){this.comparator=e,this.data=new Dm(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new zm(this.data.getIterator())}getIteratorFrom(e){return new zm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Lm))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=i.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Lm(this.comparator);return t.data=e,t}}class zm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Vm(e){return e.hasNext()?e.getNext():void 0}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e){this.fields=e,e.sort(Ep.comparator)}static empty(){return new Um([])}unionWith(e){let t=new Lm(Ep.comparator);for(const e of this.fields)t=t.add(e);for(const i of e)t=t.add(i);return new Um(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return kp(this.fields,e.fields,(e,t)=>e.isEqual(t))}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new qm("Invalid base64 string: "+e):e}}(e);return new Xm(t)}static fromUint8Array(e){const t=function(e){let t="";for(let i=0;i<e.length;++i)t+=String.fromCharCode(e[i]);return t}(e);return new Xm(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return yp(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xm.EMPTY_BYTE_STRING=new Xm("");const Zm=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bm(e){if(rp(!!e,39018),"string"==typeof e){let t=0;const i=Zm.exec(e);if(rp(!!i,46558,{timestamp:e}),i[1]){let e=i[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:jm(e.seconds),nanos:jm(e.nanos)}}function jm(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Fm(e){return"string"==typeof e?Xm.fromBase64String(e):Xm.fromUint8Array(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wm="server_timestamp",Ym="__type__",Gm="__previous_value__",Hm="__local_write_time__";function Km(e){var t,i;return(null===(i=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Ym])||void 0===i?void 0:i.stringValue)===Wm}function Jm(e){const t=e.mapValue.fields[Gm];return Km(t)?Jm(t):t}function eg(e){const t=Bm(e.mapValue.fields[Hm].timestampValue);return new Up(t.seconds,t.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e,t,i,r,n,o,s,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=n,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=a,this.useFetchStreams=l,this.isUsingEmulator=c}}const ig="(default)";class rg{constructor(e,t){this.projectId=e,this.database=t||ig}static empty(){return new rg("","")}get isDefaultDatabase(){return this.database===ig}isEqual(e){return e instanceof rg&&e.projectId===this.projectId&&e.database===this.database}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng="__type__",og="__max__",sg={mapValue:{fields:{__type__:{stringValue:og}}}},ag="__vector__",lg="value",cg={nullValue:"NULL_VALUE"};function dg(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Km(e)?4:Cg(e)?9007199254740991:_g(e)?10:11:tp(28295,{value:e})}function hg(e,t){if(e===t)return!0;const i=dg(e);if(i!==dg(t))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return eg(e).isEqual(eg(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const i=Bm(e.timestampValue),r=Bm(t.timestampValue);return i.seconds===r.seconds&&i.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Fm(e.bytesValue).isEqual(Fm(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return jm(e.geoPointValue.latitude)===jm(t.geoPointValue.latitude)&&jm(e.geoPointValue.longitude)===jm(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return jm(e.integerValue)===jm(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const i=jm(e.doubleValue),r=jm(t.doubleValue);return i===r?yf(i)===yf(r):isNaN(i)&&isNaN(r)}return!1}(e,t);case 9:return kp(e.arrayValue.values||[],t.arrayValue.values||[],hg);case 10:case 11:return function(e,t){const i=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Im(i)!==Im(r))return!1;for(const e in i)if(i.hasOwnProperty(e)&&(void 0===r[e]||!hg(i[e],r[e])))return!1;return!0}(e,t);default:return tp(52216,{left:e})}}function ug(e,t){return void 0!==(e.values||[]).find(e=>hg(e,t))}function pg(e,t){if(e===t)return 0;const i=dg(e),r=dg(t);if(i!==r)return yp(i,r);switch(i){case 0:case 9007199254740991:return 0;case 1:return yp(e.booleanValue,t.booleanValue);case 2:return function(e,t){const i=jm(e.integerValue||e.doubleValue),r=jm(t.integerValue||t.doubleValue);return i<r?-1:i>r?1:i===r?0:isNaN(i)?isNaN(r)?0:-1:1}(e,t);case 3:return fg(e.timestampValue,t.timestampValue);case 4:return fg(eg(e),eg(t));case 5:return bp(e.stringValue,t.stringValue);case 6:return function(e,t){const i=Fm(e),r=Fm(t);return i.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const i=e.split("/"),r=t.split("/");for(let e=0;e<i.length&&e<r.length;e++){const t=yp(i[e],r[e]);if(0!==t)return t}return yp(i.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const i=yp(jm(e.latitude),jm(t.latitude));return 0!==i?i:yp(jm(e.longitude),jm(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return mg(e.arrayValue,t.arrayValue);case 10:return function(e,t){var i,r,n,o;const s=e.fields||{},a=t.fields||{},l=null===(i=s[lg])||void 0===i?void 0:i.arrayValue,c=null===(r=a[lg])||void 0===r?void 0:r.arrayValue,d=yp((null===(n=null==l?void 0:l.values)||void 0===n?void 0:n.length)||0,(null===(o=null==c?void 0:c.values)||void 0===o?void 0:o.length)||0);return 0!==d?d:mg(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===sg.mapValue&&t===sg.mapValue)return 0;if(e===sg.mapValue)return 1;if(t===sg.mapValue)return-1;const i=e.fields||{},r=Object.keys(i),n=t.fields||{},o=Object.keys(n);r.sort(),o.sort();for(let e=0;e<r.length&&e<o.length;++e){const t=bp(r[e],o[e]);if(0!==t)return t;const s=pg(i[r[e]],n[o[e]]);if(0!==s)return s}return yp(r.length,o.length)}(e.mapValue,t.mapValue);default:throw tp(23264,{le:i})}}function fg(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return yp(e,t);const i=Bm(e),r=Bm(t),n=yp(i.seconds,r.seconds);return 0!==n?n:yp(i.nanos,r.nanos)}function mg(e,t){const i=e.values||[],r=t.values||[];for(let e=0;e<i.length&&e<r.length;++e){const t=pg(i[e],r[e]);if(t)return t}return yp(i.length,r.length)}function gg(e){return vg(e)}function vg(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Bm(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Fm(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return $p.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",i=!0;for(const r of e.values||[])i?i=!1:t+=",",t+=vg(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let i="{",r=!0;for(const n of t)r?r=!1:i+=",",i+=`${n}:${vg(e.fields[n])}`;return i+"}"}(e.mapValue):tp(61005,{value:e})}function Og(e){switch(dg(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Jm(e);return t?16+Og(t):16;case 5:return 2*e.stringValue.length;case 6:return Fm(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+Og(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return Qm(e.fields,(e,i)=>{t+=e.length+Og(i)}),t}(e.mapValue);default:throw tp(13486,{value:e})}}function yg(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function bg(e){return!!e&&"integerValue"in e}function xg(e){return!!e&&"arrayValue"in e}function wg(e){return!!e&&"nullValue"in e}function kg(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Sg(e){return!!e&&"mapValue"in e}function _g(e){var t,i;return(null===(i=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[ng])||void 0===i?void 0:i.stringValue)===ag}function Tg(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Qm(e.mapValue.fields,(e,i)=>t.mapValue.fields[e]=Tg(i)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let i=0;i<(e.arrayValue.values||[]).length;++i)t.arrayValue.values[i]=Tg(e.arrayValue.values[i]);return t}return Object.assign({},e)}function Cg(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===og}const Pg={mapValue:{fields:{[ng]:{stringValue:ag},[lg]:{arrayValue:{}}}}};function Eg(e){return"nullValue"in e?cg:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?yg(rg.empty(),$p.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?_g(e)?Pg:{mapValue:{}}:tp(35942,{value:e})}function $g(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?yg(rg.empty(),$p.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?Pg:"mapValue"in e?_g(e)?{mapValue:{}}:sg:tp(61959,{value:e})}function Ag(e,t){const i=pg(e.value,t.value);return 0!==i?i:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Ig(e,t){const i=pg(e.value,t.value);return 0!==i?i:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(e){this.value=e}static empty(){return new Qg({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Sg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Tg(t)}setAll(e){let t=Ep.emptyPath(),i={},r=[];e.forEach((e,n)=>{if(!t.isImmediateParentOf(n)){const e=this.getFieldsMap(t);this.applyChanges(e,i,r),i={},r=[],t=n.popLast()}e?i[n.lastSegment()]=Tg(e):r.push(n.lastSegment())});const n=this.getFieldsMap(t);this.applyChanges(n,i,r)}delete(e){const t=this.field(e.popLast());Sg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return hg(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];Sg(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){Qm(t,(t,i)=>e[t]=i);for(const t of i)delete e[t]}clone(){return new Qg(Tg(this.value))}}function Rg(e){const t=[];return Qm(e.fields,(e,i)=>{const r=new Ep([e]);if(Sg(i)){const e=Rg(i.mapValue).fields;if(0===e.length)t.push(r);else for(const i of e)t.push(r.child(i))}else t.push(r)}),new Um(t)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Dg{constructor(e,t,i,r,n,o,s){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=n,this.data=o,this.documentState=s}static newInvalidDocument(e){return new Dg(e,0,qp.min(),qp.min(),qp.min(),Qg.empty(),0)}static newFoundDocument(e,t,i,r){return new Dg(e,1,t,qp.min(),i,r,0)}static newNoDocument(e,t){return new Dg(e,2,t,qp.min(),qp.min(),Qg.empty(),0)}static newUnknownDocument(e,t){return new Dg(e,3,t,qp.min(),qp.min(),Qg.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(qp.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qg.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qg.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=qp.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Dg&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dg(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e,t){this.position=e,this.inclusive=t}}function Ng(e,t,i){let r=0;for(let n=0;n<e.position.length;n++){const o=t[n],s=e.position[n];if(r=o.field.isKeyField()?$p.comparator($p.fromName(s.referenceValue),i.key):pg(s,i.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function Lg(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let i=0;i<e.position.length;i++)if(!hg(e.position[i],t.position[i]))return!1;return!0}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(e,t="asc"){this.field=e,this.dir=t}}function Vg(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{}class qg extends Ug{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,i):new Kg(e,t,i):"array-contains"===t?new iv(e,i):"in"===t?new rv(e,i):"not-in"===t?new nv(e,i):"array-contains-any"===t?new ov(e,i):new qg(e,t,i)}static createKeyFieldInFilter(e,t,i){return"in"===t?new Jg(e,i):new ev(e,i)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(pg(t,this.value)):null!==t&&dg(this.value)===dg(t)&&this.matchesComparison(pg(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return tp(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xg extends Ug{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Xg(e,t)}matches(e){return Zg(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.he||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Zg(e){return"and"===e.op}function Bg(e){return"or"===e.op}function jg(e){return Fg(e)&&Zg(e)}function Fg(e){for(const t of e.filters)if(t instanceof Xg)return!1;return!0}function Wg(e){if(e instanceof qg)return e.field.canonicalString()+e.op.toString()+gg(e.value);if(jg(e))return e.filters.map(e=>Wg(e)).join(",");{const t=e.filters.map(e=>Wg(e)).join(",");return`${e.op}(${t})`}}function Yg(e,t){return e instanceof qg?function(e,t){return t instanceof qg&&e.op===t.op&&e.field.isEqual(t.field)&&hg(e.value,t.value)}(e,t):e instanceof Xg?function(e,t){return t instanceof Xg&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,i,r)=>e&&Yg(i,t.filters[r]),!0)}(e,t):void tp(19439)}function Gg(e,t){const i=e.filters.concat(t);return Xg.create(i,e.op)}function Hg(e){return e instanceof qg?function(e){return`${e.field.canonicalString()} ${e.op} ${gg(e.value)}`}(e):e instanceof Xg?function(e){return e.op.toString()+" {"+e.getFilters().map(Hg).join(" ,")+"}"}(e):"Filter"}class Kg extends qg{constructor(e,t,i){super(e,t,i),this.key=$p.fromName(i.referenceValue)}matches(e){const t=$p.comparator(e.key,this.key);return this.matchesComparison(t)}}class Jg extends qg{constructor(e,t){super(e,"in",t),this.keys=tv("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ev extends qg{constructor(e,t){super(e,"not-in",t),this.keys=tv("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function tv(e,t){var i;return((null===(i=t.arrayValue)||void 0===i?void 0:i.values)||[]).map(e=>$p.fromName(e.referenceValue))}class iv extends qg{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return xg(t)&&ug(t.arrayValue,this.value)}}class rv extends qg{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&ug(this.value.arrayValue,t)}}class nv extends qg{constructor(e,t){super(e,"not-in",t)}matches(e){if(ug(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!ug(this.value.arrayValue,t)}}class ov extends qg{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!xg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>ug(this.value.arrayValue,e))}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(e,t=null,i=[],r=[],n=null,o=null,s=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=n,this.startAt=o,this.endAt=s,this.Pe=null}}function av(e,t=null,i=[],r=[],n=null,o=null,s=null){return new sv(e,t,i,r,n,o,s)}function lv(e){const t=np(e);if(null===t.Pe){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Wg(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Of(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>gg(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>gg(e)).join(",")),t.Pe=e}return t.Pe}function cv(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<e.orderBy.length;i++)if(!Vg(e.orderBy[i],t.orderBy[i]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let i=0;i<e.filters.length;i++)if(!Yg(e.filters[i],t.filters[i]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Lg(e.startAt,t.startAt)&&Lg(e.endAt,t.endAt)}function dv(e){return $p.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function hv(e,t){return e.filters.filter(e=>e instanceof qg&&e.field.isEqual(t))}function uv(e,t,i){let r=cg,n=!0;for(const i of hv(e,t)){let e=cg,t=!0;switch(i.op){case"<":case"<=":e=Eg(i.value);break;case"==":case"in":case">=":e=i.value;break;case">":e=i.value,t=!1;break;case"!=":case"not-in":e=cg}Ag({value:r,inclusive:n},{value:e,inclusive:t})<0&&(r=e,n=t)}if(null!==i)for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){const e=i.position[o];Ag({value:r,inclusive:n},{value:e,inclusive:i.inclusive})<0&&(r=e,n=i.inclusive);break}return{value:r,inclusive:n}}function pv(e,t,i){let r=sg,n=!0;for(const i of hv(e,t)){let e=sg,t=!0;switch(i.op){case">=":case">":e=$g(i.value),t=!1;break;case"==":case"in":case"<=":e=i.value;break;case"<":e=i.value,t=!1;break;case"!=":case"not-in":e=sg}Ig({value:r,inclusive:n},{value:e,inclusive:t})>0&&(r=e,n=t)}if(null!==i)for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){const e=i.position[o];Ig({value:r,inclusive:n},{value:e,inclusive:i.inclusive})>0&&(r=e,n=i.inclusive);break}return{value:r,inclusive:n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e,t=null,i=[],r=[],n=null,o="F",s=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=n,this.limitType=o,this.startAt=s,this.endAt=a,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function mv(e){return new fv(e)}function gv(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function vv(e){return null!==e.collectionGroup}function Ov(e){const t=np(e);if(null===t.Te){t.Te=[];const e=new Set;for(const i of t.explicitOrderBy)t.Te.push(i),e.add(i.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Lm(Ep.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Te.push(new zg(r,i))}),e.has(Ep.keyField().canonicalString())||t.Te.push(new zg(Ep.keyField(),i))}return t.Te}function yv(e){const t=np(e);return t.Ie||(t.Ie=function(e,t){if("F"===e.limitType)return av(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new zg(e.field,t)});const i=e.endAt?new Mg(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Mg(e.startAt.position,e.startAt.inclusive):null;return av(e.path,e.collectionGroup,t,e.filters,e.limit,i,r)}}(t,Ov(e))),t.Ie}function bv(e,t){const i=e.filters.concat([t]);return new fv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),i,e.limit,e.limitType,e.startAt,e.endAt)}function xv(e,t,i){return new fv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,i,e.startAt,e.endAt)}function wv(e,t){return cv(yv(e),yv(t))&&e.limitType===t.limitType}function kv(e){return`${lv(yv(e))}|lt:${e.limitType}`}function Sv(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>Hg(e)).join(", ")}]`),Of(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>gg(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>gg(e)).join(",")),`Target(${t})`}(yv(e))}; limitType=${e.limitType})`}function _v(e,t){return t.isFoundDocument()&&function(e,t){const i=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(i):$p.isDocumentKey(e.path)?e.path.isEqual(i):e.path.isImmediateParentOf(i)}(e,t)&&function(e,t){for(const i of Ov(e))if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1;return!0}(e,t)&&function(e,t){for(const i of e.filters)if(!i.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,i){const r=Ng(e,t,i);return e.inclusive?r<=0:r<0}(e.startAt,Ov(e),t))&&!(e.endAt&&!function(e,t,i){const r=Ng(e,t,i);return e.inclusive?r>=0:r>0}(e.endAt,Ov(e),t))}(e,t)}function Tv(e){return(t,i)=>{let r=!1;for(const n of Ov(e)){const e=Cv(n,t,i);if(0!==e)return e;r=r||n.field.isKeyField()}return 0}}function Cv(e,t,i){const r=e.field.isKeyField()?$p.comparator(t.key,i.key):function(e,t,i){const r=t.data.field(e),n=i.data.field(e);return null!==r&&null!==n?pg(r,n):tp(42886)}(e.field,t,i);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return tp(19790,{direction:e.dir})}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i)for(const[t,r]of i)if(this.equalsFn(t,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(void 0===r)return this.inner[i]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return 1===i.length?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Qm(this.inner,(t,i)=>{for(const[t,r]of i)e(t,r)})}isEmpty(){return Rm(this.inner)}size(){return this.innerSize}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev=new Dm($p.comparator);function $v(){return Ev}const Av=new Dm($p.comparator);function Iv(...e){let t=Av;for(const i of e)t=t.insert(i.key,i);return t}function Qv(e){let t=Av;return e.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function Rv(){return Mv()}function Dv(){return Mv()}function Mv(){return new Pv(e=>e.toString(),(e,t)=>e.isEqual(t))}const Nv=new Dm($p.comparator),Lv=new Lm($p.comparator);function zv(...e){let t=Lv;for(const i of e)t=t.add(i);return t}const Vv=new Lm(yp);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Uv(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yf(t)?"-0":t}}function qv(e){return{integerValue:""+e}}function Xv(e,t){return function(e){return"number"==typeof e&&Number.isInteger(e)&&!yf(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}(t)?qv(t):Uv(e,t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(){this._=void 0}}function Bv(e,t,i){return e instanceof Wv?function(e,t){const i={fields:{[Ym]:{stringValue:Wm},[Hm]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Km(t)&&(t=Jm(t)),t&&(i.fields[Gm]=t),{mapValue:i}}(i,t):e instanceof Yv?Gv(e,t):e instanceof Hv?Kv(e,t):function(e,t){const i=Fv(e,t),r=eO(i)+eO(e.Ee);return bg(i)&&bg(e.Ee)?qv(r):Uv(e.serializer,r)}(e,t)}function jv(e,t,i){return e instanceof Yv?Gv(e,t):e instanceof Hv?Kv(e,t):i}function Fv(e,t){return e instanceof Jv?function(e){return bg(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Wv extends Zv{}class Yv extends Zv{constructor(e){super(),this.elements=e}}function Gv(e,t){const i=tO(t);for(const t of e.elements)i.some(e=>hg(e,t))||i.push(t);return{arrayValue:{values:i}}}class Hv extends Zv{constructor(e){super(),this.elements=e}}function Kv(e,t){let i=tO(t);for(const t of e.elements)i=i.filter(e=>!hg(e,t));return{arrayValue:{values:i}}}class Jv extends Zv{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function eO(e){return jm(e.integerValue||e.doubleValue)}function tO(e){return xg(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e,t){this.field=e,this.transform=t}}class rO{constructor(e,t){this.version=e,this.transformResults=t}}class nO{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new nO}static exists(e){return new nO(void 0,e)}static updateTime(e){return new nO(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function oO(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class sO{}function aO(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new vO(e.key,nO.none()):new uO(e.key,e.data,nO.none());{const i=e.data,r=Qg.empty();let n=new Lm(Ep.comparator);for(let e of t.fields)if(!n.has(e)){let t=i.field(e);null===t&&e.length>1&&(e=e.popLast(),t=i.field(e)),null===t?r.delete(e):r.set(e,t),n=n.add(e)}return new pO(e.key,r,new Um(n.toArray()),nO.none())}}function lO(e,t,i){e instanceof uO?function(e,t,i){const r=e.value.clone(),n=mO(e.fieldTransforms,t,i.transformResults);r.setAll(n),t.convertToFoundDocument(i.version,r).setHasCommittedMutations()}(e,t,i):e instanceof pO?function(e,t,i){if(!oO(e.precondition,t))return void t.convertToUnknownDocument(i.version);const r=mO(e.fieldTransforms,t,i.transformResults),n=t.data;n.setAll(fO(e)),n.setAll(r),t.convertToFoundDocument(i.version,n).setHasCommittedMutations()}(e,t,i):function(e,t,i){t.convertToNoDocument(i.version).setHasCommittedMutations()}(0,t,i)}function cO(e,t,i,r){return e instanceof uO?function(e,t,i,r){if(!oO(e.precondition,t))return i;const n=e.value.clone(),o=gO(e.fieldTransforms,r,t);return n.setAll(o),t.convertToFoundDocument(t.version,n).setHasLocalMutations(),null}(e,t,i,r):e instanceof pO?function(e,t,i,r){if(!oO(e.precondition,t))return i;const n=gO(e.fieldTransforms,r,t),o=t.data;return o.setAll(fO(e)),o.setAll(n),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===i?null:i.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,i,r):function(e,t,i){return oO(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):i}(e,t,i)}function dO(e,t){let i=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),n=Fv(r.transform,e||null);null!=n&&(null===i&&(i=Qg.empty()),i.set(r.field,n))}return i||null}function hO(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&kp(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Yv&&t instanceof Yv||e instanceof Hv&&t instanceof Hv?kp(e.elements,t.elements,hg):e instanceof Jv&&t instanceof Jv?hg(e.Ee,t.Ee):e instanceof Wv&&t instanceof Wv}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class uO extends sO{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class pO extends sO{constructor(e,t,i,r,n=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=n,this.type=1}getFieldMask(){return this.fieldMask}}function fO(e){const t=new Map;return e.fieldMask.fields.forEach(i=>{if(!i.isEmpty()){const r=e.data.field(i);t.set(i,r)}}),t}function mO(e,t,i){const r=new Map;rp(e.length===i.length,32656,{Ae:i.length,Re:e.length});for(let n=0;n<i.length;n++){const o=e[n],s=o.transform,a=t.data.field(o.field);r.set(o.field,jv(s,a,i[n]))}return r}function gO(e,t,i){const r=new Map;for(const n of e){const e=n.transform,o=i.data.field(n.field);r.set(n.field,Bv(e,o,t))}return r}class vO extends sO{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class OO extends sO{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let t=0;t<this.mutations.length;t++){const r=this.mutations[t];r.key.isEqual(e.key)&&lO(r,e,i[t])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=cO(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=cO(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Dv();return this.mutations.forEach(r=>{const n=e.get(r.key),o=n.overlayedDocument;let s=this.applyToLocalView(o,n.mutatedFields);s=t.has(r.key)?null:s;const a=aO(o,s);null!==a&&i.set(r.key,a),o.isValidDocument()||o.convertToNoDocument(qp.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),zv())}isEqual(e){return this.batchId===e.batchId&&kp(this.mutations,e.mutations,(e,t)=>hO(e,t))&&kp(this.baseMutations,e.baseMutations,(e,t)=>hO(e,t))}}class bO{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){rp(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let r=Nv;const n=e.mutations;for(let e=0;e<n.length;e++)r=r.insert(n[e].key,i[e].version);return new bO(e,t,i,r)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(e,t){this.count=e,this.unchangedNames=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kO,SO;function _O(e){if(void 0===e)return Ku("GRPC error has no .code"),op.UNKNOWN;switch(e){case kO.OK:return op.OK;case kO.CANCELLED:return op.CANCELLED;case kO.UNKNOWN:return op.UNKNOWN;case kO.DEADLINE_EXCEEDED:return op.DEADLINE_EXCEEDED;case kO.RESOURCE_EXHAUSTED:return op.RESOURCE_EXHAUSTED;case kO.INTERNAL:return op.INTERNAL;case kO.UNAVAILABLE:return op.UNAVAILABLE;case kO.UNAUTHENTICATED:return op.UNAUTHENTICATED;case kO.INVALID_ARGUMENT:return op.INVALID_ARGUMENT;case kO.NOT_FOUND:return op.NOT_FOUND;case kO.ALREADY_EXISTS:return op.ALREADY_EXISTS;case kO.PERMISSION_DENIED:return op.PERMISSION_DENIED;case kO.FAILED_PRECONDITION:return op.FAILED_PRECONDITION;case kO.ABORTED:return op.ABORTED;case kO.OUT_OF_RANGE:return op.OUT_OF_RANGE;case kO.UNIMPLEMENTED:return op.UNIMPLEMENTED;case kO.DATA_LOSS:return op.DATA_LOSS;default:return tp(39323,{code:e})}}(SO=kO||(kO={}))[SO.OK=0]="OK",SO[SO.CANCELLED=1]="CANCELLED",SO[SO.UNKNOWN=2]="UNKNOWN",SO[SO.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",SO[SO.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",SO[SO.NOT_FOUND=5]="NOT_FOUND",SO[SO.ALREADY_EXISTS=6]="ALREADY_EXISTS",SO[SO.PERMISSION_DENIED=7]="PERMISSION_DENIED",SO[SO.UNAUTHENTICATED=16]="UNAUTHENTICATED",SO[SO.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",SO[SO.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",SO[SO.ABORTED=10]="ABORTED",SO[SO.OUT_OF_RANGE=11]="OUT_OF_RANGE",SO[SO.UNIMPLEMENTED=12]="UNIMPLEMENTED",SO[SO.INTERNAL=13]="INTERNAL",SO[SO.UNAVAILABLE=14]="UNAVAILABLE",SO[SO.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const TO=new Qu([4294967295,4294967295],0);function CO(e){const t=vp().encode(e),i=new Ru;return i.update(t),new Uint8Array(i.digest())}function PO(e){const t=new DataView(e.buffer),i=t.getUint32(0,!0),r=t.getUint32(4,!0),n=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new Qu([i,r],0),new Qu([n,o],0)]}class EO{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new $O(`Invalid padding: ${t}`);if(i<0)throw new $O(`Invalid hash count: ${i}`);if(e.length>0&&0===this.hashCount)throw new $O(`Invalid hash count: ${i}`);if(0===e.length&&0!==t)throw new $O(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Qu.fromNumber(this.fe)}pe(e,t,i){let r=e.add(t.multiply(Qu.fromNumber(i)));return 1===r.compare(TO)&&(r=new Qu([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.fe)return!1;const t=CO(e),[i,r]=PO(t);for(let e=0;e<this.hashCount;e++){const t=this.pe(i,r,e);if(!this.ye(t))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,n=new Uint8Array(Math.ceil(e/8)),o=new EO(n,r,t);return i.forEach(e=>o.insert(e)),o}insert(e){if(0===this.fe)return;const t=CO(e),[i,r]=PO(t);for(let e=0;e<this.hashCount;e++){const t=this.pe(i,r,e);this.we(t)}}we(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class $O extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(e,t,i,r,n){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=n}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,IO.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new AO(qp.min(),r,new Dm(yp),$v(),zv())}}class IO{constructor(e,t,i,r,n){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=n}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new IO(i,t,zv(),zv(),zv())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e,t,i,r){this.Se=e,this.removedTargetIds=t,this.key=i,this.be=r}}class RO{constructor(e,t){this.targetId=e,this.De=t}}class DO{constructor(e,t,i=Xm.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class MO{constructor(){this.ve=0,this.Ce=zO(),this.Fe=Xm.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return 0!==this.ve}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=zv(),t=zv(),i=zv();return this.Ce.forEach((r,n)=>{switch(n){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:tp(38017,{changeType:n})}}),new IO(this.Fe,this.Me,e,t,i)}ke(){this.xe=!1,this.Ce=zO()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,rp(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class NO{constructor(e){this.We=e,this.Ge=new Map,this.ze=$v(),this.je=LO(),this.Je=LO(),this.He=new Dm(yp)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const i=this.tt(t);switch(e.state){case 0:this.nt(t)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),i.Be(e.resumeToken));break;default:tp(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((e,i)=>{this.nt(i)&&t(i)})}it(e){const t=e.targetId,i=e.De.count,r=this.st(t);if(r){const n=r.target;if(dv(n))if(0===i){const e=new $p(n.path);this.Xe(t,e,Dg.newNoDocument(e,qp.min()))}else rp(1===i,20013,{expectedCount:i});else{const r=this.ot(t);if(r!==i){const i=this._t(e),n=i?this.ut(i,e,r):1;if(0!==n){this.rt(t);const e=2===n?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,e)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:n=0}=t;let o,s;try{o=Fm(i).toUint8Array()}catch(e){if(e instanceof qm)return Ju("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{s=new EO(o,r,n)}catch(e){return Ju(e instanceof $O?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===s.fe?null:s}ut(e,t,i){return t.De.count===i-this.ht(e,t.targetId)?0:2}ht(e,t){const i=this.We.getRemoteKeysForTarget(t);let r=0;return i.forEach(i=>{const n=this.We.lt(),o=`projects/${n.projectId}/databases/${n.database}/documents/${i.path.canonicalString()}`;e.mightContain(o)||(this.Xe(t,i,null),r++)}),r}Pt(e){const t=new Map;this.Ge.forEach((i,r)=>{const n=this.st(r);if(n){if(i.current&&dv(n.target)){const t=new $p(n.target.path);this.Tt(t).has(r)||this.It(r,t)||this.Xe(r,t,Dg.newNoDocument(t,e))}i.Ne&&(t.set(r,i.Le()),i.ke())}});let i=zv();this.Je.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.st(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(i=i.add(e))}),this.ze.forEach((t,i)=>i.setReadTime(e));const r=new AO(e,t,this.He,this.ze,i);return this.ze=$v(),this.je=LO(),this.Je=LO(),this.He=new Dm(yp),r}Ze(e,t){if(!this.nt(e))return;const i=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,i),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,i){if(!this.nt(e))return;const r=this.tt(e);this.It(e,t)?r.qe(t,1):r.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),i&&(this.ze=this.ze.insert(t,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new MO,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Lm(yp),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Lm(yp),this.je=this.je.insert(e,t)),t}nt(e){const t=null!==this.st(e);return t||Hu("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new MO),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function LO(){return new Dm($p.comparator)}function zO(){return new Dm($p.comparator)}const VO={asc:"ASCENDING",desc:"DESCENDING"},UO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qO={and:"AND",or:"OR"};class XO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ZO(e,t){return e.useProto3Json||Of(t)?t:{value:t}}function BO(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function jO(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function FO(e,t){return BO(e,t.toTimestamp())}function WO(e){return rp(!!e,49232),qp.fromTimestamp(function(e){const t=Bm(e);return new Up(t.seconds,t.nanos)}(e))}function YO(e,t){return GO(e,t).canonicalString()}function GO(e,t){const i=function(e){return new Cp(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?i:i.child(t)}function HO(e){const t=Cp.fromString(e);return rp(Oy(t),10190,{key:t.toString()}),t}function KO(e,t){return YO(e.databaseId,t.path)}function JO(e,t){const i=HO(t);if(i.get(1)!==e.databaseId.projectId)throw new sp(op.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+e.databaseId.projectId);if(i.get(3)!==e.databaseId.database)throw new sp(op.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+e.databaseId.database);return new $p(ry(i))}function ey(e,t){return YO(e.databaseId,t)}function ty(e){const t=HO(e);return 4===t.length?Cp.emptyPath():ry(t)}function iy(e){return new Cp(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ry(e){return rp(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function ny(e,t,i){return{name:KO(e,t),fields:i.value.mapValue.fields}}function oy(e,t){let i;if(t instanceof uO)i={update:ny(e,t.key,t.value)};else if(t instanceof vO)i={delete:KO(e,t.key)};else if(t instanceof pO)i={update:ny(e,t.key,t.data),updateMask:vy(t.fieldMask)};else{if(!(t instanceof OO))return tp(16599,{Rt:t.type});i={verify:KO(e,t.key)}}return t.fieldTransforms.length>0&&(i.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const i=t.transform;if(i instanceof Wv)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(i instanceof Yv)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:i.elements}};if(i instanceof Hv)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:i.elements}};if(i instanceof Jv)return{fieldPath:t.field.canonicalString(),increment:i.Ee};throw tp(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(i.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:FO(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:tp(27497)}(e,t.precondition)),i}function sy(e,t){const i=t.currentDocument?function(e){return void 0!==e.updateTime?nO.updateTime(WO(e.updateTime)):void 0!==e.exists?nO.exists(e.exists):nO.none()}(t.currentDocument):nO.none(),r=t.updateTransforms?t.updateTransforms.map(t=>function(e,t){let i=null;if("setToServerValue"in t)rp("REQUEST_TIME"===t.setToServerValue,16630,{proto:t}),i=new Wv;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];i=new Yv(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];i=new Hv(e)}else"increment"in t?i=new Jv(e,t.increment):tp(16584,{proto:t});const r=Ep.fromServerFormat(t.fieldPath);return new iO(r,i)}(e,t)):[];if(t.update){t.update.name;const n=JO(e,t.update.name),o=new Qg({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new Um(t.map(e=>Ep.fromServerFormat(e)))}(t.updateMask);return new pO(n,o,e,i,r)}return new uO(n,o,i,r)}if(t.delete){const r=JO(e,t.delete);return new vO(r,i)}if(t.verify){const r=JO(e,t.verify);return new OO(r,i)}return tp(1463,{proto:t})}function ay(e,t){return{documents:[ey(e,t.path)]}}function ly(e,t){const i={structuredQuery:{}},r=t.path;let n;null!==t.collectionGroup?(n=r,i.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n=r.popLast(),i.structuredQuery.from=[{collectionId:r.lastSegment()}]),i.parent=ey(e,n);const o=function(e){if(0!==e.length)return gy(Xg.create(e,"and"))}(t.filters);o&&(i.structuredQuery.where=o);const s=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:fy(e.field),direction:hy(e.dir)}}(e))}(t.orderBy);s&&(i.structuredQuery.orderBy=s);const a=ZO(e,t.limit);return null!==a&&(i.structuredQuery.limit=a),t.startAt&&(i.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(i.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{Vt:i,parent:n}}function cy(e){let t=ty(e.parent);const i=e.structuredQuery,r=i.from?i.from.length:0;let n=null;if(r>0){rp(1===r,65062);const e=i.from[0];e.allDescendants?n=e.collectionId:t=t.child(e.collectionId)}let o=[];i.where&&(o=function(e){const t=dy(e);return t instanceof Xg&&jg(t)?t.getFilters():[t]}(i.where));let s=[];i.orderBy&&(s=function(e){return e.map(e=>function(e){return new zg(my(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(i.orderBy));let a=null;i.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Of(t)?null:t}(i.limit));let l=null;i.startAt&&(l=function(e){const t=!!e.before,i=e.values||[];return new Mg(i,t)}(i.startAt));let c=null;return i.endAt&&(c=function(e){const t=!e.before,i=e.values||[];return new Mg(i,t)}(i.endAt)),function(e,t,i,r,n,o,s,a){return new fv(e,t,i,r,n,o,s,a)}(t,n,s,o,a,"F",l,c)}function dy(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=my(e.unaryFilter.field);return qg.create(t,"==",{doubleValue:NaN});case"IS_NULL":const i=my(e.unaryFilter.field);return qg.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=my(e.unaryFilter.field);return qg.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const n=my(e.unaryFilter.field);return qg.create(n,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return tp(61313);default:return tp(60726)}}(e):void 0!==e.fieldFilter?function(e){return qg.create(my(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return tp(58110);default:return tp(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Xg.create(e.compositeFilter.filters.map(e=>dy(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return tp(1026)}}(e.compositeFilter.op))}(e):tp(30097,{filter:e})}function hy(e){return VO[e]}function uy(e){return UO[e]}function py(e){return qO[e]}function fy(e){return{fieldPath:e.canonicalString()}}function my(e){return Ep.fromServerFormat(e.fieldPath)}function gy(e){return e instanceof qg?function(e){if("=="===e.op){if(kg(e.value))return{unaryFilter:{field:fy(e.field),op:"IS_NAN"}};if(wg(e.value))return{unaryFilter:{field:fy(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(kg(e.value))return{unaryFilter:{field:fy(e.field),op:"IS_NOT_NAN"}};if(wg(e.value))return{unaryFilter:{field:fy(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fy(e.field),op:uy(e.op),value:e.value}}}(e):e instanceof Xg?function(e){const t=e.getFilters().map(e=>gy(e));return 1===t.length?t[0]:{compositeFilter:{op:py(e.op),filters:t}}}(e):tp(54877,{filter:e})}function vy(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Oy(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(e,t,i,r,n=qp.min(),o=qp.min(),s=Xm.EMPTY_BYTE_STRING,a=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=n,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=a}withSequenceNumber(e){return new yy(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new yy(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new yy(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new yy(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(e){this.gt=e}}function xy(e,t){let i;if(t.document)i=function(e,t,i){const r=JO(e,t.name),n=WO(t.updateTime),o=t.createTime?WO(t.createTime):qp.min(),s=new Qg({mapValue:{fields:t.fields}}),a=Dg.newFoundDocument(r,n,o,s);return i&&a.setHasCommittedMutations(),i?a.setHasCommittedMutations():a}(e.gt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=$p.fromSegments(t.noDocument.path),r=_y(t.noDocument.readTime);i=Dg.newNoDocument(e,r),t.hasCommittedMutations&&i.setHasCommittedMutations()}else{if(!t.unknownDocument)return tp(56709);{const e=$p.fromSegments(t.unknownDocument.path),r=_y(t.unknownDocument.version);i=Dg.newUnknownDocument(e,r)}}return t.readTime&&i.setReadTime(function(e){const t=new Up(e[0],e[1]);return qp.fromTimestamp(t)}(t.readTime)),i}function wy(e,t){const i=t.key,r={prefixPath:i.getCollectionPath().popLast().toArray(),collectionGroup:i.collectionGroup,documentId:i.path.lastSegment(),readTime:ky(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:KO(e,t.key),fields:t.data.value.mapValue.fields,updateTime:BO(e,t.version.toTimestamp()),createTime:BO(e,t.createTime.toTimestamp())}}(e.gt,t);else if(t.isNoDocument())r.noDocument={path:i.path.toArray(),readTime:Sy(t.version)};else{if(!t.isUnknownDocument())return tp(57904,{document:t});r.unknownDocument={path:i.path.toArray(),version:Sy(t.version)}}return r}function ky(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Sy(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function _y(e){const t=new Up(e.seconds,e.nanoseconds);return qp.fromTimestamp(t)}function Ty(e,t){const i=(t.baseMutations||[]).map(t=>sy(e.gt,t));for(let e=0;e<t.mutations.length-1;++e){const i=t.mutations[e];if(e+1<t.mutations.length&&void 0!==t.mutations[e+1].transform){const r=t.mutations[e+1];i.updateTransforms=r.transform.fieldTransforms,t.mutations.splice(e+1,1),++e}}const r=t.mutations.map(t=>sy(e.gt,t)),n=Up.fromMillis(t.localWriteTimeMs);return new yO(t.batchId,n,i,r)}function Cy(e){const t=_y(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?_y(e.lastLimboFreeSnapshotVersion):qp.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){const t=e.documents.length;return rp(1===t,1966,{count:t}),yv(mv(ty(e.documents[0])))}(e.query):function(e){return yv(cy(e))}(e.query),new yy(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,i,Xm.fromBase64String(e.resumeToken))}function Py(e,t){const i=Sy(t.snapshotVersion),r=Sy(t.lastLimboFreeSnapshotVersion);let n;n=dv(t.target)?ay(e.gt,t.target):ly(e.gt,t.target).Vt;const o=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:lv(t.target),readTime:i,resumeToken:o,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:n}}function Ey(e){const t=cy({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?xv(t,t.limit,"L"):t}function $y(e,t){return new xO(t.largestBatchId,sy(e.gt,t.overlayMutation))}function Ay(e,t){const i=t.path.lastSegment();return[e,xf(t.path.popLast()),i]}function Iy(e,t,i,r){return{indexId:e,uid:t,sequenceNumber:i,readTime:Sy(r.readTime),documentKey:xf(r.documentKey.path),largestBatchId:r.largestBatchId}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{getBundleMetadata(e,t){return Ry(e).get(t).next(e=>{if(e)return function(e){return{id:e.bundleId,createTime:_y(e.createTime),version:e.version}}(e)})}saveBundleMetadata(e,t){return Ry(e).put(function(e){return{bundleId:e.id,createTime:Sy(WO(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return Dy(e).get(t).next(e=>{if(e)return function(e){return{name:e.name,query:Ey(e.bundledQuery),readTime:_y(e.readTime)}}(e)})}saveNamedQuery(e,t){return Dy(e).put(function(e){return{name:e.name,readTime:Sy(WO(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function Ry(e){return Am(e,rm)}function Dy(e){return Am(e,nm)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(e,t){this.serializer=e,this.userId=t}static yt(e,t){const i=t.uid||"";return new My(e,i)}getOverlay(e,t){return Ny(e).get(Ay(this.userId,t)).next(e=>e?$y(this.serializer,e):null)}getOverlays(e,t){const i=Rv();return ef.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&i.set(t,e)})).next(()=>i)}saveOverlays(e,t,i){const r=[];return i.forEach((i,n)=>{const o=new xO(t,n);r.push(this.wt(e,o))}),ef.waitFor(r)}removeOverlaysForBatchId(e,t,i){const r=new Set;t.forEach(e=>r.add(xf(e.getCollectionPath())));const n=[];return r.forEach(t=>{const r=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,i+1],!1,!0);n.push(Ny(e).Y(vm,r))}),ef.waitFor(n)}getOverlaysForCollection(e,t,i){const r=Rv(),n=xf(t),o=IDBKeyRange.bound([this.userId,n,i],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Ny(e).j(vm,o).next(e=>{for(const t of e){const e=$y(this.serializer,t);r.set(e.getKey(),e)}return r})}getOverlaysForCollectionGroup(e,t,i,r){const n=Rv();let o;const s=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ny(e).X({index:ym,range:s},(e,t,i)=>{const s=$y(this.serializer,t);n.size()<r||s.largestBatchId===o?(n.set(s.getKey(),s),o=s.largestBatchId):i.done()}).next(()=>n)}wt(e,t){return Ny(e).put(function(e,t,i){const[r,n,o]=Ay(t,i.mutation.key);return{userId:t,collectionPath:n,documentId:o,collectionGroup:i.mutation.key.getCollectionGroup(),largestBatchId:i.largestBatchId,overlayMutation:oy(e.gt,i.mutation)}}(this.serializer,this.userId,t))}}function Ny(e){return Am(e,mm)}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{St(e){return Am(e,xm)}getSessionToken(e){return this.St(e).get("sessionToken").next(e=>{const t=null==e?void 0:e.value;return t?Xm.fromUint8Array(t):Xm.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(jm(e.integerValue));else if("doubleValue"in e){const i=jm(e.doubleValue);isNaN(i)?this.Ct(t,13):(this.Ct(t,15),yf(i)?t.Ft(0):t.Ft(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ct(t,20),"string"==typeof i&&(i=Bm(i)),t.Mt(`${i.seconds||""}`),t.Ft(i.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Fm(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.Ct(t,45),t.Ft(i.latitude||0),t.Ft(i.longitude||0)}else"mapValue"in e?Cg(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):_g(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):tp(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){const i=e.fields||{};this.Ct(t,55);for(const e of Object.keys(i))this.xt(e,t),this.Dt(i[e],t)}Lt(e,t){var i,r;const n=e.fields||{};this.Ct(t,53);const o=lg,s=(null===(r=null===(i=n[o].arrayValue)||void 0===i?void 0:i.values)||void 0===r?void 0:r.length)||0;this.Ct(t,15),t.Ft(jm(s)),this.xt(o,t),this.Dt(n[o],t)}qt(e,t){const i=e.values||[];this.Ct(t,50);for(const e of i)this.Dt(e,t)}Bt(e,t){this.Ct(t,37),$p.fromName(e).path.forEach(e=>{this.Ct(t,60),this.$t(e,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}}zy.Ut=new zy;
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Vy=255;function Uy(e){if(0===e)return 8;let t=0;return e>>4||(t+=4,e<<=4),e>>6||(t+=2,e<<=2),e>>7||(t+=1),t}function qy(e){const t=64-function(e){let t=0;for(let i=0;i<8;++i){const r=Uy(255&e[i]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}class Xy{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Kt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Wt(i.value),i=t.next();this.Gt()}zt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.jt(i.value),i=t.next();this.Jt()}Ht(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Wt(e);else if(e<2048)this.Wt(960|e>>>6),this.Wt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Wt(480|e>>>12),this.Wt(128|63&e>>>6),this.Wt(128|63&e);else{const e=t.codePointAt(0);this.Wt(240|e>>>18),this.Wt(128|63&e>>>12),this.Wt(128|63&e>>>6),this.Wt(128|63&e)}}this.Gt()}Yt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.jt(e);else if(e<2048)this.jt(960|e>>>6),this.jt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.jt(480|e>>>12),this.jt(128|63&e>>>6),this.jt(128|63&e);else{const e=t.codePointAt(0);this.jt(240|e>>>18),this.jt(128|63&e>>>12),this.jt(128|63&e>>>6),this.jt(128|63&e)}}this.Jt()}Zt(e){const t=this.Xt(e),i=qy(t);this.en(1+i),this.buffer[this.position++]=255&i;for(let e=t.length-i;e<t.length;++e)this.buffer[this.position++]=255&t[e]}tn(e){const t=this.Xt(e),i=qy(t);this.en(1+i),this.buffer[this.position++]=~(255&i);for(let e=t.length-i;e<t.length;++e)this.buffer[this.position++]=~(255&t[e])}nn(){this.rn(Vy),this.rn(255)}sn(){this._n(Vy),this._n(255)}reset(){this.position=0}seed(e){this.en(e.length),this.buffer.set(e,this.position),this.position+=e.length}an(){return this.buffer.slice(0,this.position)}Xt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),i=!!(128&t[0]);t[0]^=i?255:128;for(let e=1;e<t.length;++e)t[e]^=i?255:0;return t}Wt(e){const t=255&e;0===t?(this.rn(0),this.rn(255)):t===Vy?(this.rn(Vy),this.rn(0)):this.rn(t)}jt(e){const t=255&e;0===t?(this._n(0),this._n(255)):t===Vy?(this._n(Vy),this._n(0)):this._n(e)}Gt(){this.rn(0),this.rn(1)}Jt(){this._n(0),this._n(1)}rn(e){this.en(1),this.buffer[this.position++]=e}_n(e){this.en(1),this.buffer[this.position++]=~e}en(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class Zy{constructor(e){this.un=e}Nt(e){this.un.Kt(e)}Mt(e){this.un.Ht(e)}Ft(e){this.un.Zt(e)}vt(){this.un.nn()}}class By{constructor(e){this.un=e}Nt(e){this.un.zt(e)}Mt(e){this.un.Yt(e)}Ft(e){this.un.tn(e)}vt(){this.un.sn()}}class jy{constructor(){this.un=new Xy,this.cn=new Zy(this.un),this.ln=new By(this.un)}seed(e){this.un.seed(e)}hn(e){return 0===e?this.cn:this.ln}an(){return this.un.an()}reset(){this.un.reset()}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(e,t,i,r){this.Pn=e,this.Tn=t,this.In=i,this.dn=r}En(){const e=this.dn.length,t=0===e||255===this.dn[e-1]?e+1:e,i=new Uint8Array(t);return i.set(this.dn,0),t!==e?i.set([0],this.dn.length):++i[i.length-1],new Fy(this.Pn,this.Tn,this.In,i)}An(e,t,i){return{indexId:this.Pn,uid:e,arrayValue:Gy(this.In),directionalValue:Gy(this.dn),orderedDocumentKey:Gy(t),documentKey:i.path.toArray()}}Rn(e,t,i){const r=this.An(e,t,i);return[r.indexId,r.uid,r.arrayValue,r.directionalValue,r.orderedDocumentKey,r.documentKey]}}function Wy(e,t){let i=e.Pn-t.Pn;return 0!==i?i:(i=Yy(e.In,t.In),0!==i?i:(i=Yy(e.dn,t.dn),0!==i?i:$p.comparator(e.Tn,t.Tn)))}function Yy(e,t){for(let i=0;i<e.length&&i<t.length;++i){const r=e[i]-t[i];if(0!==r)return r}return e.length-t.length}function Gy(e){return ao()?function(e){let t="";for(let i=0;i<e.length;i++)t+=String.fromCharCode(e[i]);return t}(e):e}function Hy(e){return"string"!=typeof e?e:function(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)}class Ky{constructor(e){this.Vn=new Lm((e,t)=>Ep.comparator(e.field,t.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.mn=e.orderBy,this.fn=[];for(const t of e.filters){const e=t;e.isInequality()?this.Vn=this.Vn.add(e):this.fn.push(e)}}get gn(){return this.Vn.size>1}pn(e){if(rp(e.collectionGroup===this.collectionId,49279),this.gn)return!1;const t=Zp(e);if(void 0!==t&&!this.yn(t))return!1;const i=Bp(e);let r=new Set,n=0,o=0;for(;n<i.length&&this.yn(i[n]);++n)r=r.add(i[n].fieldPath.canonicalString());if(n===i.length)return!0;if(this.Vn.size>0){const e=this.Vn.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=i[n];if(!this.wn(e,t)||!this.Sn(this.mn[o++],t))return!1}++n}for(;n<i.length;++n){const e=i[n];if(o>=this.mn.length||!this.Sn(this.mn[o++],e))return!1}return!0}bn(){if(this.gn)return null;let e=new Lm(Ep.comparator);const t=[];for(const i of this.fn)if(!i.field.isKeyField())if("array-contains"===i.op||"array-contains-any"===i.op)t.push(new jp(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new jp(i.field,0))}for(const i of this.mn)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new jp(i.field,"asc"===i.dir?0:1)));return new Xp(Xp.UNKNOWN_ID,this.collectionId,t,Fp.empty())}yn(e){for(const t of this.fn)if(this.wn(t,e))return!0;return!1}wn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const i="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===i}Sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jy(e){var t,i;if(rp(e instanceof qg||e instanceof Xg,20012),e instanceof qg){if(e instanceof rv){const r=(null===(i=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===i?void 0:i.map(t=>qg.create(e.field,"==",t)))||[];return Xg.create(r,"or")}return e}const r=e.filters.map(e=>Jy(e));return Xg.create(r,e.op)}function eb(e){if(0===e.getFilters().length)return[];const t=nb(Jy(e));return rp(rb(t),7391),tb(t)||ib(t)?[t]:t.getFilters()}function tb(e){return e instanceof qg}function ib(e){return e instanceof Xg&&jg(e)}function rb(e){return tb(e)||ib(e)||function(e){if(e instanceof Xg&&Bg(e)){for(const t of e.getFilters())if(!tb(t)&&!ib(t))return!1;return!0}return!1}(e)}function nb(e){if(rp(e instanceof qg||e instanceof Xg,34018),e instanceof qg)return e;if(1===e.filters.length)return nb(e.filters[0]);const t=e.filters.map(e=>nb(e));let i=Xg.create(t,e.op);return i=ab(i),rb(i)?i:(rp(i instanceof Xg,64498),rp(Zg(i),40251),rp(i.filters.length>1,57927),i.filters.reduce((e,t)=>ob(e,t)))}function ob(e,t){let i;return rp(e instanceof qg||e instanceof Xg,38388),rp(t instanceof qg||t instanceof Xg,25473),i=e instanceof qg?t instanceof qg?function(e,t){return Xg.create([e,t],"and")}(e,t):sb(e,t):t instanceof qg?sb(t,e):function(e,t){if(rp(e.filters.length>0&&t.filters.length>0,48005),Zg(e)&&Zg(t))return Gg(e,t.getFilters());const i=Bg(e)?e:t,r=Bg(e)?t:e,n=i.filters.map(e=>ob(e,r));return Xg.create(n,"or")}(e,t),ab(i)}function sb(e,t){if(Zg(t))return Gg(t,e.getFilters());{const i=t.filters.map(t=>ob(e,t));return Xg.create(i,"or")}}function ab(e){if(rp(e instanceof qg||e instanceof Xg,11850),e instanceof qg)return e;const t=e.getFilters();if(1===t.length)return ab(t[0]);if(Fg(e))return e;const i=t.map(e=>ab(e)),r=[];return i.forEach(t=>{t instanceof qg?r.push(t):t instanceof Xg&&(t.op===e.op?r.push(...t.filters):r.push(t))}),1===r.length?r[0]:Xg.create(r,e.op)
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class lb{constructor(){this.Dn=new cb}addToCollectionParentIndex(e,t){return this.Dn.add(t),ef.resolve()}getCollectionParents(e,t){return ef.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return ef.resolve()}deleteFieldIndex(e,t){return ef.resolve()}deleteAllFieldIndexes(e){return ef.resolve()}createTargetIndexes(e,t){return ef.resolve()}getDocumentsMatchingTarget(e,t){return ef.resolve(null)}getIndexType(e,t){return ef.resolve(0)}getFieldIndexes(e,t){return ef.resolve([])}getNextCollectionGroupToUpdate(e){return ef.resolve(null)}getMinOffset(e,t){return ef.resolve(Yp.min())}getMinOffsetFromCollectionGroup(e,t){return ef.resolve(Yp.min())}updateCollectionGroup(e,t,i){return ef.resolve()}updateIndexEntries(e,t){return ef.resolve()}}class cb{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new Lm(Cp.comparator),n=!r.has(i);return this.index[t]=r.add(i),n}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Lm(Cp.comparator)).toArray()}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db="IndexedDbIndexManager",hb=new Uint8Array(0);class ub{constructor(e,t){this.databaseId=t,this.vn=new cb,this.Cn=new Pv(e=>lv(e),(e,t)=>cv(e,t)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const i=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.vn.add(t)});const n={collectionId:i,parent:xf(r)};return pb(e).put(n)}return ef.resolve()}getCollectionParents(e,t){const i=[],r=IDBKeyRange.bound([t,""],[Sp(t),""],!1,!0);return pb(e).j(r).next(e=>{for(const r of e){if(r.collectionId!==t)break;i.push(Sf(r.parent))}return i})}addFieldIndex(e,t){const i=mb(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map(e=>[e.fieldPath.canonicalString(),e.kind])}}(t);delete r.indexId;const n=i.add(r);if(t.indexState){const i=gb(e);return n.next(e=>{i.put(Iy(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return n.next()}deleteFieldIndex(e,t){const i=mb(e),r=gb(e),n=fb(e);return i.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>n.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=mb(e),i=fb(e),r=gb(e);return t.Y().next(()=>i.Y()).next(()=>r.Y())}createTargetIndexes(e,t){return ef.forEach(this.Fn(t),t=>this.getIndexType(e,t).next(i=>{if(0===i||1===i){const i=new Ky(t).bn();if(null!=i)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,t){const i=fb(e);let r=!0;const n=new Map;return ef.forEach(this.Fn(t),t=>this.Mn(e,t).next(e=>{r&&(r=!!e),n.set(t,e)})).next(()=>{if(r){let e=zv();const r=[];return ef.forEach(n,(n,o)=>{Hu(db,`Using index ${function(e){return`id=${e.indexId}|cg=${e.collectionGroup}|f=${e.fields.map(e=>`${e.fieldPath}:${e.kind}`).join(",")}`}(n)} to execute ${lv(t)}`);const s=function(e,t){const i=Zp(t);if(void 0===i)return null;for(const t of hv(e,i.fieldPath))switch(t.op){case"array-contains-any":return t.value.arrayValue.values||[];case"array-contains":return[t.value]}return null}(o,n),a=function(e,t){const i=new Map;for(const r of Bp(t))for(const t of hv(e,r.fieldPath))switch(t.op){case"==":case"in":i.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return i.set(r.fieldPath.canonicalString(),t.value),Array.from(i.values())}return null}(o,n),l=function(e,t){const i=[];let r=!0;for(const n of Bp(t)){const t=0===n.kind?uv(e,n.fieldPath,e.startAt):pv(e,n.fieldPath,e.startAt);i.push(t.value),r&&(r=t.inclusive)}return new Mg(i,r)}(o,n),c=function(e,t){const i=[];let r=!0;for(const n of Bp(t)){const t=0===n.kind?pv(e,n.fieldPath,e.endAt):uv(e,n.fieldPath,e.endAt);i.push(t.value),r&&(r=t.inclusive)}return new Mg(i,r)}(o,n),d=this.xn(n,o,l),h=this.xn(n,o,c),u=this.On(n,o,a),p=this.Nn(n.indexId,s,d,l.inclusive,h,c.inclusive,u);return ef.forEach(p,n=>i.H(n,t.limit).next(t=>{t.forEach(t=>{const i=$p.fromSegments(t.documentKey);e.has(i)||(e=e.add(i),r.push(i))})}))}).next(()=>r)}return ef.resolve(null)})}Fn(e){let t=this.Cn.get(e);return t||(t=0===e.filters.length?[e]:eb(Xg.create(e.filters,"and")).map(t=>av(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)),this.Cn.set(e,t),t)}Nn(e,t,i,r,n,o,s){const a=(null!=t?t.length:1)*Math.max(i.length,n.length),l=a/(null!=t?t.length:1),c=[];for(let d=0;d<a;++d){const a=t?this.Bn(t[d/l]):hb,h=this.Ln(e,a,i[d%l],r),u=this.kn(e,a,n[d%l],o),p=s.map(t=>this.Ln(e,a,t,!0));c.push(...this.createRange(h,u,p))}return c}Ln(e,t,i,r){const n=new Fy(e,$p.empty(),t,i);return r?n:n.En()}kn(e,t,i,r){const n=new Fy(e,$p.empty(),t,i);return r?n.En():n}Mn(e,t){const i=new Ky(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(e=>{let t=null;for(const r of e)i.pn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t})}getIndexType(e,t){let i=2;const r=this.Fn(t);return ef.forEach(r,t=>this.Mn(e,t).next(e=>{e?0!==i&&e.fields.length<function(e){let t=new Lm(Ep.comparator),i=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?i=!0:t=t.add(e.field));for(const i of e.orderBy)i.field.isKeyField()||(t=t.add(i.field));return t.size+(i?1:0)}(t)&&(i=1):i=0})).next(()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===i?1:i)}qn(e,t){const i=new jy;for(const r of Bp(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const n=i.hn(r.kind);zy.Ut.bt(e,n)}return i.an()}Bn(e){const t=new jy;return zy.Ut.bt(e,t.hn(0)),t.an()}Qn(e,t){const i=new jy;return zy.Ut.bt(yg(this.databaseId,t),i.hn(function(e){const t=Bp(e);return 0===t.length?0:t[t.length-1].kind}(e))),i.an()}On(e,t,i){if(null===i)return[];let r=[];r.push(new jy);let n=0;for(const o of Bp(e)){const e=i[n++];for(const i of r)if(this.$n(t,o.fieldPath)&&xg(e))r=this.Un(r,o,e);else{const t=i.hn(o.kind);zy.Ut.bt(e,t)}}return this.Kn(r)}xn(e,t,i){return this.On(e,t,i.position)}Kn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].an();return t}Un(e,t,i){const r=[...e],n=[];for(const e of i.arrayValue.values||[])for(const i of r){const r=new jy;r.seed(i.an()),zy.Ut.bt(e,r.hn(t.kind)),n.push(r)}return n}$n(e,t){return!!e.filters.find(e=>e instanceof qg&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op))}getFieldIndexes(e,t){const i=mb(e),r=gb(e);return(t?i.j(sm,IDBKeyRange.bound(t,t)):i.j()).next(e=>{const t=[];return ef.forEach(e,e=>r.get([e.indexId,this.uid]).next(i=>{t.push(function(e,t){const i=t?new Fp(t.sequenceNumber,new Yp(_y(t.readTime),new $p(Sf(t.documentKey)),t.largestBatchId)):Fp.empty(),r=e.fields.map(([e,t])=>new jp(Ep.fromServerFormat(e),t));return new Xp(e.indexId,e.collectionGroup,r,i)}(e,i))})).next(()=>t)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(e=>0===e.length?null:(e.sort((e,t)=>{const i=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==i?i:yp(e.collectionGroup,t.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(e,t,i){const r=mb(e),n=gb(e);return this.Wn(e).next(e=>r.j(sm,IDBKeyRange.bound(t,t)).next(t=>ef.forEach(t,t=>n.put(Iy(t.indexId,this.uid,e,i)))))}updateIndexEntries(e,t){const i=new Map;return ef.forEach(t,(t,r)=>{const n=i.get(t.collectionGroup);return(n?ef.resolve(n):this.getFieldIndexes(e,t.collectionGroup)).next(n=>(i.set(t.collectionGroup,n),ef.forEach(n,i=>this.Gn(e,t,i).next(t=>{const n=this.zn(r,i);return t.isEqual(n)?ef.resolve():this.jn(e,r,i,t,n)}))))})}Jn(e,t,i,r){return fb(e).put(r.An(this.uid,this.Qn(i,t.key),t.key))}Hn(e,t,i,r){return fb(e).delete(r.Rn(this.uid,this.Qn(i,t.key),t.key))}Gn(e,t,i){const r=fb(e);let n=new Lm(Wy);return r.X({index:pm,range:IDBKeyRange.only([i.indexId,this.uid,Gy(this.Qn(i,t))])},(e,r)=>{n=n.add(new Fy(i.indexId,t,Hy(r.arrayValue),Hy(r.directionalValue)))}).next(()=>n)}zn(e,t){let i=new Lm(Wy);const r=this.qn(t,e);if(null==r)return i;const n=Zp(t);if(null!=n){const o=e.data.field(n.fieldPath);if(xg(o))for(const n of o.arrayValue.values||[])i=i.add(new Fy(t.indexId,e.key,this.Bn(n),r))}else i=i.add(new Fy(t.indexId,e.key,hb,r));return i}jn(e,t,i,r,n){Hu(db,"Updating index entries for document '%s'",t.key);const o=[];return function(e,t,i,r,n){const o=e.getIterator(),s=t.getIterator();let a=Vm(o),l=Vm(s);for(;a||l;){let e=!1,t=!1;if(a&&l){const r=i(a,l);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(l),l=Vm(s)):t?(n(a),a=Vm(o)):(a=Vm(o),l=Vm(s))}}(r,n,Wy,r=>{o.push(this.Jn(e,t,i,r))},r=>{o.push(this.Hn(e,t,i,r))}),ef.waitFor(o)}Wn(e){let t=1;return gb(e).X({index:cm,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(e,i,r)=>{r.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((e,t)=>Wy(e,t)).filter((e,t,i)=>!t||0!==Wy(e,i[t-1]));const r=[];r.push(e);for(const n of i){const i=Wy(n,e),o=Wy(n,t);if(0===i)r[0]=e.En();else if(i>0&&o<0)r.push(n),r.push(n.En());else if(o>0)break}r.push(t);const n=[];for(let e=0;e<r.length;e+=2){if(this.Yn(r[e],r[e+1]))return[];const t=r[e].Rn(this.uid,hb,$p.empty()),i=r[e+1].Rn(this.uid,hb,$p.empty());n.push(IDBKeyRange.bound(t,i))}return n}Yn(e,t){return Wy(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(vb)}getMinOffset(e,t){return ef.mapArray(this.Fn(t),t=>this.Mn(e,t).next(e=>e||tp(44426))).next(vb)}}function pb(e){return Am(e,em)}function fb(e){return Am(e,hm)}function mb(e){return Am(e,om)}function gb(e){return Am(e,am)}function vb(e){rp(0!==e.length,28825);let t=e[0].indexState.offset,i=t.largestBatchId;for(let r=1;r<e.length;r++){const n=e[r].indexState.offset;Gp(n,t)<0&&(t=n),i<n.largestBatchId&&(i=n.largestBatchId)}return new Yp(t.readTime,t.documentKey,i)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},yb=41943040;class bb{static withCacheSize(e){return new bb(e,bb.DEFAULT_COLLECTION_PERCENTILE,bb.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xb(e,t,i){const r=e.store(Ef),n=e.store(Mf),o=[],s=IDBKeyRange.only(i.batchId);let a=0;const l=r.X({range:s},(e,t,i)=>(a++,i.delete()));o.push(l.next(()=>{rp(1===a,47070,{batchId:i.batchId})}));const c=[];for(const e of i.mutations){const r=Rf(t,e.key.path,i.batchId);o.push(n.delete(r)),c.push(e.key)}return ef.waitFor(o).next(()=>c)}function wb(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw tp(14731);t=e.noDocument}return JSON.stringify(t).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bb.DEFAULT_COLLECTION_PERCENTILE=10,bb.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bb.DEFAULT=new bb(yb,bb.DEFAULT_COLLECTION_PERCENTILE,bb.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bb.DISABLED=new bb(-1,0,0);class kb{constructor(e,t,i,r){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=r,this.Zn={}}static yt(e,t,i,r){rp(""!==e.uid,64387);const n=e.isAuthenticated()?e.uid:"";return new kb(n,t,i,r)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _b(e).X({index:Af,range:i},(e,i,r)=>{t=!1,r.done()}).next(()=>t)}addMutationBatch(e,t,i,r){const n=Tb(e),o=_b(e);return o.add({}).next(s=>{rp("number"==typeof s,49019);const a=new yO(s,t,i,r),l=function(e,t,i){const r=i.baseMutations.map(t=>oy(e.gt,t)),n=i.mutations.map(t=>oy(e.gt,t));return{userId:t,batchId:i.batchId,localWriteTimeMs:i.localWriteTime.toMillis(),baseMutations:r,mutations:n}}(this.serializer,this.userId,a),c=[];let d=new Lm((e,t)=>yp(e.canonicalString(),t.canonicalString()));for(const e of r){const t=Rf(this.userId,e.key.path,s);d=d.add(e.key.path.popLast()),c.push(o.put(l)),c.push(n.put(t,Df))}return d.forEach(t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(()=>{this.Zn[s]=a.keys()}),ef.waitFor(c).next(()=>a)})}lookupMutationBatch(e,t){return _b(e).get(t).next(e=>e?(rp(e.userId===this.userId,48,"Unexpected user for mutation batch",{userId:e.userId,batchId:t}),Ty(this.serializer,e)):null)}Xn(e,t){return this.Zn[t]?ef.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next(e=>{if(e){const i=e.keys();return this.Zn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=IDBKeyRange.lowerBound([this.userId,i]);let n=null;return _b(e).X({index:Af,range:r},(e,t,r)=>{t.userId===this.userId&&(rp(t.batchId>=i,47524,{er:i}),n=Ty(this.serializer,t)),r.done()}).next(()=>n)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=vf;return _b(e).X({index:Af,range:t,reverse:!0},(e,t,r)=>{i=t.batchId,r.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,vf],[this.userId,Number.POSITIVE_INFINITY]);return _b(e).j(Af,t).next(e=>e.map(e=>Ty(this.serializer,e)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=Qf(this.userId,t.path),r=IDBKeyRange.lowerBound(i),n=[];return Tb(e).X({range:r},(i,r,o)=>{const[s,a,l]=i,c=Sf(a);if(s===this.userId&&t.path.isEqual(c))return _b(e).get(l).next(e=>{if(!e)throw tp(61480,{tr:i,batchId:l});rp(e.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:e.userId,batchId:l}),n.push(Ty(this.serializer,e))});o.done()}).next(()=>n)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Lm(yp);const r=[];return t.forEach(t=>{const n=Qf(this.userId,t.path),o=IDBKeyRange.lowerBound(n),s=Tb(e).X({range:o},(e,r,n)=>{const[o,s,a]=e,l=Sf(s);o===this.userId&&t.path.isEqual(l)?i=i.add(a):n.done()});r.push(s)}),ef.waitFor(r).next(()=>this.nr(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1,n=Qf(this.userId,i),o=IDBKeyRange.lowerBound(n);let s=new Lm(yp);return Tb(e).X({range:o},(e,t,n)=>{const[o,a,l]=e,c=Sf(a);o===this.userId&&i.isPrefixOf(c)?c.length===r&&(s=s.add(l)):n.done()}).next(()=>this.nr(e,s))}nr(e,t){const i=[],r=[];return t.forEach(t=>{r.push(_b(e).get(t).next(e=>{if(null===e)throw tp(35274,{batchId:t});rp(e.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:e.userId,batchId:t}),i.push(Ty(this.serializer,e))}))}),ef.waitFor(r).next(()=>i)}removeMutationBatch(e,t){return xb(e.ce,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.rr(t.batchId)}),ef.forEach(i,t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))}rr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ef.resolve();const i=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return Tb(e).X({range:i},(e,t,i)=>{if(e[0]===this.userId){const t=Sf(e[1]);r.push(t)}else i.done()}).next(()=>{rp(0===r.length,56720,{ir:r.map(e=>e.canonicalString())})})})}containsKey(e,t){return Sb(e,this.userId,t)}sr(e){return Cb(e).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:vf,lastStreamToken:""})}}function Sb(e,t,i){const r=Qf(t,i.path),n=r[1],o=IDBKeyRange.lowerBound(r);let s=!1;return Tb(e).X({range:o,Z:!0},(e,i,r)=>{const[o,a,l]=e;o===t&&a===n&&(s=!0),r.done()}).next(()=>s)}function _b(e){return Am(e,Ef)}function Tb(e){return Am(e,Mf)}function Cb(e){return Am(e,Pf)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Pb(0)}static ur(){return new Pb(-1)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.cr(e).next(t=>{const i=new Pb(t.highestTargetId);return t.highestTargetId=i.next(),this.lr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.cr(e).next(e=>qp.fromTimestamp(new Up(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.cr(e).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.cr(e).next(r=>(r.highestListenSequenceNumber=t,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.lr(e,r)))}addTargetData(e,t){return this.hr(e,t).next(()=>this.cr(e).next(i=>(i.targetCount+=1,this.Pr(t,i),this.lr(e,i))))}updateTargetData(e,t){return this.hr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>$b(e).delete(t.targetId)).next(()=>this.cr(e)).next(t=>(rp(t.targetCount>0,8065),t.targetCount-=1,this.lr(e,t)))}removeTargets(e,t,i){let r=0;const n=[];return $b(e).X((o,s)=>{const a=Cy(s);a.sequenceNumber<=t&&null===i.get(a.targetId)&&(r++,n.push(this.removeTargetData(e,a)))}).next(()=>ef.waitFor(n)).next(()=>r)}forEachTarget(e,t){return $b(e).X((e,i)=>{const r=Cy(i);t(r)})}cr(e){return Ab(e).get(Kf).next(e=>(rp(null!==e,2888),e))}lr(e,t){return Ab(e).put(Kf,t)}hr(e,t){return $b(e).put(Py(this.serializer,t))}Pr(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.cr(e).next(e=>e.targetCount)}getTargetData(e,t){const i=lv(t),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let n=null;return $b(e).X({range:r,index:jf},(e,i,r)=>{const o=Cy(i);cv(t,o.target)&&(n=o,r.done())}).next(()=>n)}addMatchingKeys(e,t,i){const r=[],n=Ib(e);return t.forEach(t=>{const o=xf(t.path);r.push(n.put({targetId:i,path:o})),r.push(this.referenceDelegate.addReference(e,i,t))}),ef.waitFor(r)}removeMatchingKeys(e,t,i){const r=Ib(e);return ef.forEach(t,t=>{const n=xf(t.path);return ef.waitFor([r.delete([i,n]),this.referenceDelegate.removeReference(e,i,t)])})}removeMatchingKeysForTargetId(e,t){const i=Ib(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),r=Ib(e);let n=zv();return r.X({range:i,Z:!0},(e,t,i)=>{const r=Sf(e[1]),o=new $p(r);n=n.add(o)}).next(()=>n)}containsKey(e,t){const i=xf(t.path),r=IDBKeyRange.bound([i],[Sp(i)],!1,!0);let n=0;return Ib(e).X({index:Gf,Z:!0,range:r},([e,t],i,r)=>{0!==e&&(n++,r.done())}).next(()=>n>0)}Et(e,t){return $b(e).get(t).next(e=>e?Cy(e):null)}}function $b(e){return Am(e,Bf)}function Ab(e){return Am(e,Jf)}function Ib(e){return Am(e,Wf)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb="LruGarbageCollector";function Rb([e,t],[i,r]){const n=yp(e,i);return 0===n?yp(t,r):n}class Db{constructor(e){this.Tr=e,this.buffer=new Lm(Rb),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Rb(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Mb{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Ar=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return null!==this.Ar}Rr(e){Hu(Qb,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){lf(e)?Hu(Qb,"Ignoring IndexedDB error during garbage collection: ",e):await Jp(e)}await this.Rr(3e5)})}}class Nb{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return ef.resolve(gf.ue);const i=new Db(t);return this.Vr.forEachTarget(e,e=>i.Er(e.sequenceNumber)).next(()=>this.Vr.gr(e,e=>i.Er(e))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Hu("LruGarbageCollector","Garbage collection skipped; disabled"),ef.resolve(Ob)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Hu("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ob):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let i,r,n,o,s,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(Hu("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(i=r,s=Date.now(),this.removeTargets(e,i,t))).next(t=>(n=t,a=Date.now(),this.removeOrphanedDocuments(e,i))).next(e=>(l=Date.now(),Gu()<=To.DEBUG&&Hu("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-c}ms\n\tDetermined least recently used ${r} in `+(s-o)+"ms\n"+`\tRemoved ${n} targets in `+(a-s)+"ms\n"+`\tRemoved ${e} documents in `+(l-a)+"ms\n"+`Total Duration: ${l-c}ms`),ef.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:n,documentsRemoved:e})))}}function Lb(e,t){return new Nb(e,t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(e,t){this.db=e,this.garbageCollector=Lb(this,t)}mr(e){const t=this.yr(e);return this.db.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}yr(e){let t=0;return this.gr(e,e=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}gr(e,t){return this.wr(e,(e,i)=>t(i))}addReference(e,t,i){return Vb(e,i)}removeReference(e,t,i){return Vb(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return Vb(e,t)}Sr(e,t){return function(e,t){let i=!1;return Cb(e).ee(r=>Sb(e,r,t).next(e=>(e&&(i=!0),ef.resolve(!e)))).next(()=>i)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let n=0;return this.wr(e,(o,s)=>{if(s<=t){const t=this.Sr(e,o).next(t=>{if(!t)return n++,i.getEntry(e,o).next(()=>(i.removeEntry(o,qp.min()),Ib(e).delete(function(e){return[0,xf(e.path)]}(o))))});r.push(t)}}).next(()=>ef.waitFor(r)).next(()=>i.apply(e)).next(()=>n)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return Vb(e,t)}wr(e,t){const i=Ib(e);let r,n=gf.ue;return i.X({index:Gf},([e,i],{path:o,sequenceNumber:s})=>{0===e?(n!==gf.ue&&t(new $p(Sf(r)),n),n=s,r=o):n=gf.ue}).next(()=>{n!==gf.ue&&t(new $p(Sf(r)),n)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Vb(e,t){return Ib(e).put(function(e,t){return{targetId:0,path:xf(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(){this.changes=new Pv(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Dg.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return void 0!==i?ef.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return jb(e).put(i)}removeEntry(e,t,i){return jb(e).delete(function(e,t){const i=e.path.toArray();return[i.slice(0,i.length-2),i[i.length-2],ky(t),i[i.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.br(e,i)))}getEntry(e,t){let i=Dg.newInvalidDocument(t);return jb(e).X({index:zf,range:IDBKeyRange.only(Fb(t))},(e,r)=>{i=this.Dr(t,r)}).next(()=>i)}vr(e,t){let i={size:0,document:Dg.newInvalidDocument(t)};return jb(e).X({index:zf,range:IDBKeyRange.only(Fb(t))},(e,r)=>{i={document:this.Dr(t,r),size:wb(r)}}).next(()=>i)}getEntries(e,t){let i=$v();return this.Cr(e,t,(e,t)=>{const r=this.Dr(e,t);i=i.insert(e,r)}).next(()=>i)}Fr(e,t){let i=$v(),r=new Dm($p.comparator);return this.Cr(e,t,(e,t)=>{const n=this.Dr(e,t);i=i.insert(e,n),r=r.insert(e,wb(t))}).next(()=>({documents:i,Mr:r}))}Cr(e,t,i){if(t.isEmpty())return ef.resolve();let r=new Lm(Yb);t.forEach(e=>r=r.add(e));const n=IDBKeyRange.bound(Fb(r.first()),Fb(r.last())),o=r.getIterator();let s=o.getNext();return jb(e).X({index:zf,range:n},(e,t,r)=>{const n=$p.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;s&&Yb(s,n)<0;)i(s,null),s=o.getNext();s&&s.isEqual(n)&&(i(s,t),s=o.hasNext()?o.getNext():null),s?r.G(Fb(s)):r.done()}).next(()=>{for(;s;)i(s,null),s=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,i,r,n){const o=t.path,s=[o.popLast().toArray(),o.lastSegment(),ky(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],a=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return jb(e).j(IDBKeyRange.bound(s,a,!0)).next(e=>{null==n||n.incrementDocumentReadCount(e.length);let i=$v();for(const n of e){const e=this.Dr($p.fromSegments(n.prefixPath.concat(n.collectionGroup,n.documentId)),n);e.isFoundDocument()&&(_v(t,e)||r.has(e.key))&&(i=i.insert(e.key,e))}return i})}getAllFromCollectionGroup(e,t,i,r){let n=$v();const o=Wb(t,i),s=Wb(t,Yp.max());return jb(e).X({index:Uf,range:IDBKeyRange.bound(o,s,!0)},(e,t,i)=>{const o=this.Dr($p.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);n=n.insert(o.key,o),n.size===r&&i.done()}).next(()=>n)}newChangeBuffer(e){return new Zb(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(e=>e.byteSize)}getMetadata(e){return Bb(e).get(Zf).next(e=>(rp(!!e,20021),e))}br(e,t){return Bb(e).put(Zf,t)}Dr(e,t){if(t){const e=xy(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(qp.min()))return e}return Dg.newInvalidDocument(e)}}function Xb(e){return new qb(e)}class Zb extends Ub{constructor(e,t){super(),this.Or=e,this.trackRemovals=t,this.Nr=new Pv(e=>e.toString(),(e,t)=>e.isEqual(t))}applyChanges(e){const t=[];let i=0,r=new Lm((e,t)=>yp(e.canonicalString(),t.canonicalString()));return this.changes.forEach((n,o)=>{const s=this.Nr.get(n);if(t.push(this.Or.removeEntry(e,n,s.readTime)),o.isValidDocument()){const a=wy(this.Or.serializer,o);r=r.add(n.path.popLast());const l=wb(a);i+=l-s.size,t.push(this.Or.addEntry(e,n,a))}else if(i-=s.size,this.trackRemovals){const i=wy(this.Or.serializer,o.convertToNoDocument(qp.min()));t.push(this.Or.addEntry(e,n,i))}}),r.forEach(i=>{t.push(this.Or.indexManager.addToCollectionParentIndex(e,i))}),t.push(this.Or.updateMetadata(e,i)),ef.waitFor(t)}getFromCache(e,t){return this.Or.vr(e,t).next(e=>(this.Nr.set(t,{size:e.size,readTime:e.document.readTime}),e.document))}getAllFromCache(e,t){return this.Or.Fr(e,t).next(({documents:e,Mr:t})=>(t.forEach((t,i)=>{this.Nr.set(t,{size:i,readTime:e.get(t).readTime})}),e))}}function Bb(e){return Am(e,Xf)}function jb(e){return Am(e,Nf)}function Fb(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Wb(e,t){const i=t.documentKey.path.toArray();return[e,ky(t.readTime),i.slice(0,i.length-2),i.length>0?i[i.length-1]:""]}function Yb(e,t){const i=e.path.toArray(),r=t.path.toArray();let n=0;for(let e=0;e<i.length-2&&e<r.length-2;++e)if(n=yp(i[e],r[e]),n)return n;return n=yp(i.length,r.length),n||(n=yp(i[i.length-2],r[r.length-2]),n||yp(i[i.length-1],r[r.length-1])
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)}class Gb{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==i&&cO(i.mutation,e,Um.empty(),Up.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,zv()).next(()=>t))}getLocalViewOfDocuments(e,t,i=zv()){const r=Rv();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(e=>{let t=Iv();return e.forEach((e,i)=>{t=t.insert(e,i.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const i=Rv();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,zv()))}populateOverlays(e,t,i){const r=[];return i.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,i)=>{t.set(e,i)})})}computeViews(e,t,i,r){let n=$v();const o=Mv(),s=Mv();return t.forEach((e,t)=>{const s=i.get(t.key);r.has(t.key)&&(void 0===s||s.mutation instanceof pO)?n=n.insert(t.key,t):void 0!==s?(o.set(t.key,s.mutation.getFieldMask()),cO(s.mutation,t,s.mutation.getFieldMask(),Up.now())):o.set(t.key,Um.empty())}),this.recalculateAndSaveOverlays(e,n).next(e=>(e.forEach((e,t)=>o.set(e,t)),t.forEach((e,t)=>{var i;return s.set(e,new Gb(t,null!==(i=o.get(e))&&void 0!==i?i:null))}),s))}recalculateAndSaveOverlays(e,t){const i=Mv();let r=new Dm((e,t)=>e-t),n=zv();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const n of e)n.keys().forEach(e=>{const o=t.get(e);if(null===o)return;let s=i.get(e)||Um.empty();s=n.applyToLocalView(o,s),i.set(e,s);const a=(r.get(n.batchId)||zv()).add(e);r=r.insert(n.batchId,a)})}).next(()=>{const o=[],s=r.getReverseIterator();for(;s.hasNext();){const r=s.getNext(),a=r.key,l=r.value,c=Dv();l.forEach(e=>{if(!n.has(e)){const r=aO(t.get(e),i.get(e));null!==r&&c.set(e,r),n=n.add(e)}}),o.push(this.documentOverlayCache.saveOverlays(e,a,c))}return ef.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,i,r){return function(e){return $p.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):vv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(n=>{const o=r-n.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-n.size):ef.resolve(Rv());let s=-1,a=n;return o.next(t=>ef.forEach(t,(t,i)=>(s<i.largestBatchId&&(s=i.largestBatchId),n.get(t)?ef.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,n)).next(()=>this.computeViews(e,a,t,zv())).next(e=>({batchId:s,changes:Qv(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $p(t)).next(e=>{let t=Iv();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){const n=t.collectionGroup;let o=Iv();return this.indexManager.getCollectionParents(e,n).next(s=>ef.forEach(s,s=>{const a=function(e,t){return new fv(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(n));return this.getDocumentsMatchingCollectionQuery(e,a,i,r).next(e=>{e.forEach((e,t)=>{o=o.insert(e,t)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,i,r){let n;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(o=>(n=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,n,r))).next(e=>{n.forEach((t,i)=>{const r=i.getKey();null===e.get(r)&&(e=e.insert(r,Dg.newInvalidDocument(r)))});let i=Iv();return e.forEach((e,r)=>{const o=n.get(e);void 0!==o&&cO(o.mutation,r,Um.empty(),Up.now()),_v(t,r)&&(i=i.insert(e,r))}),i})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return ef.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(e){return{id:e.id,version:e.version,createTime:WO(e.createTime)}}(t)),ef.resolve()}getNamedQuery(e,t){return ef.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(e){return{name:e.name,query:Ey(e.bundledQuery),readTime:WO(e.readTime)}}(t)),ef.resolve()}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(){this.overlays=new Dm($p.comparator),this.kr=new Map}getOverlay(e,t){return ef.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Rv();return ef.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&i.set(t,e)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((i,r)=>{this.wt(e,t,r)}),ef.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.kr.get(i);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.kr.delete(i)),ef.resolve()}getOverlaysForCollection(e,t,i){const r=Rv(),n=t.length+1,o=new $p(t.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const e=s.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===n&&e.largestBatchId>i&&r.set(e.getKey(),e)}return ef.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let n=new Dm((e,t)=>e-t);const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>i){let t=n.get(e.largestBatchId);null===t&&(t=Rv(),n=n.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const s=Rv(),a=n.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>s.set(e,t)),!(s.size()>=r)););return ef.resolve(s)}wt(e,t,i){const r=this.overlays.get(i.key);if(null!==r){const e=this.kr.get(r.largestBatchId).delete(i.key);this.kr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(i.key,new xO(t,i));let n=this.kr.get(t);void 0===n&&(n=zv(),this.kr.set(t,n)),this.kr.set(t,n.add(i.key))}}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(){this.sessionToken=Xm.EMPTY_BYTE_STRING}getSessionToken(e){return ef.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ef.resolve()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(){this.qr=new Lm(ix.Qr),this.$r=new Lm(ix.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const i=new ix(e,t);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Wr(new ix(e,t))}Gr(e,t){e.forEach(e=>this.removeReference(e,t))}zr(e){const t=new $p(new Cp([])),i=new ix(t,e),r=new ix(t,e+1),n=[];return this.$r.forEachInRange([i,r],e=>{this.Wr(e),n.push(e.key)}),n}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new $p(new Cp([])),i=new ix(t,e),r=new ix(t,e+1);let n=zv();return this.$r.forEachInRange([i,r],e=>{n=n.add(e.key)}),n}containsKey(e){const t=new ix(e,0),i=this.qr.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class ix{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return $p.comparator(e.key,t.key)||yp(e.Hr,t.Hr)}static Ur(e,t){return yp(e.Hr,t.Hr)||$p.comparator(e.key,t.key)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Lm(ix.Qr)}checkEmpty(e){return ef.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,i,r){const n=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new yO(n,t,i,r);this.mutationQueue.push(o);for(const t of r)this.Yr=this.Yr.add(new ix(t.key,n)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return ef.resolve(o)}lookupMutationBatch(e,t){return ef.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=this.Xr(i),n=r<0?0:r;return ef.resolve(this.mutationQueue.length>n?this.mutationQueue[n]:null)}getHighestUnacknowledgedBatchId(){return ef.resolve(0===this.mutationQueue.length?vf:this.er-1)}getAllMutationBatches(e){return ef.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new ix(t,0),r=new ix(t,Number.POSITIVE_INFINITY),n=[];return this.Yr.forEachInRange([i,r],e=>{const t=this.Zr(e.Hr);n.push(t)}),ef.resolve(n)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Lm(yp);return t.forEach(e=>{const t=new ix(e,0),r=new ix(e,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([t,r],e=>{i=i.add(e.Hr)})}),ef.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let n=i;$p.isDocumentKey(n)||(n=n.child(""));const o=new ix(new $p(n),0);let s=new Lm(yp);return this.Yr.forEachWhile(e=>{const t=e.key.path;return!!i.isPrefixOf(t)&&(t.length===r&&(s=s.add(e.Hr)),!0)},o),ef.resolve(this.ei(s))}ei(e){const t=[];return e.forEach(e=>{const i=this.Zr(e);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){rp(0===this.ti(t.batchId,"removed"),55003),this.mutationQueue.shift();let i=this.Yr;return ef.forEach(t.mutations,r=>{const n=new ix(r.key,t.batchId);return i=i.delete(n),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Yr=i})}rr(e){}containsKey(e,t){const i=new ix(t,0),r=this.Yr.firstAfterOrEqual(i);return ef.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ef.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e){this.ni=e,this.docs=new Dm($p.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),n=r?r.size:0,o=this.ni(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-n,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ef.resolve(i?i.document.mutableCopy():Dg.newInvalidDocument(t))}getEntries(e,t){let i=$v();return t.forEach(e=>{const t=this.docs.get(e);i=i.insert(e,t?t.document.mutableCopy():Dg.newInvalidDocument(e))}),ef.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let n=$v();const o=t.path,s=new $p(o.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(s);for(;a.hasNext();){const{key:e,value:{document:s}}=a.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||Gp(Wp(s),i)<=0||(r.has(s.key)||_v(t,s))&&(n=n.insert(s.key,s.mutableCopy()))}return ef.resolve(n)}getAllFromCollectionGroup(e,t,i,r){tp(9500)}ri(e,t){return ef.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new ox(this)}getSize(e){return ef.resolve(this.size)}}class ox extends Ub{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.Or.addEntry(e,r)):this.Or.removeEntry(i)}),ef.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e){this.persistence=e,this.ii=new Pv(e=>lv(e),cv),this.lastRemoteSnapshotVersion=qp.min(),this.highestTargetId=0,this.si=0,this.oi=new tx,this.targetCount=0,this._i=Pb.ar()}forEachTarget(e,t){return this.ii.forEach((e,i)=>t(i)),ef.resolve()}getLastRemoteSnapshotVersion(e){return ef.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ef.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),ef.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.si&&(this.si=t),ef.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Pb(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,ef.resolve()}updateTargetData(e,t){return this.hr(t),ef.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,ef.resolve()}removeTargets(e,t,i){let r=0;const n=[];return this.ii.forEach((o,s)=>{s.sequenceNumber<=t&&null===i.get(s.targetId)&&(this.ii.delete(o),n.push(this.removeMatchingKeysForTargetId(e,s.targetId)),r++)}),ef.waitFor(n).next(()=>r)}getTargetCount(e){return ef.resolve(this.targetCount)}getTargetData(e,t){const i=this.ii.get(t)||null;return ef.resolve(i)}addMatchingKeys(e,t,i){return this.oi.Kr(t,i),ef.resolve()}removeMatchingKeys(e,t,i){this.oi.Gr(t,i);const r=this.persistence.referenceDelegate,n=[];return r&&t.forEach(t=>{n.push(r.markPotentiallyOrphaned(e,t))}),ef.waitFor(n)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),ef.resolve()}getMatchingKeysForTargetId(e,t){const i=this.oi.Jr(t);return ef.resolve(i)}containsKey(e,t){return ef.resolve(this.oi.containsKey(t))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e,t){this.ai={},this.overlays={},this.ui=new gf(0),this.ci=!1,this.ci=!0,this.li=new ex,this.referenceDelegate=e(this),this.hi=new sx(this),this.indexManager=new lb,this.remoteDocumentCache=function(e){return new nx(e)}(e=>this.referenceDelegate.Pi(e)),this.serializer=new by(t),this.Ti=new Kb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Jb,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ai[e.toKey()];return i||(i=new rx(t,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,i){Hu("MemoryPersistence","Starting transaction:",e);const r=new lx(this.ui.next());return this.referenceDelegate.Ii(),i(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ei(e,t){return ef.or(Object.values(this.ai).map(i=>()=>i.containsKey(e,t)))}}class lx extends Kp{constructor(e){super(),this.currentSequenceNumber=e}}class cx{constructor(e){this.persistence=e,this.Ai=new tx,this.Ri=null}static Vi(e){return new cx(e)}get mi(){if(this.Ri)return this.Ri;throw tp(60996)}addReference(e,t,i){return this.Ai.addReference(i,t),this.mi.delete(i.toString()),ef.resolve()}removeReference(e,t,i){return this.Ai.removeReference(i,t),this.mi.add(i.toString()),ef.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),ef.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(e=>this.mi.add(e.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.mi.add(e.toString()))}).next(()=>i.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ef.forEach(this.mi,i=>{const r=$p.fromPath(i);return this.fi(e,r).next(e=>{e||t.removeEntry(r,qp.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(e=>{e?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return ef.or([()=>ef.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class dx{constructor(e,t){this.persistence=e,this.gi=new Pv(e=>xf(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=Lb(this,t)}static Vi(e,t){return new dx(e,t)}Ii(){}di(e){return ef.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}yr(e){let t=0;return this.gr(e,e=>{t++}).next(()=>t)}gr(e,t){return ef.forEach(this.gi,(i,r)=>this.Sr(e,i,r).next(e=>e?ef.resolve():t(r)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const r=this.persistence.getRemoteDocumentCache(),n=r.newChangeBuffer();return r.ri(e,r=>this.Sr(e,r,t).next(e=>{e||(i++,n.removeEntry(r,qp.min()))})).next(()=>n.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),ef.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),ef.resolve()}removeReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),ef.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),ef.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Og(e.data.value)),t}Sr(e,t,i){return ef.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.gi.get(t);return ef.resolve(void 0!==e&&e>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e){this.serializer=e}q(e,t,i,r){const n=new rf("createOrUpgrade",t);i<1&&r>=1&&(function(e){e.createObjectStore(Tf)}(e),function(e){e.createObjectStore(Pf,{keyPath:"userId"});e.createObjectStore(Ef,{keyPath:$f,autoIncrement:!0}).createIndex(Af,If,{unique:!0}),e.createObjectStore(Mf)}(e),ux(e),function(e){e.createObjectStore(_f)}(e));let o=ef.resolve();return i<3&&r>=3&&(0!==i&&(function(e){e.deleteObjectStore(Wf),e.deleteObjectStore(Bf),e.deleteObjectStore(Jf)}(e),ux(e)),o=o.next(()=>function(e){const t=e.store(Jf),i={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:qp.min().toTimestamp(),targetCount:0};return t.put(Kf,i)}(n))),i<4&&r>=4&&(0!==i&&(o=o.next(()=>function(e,t){return t.store(Ef).j().next(i=>{e.deleteObjectStore(Ef),e.createObjectStore(Ef,{keyPath:$f,autoIncrement:!0}).createIndex(Af,If,{unique:!0});const r=t.store(Ef),n=i.map(e=>r.put(e));return ef.waitFor(n)})}(e,n))),o=o.next(()=>{!function(e){e.createObjectStore(im,{keyPath:"clientId"})}(e)})),i<5&&r>=5&&(o=o.next(()=>this.pi(n))),i<6&&r>=6&&(o=o.next(()=>(function(e){e.createObjectStore(Xf)}(e),this.yi(n)))),i<7&&r>=7&&(o=o.next(()=>this.wi(n))),i<8&&r>=8&&(o=o.next(()=>this.Si(e,n))),i<9&&r>=9&&(o=o.next(()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)})),i<10&&r>=10&&(o=o.next(()=>this.bi(n))),i<11&&r>=11&&(o=o.next(()=>{!function(e){e.createObjectStore(rm,{keyPath:"bundleId"})}(e),function(e){e.createObjectStore(nm,{keyPath:"name"})}(e)})),i<12&&r>=12&&(o=o.next(()=>{!function(e){const t=e.createObjectStore(mm,{keyPath:gm});t.createIndex(vm,Om,{unique:!1}),t.createIndex(ym,bm,{unique:!1})}(e)})),i<13&&r>=13&&(o=o.next(()=>function(e){const t=e.createObjectStore(Nf,{keyPath:Lf});t.createIndex(zf,Vf),t.createIndex(Uf,qf)}(e)).next(()=>this.Di(e,n)).next(()=>e.deleteObjectStore(_f))),i<14&&r>=14&&(o=o.next(()=>this.Ci(e,n))),i<15&&r>=15&&(o=o.next(()=>function(e){e.createObjectStore(om,{keyPath:"indexId",autoIncrement:!0}).createIndex(sm,"collectionGroup",{unique:!1});e.createObjectStore(am,{keyPath:lm}).createIndex(cm,dm,{unique:!1});e.createObjectStore(hm,{keyPath:um}).createIndex(pm,fm,{unique:!1})}(e))),i<16&&r>=16&&(o=o.next(()=>{t.objectStore(am).clear()}).next(()=>{t.objectStore(hm).clear()})),i<17&&r>=17&&(o=o.next(()=>{!function(e){e.createObjectStore(xm,{keyPath:"name"})}(e)})),i<18&&r>=18&&ao()&&(o=o.next(()=>{t.objectStore(am).clear()}).next(()=>{t.objectStore(hm).clear()})),o}yi(e){let t=0;return e.store(_f).X((e,i)=>{t+=wb(i)}).next(()=>{const i={byteSize:t};return e.store(Xf).put(Zf,i)})}pi(e){const t=e.store(Pf),i=e.store(Ef);return t.j().next(t=>ef.forEach(t,t=>{const r=IDBKeyRange.bound([t.userId,vf],[t.userId,t.lastAcknowledgedBatchId]);return i.j(Af,r).next(i=>ef.forEach(i,i=>{rp(i.userId===t.userId,18650,"Cannot process batch from unexpected user",{batchId:i.batchId});const r=Ty(this.serializer,i);return xb(e,t.userId,r).next(()=>{})}))}))}wi(e){const t=e.store(Wf),i=e.store(_f);return e.store(Jf).get(Kf).next(e=>{const r=[];return i.X((i,n)=>{const o=new Cp(i),s=function(e){return[0,xf(e)]}(o);r.push(t.get(s).next(i=>i?ef.resolve():(i=>t.put({targetId:0,path:xf(i),sequenceNumber:e.highestListenSequenceNumber}))(o)))}).next(()=>ef.waitFor(r))})}Si(e,t){e.createObjectStore(em,{keyPath:tm});const i=t.store(em),r=new cb,n=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return i.put({collectionId:t,parent:xf(r)})}};return t.store(_f).X({Z:!0},(e,t)=>{const i=new Cp(e);return n(i.popLast())}).next(()=>t.store(Mf).X({Z:!0},([e,t,i],r)=>{const o=Sf(t);return n(o.popLast())}))}bi(e){const t=e.store(Bf);return t.X((e,i)=>{const r=Cy(i),n=Py(this.serializer,r);return t.put(n)})}Di(e,t){const i=t.store(_f),r=[];return i.X((e,i)=>{const n=t.store(Nf),o=function(e){return e.document?new $p(Cp.fromString(e.document.name).popFirst(5)):e.noDocument?$p.fromSegments(e.noDocument.path):e.unknownDocument?$p.fromSegments(e.unknownDocument.path):tp(36783)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(i).path.toArray(),s={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:i.readTime||[0,0],unknownDocument:i.unknownDocument,noDocument:i.noDocument,document:i.document,hasCommittedMutations:!!i.hasCommittedMutations};r.push(n.put(s))}).next(()=>ef.waitFor(r))}Ci(e,t){const i=t.store(Ef),r=Xb(this.serializer),n=new ax(cx.Vi,this.serializer.gt);return i.j().next(e=>{const i=new Map;return e.forEach(e=>{var t;let r=null!==(t=i.get(e.userId))&&void 0!==t?t:zv();Ty(this.serializer,e).keys().forEach(e=>r=r.add(e)),i.set(e.userId,r)}),ef.forEach(i,(e,i)=>{const o=new Fu(i),s=My.yt(this.serializer,o),a=n.getIndexManager(o),l=kb.yt(o,this.serializer,a,n.referenceDelegate);return new Hb(r,l,s,a).recalculateAndSaveOverlaysForDocumentKeys(new $m(t,gf.ue),e).next()})})}}function ux(e){e.createObjectStore(Wf,{keyPath:Yf}).createIndex(Gf,Hf,{unique:!0}),e.createObjectStore(Bf,{keyPath:"targetId"}).createIndex(jf,Ff,{unique:!0}),e.createObjectStore(Jf)}const px="IndexedDbPersistence",fx=18e5,mx=5e3,gx="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class vx{constructor(e,t,i,r,n,o,s,a,l,c,d=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Fi=n,this.window=o,this.document=s,this.Mi=l,this.xi=c,this.Oi=d,this.ui=null,this.ci=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ni=null,this.inForeground=!1,this.Bi=null,this.Li=null,this.ki=Number.NEGATIVE_INFINITY,this.qi=e=>Promise.resolve(),!vx.C())throw new sp(op.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new zb(this,r),this.Qi=t+"main",this.serializer=new by(a),this.$i=new nf(this.Qi,this.Oi,new hx(this.serializer)),this.li=new Ly,this.hi=new Eb(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Xb(this.serializer),this.Ti=new Qy,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,!1===c&&Ku(px,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ki().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new sp(op.FAILED_PRECONDITION,gx);return this.Wi(),this.Gi(),this.zi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.hi.getHighestSequenceNumber(e))}).then(e=>{this.ui=new gf(e,this.Mi)}).then(()=>{this.ci=!0}).catch(e=>(this.$i&&this.$i.close(),Promise.reject(e)))}ji(e){return this.qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.$i.setDatabaseDeletedListener(e)}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Fi.enqueueAndForget(async()=>{this.started&&await this.Ki()}))}Ki(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>yx(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ji(e).next(e=>{e||(this.isPrimary=!1,this.Fi.enqueueRetryable(()=>this.qi(!1)))})}).next(()=>this.Hi(e)).next(t=>this.isPrimary&&!t?this.Yi(e).next(()=>!1):!!t&&this.Zi(e).next(()=>!0))).catch(e=>{if(lf(e))return Hu(px,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Hu(px,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Fi.enqueueRetryable(()=>this.qi(e)),this.isPrimary=e})}Ji(e){return Ox(e).get(Cf).next(e=>ef.resolve(this.Xi(e)))}es(e){return yx(e).delete(this.clientId)}async ts(){if(this.isPrimary&&!this.ns(this.ki,fx)){this.ki=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{const t=Am(e,im);return t.j().next(e=>{const i=this.rs(e,fx),r=e.filter(e=>-1===i.indexOf(e));return ef.forEach(r,e=>t.delete(e.clientId)).next(()=>r)})}).catch(()=>[]);if(this.Ui)for(const t of e)this.Ui.removeItem(this.ss(t.clientId))}}zi(){this.Li=this.Fi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ki().then(()=>this.ts()).then(()=>this.zi()))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.xi?ef.resolve(!0):Ox(e).get(Cf).next(t=>{if(null!==t&&this.ns(t.leaseTimestampMs,mx)&&!this._s(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new sp(op.FAILED_PRECONDITION,gx);return!1}}return!(!this.networkEnabled||!this.inForeground)||yx(e).j().next(e=>void 0===this.rs(e,mx).find(e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,i=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||i&&r)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&Hu(px,`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}async shutdown(){this.ci=!1,this.us(),this.Li&&(this.Li.cancel(),this.Li=null),this.cs(),this.ls(),await this.$i.runTransaction("shutdown","readwrite",[Tf,im],e=>{const t=new $m(e,gf.ue);return this.Yi(t).next(()=>this.es(t))}),this.$i.close(),this.hs()}rs(e,t){return e.filter(e=>this.ns(e.updateTimeMs,t)&&!this._s(e.clientId))}Ps(){return this.runTransaction("getActiveClients","readonly",e=>yx(e).j().next(e=>this.rs(e,fx).map(e=>e.clientId)))}get started(){return this.ci}getGlobalsCache(){return this.li}getMutationQueue(e,t){return kb.yt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new ub(e,this.serializer.gt.databaseId)}getDocumentOverlayCache(e){return My.yt(this.serializer,e)}getBundleCache(){return this.Ti}runTransaction(e,t,i){Hu(px,"Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",n=function(e){return 18===e?Em:17===e?Pm:16===e?Cm:15===e?Tm:14===e?_m:13===e?Sm:12===e?km:11===e?wm:void tp(60245)}(this.Oi);let o;return this.$i.runTransaction(e,r,n,r=>(o=new $m(r,this.ui?this.ui.next():gf.ue),"readwrite-primary"===t?this.Ji(o).next(e=>!!e||this.Hi(o)).next(t=>{if(!t)throw Ku(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Fi.enqueueRetryable(()=>this.qi(!1)),new sp(op.FAILED_PRECONDITION,Hp);return i(o)}).next(e=>this.Zi(o).next(()=>e)):this.Ts(o).next(()=>i(o)))).then(e=>(o.raiseOnCommittedEvent(),e))}Ts(e){return Ox(e).get(Cf).next(e=>{if(null!==e&&this.ns(e.leaseTimestampMs,mx)&&!this._s(e.ownerId)&&!this.Xi(e)&&!(this.xi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new sp(op.FAILED_PRECONDITION,gx)})}Zi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ox(e).put(Cf,t)}static C(){return nf.C()}Yi(e){const t=Ox(e);return t.get(Cf).next(e=>this.Xi(e)?(Hu(px,"Releasing primary lease."),t.delete(Cf)):ef.resolve())}ns(e,t){const i=Date.now();return!(e<i-t||e>i&&(Ku(`Detected an update time that is in the future: ${e} > ${i}`),1))}Wi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Bi=()=>{this.Fi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ki()))},this.document.addEventListener("visibilitychange",this.Bi),this.inForeground="visible"===this.document.visibilityState)}cs(){this.Bi&&(this.document.removeEventListener("visibilitychange",this.Bi),this.Bi=null)}Gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Ni=()=>{this.us();const e=/(?:Version|Mobile)\/1[456]/;so()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Fi.enterRestrictedMode(!0),this.Fi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ni))}ls(){this.Ni&&(this.window.removeEventListener("pagehide",this.Ni),this.Ni=null)}_s(e){var t;try{const i=null!==(null===(t=this.Ui)||void 0===t?void 0:t.getItem(this.ss(e)));return Hu(px,`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(e){return Ku(px,"Failed to get zombied client id.",e),!1}}us(){if(this.Ui)try{this.Ui.setItem(this.ss(this.clientId),String(Date.now()))}catch(e){Ku("Failed to set zombie client id.",e)}}hs(){if(this.Ui)try{this.Ui.removeItem(this.ss(this.clientId))}catch(e){}}ss(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ox(e){return Am(e,Tf)}function yx(e){return Am(e,im)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class bx{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Is=i,this.ds=r}static Es(e,t){let i=zv(),r=zv();for(const e of t.docChanges)switch(e.type){case 0:i=i.add(e.doc.key);break;case 1:r=r.add(e.doc.key)}return new bx(e,t.fromCache,i,r)}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=so()?8:of(no())>0?6:4}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,i,r){const n={result:null};return this.ps(e,t).next(e=>{n.result=e}).next(()=>{if(!n.result)return this.ys(e,t,r,i).next(e=>{n.result=e})}).next(()=>{if(n.result)return;const i=new xx;return this.ws(e,t,i).next(r=>{if(n.result=r,this.Rs)return this.Ss(e,t,i,r.size)})}).next(()=>n.result)}Ss(e,t,i,r){return i.documentReadCount<this.Vs?(Gu()<=To.DEBUG&&Hu("QueryEngine","SDK will not create cache indexes for query:",Sv(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ef.resolve()):(Gu()<=To.DEBUG&&Hu("QueryEngine","Query:",Sv(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.fs*r?(Gu()<=To.DEBUG&&Hu("QueryEngine","The SDK decides to create cache indexes for query:",Sv(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yv(t))):ef.resolve())}ps(e,t){if(gv(t))return ef.resolve(null);let i=yv(t);return this.indexManager.getIndexType(e,i).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=xv(t,null,"F"),i=yv(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(r=>{const n=zv(...r);return this.gs.getDocuments(e,n).next(r=>this.indexManager.getMinOffset(e,i).next(i=>{const o=this.bs(t,r);return this.Ds(t,o,n,i.readTime)?this.ps(e,xv(t,null,"F")):this.vs(e,o,t,i)}))})))}ys(e,t,i,r){return gv(t)||r.isEqual(qp.min())?ef.resolve(null):this.gs.getDocuments(e,i).next(n=>{const o=this.bs(t,n);return this.Ds(t,o,i,r)?ef.resolve(null):(Gu()<=To.DEBUG&&Hu("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Sv(t)),this.vs(e,o,t,function(e,t){const i=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,n=qp.fromTimestamp(1e9===r?new Up(i+1,0):new Up(i,r));return new Yp(n,$p.empty(),t)}(r,-1)).next(e=>e))})}bs(e,t){let i=new Lm(Tv(e));return t.forEach((t,r)=>{_v(e,r)&&(i=i.add(r))}),i}Ds(e,t,i,r){if(null===e.limit)return!1;if(i.size!==t.size)return!0;const n="F"===e.limitType?t.last():t.first();return!!n&&(n.hasPendingWrites||n.version.compareTo(r)>0)}ws(e,t,i){return Gu()<=To.DEBUG&&Hu("QueryEngine","Using full collection scan to execute query:",Sv(t)),this.gs.getDocumentsMatchingQuery(e,t,Yp.min(),i)}vs(e,t,i,r){return this.gs.getDocumentsMatchingQuery(e,i,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx="LocalStore";class Sx{constructor(e,t,i,r){this.persistence=e,this.Cs=t,this.serializer=r,this.Fs=new Dm(yp),this.Ms=new Pv(e=>lv(e),cv),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Hb(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function _x(e,t,i,r){return new Sx(e,t,i,r)}async function Tx(e,t){const i=np(e);return await i.persistence.runTransaction("Handle user change","readonly",e=>{let r;return i.mutationQueue.getAllMutationBatches(e).next(n=>(r=n,i.Ns(t),i.mutationQueue.getAllMutationBatches(e))).next(t=>{const n=[],o=[];let s=zv();for(const e of r){n.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}return i.localDocuments.getDocuments(e,s).next(e=>({Bs:e,removedBatchIds:n,addedBatchIds:o}))})})}function Cx(e){const t=np(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.hi.getLastRemoteSnapshotVersion(e))}function Px(e,t){const i=np(e),r=t.snapshotVersion;let n=i.Fs;return i.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const o=i.Os.newChangeBuffer({trackRemovals:!0});n=i.Fs;const s=[];t.targetChanges.forEach((o,a)=>{const l=n.get(a);if(!l)return;s.push(i.hi.removeMatchingKeys(e,o.removedDocuments,a).next(()=>i.hi.addMatchingKeys(e,o.addedDocuments,a)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(Xm.EMPTY_BYTE_STRING,qp.min()).withLastLimboFreeSnapshotVersion(qp.min()):o.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(o.resumeToken,r)),n=n.insert(a,c),function(e,t,i){if(0===e.resumeToken.approximateByteSize())return!0;if(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8)return!0;return i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size>0}(l,c,o)&&s.push(i.hi.updateTargetData(e,c))});let a=$v(),l=zv();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&s.push(i.persistence.referenceDelegate.updateLimboDocument(e,r))}),s.push(function(e,t,i){let r=zv(),n=zv();return i.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=$v();return i.forEach((i,o)=>{const s=e.get(i);o.isFoundDocument()!==s.isFoundDocument()&&(n=n.add(i)),o.isNoDocument()&&o.version.isEqual(qp.min())?(t.removeEntry(i,o.readTime),r=r.insert(i,o)):!s.isValidDocument()||o.version.compareTo(s.version)>0||0===o.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(o),r=r.insert(i,o)):Hu(kx,"Ignoring outdated watch update for ",i,". Current version:",s.version," Watch version:",o.version)}),{Ls:r,ks:n}})}(e,o,t.documentUpdates).next(e=>{a=e.Ls,l=e.ks})),!r.isEqual(qp.min())){const t=i.hi.getLastRemoteSnapshotVersion(e).next(t=>i.hi.setTargetsMetadata(e,e.currentSequenceNumber,r));s.push(t)}return ef.waitFor(s).next(()=>o.apply(e)).next(()=>i.localDocuments.getLocalViewOfDocuments(e,a,l)).next(()=>a)}).then(e=>(i.Fs=n,e))}function Ex(e,t){const i=np(e);return i.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=vf),i.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}async function $x(e,t,i){const r=np(e),n=r.Fs.get(t),o=i?"readwrite":"readwrite-primary";try{i||await r.persistence.runTransaction("Release target",o,e=>r.persistence.referenceDelegate.removeTarget(e,n))}catch(e){if(!lf(e))throw e;Hu(kx,`Failed to update sequence numbers for target ${t}: ${e}`)}r.Fs=r.Fs.remove(t),r.Ms.delete(n.target)}function Ax(e,t,i){const r=np(e);let n=qp.min(),o=zv();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,i){const r=np(e),n=r.Ms.get(i);return void 0!==n?ef.resolve(r.Fs.get(n)):r.hi.getTargetData(t,i)}(r,e,yv(t)).next(t=>{if(t)return n=t.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{o=e})}).next(()=>r.Cs.getDocumentsMatchingQuery(e,t,i?n:qp.min(),i?o:zv())).next(e=>(function(e,t,i){let r=e.xs.get(t)||qp.min();i.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.xs.set(t,r)}(r,function(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}(t),e),{documents:e,qs:o})))}class Ix{constructor(){this.activeTargetIds=Vv}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Qx{constructor(){this.Fo=new Ix,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,i){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Ix,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{xo(e){}shutdown(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx="ConnectivityMonitor";class Mx{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Hu(Dx,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Hu(Dx,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nx=null;function Lx(){return null===Nx?Nx=268435456+Math.round(2147483648*Math.random()):Nx++,"0x"+Nx.toString(16)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const zx="RestConnection",Vx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ux{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${i}/databases/${r}`,this.Ko=this.databaseId.database===ig?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Wo(e,t,i,r,n){const o=Lx(),s=this.Go(e,t.toUriEncodedString());Hu(zx,`Sending RPC '${e}' ${o}:`,s,i);const a={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(a,r,n);const{host:l}=new URL(s),c=Kn(l);return this.jo(e,s,a,i,c).then(t=>(Hu(zx,`Received RPC '${e}' ${o}: `,t),t),t=>{throw Ju(zx,`RPC '${e}' ${o} failed with error: `,t,"url: ",s,"request:",i),t})}Jo(e,t,i,r,n,o){return this.Wo(e,t,i,r,n)}zo(e,t,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+Wu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,i)=>e[i]=t),i&&i.headers.forEach((t,i)=>e[i]=t)}Go(e,t){const i=Vx[e];return`${this.$o}/v1/${t}:${i}`}terminate(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx="WebChannelConnection";class Zx extends Ux{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,i,r,n){const o=Lx();return new Promise((n,s)=>{const a=new Mu;a.setWithCredentials(!0),a.listenOnce(Lu.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case zu.NO_ERROR:const t=a.getResponseJson();Hu(Xx,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(t)),n(t);break;case zu.TIMEOUT:Hu(Xx,`RPC '${e}' ${o} timed out`),s(new sp(op.DEADLINE_EXCEEDED,"Request time out"));break;case zu.HTTP_ERROR:const i=a.getStatus();if(Hu(Xx,`RPC '${e}' ${o} failed with status:`,i,"response text:",a.getResponseText()),i>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(op).indexOf(t)>=0?t:op.UNKNOWN}(t.status);s(new sp(e,t.message))}else s(new sp(op.UNKNOWN,"Server responded with status "+a.getStatus()))}else s(new sp(op.UNAVAILABLE,"Connection failed."));break;default:tp(9055,{c_:e,streamId:o,l_:a.getLastErrorCode(),h_:a.getLastError()})}}finally{Hu(Xx,`RPC '${e}' ${o} completed.`)}});const l=JSON.stringify(r);Hu(Xx,`RPC '${e}' ${o} sending request:`,r),a.send(t,"POST",l,i,15)})}P_(e,t,i){const r=Lx(),n=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Xu(),s=qu(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.zo(a.initMessageHeaders,t,i),a.encodeInitMessageHeaders=!0;const c=n.join("");Hu(Xx,`Creating RPC '${e}' stream ${r}: ${c}`,a);const d=o.createWebChannel(c,a);this.T_(d);let h=!1,u=!1;const p=new qx({Ho:t=>{u?Hu(Xx,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(h||(Hu(Xx,`Opening RPC '${e}' stream ${r} transport.`),d.open(),h=!0),Hu(Xx,`RPC '${e}' stream ${r} sending:`,t),d.send(t))},Yo:()=>d.close()}),f=(e,t,i)=>{e.listen(t,e=>{try{i(e)}catch(e){setTimeout(()=>{throw e},0)}})};return f(d,Nu.EventType.OPEN,()=>{u||(Hu(Xx,`RPC '${e}' stream ${r} transport opened.`),p.s_())}),f(d,Nu.EventType.CLOSE,()=>{u||(u=!0,Hu(Xx,`RPC '${e}' stream ${r} transport closed`),p.__(),this.I_(d))}),f(d,Nu.EventType.ERROR,t=>{u||(u=!0,Ju(Xx,`RPC '${e}' stream ${r} transport errored. Name:`,t.name,"Message:",t.message),p.__(new sp(op.UNAVAILABLE,"The operation could not be completed")))}),f(d,Nu.EventType.MESSAGE,t=>{var i;if(!u){const n=t.data[0];rp(!!n,16349);const o=n,s=(null==o?void 0:o.error)||(null===(i=o[0])||void 0===i?void 0:i.error);if(s){Hu(Xx,`RPC '${e}' stream ${r} received error:`,s);const t=s.status;let i=function(e){const t=kO[e];if(void 0!==t)return _O(t)}(t),n=s.message;void 0===i&&(i=op.INTERNAL,n="Unknown error status: "+t+" with message "+s.message),u=!0,p.__(new sp(i,n)),d.close()}else Hu(Xx,`RPC '${e}' stream ${r} received:`,n),p.a_(n)}}),f(s,Uu.STAT_EVENT,t=>{t.stat===Vu.PROXY?Hu(Xx,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===Vu.NOPROXY&&Hu(Xx,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{p.o_()},0),p}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jx(e){return new XO(e,!0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e,t,i=1e3,r=1.5,n=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=r,this.A_=n,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),r=Math.max(0,t-i);r>0&&Hu("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){null!==this.V_&&(this.V_.skipDelay(),this.V_=null)}cancel(){null!==this.V_&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx="PersistentStream";class Yx{constructor(e,t,i,r,n,o,s,a){this.Fi=e,this.w_=i,this.S_=r,this.connection=n,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=a,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Fx(e,t)}M_(){return 1===this.state||5===this.state||this.x_()}x_(){return 2===this.state||3===this.state}start(){this.C_=0,4!==this.state?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&null===this.D_&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,4!==e?this.F_.reset():t&&t.code===op.RESOURCE_EXHAUSTED?(Ku(t.toString()),Ku("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===op.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,i])=>{this.b_===t&&this.W_(e,i)},t=>{e(()=>{const e=new sp(op.UNKNOWN,"Fetching auth token failed: "+t.message);return this.G_(e)})})}W_(e,t){const i=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{i(()=>this.listener.Zo())}),this.stream.e_(()=>{i(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(e=>{i(()=>this.G_(e))}),this.stream.onMessage(e=>{i(()=>1==++this.C_?this.j_(e):this.onNext(e))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return Hu(Wx,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(Hu(Wx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Gx extends Yx{constructor(e,t,i,r,n,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,o),this.serializer=n}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=function(e,t){let i;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:tp(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),n=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(rp(void 0===t||"string"==typeof t,58123),Xm.fromBase64String(t||"")):(rp(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),Xm.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(e){const t=void 0===e.code?op.UNKNOWN:_O(e.code);return new sp(t,e.message||"")}(s);i=new DO(r,n,o,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const n=JO(e,r.document.name),o=WO(r.document.updateTime),s=r.document.createTime?WO(r.document.createTime):qp.min(),a=new Qg({mapValue:{fields:r.document.fields}}),l=Dg.newFoundDocument(n,o,s,a),c=r.targetIds||[],d=r.removedTargetIds||[];i=new QO(c,d,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const n=JO(e,r.document),o=r.readTime?WO(r.readTime):qp.min(),s=Dg.newNoDocument(n,o),a=r.removedTargetIds||[];i=new QO([],a,s.key,s)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const n=JO(e,r.document),o=r.removedTargetIds||[];i=new QO([],o,n,null)}else{if(!("filter"in t))return tp(11601,{At:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:n}=e,o=new wO(r,n),s=e.targetId;i=new RO(s,o)}}return i}(this.serializer,e),i=function(e){if(!("targetChange"in e))return qp.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?qp.min():t.readTime?WO(t.readTime):qp.min()}(e);return this.listener.J_(t,i)}H_(e){const t={};t.database=iy(this.serializer),t.addTarget=function(e,t){let i;const r=t.target;if(i=dv(r)?{documents:ay(e,r)}:{query:ly(e,r).Vt},i.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){i.resumeToken=jO(e,t.resumeToken);const r=ZO(e,t.expectedCount);null!==r&&(i.expectedCount=r)}else if(t.snapshotVersion.compareTo(qp.min())>0){i.readTime=BO(e,t.snapshotVersion.toTimestamp());const r=ZO(e,t.expectedCount);null!==r&&(i.expectedCount=r)}return i}(this.serializer,e);const i=function(e,t){const i=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return tp(28987,{purpose:e})}}(t.purpose);return null==i?null:{"goog-listen-tags":i}}(this.serializer,e);i&&(t.labels=i),this.k_(t)}Y_(e){const t={};t.database=iy(this.serializer),t.removeTarget=e,this.k_(t)}}class Hx extends Yx{constructor(e,t,i,r,n,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,o),this.serializer=n}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return rp(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,rp(!e.writeResults||0===e.writeResults.length,55816),this.listener.ea()}onNext(e){rp(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=function(e,t){return e&&e.length>0?(rp(void 0!==t,14353),e.map(e=>function(e,t){let i=e.updateTime?WO(e.updateTime):WO(t);return i.isEqual(qp.min())&&(i=WO(t)),new rO(i,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),i=WO(e.commitTime);return this.listener.ta(i,t)}na(){const e={};e.database=iy(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>oy(this.serializer,e))};this.k_(t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{}class Jx extends Kx{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.ra=!1}ia(){if(this.ra)throw new sp(op.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([n,o])=>this.connection.Wo(e,GO(t,i),r,n,o)).catch(e=>{throw"FirebaseError"===e.name?(e.code===op.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new sp(op.UNKNOWN,e.toString())})}Jo(e,t,i,r,n){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Jo(e,GO(t,i),r,o,s,n)).catch(e=>{throw"FirebaseError"===e.name?(e.code===op.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new sp(op.UNKNOWN,e.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class ew{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){0===this.sa&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){"Online"===this.state?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,"Online"===e&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Ku(t),this._a=!1):Hu("OnlineStateTracker",t)}ha(){null!==this.oa&&(this.oa.cancel(),this.oa=null)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw="RemoteStore";class iw{constructor(e,t,i,r,n){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=n,this.Ea.xo(e=>{i.enqueueAndForget(async()=>{hw(this)&&(Hu(tw,"Restarting streams for network reachability change."),await async function(e){const t=np(e);t.Ia.add(4),await nw(t),t.Aa.set("Unknown"),t.Ia.delete(4),await rw(t)}(this))})}),this.Aa=new ew(i,r)}}async function rw(e){if(hw(e))for(const t of e.da)await t(!0)}async function nw(e){for(const t of e.da)await t(!1)}function ow(e,t){const i=np(e);i.Ta.has(t.targetId)||(i.Ta.set(t.targetId,t),dw(i)?cw(i):Ew(i).x_()&&aw(i,t))}function sw(e,t){const i=np(e),r=Ew(i);i.Ta.delete(t),r.x_()&&lw(i,t),0===i.Ta.size&&(r.x_()?r.B_():hw(i)&&i.Aa.set("Unknown"))}function aw(e,t){if(e.Ra.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(qp.min())>0){const i=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(i)}Ew(e).H_(t)}function lw(e,t){e.Ra.$e(t),Ew(e).Y_(t)}function cw(e){e.Ra=new NO({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.Ta.get(t)||null,lt:()=>e.datastore.serializer.databaseId}),Ew(e).start(),e.Aa.aa()}function dw(e){return hw(e)&&!Ew(e).M_()&&e.Ta.size>0}function hw(e){return 0===np(e).Ia.size}function uw(e){e.Ra=void 0}async function pw(e){e.Aa.set("Online")}async function fw(e){e.Ta.forEach((t,i)=>{aw(e,t)})}async function mw(e,t){uw(e),dw(e)?(e.Aa.la(t),cw(e)):e.Aa.set("Unknown")}async function gw(e,t,i){if(e.Aa.set("Online"),t instanceof DO&&2===t.state&&t.cause)try{await async function(e,t){const i=t.cause;for(const r of t.targetIds)e.Ta.has(r)&&(await e.remoteSyncer.rejectListen(r,i),e.Ta.delete(r),e.Ra.removeTarget(r))}(e,t)}catch(i){Hu(tw,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await vw(e,i)}else if(t instanceof QO?e.Ra.Ye(t):t instanceof RO?e.Ra.it(t):e.Ra.et(t),!i.isEqual(qp.min()))try{const t=await Cx(e.localStore);i.compareTo(t)>=0&&await function(e,t){const i=e.Ra.Pt(t);return i.targetChanges.forEach((i,r)=>{if(i.resumeToken.approximateByteSize()>0){const n=e.Ta.get(r);n&&e.Ta.set(r,n.withResumeToken(i.resumeToken,t))}}),i.targetMismatches.forEach((t,i)=>{const r=e.Ta.get(t);if(!r)return;e.Ta.set(t,r.withResumeToken(Xm.EMPTY_BYTE_STRING,r.snapshotVersion)),lw(e,t);const n=new yy(r.target,t,i,r.sequenceNumber);aw(e,n)}),e.remoteSyncer.applyRemoteEvent(i)}(e,i)}catch(t){Hu(tw,"Failed to raise snapshot:",t),await vw(e,t)}}async function vw(e,t,i){if(!lf(t))throw t;e.Ia.add(1),await nw(e),e.Aa.set("Offline"),i||(i=()=>Cx(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Hu(tw,"Retrying IndexedDB access"),await i(),e.Ia.delete(1),await rw(e)})}function Ow(e,t){return t().catch(i=>vw(e,i,t))}async function yw(e){const t=np(e),i=$w(t);let r=t.Pa.length>0?t.Pa[t.Pa.length-1].batchId:vf;for(;bw(t);)try{const e=await Ex(t.localStore,r);if(null===e){0===t.Pa.length&&i.B_();break}r=e.batchId,xw(t,e)}catch(e){await vw(t,e)}ww(t)&&kw(t)}function bw(e){return hw(e)&&e.Pa.length<10}function xw(e,t){e.Pa.push(t);const i=$w(e);i.x_()&&i.Z_&&i.X_(t.mutations)}function ww(e){return hw(e)&&!$w(e).M_()&&e.Pa.length>0}function kw(e){$w(e).start()}async function Sw(e){$w(e).na()}async function _w(e){const t=$w(e);for(const i of e.Pa)t.X_(i.mutations)}async function Tw(e,t,i){const r=e.Pa.shift(),n=bO.from(r,t,i);await Ow(e,()=>e.remoteSyncer.applySuccessfulWrite(n)),await yw(e)}async function Cw(e,t){t&&$w(e).Z_&&await async function(e,t){if(function(e){return function(e){switch(e){case op.OK:return tp(64938);case op.CANCELLED:case op.UNKNOWN:case op.DEADLINE_EXCEEDED:case op.RESOURCE_EXHAUSTED:case op.INTERNAL:case op.UNAVAILABLE:case op.UNAUTHENTICATED:return!1;case op.INVALID_ARGUMENT:case op.NOT_FOUND:case op.ALREADY_EXISTS:case op.PERMISSION_DENIED:case op.FAILED_PRECONDITION:case op.ABORTED:case op.OUT_OF_RANGE:case op.UNIMPLEMENTED:case op.DATA_LOSS:return!0;default:return tp(15467,{code:e})}}(e)&&e!==op.ABORTED}(t.code)){const i=e.Pa.shift();$w(e).N_(),await Ow(e,()=>e.remoteSyncer.rejectFailedWrite(i.batchId,t)),await yw(e)}}(e,t),ww(e)&&kw(e)}async function Pw(e,t){const i=np(e);i.asyncQueue.verifyOperationInProgress(),Hu(tw,"RemoteStore received new credentials");const r=hw(i);i.Ia.add(3),await nw(i),r&&i.Aa.set("Unknown"),await i.remoteSyncer.handleCredentialChange(t),i.Ia.delete(3),await rw(i)}function Ew(e){return e.Va||(e.Va=function(e,t,i){const r=np(e);return r.ia(),new Gx(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}(e.datastore,e.asyncQueue,{Zo:pw.bind(null,e),e_:fw.bind(null,e),n_:mw.bind(null,e),J_:gw.bind(null,e)}),e.da.push(async t=>{t?(e.Va.N_(),dw(e)?cw(e):e.Aa.set("Unknown")):(await e.Va.stop(),uw(e))})),e.Va}function $w(e){return e.ma||(e.ma=function(e,t,i){const r=np(e);return r.ia(),new Hx(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(e.datastore,e.asyncQueue,{Zo:()=>Promise.resolve(),e_:Sw.bind(null,e),n_:Cw.bind(null,e),ea:_w.bind(null,e),ta:Tw.bind(null,e)}),e.da.push(async t=>{t?(e.ma.N_(),await yw(e)):(await e.ma.stop(),e.Pa.length>0&&(Hu(tw,`Stopping write stream with ${e.Pa.length} pending writes`),e.Pa=[]))})),e.ma
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Aw{constructor(e,t,i,r,n){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=n,this.deferred=new ap,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,n){const o=Date.now()+i,s=new Aw(e,t,o,r,n);return s.start(i),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new sp(op.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Iw(e,t){if(Ku("AsyncQueue",`${t}: ${e}`),lf(e))return new sp(op.UNAVAILABLE,`${t}: ${e}`);throw e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{static emptySet(e){return new Qw(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||$p.comparator(t.key,i.key):(e,t)=>$p.comparator(e.key,t.key),this.keyedMap=Iv(),this.sortedSet=new Dm(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Qw))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=i.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const i=new Qw;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(){this.fa=new Dm($p.comparator)}track(e){const t=e.doc.key,i=this.fa.get(t);i?0!==e.type&&3===i.type?this.fa=this.fa.insert(t,e):3===e.type&&1!==i.type?this.fa=this.fa.insert(t,{type:i.type,doc:e.doc}):2===e.type&&2===i.type?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):2===e.type&&0===i.type?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):1===e.type&&0===i.type?this.fa=this.fa.remove(t):1===e.type&&2===i.type?this.fa=this.fa.insert(t,{type:1,doc:i.doc}):0===e.type&&1===i.type?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):tp(63341,{At:e,ga:i}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,i)=>{e.push(i)}),e}}class Dw{constructor(e,t,i,r,n,o,s,a,l){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=n,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,i,r,n){const o=[];return t.forEach(e=>{o.push({type:0,doc:e})}),new Dw(e,t,Qw.emptySet(t),o,i,r,!0,!1,n)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==i[e].type||!t[e].doc.isEqual(i[e].doc))return!1;return!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class Nw{constructor(){this.queries=Lw(),this.onlineState="Unknown",this.Da=new Set}terminate(){!function(e,t){const i=np(e),r=i.queries;i.queries=Lw(),r.forEach((e,i)=>{for(const e of i.wa)e.onError(t)})}(this,new sp(op.ABORTED,"Firestore shutting down"))}}function Lw(){return new Pv(e=>kv(e),wv)}async function zw(e,t){const i=np(e);let r=3;const n=t.query;let o=i.queries.get(n);o?!o.Sa()&&t.ba()&&(r=2):(o=new Mw,r=t.ba()?0:1);try{switch(r){case 0:o.ya=await i.onListen(n,!0);break;case 1:o.ya=await i.onListen(n,!1);break;case 2:await i.onFirstRemoteStoreListen(n)}}catch(e){const i=Iw(e,`Initialization of query '${Sv(t.query)}' failed`);return void t.onError(i)}i.queries.set(n,o),o.wa.push(t),t.va(i.onlineState),o.ya&&t.Ca(o.ya)&&Xw(i)}async function Vw(e,t){const i=np(e),r=t.query;let n=3;const o=i.queries.get(r);if(o){const e=o.wa.indexOf(t);e>=0&&(o.wa.splice(e,1),0===o.wa.length?n=t.ba()?0:1:!o.Sa()&&t.ba()&&(n=2))}switch(n){case 0:return i.queries.delete(r),i.onUnlisten(r,!0);case 1:return i.queries.delete(r),i.onUnlisten(r,!1);case 2:return i.onLastRemoteStoreUnlisten(r);default:return}}function Uw(e,t){const i=np(e);let r=!1;for(const e of t){const t=e.query,n=i.queries.get(t);if(n){for(const t of n.wa)t.Ca(e)&&(r=!0);n.ya=e}}r&&Xw(i)}function qw(e,t,i){const r=np(e),n=r.queries.get(t);if(n)for(const e of n.wa)e.onError(i);r.queries.delete(t)}function Xw(e){e.Da.forEach(e=>{e.next()})}var Zw,Bw;(Bw=Zw||(Zw={})).Fa="default",Bw.Cache="cache";class jw{constructor(e,t,i){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const t=[];for(const i of e.docChanges)3!==i.type&&t.push(i);e=new Dw(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache)return!0;if(!this.ba())return!0;const i="Offline"!==t;return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}La(e){e=Dw.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Zw.Cache}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e){this.key=e}}class Ww{constructor(e){this.key=e}}class Yw{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=zv(),this.mutatedKeys=zv(),this.Xa=Tv(e),this.eu=new Qw(this.Xa)}get tu(){return this.Ha}nu(e,t){const i=t?t.ru:new Rw,r=t?t.eu:this.eu;let n=t?t.mutatedKeys:this.mutatedKeys,o=r,s=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),d=_v(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),u=!!d&&(d.hasLocalMutations||this.mutatedKeys.has(d.key)&&d.hasCommittedMutations);let p=!1;c&&d?c.data.isEqual(d.data)?h!==u&&(i.track({type:3,doc:d}),p=!0):this.iu(c,d)||(i.track({type:2,doc:d}),p=!0,(a&&this.Xa(d,a)>0||l&&this.Xa(d,l)<0)&&(s=!0)):!c&&d?(i.track({type:0,doc:d}),p=!0):c&&!d&&(i.track({type:1,doc:c}),p=!0,(a||l)&&(s=!0)),p&&(d?(o=o.add(d),n=u?n.add(e):n.delete(e)):(o=o.delete(e),n=n.delete(e)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),n=n.delete(e.key),i.track({type:1,doc:e})}return{eu:o,ru:i,Ds:s,mutatedKeys:n}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){const n=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const o=e.ru.pa();o.sort((e,t)=>function(e,t){const i=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tp(20277,{At:e})}};return i(e)-i(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e.type,t.type)||this.Xa(e.doc,t.doc)),this.su(i),r=null!=r&&r;const s=t&&!r?this.ou():[],a=0===this.Za.size&&this.current&&!r?1:0,l=a!==this.Ya;return this.Ya=a,0!==o.length||l?{snapshot:new Dw(this.query,e.eu,n,o,e.mutatedKeys,0===a,l,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:s}:{_u:s}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Rw,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(e=>this.Ha=this.Ha.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ha=this.Ha.delete(e)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=zv(),this.eu.forEach(e=>{this.au(e.key)&&(this.Za=this.Za.add(e.key))});const t=[];return e.forEach(e=>{this.Za.has(e)||t.push(new Ww(e))}),this.Za.forEach(i=>{e.has(i)||t.push(new Fw(i))}),t}uu(e){this.Ha=e.qs,this.Za=zv();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Dw.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,0===this.Ya,this.hasCachedResults)}}const Gw="SyncEngine";class Hw{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class Kw{constructor(e){this.key=e,this.lu=!1}}class Jw{constructor(e,t,i,r,n,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=n,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new Pv(e=>kv(e),wv),this.Tu=new Map,this.Iu=new Set,this.du=new Dm($p.comparator),this.Eu=new Map,this.Au=new tx,this.Ru={},this.Vu=new Map,this.mu=Pb.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return!0===this.fu}}async function ek(e,t,i=!0){const r=bk(e);let n;const o=r.Pu.get(t);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),n=o.view.cu()):n=await ik(r,t,i,!0),n}async function tk(e,t){const i=bk(e);await ik(i,t,!0,!1)}async function ik(e,t,i,r){const n=await function(e,t){const i=np(e);return i.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return i.hi.getTargetData(e,t).next(n=>n?(r=n,ef.resolve(r)):i.hi.allocateTargetId(e).next(n=>(r=new yy(t,n,"TargetPurposeListen",e.currentSequenceNumber),i.hi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=i.Fs.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(i.Fs=i.Fs.insert(e.targetId,e),i.Ms.set(t,e.targetId)),e})}(e.localStore,yv(t)),o=n.targetId,s=e.sharedClientState.addLocalQueryTarget(o,i);let a;return r&&(a=await async function(e,t,i,r,n){e.gu=(t,i,r)=>async function(e,t,i,r){let n=t.view.nu(i);n.Ds&&(n=await Ax(e.localStore,t.query,!1).then(({documents:e})=>t.view.nu(e,n)));const o=r&&r.targetChanges.get(t.targetId),s=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(n,e.isPrimaryClient,o,s);return fk(e,t.targetId,a._u),a.snapshot}(e,t,i,r);const o=await Ax(e.localStore,t,!0),s=new Yw(t,o.qs),a=s.nu(o.documents),l=IO.createSynthesizedTargetChangeForCurrentChange(i,r&&"Offline"!==e.onlineState,n),c=s.applyChanges(a,e.isPrimaryClient,l);fk(e,i,c._u);const d=new Hw(t,i,s);return e.Pu.set(t,d),e.Tu.has(i)?e.Tu.get(i).push(t):e.Tu.set(i,[t]),c.snapshot}(e,t,o,"current"===s,n.resumeToken)),e.isPrimaryClient&&i&&ow(e.remoteStore,n),a}async function rk(e,t,i){const r=np(e),n=r.Pu.get(t),o=r.Tu.get(n.targetId);if(o.length>1)return r.Tu.set(n.targetId,o.filter(e=>!wv(e,t))),void r.Pu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(n.targetId),r.sharedClientState.isActiveQueryTarget(n.targetId)||await $x(r.localStore,n.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(n.targetId),i&&sw(r.remoteStore,n.targetId),uk(r,n.targetId)}).catch(Jp)):(uk(r,n.targetId),await $x(r.localStore,n.targetId,!0))}async function nk(e,t){const i=np(e),r=i.Pu.get(t),n=i.Tu.get(r.targetId);i.isPrimaryClient&&1===n.length&&(i.sharedClientState.removeLocalQueryTarget(r.targetId),sw(i.remoteStore,r.targetId))}async function ok(e,t){const i=np(e);try{const e=await Px(i.localStore,t);t.targetChanges.forEach((e,t)=>{const r=i.Eu.get(t);r&&(rp(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.lu=!0:e.modifiedDocuments.size>0?rp(r.lu,14607):e.removedDocuments.size>0&&(rp(r.lu,42227),r.lu=!1))}),await vk(i,e,t)}catch(e){await Jp(e)}}function sk(e,t,i){const r=np(e);if(r.isPrimaryClient&&0===i||!r.isPrimaryClient&&1===i){const e=[];r.Pu.forEach((i,r)=>{const n=r.view.va(t);n.snapshot&&e.push(n.snapshot)}),function(e,t){const i=np(e);i.onlineState=t;let r=!1;i.queries.forEach((e,i)=>{for(const e of i.wa)e.va(t)&&(r=!0)}),r&&Xw(i)}(r.eventManager,t),e.length&&r.hu.J_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function ak(e,t,i){const r=np(e);r.sharedClientState.updateQueryState(t,"rejected",i);const n=r.Eu.get(t),o=n&&n.key;if(o){let e=new Dm($p.comparator);e=e.insert(o,Dg.newNoDocument(o,qp.min()));const i=zv().add(o),n=new AO(qp.min(),new Map,new Dm(yp),e,i);await ok(r,n),r.du=r.du.remove(o),r.Eu.delete(t),gk(r)}else await $x(r.localStore,t,!1).then(()=>uk(r,t,i)).catch(Jp)}async function lk(e,t){const i=np(e),r=t.batch.batchId;try{const e=await function(e,t){const i=np(e);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),n=i.Os.newChangeBuffer({trackRemovals:!0});return function(e,t,i,r){const n=i.batch,o=n.keys();let s=ef.resolve();return o.forEach(e=>{s=s.next(()=>r.getEntry(t,e)).next(t=>{const o=i.docVersions.get(e);rp(null!==o,48541),t.version.compareTo(o)<0&&(n.applyToRemoteDocument(t,i),t.isValidDocument()&&(t.setReadTime(i.commitVersion),r.addEntry(t)))})}),s.next(()=>e.mutationQueue.removeMutationBatch(t,n))}(i,e,t,n).next(()=>n.apply(e)).next(()=>i.mutationQueue.performConsistencyCheck(e)).next(()=>i.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=zv();for(let i=0;i<e.mutationResults.length;++i)e.mutationResults[i].transformResults.length>0&&(t=t.add(e.batch.mutations[i].key));return t}(t))).next(()=>i.localDocuments.getDocuments(e,r))})}(i.localStore,t);hk(i,r,null),dk(i,r),i.sharedClientState.updateMutationState(r,"acknowledged"),await vk(i,e)}catch(e){await Jp(e)}}async function ck(e,t,i){const r=np(e);try{const e=await function(e,t){const i=np(e);return i.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return i.mutationQueue.lookupMutationBatch(e,t).next(t=>(rp(null!==t,37113),r=t.keys(),i.mutationQueue.removeMutationBatch(e,t))).next(()=>i.mutationQueue.performConsistencyCheck(e)).next(()=>i.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>i.localDocuments.getDocuments(e,r))})}(r.localStore,t);hk(r,t,i),dk(r,t),r.sharedClientState.updateMutationState(t,"rejected",i),await vk(r,e)}catch(i){await Jp(i)}}function dk(e,t){(e.Vu.get(t)||[]).forEach(e=>{e.resolve()}),e.Vu.delete(t)}function hk(e,t,i){const r=np(e);let n=r.Ru[r.currentUser.toKey()];if(n){const e=n.get(t);e&&(i?e.reject(i):e.resolve(),n=n.remove(t)),r.Ru[r.currentUser.toKey()]=n}}function uk(e,t,i=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Tu.get(t))e.Pu.delete(r),i&&e.hu.pu(r,i);e.Tu.delete(t),e.isPrimaryClient&&e.Au.zr(t).forEach(t=>{e.Au.containsKey(t)||pk(e,t)})}function pk(e,t){e.Iu.delete(t.path.canonicalString());const i=e.du.get(t);null!==i&&(sw(e.remoteStore,i),e.du=e.du.remove(t),e.Eu.delete(i),gk(e))}function fk(e,t,i){for(const r of i)r instanceof Fw?(e.Au.addReference(r.key,t),mk(e,r)):r instanceof Ww?(Hu(Gw,"Document no longer in limbo: "+r.key),e.Au.removeReference(r.key,t),e.Au.containsKey(r.key)||pk(e,r.key)):tp(19791,{yu:r})}function mk(e,t){const i=t.key,r=i.path.canonicalString();e.du.get(i)||e.Iu.has(r)||(Hu(Gw,"New document in limbo: "+i),e.Iu.add(r),gk(e))}function gk(e){for(;e.Iu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Iu.values().next().value;e.Iu.delete(t);const i=new $p(Cp.fromString(t)),r=e.mu.next();e.Eu.set(r,new Kw(i)),e.du=e.du.insert(i,r),ow(e.remoteStore,new yy(yv(mv(i.path)),r,"TargetPurposeLimboResolution",gf.ue))}}async function vk(e,t,i){const r=np(e),n=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((e,a)=>{s.push(r.gu(a,t,i).then(e=>{var t;if((e||i)&&r.isPrimaryClient){const n=e?!e.fromCache:null===(t=null==i?void 0:i.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,n?"current":"not-current")}if(e){n.push(e);const t=bx.Es(a.targetId,e);o.push(t)}}))}),await Promise.all(s),r.hu.J_(n),await async function(e,t){const i=np(e);try{await i.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>ef.forEach(t,t=>ef.forEach(t.Is,r=>i.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>ef.forEach(t.ds,r=>i.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!lf(e))throw e;Hu(kx,"Failed to update sequence numbers: "+e)}for(const e of t){const t=e.targetId;if(!e.fromCache){const e=i.Fs.get(t),r=e.snapshotVersion,n=e.withLastLimboFreeSnapshotVersion(r);i.Fs=i.Fs.insert(t,n)}}}(r.localStore,o))}async function Ok(e,t){const i=np(e);if(!i.currentUser.isEqual(t)){Hu(Gw,"User change. New user:",t.toKey());const e=await Tx(i.localStore,t);i.currentUser=t,function(e,t){e.Vu.forEach(e=>{e.forEach(e=>{e.reject(new sp(op.CANCELLED,t))})}),e.Vu.clear()}(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await vk(i,e.Bs)}}function yk(e,t){const i=np(e),r=i.Eu.get(t);if(r&&r.lu)return zv().add(r.key);{let e=zv();const r=i.Tu.get(t);if(!r)return e;for(const t of r){const r=i.Pu.get(t);e=e.unionWith(r.view.tu)}return e}}function bk(e){const t=np(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=ok.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=yk.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ak.bind(null,t),t.hu.J_=Uw.bind(null,t.eventManager),t.hu.pu=qw.bind(null,t.eventManager),t}function xk(e){const t=np(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=lk.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ck.bind(null,t),t}class wk{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jx(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return _x(this.persistence,new wx,e.initialUser,this.serializer)}Du(e){return new ax(cx.Vi,this.serializer)}bu(e){return new Qx}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wk.provider={build:()=>new wk};class kk extends wk{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){rp(this.persistence.referenceDelegate instanceof dx,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new Mb(i,e.asyncQueue,t)}Du(e){const t=void 0!==this.cacheSizeBytes?bb.withCacheSize(this.cacheSizeBytes):bb.DEFAULT;return new ax(e=>dx.Vi(e,t),this.serializer)}}class Sk extends wk{constructor(e,t,i){super(),this.Mu=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Mu.initialize(this,e),await xk(this.Mu.syncEngine),await yw(this.Mu.remoteStore),await this.persistence.ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return _x(this.persistence,new wx,e.initialUser,this.serializer)}Cu(e,t){const i=this.persistence.referenceDelegate.garbageCollector;return new Mb(i,e.asyncQueue,t)}Fu(e,t){const i=new mf(t,this.persistence);return new ff(e.asyncQueue,i)}Du(e){const t=function(e,t){let i=e.projectId;return e.isDefaultDatabase||(i+="."+e.database),"firestore/"+t+"/"+i+"/"}(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?bb.withCacheSize(this.cacheSizeBytes):bb.DEFAULT;return new vx(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,"undefined"!=typeof window?window:null,Bx(),this.serializer,this.sharedClientState,!!this.forceOwnership)}bu(e){return new Qx}}class _k{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>sk(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ok.bind(null,this.syncEngine),await async function(e,t){const i=np(e);t?(i.Ia.delete(2),await rw(i)):t||(i.Ia.add(2),await nw(i),i.Aa.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Nw}createDatastore(e){const t=jx(e.databaseInfo.databaseId),i=function(e){return new Zx(e)}(e.databaseInfo);return function(e,t,i,r){return new Jx(e,t,i,r)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(e,t,i,r,n){return new iw(e,t,i,r,n)}(this.localStore,this.datastore,e.asyncQueue,e=>sk(this.syncEngine,e,0),Mx.C()?new Mx:new Rx)}createSyncEngine(e,t){return function(e,t,i,r,n,o,s){const a=new Jw(e,t,i,r,n,o);return s&&(a.fu=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=np(e);Hu(tw,"RemoteStore shutting down."),t.Ia.add(5),await nw(t),t.Ea.shutdown(),t.Aa.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}_k.provider={build:()=>new _k};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Tk{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Ku("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ck="FirestoreClient";class Pk{constructor(e,t,i,r,n){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=Fu.UNAUTHENTICATED,this.clientId=Op.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=n,this.authCredentials.start(i,async e=>{Hu(Ck,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(i,e=>(Hu(Ck,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ap;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Iw(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Ek(e,t){e.asyncQueue.verifyOperationInProgress(),Hu(Ck,"Initializing OfflineComponentProvider");const i=e.configuration;await t.initialize(i);let r=i.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Tx(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>{Ju("Terminating Firestore due to IndexedDb database deletion"),e.terminate().then(()=>{Hu("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(e=>{Ju("Terminating Firestore due to IndexedDb database deletion failed",e)})}),e._offlineComponents=t}async function $k(e,t){e.asyncQueue.verifyOperationInProgress();const i=await async function(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Hu(Ck,"Using user provided OfflineComponentProvider");try{await Ek(e,e._uninitializedComponentsProvider._offline)}catch(t){const i=t;if(!function(e){return"FirebaseError"===e.name?e.code===op.FAILED_PRECONDITION||e.code===op.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(i))throw i;Ju("Error using user provided cache. Falling back to memory cache: "+i),await Ek(e,new wk)}}else Hu(Ck,"Using default OfflineComponentProvider"),await Ek(e,new kk(void 0));return e._offlineComponents}(e);Hu(Ck,"Initializing OnlineComponentProvider"),await t.initialize(i,e.configuration),e.setCredentialChangeListener(e=>Pw(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,i)=>Pw(t.remoteStore,i)),e._onlineComponents=t}async function Ak(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Hu(Ck,"Using user provided OnlineComponentProvider"),await $k(e,e._uninitializedComponentsProvider._online)):(Hu(Ck,"Using default OnlineComponentProvider"),await $k(e,new _k))),e._onlineComponents}async function Ik(e){const t=await Ak(e),i=t.eventManager;return i.onListen=ek.bind(null,t.syncEngine),i.onUnlisten=rk.bind(null,t.syncEngine),i.onFirstRemoteStoreListen=tk.bind(null,t.syncEngine),i.onLastRemoteStoreUnlisten=nk.bind(null,t.syncEngine),i}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Qk(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const Rk=new Map,Dk="firestore.googleapis.com",Mk=!0;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e){var t,i;if(void 0===e.host){if(void 0!==e.ssl)throw new sp(op.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Dk,this.ssl=Mk}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:Mk;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=yb;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new sp(op.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,i,r){if(!0===t&&!0===r)throw new sp(op.INVALID_ARGUMENT,`${e} and ${i} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Qk(null!==(i=e.experimentalLongPollingOptions)&&void 0!==i?i:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new sp(op.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new sp(op.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new sp(op.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Lk{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Nk({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new sp(op.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new sp(op.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Nk(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new cp;switch(e.type){case"firstParty":return new pp(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new sp(op.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Rk.get(e);t&&(Hu("ComponentProvider","Removing Datastore"),Rk.delete(e),t.terminate())}(this),Promise.resolve()}}function zk(e,t,i,r={}){var n;e=Mp(e,Lk);const o=Kn(t),s=e._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:e._getEmulatorOptions()}),l=`${t}:${i}`;o&&(Jn(`https://${l}`),ro("Firestore",!0)),s.host!==Dk&&s.host!==l&&Ju("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},s),{host:l,ssl:o,emulatorOptions:r});if(!po(c,a)&&(e._setSettings(c),r.mockUserToken)){let t,i;if("string"==typeof r.mockUserToken)t=r.mockUserToken,i=Fu.MOCK_USER;else{t=eo(r.mockUserToken,null===(n=e._app)||void 0===n?void 0:n.options.projectId);const o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new sp(op.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");i=new Fu(o)}e._authCredentials=new dp(new lp(t,i))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Vk(this.firestore,e,this._query)}}class Uk{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qk(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Uk(this.firestore,e,this._key)}toJSON(){return{type:Uk._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Lp(t,Uk._jsonSchema))return new Uk(e,i||null,new $p(Cp.fromString(t.referencePath)))}}Uk._jsonSchemaVersion="firestore/documentReference/1.0",Uk._jsonSchema={type:Np("string",Uk._jsonSchemaVersion),referencePath:Np("string")};class qk extends Vk{constructor(e,t,i){super(e,t,mv(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Uk(this.firestore,null,new $p(e))}withConverter(e){return new qk(this.firestore,e,this._path)}}function Xk(e,t,...i){if(e=bo(e),Ap("collection","path",t),e instanceof Lk){const r=Cp.fromString(t,...i);return Qp(r),new qk(e,null,r)}{if(!(e instanceof Uk||e instanceof qk))throw new sp(op.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Cp.fromString(t,...i));return Qp(r),new qk(e.firestore,null,r)}}function Zk(e,t,...i){if(e=bo(e),1===arguments.length&&(t=Op.newId()),Ap("doc","path",t),e instanceof Lk){const r=Cp.fromString(t,...i);return Ip(r),new Uk(e,null,new $p(r))}{if(!(e instanceof Uk||e instanceof qk))throw new sp(op.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Cp.fromString(t,...i));return Ip(r),new Uk(e.firestore,e instanceof qk?e.converter:null,new $p(r))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk="AsyncQueue";class jk{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Fx(this,"async_queue_retry"),this.oc=()=>{const e=Bx();e&&Hu(Bk,"Visibility state changed to "+e.visibilityState),this.F_.y_()},this._c=e;const t=Bx();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Bx();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new ap;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(0!==this.Zu.length){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!lf(e))throw e;Hu(Bk,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(e=>{throw this.tc=e,this.nc=!1,Ku("INTERNAL UNHANDLED ERROR: ",Fk(e)),e}).then(e=>(this.nc=!1,e))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const r=Aw.createAndSchedule(this,e,t,i,e=>this.lc(e));return this.ec.push(r),r}ac(){this.tc&&tp(47125,{hc:Fk(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do{e=this._c,await e}while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function Fk(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}function Wk(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const i=e;for(const e of t)if(e in i&&"function"==typeof i[e])return!0;return!1}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,["next","error","complete"])}class Yk extends Lk{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new jk,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new jk(e),this._firestoreClient=void 0,await e}}}function Gk(e,t){const i="object"==typeof e?e:Ns(),r="string"==typeof e?e:ig,n=As(i,"firestore").getImmediate({identifier:r});if(!n._initialized){const e=Wn("firestore");e&&zk(n,...e)}return n}function Hk(e){if(e._terminated)throw new sp(op.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Kk(e),e._firestoreClient}function Kk(e){var t,i,r;const n=e._freezeSettings(),o=function(e,t,i,r){return new tg(e,t,i,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Qk(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._componentsProvider||(null===(i=n.localCache)||void 0===i?void 0:i._offlineComponentProvider)&&(null===(r=n.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:n.localCache._offlineComponentProvider,_online:n.localCache._onlineComponentProvider}),e._firestoreClient=new Pk(e._authCredentials,e._appCheckCredentials,e._queue,o,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}function Jk(e,t){Ju("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=e._freezeSettings();return function(e,t,i){if((e=Mp(e,Yk))._firestoreClient||e._terminated)throw new sp(op.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(e._componentsProvider||e._getSettings().localCache)throw new sp(op.FAILED_PRECONDITION,"SDK cache is already specified.");e._componentsProvider={_online:t,_offline:i},Kk(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,_k.provider,{build:e=>new Sk(e,i.cacheSizeBytes,null==t?void 0:t.forceOwnership)}),Promise.resolve()}class eS{constructor(e){this._byteString=e}static fromBase64String(e){try{return new eS(Xm.fromBase64String(e))}catch(e){throw new sp(op.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new eS(Xm.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:eS._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Lp(e,eS._jsonSchema))return eS.fromBase64String(e.bytes)}}eS._jsonSchemaVersion="firestore/bytes/1.0",eS._jsonSchema={type:Np("string",eS._jsonSchemaVersion),bytes:Np("string")};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class tS{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new sp(op.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ep(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e){this._methodName=e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new sp(op.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new sp(op.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return yp(this._lat,e._lat)||yp(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:rS._jsonSchemaVersion}}static fromJSON(e){if(Lp(e,rS._jsonSchema))return new rS(e.latitude,e.longitude)}}rS._jsonSchemaVersion="firestore/geoPoint/1.0",rS._jsonSchema={type:Np("string",rS._jsonSchemaVersion),latitude:Np("number"),longitude:Np("number")};
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class nS{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:nS._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Lp(e,nS._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new nS(e.vectorValues);throw new sp(op.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}nS._jsonSchemaVersion="firestore/vectorValue/1.0",nS._jsonSchema={type:Np("string",nS._jsonSchemaVersion),vectorValues:Np("object")};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const oS=/^__.*__$/;class sS{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return null!==this.fieldMask?new pO(e,this.data,this.fieldMask,t,this.fieldTransforms):new uO(e,this.data,t,this.fieldTransforms)}}class aS{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new pO(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function lS(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tp(40011,{Ec:e})}}class cS{constructor(e,t,i,r,n,o){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,void 0===n&&this.Ac(),this.fieldTransforms=n||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new cS(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Rc({path:i,mc:!1});return r.fc(e),r}gc(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Rc({path:i,mc:!1});return r.Ac(),r}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return wS(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(0===e.length)throw this.wc("Document fields must not be empty");if(lS(this.Ec)&&oS.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class dS{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||jx(e)}Dc(e,t,i,r=!1){return new cS({Ec:e,methodName:t,bc:i,path:Ep.emptyPath(),mc:!1,Sc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function hS(e){const t=e._freezeSettings(),i=jx(e._databaseId);return new dS(e._databaseId,!!t.ignoreUndefinedProperties,i)}function uS(e,t,i,r,n,o={}){const s=e.Dc(o.merge||o.mergeFields?2:0,t,i,n);OS("Data must be an object, but it was:",s,r);const a=gS(r,s);let l,c;if(o.merge)l=new Um(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const n=yS(t,r,i);if(!s.contains(n))throw new sp(op.INVALID_ARGUMENT,`Field '${n}' is specified in your field mask but missing from your input data.`);kS(e,n)||e.push(n)}l=new Um(e),c=s.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=s.fieldTransforms;return new sS(new Qg(a),l,c)}class pS extends iS{_toFieldTransform(e){if(2!==e.Ec)throw 1===e.Ec?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof pS}}function fS(e,t,i,r=!1){return mS(i,e.Dc(r?4:3,t))}function mS(e,t){if(vS(e=bo(e)))return OS("Unsupported field value:",t,e),gS(e,t);if(e instanceof iS)return function(e,t){if(!lS(t.Ec))throw t.wc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.wc(`${e._methodName}() is not currently supported inside arrays`);const i=e._toFieldTransform(t);i&&t.fieldTransforms.push(i)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.mc&&4!==t.Ec)throw t.wc("Nested arrays are not supported");return function(e,t){const i=[];let r=0;for(const n of e){let e=mS(n,t.yc(r));null==e&&(e={nullValue:"NULL_VALUE"}),i.push(e),r++}return{arrayValue:{values:i}}}(e,t)}return function(e,t){if(null===(e=bo(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Xv(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const i=Up.fromDate(e);return{timestampValue:BO(t.serializer,i)}}if(e instanceof Up){const i=new Up(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:BO(t.serializer,i)}}if(e instanceof rS)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof eS)return{bytesValue:jO(t.serializer,e._byteString)};if(e instanceof Uk){const i=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(i))throw t.wc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:YO(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof nS)return function(e,t){return{mapValue:{fields:{[ng]:{stringValue:ag},[lg]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.wc("VectorValues must only contain numeric values.");return Uv(t.serializer,e)})}}}}}}(e,t);throw t.wc(`Unsupported field value: ${Dp(e)}`)}(e,t)}function gS(e,t){const i={};return Rm(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Qm(e,(e,r)=>{const n=mS(r,t.Vc(e));null!=n&&(i[e]=n)}),{mapValue:{fields:i}}}function vS(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Up||e instanceof rS||e instanceof eS||e instanceof Uk||e instanceof iS||e instanceof nS)}function OS(e,t,i){if(!vS(i)||!Rp(i)){const r=Dp(i);throw"an object"===r?t.wc(e+" a custom object"):t.wc(e+" "+r)}}function yS(e,t,i){if((t=bo(t))instanceof tS)return t._internalPath;if("string"==typeof t)return xS(e,t);throw wS("Field path arguments must be of type string or ",e,!1,void 0,i)}const bS=new RegExp("[~\\*/\\[\\]]");function xS(e,t,i){if(t.search(bS)>=0)throw wS(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,i);try{return new tS(...t.split("."))._internalPath}catch(r){throw wS(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,i)}}function wS(e,t,i,r,n){const o=r&&!r.isEmpty(),s=void 0!==n;let a=`Function ${t}() called with invalid data`;i&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${r}`),s&&(l+=` in document ${n}`),l+=")"),new sp(op.INVALID_ARGUMENT,a+e+l)}function kS(e,t){return e.some(e=>e.isEqual(t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e,t,i,r,n){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=n}get id(){return this._key.path.lastSegment()}get ref(){return new Uk(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new _S(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(TS("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class _S extends SS{data(){return super.data()}}function TS(e,t){return"string"==typeof t?xS(e,t):t instanceof tS?t._internalPath:t._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CS(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new sp(op.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class PS{}class ES extends PS{}class $S extends ES{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new $S(e,t,i)}_apply(e){const t=this._parse(e);return VS(e._query,t),new Vk(e.firestore,e.converter,bv(e._query,t))}_parse(e){const t=hS(e.firestore),i=function(e,t,i,r,n,o,s){let a;if(n.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new sp(op.INVALID_ARGUMENT,`Invalid Query. You can't perform '${o}' queries on documentId().`);if("in"===o||"not-in"===o){zS(s,o);const t=[];for(const i of s)t.push(LS(r,e,i));a={arrayValue:{values:t}}}else a=LS(r,e,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||zS(s,o),a=fS(i,t,s,"in"===o||"not-in"===o);return qg.create(n,o,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return i}}function AS(e,t,i){const r=t,n=TS("where",e);return $S._create(n,r,i)}class IS extends PS{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new IS(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:Xg.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let i=e;const r=t.getFlattenedFilters();for(const e of r)VS(i,e),i=bv(i,e)}(e._query,t),new Vk(e.firestore,e.converter,bv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class QS extends ES{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new QS(e,t)}_apply(e){const t=function(e,t,i){if(null!==e.startAt)throw new sp(op.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new sp(op.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new zg(t,i)}(e._query,this._field,this._direction);return new Vk(e.firestore,e.converter,function(e,t){const i=e.explicitOrderBy.concat([t]);return new fv(e.path,e.collectionGroup,i,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function RS(e,t="asc"){const i=t,r=TS("orderBy",e);return QS._create(r,i)}class DS extends ES{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new DS(e,t,i)}_apply(e){return new Vk(e.firestore,e.converter,xv(e._query,this._limit,this._limitType))}}function MS(e){return function(e,t){if(t<=0)throw new sp(op.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}("limit",e),DS._create("limit",e,"F")}class NS extends ES{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new NS(e,t,i)}_apply(e){const t=function(e,t,i,r){if(i[0]=bo(i[0]),i[0]instanceof SS)return function(e,t,i,r,n){if(!r)throw new sp(op.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${i}().`);const o=[];for(const i of Ov(e))if(i.field.isKeyField())o.push(yg(t,r.key));else{const e=r.data.field(i.field);if(Km(e))throw new sp(op.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+i.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=i.field.canonicalString();throw new sp(op.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}o.push(e)}return new Mg(o,n)}(e._query,e.firestore._databaseId,t,i[0]._document,r);{const n=hS(e.firestore);return function(e,t,i,r,n,o){const s=e.explicitOrderBy;if(n.length>s.length)throw new sp(op.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let o=0;o<n.length;o++){const l=n[o];if(s[o].field.isKeyField()){if("string"!=typeof l)throw new sp(op.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof l}`);if(!vv(e)&&-1!==l.indexOf("/"))throw new sp(op.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${r}() must be a plain document ID, but '${l}' contains a slash.`);const i=e.path.child(Cp.fromString(l));if(!$p.isDocumentKey(i))throw new sp(op.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${r}() must result in a valid document path, but '${i}' is not because it contains an odd number of segments.`);const n=new $p(i);a.push(yg(t,n))}else{const e=fS(i,r,l);a.push(e)}}return new Mg(a,o)}(e._query,e.firestore._databaseId,n,t,i,r)}}(e,this.type,this._docOrFields,this._inclusive);return new Vk(e.firestore,e.converter,function(e,t){return new fv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}function LS(e,t,i){if("string"==typeof(i=bo(i))){if(""===i)throw new sp(op.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vv(t)&&-1!==i.indexOf("/"))throw new sp(op.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${i}' contains a '/' character.`);const r=t.path.child(Cp.fromString(i));if(!$p.isDocumentKey(r))throw new sp(op.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return yg(e,new $p(r))}if(i instanceof Uk)return yg(e,i._key);throw new sp(op.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Dp(i)}.`)}function zS(e,t){if(!Array.isArray(e)||0===e.length)throw new sp(op.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function VS(e,t){const i=function(e,t){for(const i of e)for(const e of i.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new sp(op.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new sp(op.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${i.toString()}' filters.`)}class US{convertValue(e,t="none"){switch(dg(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jm(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Fm(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw tp(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Qm(e,(e,r)=>{i[e]=this.convertValue(r,t)}),i}convertVectorValue(e){var t,i,r;const n=null===(r=null===(i=null===(t=e.fields)||void 0===t?void 0:t[lg].arrayValue)||void 0===i?void 0:i.values)||void 0===r?void 0:r.map(e=>jm(e.doubleValue));return new nS(n)}convertGeoPoint(e){return new rS(jm(e.latitude),jm(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Jm(e);return null==i?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(eg(e));default:return null}}convertTimestamp(e){const t=Bm(e);return new Up(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Cp.fromString(e);rp(Oy(i),9688,{name:e});const r=new rg(i.get(1),i.get(3)),n=new $p(i.popFirst(5));return r.isEqual(t)||Ku(`Document ${n} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),n}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qS(e,t,i){let r;return r=e?i&&(i.merge||i.mergeFields)?e.toFirestore(t,i):e.toFirestore(t):t,r}class XS{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ZS extends SS{constructor(e,t,i,r,n,o){super(e,t,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=n}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new BS(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(TS("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new sp(op.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ZS._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}ZS._jsonSchemaVersion="firestore/documentSnapshot/1.0",ZS._jsonSchema={type:Np("string",ZS._jsonSchemaVersion),bundleSource:Np("string","DocumentSnapshot"),bundleName:Np("string"),bundle:Np("string")};class BS extends ZS{data(e={}){return super.data(e)}}class jS{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new XS(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new BS(this._firestore,this._userDataWriter,i.key,i,new XS(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new sp(op.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(i=>{const r=new BS(e._firestore,e._userDataWriter,i.doc.key,i.doc,new XS(e._snapshot.mutatedKeys.has(i.doc.key),e._snapshot.fromCache),e.query.converter);return i.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let i=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new BS(e._firestore,e._userDataWriter,t.doc.key,t.doc,new XS(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let n=-1,o=-1;return 0!==t.type&&(n=i.indexOf(t.doc.key),i=i.delete(t.doc.key)),1!==t.type&&(i=i.add(t.doc),o=i.indexOf(t.doc.key)),{type:FS(t.type),doc:r,oldIndex:n,newIndex:o}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new sp(op.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=jS._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Op.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),i.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function FS(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tp(61501,{type:e})}}jS._jsonSchemaVersion="firestore/querySnapshot/1.0",jS._jsonSchema={type:Np("string",jS._jsonSchemaVersion),bundleSource:Np("string","QuerySnapshot"),bundleName:Np("string"),bundle:Np("string")};class WS extends US{constructor(e){super(),this.firestore=e}convertBytes(e){return new eS(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Uk(this.firestore,null,t)}}function YS(e){e=Mp(e,Vk);const t=Mp(e.firestore,Yk),i=Hk(t),r=new WS(t);return CS(e._query),function(e,t,i={}){const r=new ap;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,i,r,n){const o=new Tk({next:i=>{o.Ou(),t.enqueueAndForget(()=>Vw(e,s)),i.fromCache&&"server"===r.source?n.reject(new sp(op.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):n.resolve(i)},error:e=>n.reject(e)}),s=new jw(i,o,{includeMetadataChanges:!0,ka:!0});return zw(e,s)}(await Ik(e),e.asyncQueue,t,i,r)),r.promise}(i,e._query).then(i=>new jS(t,r,e,i))}function GS(e,t,i){e=Mp(e,Uk);const r=Mp(e.firestore,Yk),n=qS(e.converter,t,i);return JS(r,[uS(hS(r),"setDoc",e._key,n,null!==e.converter,i).toMutation(e._key,nO.none())])}function HS(e,t,i,...r){e=Mp(e,Uk);const n=Mp(e.firestore,Yk),o=hS(n);let s;return s="string"==typeof(t=bo(t))||t instanceof tS?function(e,t,i,r,n,o){const s=e.Dc(1,t,i),a=[yS(t,r,i)],l=[n];if(o.length%2!=0)throw new sp(op.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<o.length;e+=2)a.push(yS(t,o[e])),l.push(o[e+1]);const c=[],d=Qg.empty();for(let e=a.length-1;e>=0;--e)if(!kS(c,a[e])){const t=a[e];let i=l[e];i=bo(i);const r=s.gc(t);if(i instanceof pS)c.push(t);else{const e=mS(i,r);null!=e&&(c.push(t),d.set(t,e))}}const h=new Um(c);return new aS(d,h,s.fieldTransforms)}(o,"updateDoc",e._key,t,i,r):function(e,t,i,r){const n=e.Dc(1,t,i);OS("Data must be an object, but it was:",n,r);const o=[],s=Qg.empty();Qm(r,(e,r)=>{const a=xS(t,e,i);r=bo(r);const l=n.gc(a);if(r instanceof pS)o.push(a);else{const e=mS(r,l);null!=e&&(o.push(a),s.set(a,e))}});const a=new Um(o);return new aS(s,a,n.fieldTransforms)}(o,"updateDoc",e._key,t),JS(n,[s.toMutation(e._key,nO.exists(!0))])}function KS(e,...t){var i,r,n;e=bo(e);let o={includeMetadataChanges:!1,source:"default"},s=0;"object"!=typeof t[s]||Wk(t[s])||(o=t[s++]);const a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Wk(t[s])){const e=t[s];t[s]=null===(i=e.next)||void 0===i?void 0:i.bind(e),t[s+1]=null===(r=e.error)||void 0===r?void 0:r.bind(e),t[s+2]=null===(n=e.complete)||void 0===n?void 0:n.bind(e)}let l,c,d;if(e instanceof Uk)c=Mp(e.firestore,Yk),d=mv(e._key.path),l={next:i=>{t[s]&&t[s](function(e,t,i){const r=i.docs.get(t._key),n=new WS(e);return new ZS(e,n,t._key,r,new XS(i.hasPendingWrites,i.fromCache),t.converter)}(c,e,i))},error:t[s+1],complete:t[s+2]};else{const i=Mp(e,Vk);c=Mp(i.firestore,Yk),d=i._query;const r=new WS(c);l={next:e=>{t[s]&&t[s](new jS(c,r,i,e))},error:t[s+1],complete:t[s+2]},CS(e._query)}return function(e,t,i,r){const n=new Tk(r),o=new jw(t,n,i);return e.asyncQueue.enqueueAndForget(async()=>zw(await Ik(e),o)),()=>{n.Ou(),e.asyncQueue.enqueueAndForget(async()=>Vw(await Ik(e),o))}}(Hk(c),d,a,l)}function JS(e,t){return function(e,t){const i=new ap;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,i){const r=xk(e);try{const e=await function(e,t){const i=np(e),r=Up.now(),n=t.reduce((e,t)=>e.add(t.key),zv());let o,s;return i.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=$v(),l=zv();return i.Os.getEntries(e,n).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>i.localDocuments.getOverlayedDocuments(e,a)).next(n=>{o=n;const s=[];for(const e of t){const t=dO(e,o.get(e.key).overlayedDocument);null!=t&&s.push(new pO(e.key,t,Rg(t.value.mapValue),nO.exists(!0)))}return i.mutationQueue.addMutationBatch(e,r,s,t)}).next(t=>{s=t;const r=t.applyToLocalDocumentSet(o,l);return i.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:s.batchId,changes:Qv(o)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,i){let r=e.Ru[e.currentUser.toKey()];r||(r=new Dm(yp)),r=r.insert(t,i),e.Ru[e.currentUser.toKey()]=r}(r,e.batchId,i),await vk(r,e.changes),await yw(r.remoteStore)}catch(e){const t=Iw(e,"Failed to persist write");i.reject(t)}}(await function(e){return Ak(e).then(e=>e.syncEngine)}(e),t,i)),i.promise}(Hk(e),t)}!function(e,t=!0){!function(e){Wu=e}(Ds),$s(new xo("firestore",(e,{instanceIdentifier:i,options:r})=>{const n=e.getProvider("app").getImmediate(),o=new Yk(new hp(e.getProvider("auth-internal")),new mp(n,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new sp(op.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rg(e.options.projectId,t)}(n,i),n);return r=Object.assign({useFetchStreams:t},r),o._setSettings(r),o},"PUBLIC").setMultipleInstances(!0)),Ls(Bu,ju,e),Ls(Bu,ju,"esm2017")}();function e_(e,t){const i={};for(const r in e)e.hasOwnProperty(r)&&(i[r]=t(e[r]));return i}function t_(e){if(null==e)return null;if(e instanceof Number&&(e=e.valueOf()),"number"==typeof e&&isFinite(e))return e;if(!0===e||!1===e)return e;if("[object String]"===Object.prototype.toString.call(e))return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(e=>t_(e));if("function"==typeof e||"object"==typeof e)return e_(e,e=>t_(e));throw new Error("Data cannot be encoded in JSON: "+e)}function i_(e){if(null==e)return e;if(e["@type"])switch(e["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(e=>i_(e)):"function"==typeof e||"object"==typeof e?e_(e,e=>i_(e)):e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_="functions",n_={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_ extends co{constructor(e,t,i){super(`${r_}/${e}`,t||""),this.details=i,Object.setPrototypeOf(this,o_.prototype)}}function s_(e,t){let i,r=function(e){if(e>=200&&e<300)return"ok";switch(e){case 0:case 500:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(e),n=r;try{const e=t&&t.error;if(e){const t=e.status;if("string"==typeof t){if(!n_[t])return new o_("internal","internal");r=n_[t],n=t}const o=e.message;"string"==typeof o&&(n=o),i=e.details,void 0!==i&&(i=i_(i))}}catch(e){}return"ok"===r?null:new o_(r,n,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(e,t,i,r){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Is(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||t.get().then(e=>this.auth=e,()=>{}),this.messaging||i.get().then(e=>this.messaging=e,()=>{}),this.appCheck||null==r||r.get().then(e=>this.appCheck=e,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return null==e?void 0:e.accessToken}catch(e){return}}async getMessagingToken(){if(this.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return await this.messaging.getToken()}catch(e){return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){return{authToken:await this.getAuthToken(),messagingToken:await this.getMessagingToken(),appCheckToken:await this.getAppCheckToken(e)}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_="us-central1",c_=/^data: (.*?)(?:\n|$)/;class d_{constructor(e,t,i,r,n=l_,o=(...e)=>fetch(...e)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new a_(e,t,i,r),this.cancelAllRequests=new Promise(e=>{this.deleteService=()=>Promise.resolve(e())});try{const e=new URL(n);this.customDomain=e.origin+("/"===e.pathname?"":e.pathname),this.region=l_}catch(e){this.customDomain=null,this.region=n}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;if(null!==this.emulatorOrigin){return`${this.emulatorOrigin}/${t}/${this.region}/${e}`}return null!==this.customDomain?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function h_(e,t,i){const r=i=>function(e,t,i,r){const n=e._url(t);return async function(e,t,i,r){i=t_(i);const n={data:i},o=await p_(e,r),s=r.timeout||7e4,a=function(e){let t=null;return{promise:new Promise((i,r)=>{t=setTimeout(()=>{r(new o_("deadline-exceeded","deadline-exceeded"))},e)}),cancel:()=>{t&&clearTimeout(t)}}}(s),l=await Promise.race([u_(t,n,o,e.fetchImpl),a.promise,e.cancelAllRequests]);if(a.cancel(),!l)throw new o_("cancelled","Firebase Functions instance was deleted.");const c=s_(l.status,l.json);if(c)throw c;if(!l.json)throw new o_("internal","Response is not valid JSON object.");let d=l.json.data;void 0===d&&(d=l.json.result);if(void 0===d)throw new o_("internal","Response is missing data field.");return{data:i_(d)}}(e,n,i,r)}(e,t,i,{});return r.stream=(i,r)=>function(e,t,i,r){const n=e._url(t);return async function(e,t,i,r){var n;i=t_(i);const o={data:i},s=await p_(e,r);let a,l,c;s["Content-Type"]="application/json",s.Accept="text/event-stream";try{a=await e.fetchImpl(t,{method:"POST",body:JSON.stringify(o),headers:s,signal:null==r?void 0:r.signal})}catch(e){if(e instanceof Error&&"AbortError"===e.name){const e=new o_("cancelled","Request was cancelled.");return{data:Promise.reject(e),stream:{[Symbol.asyncIterator]:()=>({next:()=>Promise.reject(e)})}}}const t=s_(0,null);return{data:Promise.reject(t),stream:{[Symbol.asyncIterator]:()=>({next:()=>Promise.reject(t)})}}}const d=new Promise((e,t)=>{l=e,c=t});null===(n=null==r?void 0:r.signal)||void 0===n||n.addEventListener("abort",()=>{const e=new o_("cancelled","Request was cancelled.");c(e)});const h=function(e,t,i,r){const n=(e,r)=>{const n=e.match(c_);if(!n)return;const o=n[1];try{const e=JSON.parse(o);if("result"in e)return void t(i_(e.result));if("message"in e)return void r.enqueue(i_(e.message));if("error"in e){const t=s_(0,e);return r.error(t),void i(t)}}catch(e){if(e instanceof o_)return r.error(e),void i(e)}},o=new TextDecoder;return new ReadableStream({start(t){let s="";return a();async function a(){if(null==r?void 0:r.aborted){const e=new o_("cancelled","Request was cancelled");return t.error(e),i(e),Promise.resolve()}try{const{value:l,done:c}=await e.read();if(c)return s.trim()&&n(s.trim(),t),void t.close();if(null==r?void 0:r.aborted){const r=new o_("cancelled","Request was cancelled");return t.error(r),i(r),void await e.cancel()}s+=o.decode(l,{stream:!0});const d=s.split("\n");s=d.pop()||"";for(const e of d)e.trim()&&n(e.trim(),t);return a()}catch(e){const r=e instanceof o_?e:s_(0,null);t.error(r),i(r)}}},cancel:()=>e.cancel()})}(a.body.getReader(),l,c,null==r?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const e=h.getReader();return{async next(){const{value:t,done:i}=await e.read();return{value:t,done:i}},return:async()=>(await e.cancel(),{done:!0,value:void 0})}}},data:d}}(e,n,i,r||{})}(e,t,i,r),r}async function u_(e,t,i,r){let n;i["Content-Type"]="application/json";try{n=await r(e,{method:"POST",body:JSON.stringify(t),headers:i})}catch(e){return{status:0,json:null}}let o=null;try{o=await n.json()}catch(e){}return{status:n.status,json:o}}async function p_(e,t){const i={},r=await e.contextProvider.getContext(t.limitedUseAppCheckTokens);return r.authToken&&(i.Authorization="Bearer "+r.authToken),r.messagingToken&&(i["Firebase-Instance-ID-Token"]=r.messagingToken),null!==r.appCheckToken&&(i["X-Firebase-AppCheck"]=r.appCheckToken),i}const f_="@firebase/functions",m_="0.12.9";function g_(e,t,i){!function(e,t,i){const r=Kn(t);e.emulatorOrigin=`http${r?"s":""}://${t}:${i}`,r&&(Jn(e.emulatorOrigin),ro("Functions",!0))}(bo(e),t,i)}!function(e){$s(new xo(r_,(e,{instanceIdentifier:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),n=e.getProvider("messaging-internal"),o=e.getProvider("app-check-internal");return new d_(i,r,n,o,t)},"PUBLIC").setMultipleInstances(!0)),Ls(f_,m_,e),Ls(f_,m_,"esm2017")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */();function v_(e){return e?.host??"127.0.0.1"}function O_(e){if(!e||"number"!=typeof e.port)throw new Error("[firebase-emulators] Emulator configuration requires a numeric port.");return e.port}function y_(e){return v_(e)}function b_(e){return O_(e)}const x_=new WeakSet;let w_=null;function k_(e){return Au(e)}function S_(e,t,i=!0){x_.has(e)||(Fd(e,function(e){return`${e.secure?"https":"http"}://${v_(e)}:${O_(e)}`}(t),{disableWarnings:i}),x_.add(e))}function __(e,t){return k_(e).onAuthStateChanged(t)}async function T_(e,t,i){return async function(e,t,i){if(Is(e.app))return Promise.reject(Qc(e));const r=Nd(e),n=jd(r,{returnSecureToken:!0,email:t,password:i,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",hh),o=await n.catch(t=>{throw"auth/password-does-not-meet-requirements"===t.code&&vh(e),t}),s=await uh._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(s.user),s}(e,t,i)}async function C_(e){return function(e){return bo(e).signOut()}(e)}async function P_(e,t){return async function(e,t){const i=Nd(e),r={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};await jd(i,r,"getOobCode",Jd)}(e,t)}async function E_(e,t=[]){const i=function(e=[]){return w_||(w_=new lh),e.forEach(e=>w_.addScope(e)),w_}(t);return Wh(e,i)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Ls("firebase","11.10.0","app");const $_=new Map;function A_(e,t="[DEFAULT]"){const i=$_.get(t);if(i)return I_(t,i.config,e),i.app;const r=Array.from(Ts.values()).find(e=>e.name===t);if(r)return $_.set(t,{app:r,config:e}),I_(t,r.options,e),r;const n=Ms(e,t);return $_.set(t,{app:n,config:e}),n}function I_(e,t,i){(function(e,t){if(!e||!t)return!1;return Q_.every(i=>e[i]===t[i])})(t,i)||console.warn(`[firebase-app] Firebase app "${e}" already initialized with a different configuration. Subsequent calls will reuse the original instance. Ensure this is intentional.`)}const Q_=["apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId"];const R_=new WeakSet;function D_(e){return Gk(e)}function M_(e,t){R_.has(e)||(zk(e,y_(t),b_(t)),R_.add(e))}const N_=new WeakSet;async function L_(e){if(N_.has(e))return!0;try{return await Jk(e,{forceOwnership:!1}),N_.add(e),console.log("[firebase/firestore] Offline persistence enabled successfully"),!0}catch(t){const i=t?.code;return"failed-precondition"===i?(console.warn("[firebase/firestore] Offline persistence is already enabled in another tab. Continuing with memory cache."),N_.add(e),!1):"unimplemented"===i?(console.warn("[firebase/firestore] Offline persistence is not supported in this environment. Continuing with memory cache."),N_.add(e),!1):(console.warn("[firebase/firestore] Failed to enable offline persistence. Continuing with memory cache:",t),N_.add(e),!1)}}const z_=new WeakSet;function V_(e,t="us-central1"){return function(e=Ns(),t=l_){const i=As(bo(e),r_).getImmediate({identifier:t}),r=Wn("functions");return r&&g_(i,...r),i}(e,t)}function U_(e,t,i){return function(e,t){return h_(bo(e),t)}(e,t)}const q_={apiKey:"VITE_FIREBASE_API_KEY",authDomain:"VITE_FIREBASE_AUTH_DOMAIN",projectId:"VITE_FIREBASE_PROJECT_ID",storageBucket:"VITE_FIREBASE_STORAGE_BUCKET",messagingSenderId:"VITE_FIREBASE_MESSAGING_SENDER_ID",appId:"VITE_FIREBASE_APP_ID"};function X_(){return function(){const e=[];for(const[t,i]of Object.entries(q_))({MODE:"production",PROD:!0,DEV:!1,VITE_USE_EMULATOR:"false",VITE_FIREBASE_EMULATOR_UI:"http://127.0.0.1:5400",VITE_FIREBASE_API_KEY:"AIzaSyCGaJKzrUv_TgD97QLt-ydGPBbpCyCnrEw",VITE_FIREBASE_AUTH_DOMAIN:"peg-2035.firebaseapp.com",VITE_FIREBASE_PROJECT_ID:"peg-2035",VITE_FIREBASE_STORAGE_BUCKET:"peg-2035.appspot.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"1039825199205",VITE_FIREBASE_APP_ID:"1:1039825199205:web:44d7dfd0f6f970c0ee668c"})[i]||e.push(`  - ${t} (set ${i} in .env)`);if(e.length>0)throw new Error(`Missing required Firebase environment variables:\n${e.join("\n")}\n\nPlease ensure you have a .env.local or .env.emulator file.\nCopy from .env.example to get started:\n  cp .env.example .env.local\n\nFor emulator mode: Placeholder values are sufficient.\nFor production: Use real values from Firebase Console.\n\nSee apps/df-app-starter-template/README.md for details.`)}(),{apiKey:"AIzaSyCGaJKzrUv_TgD97QLt-ydGPBbpCyCnrEw",authDomain:"peg-2035.firebaseapp.com",projectId:"peg-2035",storageBucket:"peg-2035.appspot.com",messagingSenderId:"1039825199205",appId:"1:1039825199205:web:44d7dfd0f6f970c0ee668c"}}const Z_={"fb-emulator":{auth:!1,firestore:!0,storage:!0,functions:!0,label:"Emulator Mode (fb-emulator)",description:"Using production authentication with local emulators for Firestore, Storage, and Functions."},"fb-cloud":{auth:!1,firestore:!1,storage:!1,functions:!1,label:"Cloud Mode (fb-cloud)",description:"All Firebase services are connected to the live cloud environment."}};function B_(){return Z_["fb-cloud"]}let j_=null,F_=null;function W_(e){F_=e}function Y_(){if(!j_){const e=X_();j_=A_(e)}return j_}function G_(e){return!0===function(){if(!F_)throw new Error("Emulator configuration not set. Call setEmulatorConfig() in your app entry point.\nExample:\n  import {setEmulatorConfig} from '@df/state/stores/firebase-init';\n  import {EMULATOR_CONFIG} from './config/firebase.config';\n  setEmulatorConfig(EMULATOR_CONFIG);");return F_}()[e]}const H_=Ln(null),K_=Ln("idle"),J_=Ln(null),eT=Ln(!1);let tT=!1,iT=null,rT=null,nT=null;async function oT(e){try{const t=await e.getIdToken(!0);localStorage.setItem("User",JSON.stringify(e)),sessionStorage.setItem("Authorization",`Bearer ${t}`),document.cookie=`authToken=${t}; path=/; secure; samesite=strict; max-age=3600`}catch(e){console.error("Error storing auth token:",e)}}function sT(){localStorage.removeItem("User"),sessionStorage.removeItem("Authorization"),document.cookie="authToken=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"}function aT(){if(tT)return;if(rT&&nT)return;const e=Y_();if(iT!==e||!nT){if(nT&&nT(),iT=e,rT=k_(e),tT=!1,G_("auth")){const e={host:globalThis.__DF_AUTH_EMULATOR_HOST__??"127.0.0.1",port:globalThis.__DF_AUTH_EMULATOR_PORT__??9155};S_(rT,e)}K_.set("loading"),nT=__(e,async e=>{H_.set(e),K_.set(e?"authenticated":"unauthenticated"),eT.set(!0),J_.set(null),e?await oT(e):sT()})}}const lT=zn(()=>({authUser:H_.get(),authState:K_.get(),error:J_.get(),initialized:eT.get()}));async function cT(e){if(aT(),!rT)throw new Error("Auth initialization failed");K_.set("loading"),J_.set(null);try{const t=await async function(e,t,i){return Oh(e,t,i)}(rT,e.email,e.password);H_.set(t.user),K_.set("authenticated"),await oT(t.user)}catch(e){K_.set("error");const t=e instanceof Error?e.message:"Sign in failed";throw J_.set(t),e}}async function dT(e){if(aT(),!rT)throw new Error("Auth initialization failed");K_.set("loading"),J_.set(null);try{const t=await T_(rT,e.email,e.password);e.displayName&&t.user&&await async function(e,t){return yh(e,t)}(t.user,{displayName:e.displayName}),H_.set(t.user),K_.set("authenticated"),await oT(t.user)}catch(e){K_.set("error");const t=e instanceof Error?e.message:"Sign up failed";throw J_.set(t),e}}async function hT(){if(aT(),!rT)throw new Error("Auth initialization failed");K_.set("loading"),J_.set(null);try{await C_(rT),H_.set(null),K_.set("unauthenticated"),sT()}catch(e){K_.set("error");const t=e instanceof Error?e.message:"Sign out failed";throw J_.set(t),e}}async function uT(e=[]){if(aT(),!rT)throw new Error("Auth initialization failed");K_.set("loading"),J_.set(null);try{const t=await E_(rT,e);H_.set(t.user),K_.set("authenticated"),await oT(t.user)}catch(e){K_.set("error");const t=e instanceof Error?e.message:"Google sign-in failed";throw J_.set(t),e}}class pT{collection;defaultConstraints;transforms;mapDocument;currentQuery;queryDescriptionSignal=Ln(null);documentsSignal=Ln([]);statusSignal=Ln("idle");errorSignal=Ln(null);lastUpdatedSignal=Ln(null);pageSizeSignal=Ln(10);pageIndexSignal=Ln(0);hasNextSignal=Ln(!1);hasPreviousSignal=Ln(!1);listeningSignal=Ln(!1);unsubscribeRealtime=null;pageAnchors=[null];pendingRequestId=0;state=zn(()=>({status:this.statusSignal.get(),documents:this.documentsSignal.get(),error:this.errorSignal.get(),isListening:this.listeningSignal.get(),lastUpdated:this.lastUpdatedSignal.get(),currentPage:this.pageIndexSignal.get()+1,pageSize:this.pageSizeSignal.get(),hasNextPage:this.hasNextSignal.get(),hasPreviousPage:this.hasPreviousSignal.get(),queryDescription:this.queryDescriptionSignal.get()}));constructor(e,t={}){this.collection=e,this.defaultConstraints=t.defaultConstraints??[],this.transforms={transformCreate:t.transformCreate,transformUpdate:t.transformUpdate},this.mapDocument=t.mapDocument,this.currentQuery=t.initialQuery??[],this.queryDescriptionSignal.set(t.defaultQueryDescription??null),this.pageSizeSignal.set(t.pageSize??10)}async loadInitialPage(){this.pageAnchors=[null],await this.loadPageAt(0)}async loadNextPage(){this.hasNextSignal.get()&&await this.loadPageAt(this.pageIndexSignal.get()+1)}async loadPreviousPage(){this.hasPreviousSignal.get()&&await this.loadPageAt(this.pageIndexSignal.get()-1)}async refresh(){await this.loadPageAt(this.pageIndexSignal.get())}async setQuery(e,t=null){this.currentQuery=e,this.queryDescriptionSignal.set(t),this.stopRealtime(),await this.loadInitialPage()}async setPageSize(e){if(e<=0)throw new Error("Page size must be positive");this.pageSizeSignal.get()!==e&&(this.pageSizeSignal.set(e),await this.loadInitialPage())}startRealtime(){this.stopRealtime();const e=this.buildQuery(this.pageIndexSignal.get());this.statusSignal.set("loading"),this.errorSignal.set(null),this.unsubscribeRealtime=KS(e,e=>{const t=this.processSnapshot(e.docs);this.documentsSignal.set(t.documents),this.hasNextSignal.set(t.hasNextPage),this.hasPreviousSignal.set(this.pageIndexSignal.get()>0),this.lastUpdatedSignal.set(Date.now()),this.statusSignal.set("ready"),t.anchor?this.pageAnchors[this.pageIndexSignal.get()+1]=t.anchor:this.pageAnchors=this.pageAnchors.slice(0,this.pageIndexSignal.get()+1)},e=>{this.statusSignal.set("error"),this.errorSignal.set(e.message??"Failed to listen for updates")}),this.listeningSignal.set(!0)}stopRealtime(){this.unsubscribeRealtime&&(this.unsubscribeRealtime(),this.unsubscribeRealtime=null),this.listeningSignal.set(!1)}async create(e){const t={...e},i=this.transforms.transformCreate?this.transforms.transformCreate(t):t,r=await function(e,t){const i=Mp(e.firestore,Yk),r=Zk(e),n=qS(e.converter,t);return JS(i,[uS(hS(e.firestore),"addDoc",r._key,n,null!==e.converter,{}).toMutation(r._key,nO.exists(!1))]).then(()=>r)}(this.collection,i);return r.id}async update(e,t){const i={...t},r=this.transforms.transformUpdate?this.transforms.transformUpdate(i):i;Object.keys(r).length&&await HS(Zk(this.collection,e),r)}async delete(e){await function(e){return JS(Mp(e.firestore,Yk),[new vO(e._key,nO.none())])}(Zk(this.collection,e))}async loadPageAt(e){this.pendingRequestId+=1;const t=this.pendingRequestId;this.stopRealtime(),this.statusSignal.set("loading"),this.errorSignal.set(null);try{const i=this.buildQuery(e),r=await YS(i);if(t!==this.pendingRequestId)return;const n=this.processSnapshot(r.docs);this.documentsSignal.set(n.documents),this.lastUpdatedSignal.set(Date.now()),this.hasNextSignal.set(n.hasNextPage),this.pageIndexSignal.set(e),this.hasPreviousSignal.set(e>0),n.anchor?this.pageAnchors[e+1]=n.anchor:this.pageAnchors=this.pageAnchors.slice(0,e+1),this.statusSignal.set("ready")}catch(e){if(t!==this.pendingRequestId)return;this.statusSignal.set("error"),this.errorSignal.set(e instanceof Error?e.message:"Failed to load documents")}}buildQuery(e){const t=[...this.defaultConstraints,...this.currentQuery],i=this.pageSizeSignal.get(),r=this.pageAnchors[e];return r&&t.push(function(...e){return NS._create("startAfter",e,!1)}(r)),t.push(MS(i+1)),function(e,t,...i){let r=[];t instanceof PS&&r.push(t),r=r.concat(i),function(e){const t=e.filter(e=>e instanceof IS).length,i=e.filter(e=>e instanceof $S).length;if(t>1||t>0&&i>0)throw new sp(op.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(r);for(const t of r)e=t._apply(e);return e}(this.collection,...t)}processSnapshot(e){const t=this.pageSizeSignal.get(),i=e.length>t,r=i?e.slice(0,t):e;return{documents:r.map(e=>this.hydrateDocument(e)),hasNextPage:i,anchor:r.length?r[r.length-1]:null}}hydrateDocument(e){const t=e.data(),i={id:e.id,...t};return this.mapDocument?this.mapDocument(i):i}}const fT={showCompleted:!0,priority:"all",tag:"all",search:""},mT=Ln({...fT}),gT=Ln({status:"idle",documents:[],error:null,isListening:!1,lastUpdated:null,currentPage:1,pageSize:5,hasNextPage:!1,hasPreviousPage:!1,queryDescription:"All todos"});let vT=null;const OT=Ln(null),yT=zn(()=>{const e=OT.get();return e?e.state.get():gT.get()}),bT=zn(()=>mT.get());async function xT(e,t){const i=_T(),r={};"string"==typeof t.title&&(r.title=t.title,r.titleLower=t.title.toLowerCase()),"string"==typeof t.description&&(r.description=t.description),"string"==typeof t.priority&&(r.priority=t.priority),Array.isArray(t.tags)&&(r.tags=t.tags),void 0!==t.dueDate&&(r.dueDate=t.dueDate),"boolean"==typeof t.completed&&(r.completed=t.completed),r.updatedAt=new Date,await i.update(e,r),await i.refresh()}async function wT(){const e=_T();await e.loadNextPage()}async function kT(e){mT.set({...mT.get(),...e}),await ST()}async function ST(){const e=_T(),t=mT.get(),i=[],r=[];t.showCompleted||(i.push(AS("completed","==",!1)),r.push("Incomplete only")),"all"!==t.priority&&(i.push(AS("priority","==",t.priority)),r.push(`Priority: ${t.priority}`)),"all"!==t.tag&&(i.push(AS("tags","array-contains",t.tag)),r.push(`Tag: ${t.tag}`));const n=r.length?r.join("  "):"All todos (newest first)";await e.setQuery(i,n)}function _T(){const e=OT.get();if(!e||!vT)throw new Error("Todo store has not been initialized. Call initializeTodosStore() first.");return e}function TT(e){const t=e.createdAt instanceof Up?e.createdAt.toDate():e.createdAt??null,i=e.updatedAt instanceof Up?e.updatedAt.toDate():e.updatedAt??null,r=e.dueDate instanceof Up?e.dueDate.toDate():e.dueDate??null;return{...e,createdAt:t,updatedAt:i,dueDate:r,titleLower:e.titleLower??e.title.toLowerCase()}}function CT(e){if(OT.get())throw new Error("Cannot set demo state after the todo store has been initialized.");gT.set(e)}function PT(e){if(OT.get())throw new Error("Cannot set demo filters after the todo store has been initialized.");mT.set(e)}if("object"==typeof globalThis){const e=globalThis;e.__dfSetTodoDemoState=CT,e.__dfSetTodoDemoFilters=PT}const ET=Ln({status:"idle",documents:[],error:null,isListening:!1,lastUpdated:null,currentPage:1,pageSize:50,hasNextPage:!1,hasPreviousPage:!1,queryDescription:"Latest messages"}),$T=Ln("idle"),AT=Ln(null),IT=Ln(null),QT=zn(()=>{const e=IT.get();return e?e.state.get():ET.get()}),RT=zn(()=>({status:$T.get(),error:AT.get()}));function DT(){throw IT.get(),new Error("Chat store has not been initialized. Call initializeChatStore() first.")}function MT(e,t){if(e&&e.trim())return e.trim();if(t&&t.trim()){const[e]=t.split("@");return e}return"Anonymous"}const NT=Ln("idle"),LT=Ln(0),zT=Ln(null),VT=Ln(null);let UT=null;function qT(){if(UT)return;const e=Y_();UT=function(e=Ns(),t){const i=As(e=bo(e),_l).getImmediate({identifier:t}),r=Wn("storage");return r&&Al(i,...r),i}(e),G_("storage")&&Al(UT,"127.0.0.1",9390)}function XT(){if(qT(),!UT)throw new Error("Storage initialization failed");return UT}async function ZT(e){const t=$l(XT(),e);await function(e){return Ol(e=bo(e))}(t)}async function BT(e){const t=await async function(e,t=100){const i=$l(XT(),e);return await Pl(i,{maxResults:t})}(e),i=[];for(const e of t.items)try{const t=await El(e),r=await Cl(e);i.push({name:e.name,path:e.fullPath,downloadUrl:t,size:r.size,contentType:r.contentType||"application/octet-stream",uploadedAt:new Date(r.timeCreated)})}catch(t){console.error(`Failed to get metadata for ${e.fullPath}:`,t)}return i}zn(()=>({status:NT.get(),progress:LT.get(),error:zT.get(),uploadedFile:VT.get()}));const jT=Ln(null),FT=Ln({status:"idle",data:null,error:null,lastCalled:null}),WT=Ln({status:"idle",data:null,error:null,lastCalled:null}),YT=Ln({status:"idle",data:null,error:null,lastCalled:null}),GT=zn(()=>FT.get()),HT=zn(()=>WT.get()),KT=zn(()=>YT.get());function JT(){let e=jT.get();if(!e){e=V_(Y_(),"us-central1"),G_("functions")&&function(e,t){z_.has(e)||(g_(e,y_(t),b_(t)),z_.add(e))}(e,{host:"127.0.0.1",port:5501}),jT.set(e)}return e}const eC={status:"idle",documents:[],error:null,isListening:!1,lastUpdated:null,currentPage:1,pageSize:20,hasNextPage:!1,hasPreviousPage:!1,queryDescription:"Awaiting authentication"},tC=Ln({...eC}),iC=Ln(null),rC=Ln(null),nC=Ln(null),oC=zn(()=>{const e=iC.get();return e?e.state.get():tC.get()}),sC=zn(()=>{const e=oC.get().documents,t=e.length,i=t>0?e[0].recordedAt??null:null,r={pushups:{count:0,totalValue:0},squats:{count:0,totalValue:0},plank:{count:0,totalValue:0},dumbbells:{count:0,totalValue:0},bands:{count:0,totalValue:0},hang:{count:0,totalValue:0}};return e.forEach(e=>{r[e.exerciseType].count+=1,r[e.exerciseType].totalValue+=e.value}),{totalExercises:t,entryCount:t,lastEntryAt:i,byType:r}});function aC(){const e=iC.get();e&&e.stopRealtime(),iC.set(null),rC.set(null),nC.set(null),tC.set({...eC})}function lC(e){const t=e.recordedAt instanceof Up?e.recordedAt.toDate():e.recordedAt??null,i=e.createdAt instanceof Up?e.createdAt.toDate():e.createdAt??null,r=e.updatedAt instanceof Up?e.updatedAt.toDate():e.updatedAt??null;return{...e,recordedAt:t,createdAt:i,updatedAt:r}}function cC(){const e=iC.get();if(!e)throw new Error("Exercise store has not been initialized. Call initializePushupStore() after authentication.");return e}function dC(){const e=nC.get();if(!e)throw new Error("Pushup actions require an authenticated user.");return e}function hC(e){if("string"!=typeof e)return null;const t=e.trim();return t.length?t:null}const uC={flowers:[{id:"rose",name:"Rose",description:"The classic symbol of love and passion",color:"red"},{id:"tulip",name:"Tulip",description:"Elegant spring flower",color:"purple"},{id:"sunflower",name:"Sunflower",description:"Bright and cheerful",color:"yellow"},{id:"orchid",name:"Orchid",description:"Exotic and mysterious",color:"white"},{id:"lily",name:"Lily",description:"Graceful and timeless",color:"pink"},{id:"daisy",name:"Daisy",description:"Simple and innocent",color:"white"},{id:"lavender",name:"Lavender",description:"Fragrant and calming",color:"purple"},{id:"marigold",name:"Marigold",description:"Warm and vibrant",color:"orange"},{id:"chrysanthemum",name:"Chrysanthemum",description:"Diverse and beautiful",color:"gold"},{id:"iris",name:"Iris",description:"Regal and noble",color:"blue"},{id:"peony",name:"Peony",description:"Lush and romantic",color:"pink"},{id:"daffodil",name:"Daffodil",description:"Spring herald",color:"yellow"}],continents:[{id:"asia",name:"Asia",population:"4.7 billion",area:"44.6 million km"},{id:"africa",name:"Africa",population:"1.4 billion",area:"30.4 million km"},{id:"north-america",name:"North America",population:"0.6 billion",area:"24.7 million km"},{id:"south-america",name:"South America",population:"0.4 billion",area:"17.8 million km"},{id:"antarctica",name:"Antarctica",population:"0",area:"14.2 million km"},{id:"europe",name:"Europe",population:"0.75 billion",area:"10.2 million km"},{id:"australia",name:"Australia",population:"0.026 billion",area:"7.7 million km"}],chemicalElements:[{id:"hydrogen",name:"Hydrogen",symbol:"H",atomicNumber:1,atomicMass:1.008},{id:"helium",name:"Helium",symbol:"He",atomicNumber:2,atomicMass:4.003},{id:"carbon",name:"Carbon",symbol:"C",atomicNumber:6,atomicMass:12.011},{id:"nitrogen",name:"Nitrogen",symbol:"N",atomicNumber:7,atomicMass:14.007},{id:"oxygen",name:"Oxygen",symbol:"O",atomicNumber:8,atomicMass:15.999},{id:"sodium",name:"Sodium",symbol:"Na",atomicNumber:11,atomicMass:22.99},{id:"iron",name:"Iron",symbol:"Fe",atomicNumber:26,atomicMass:55.845},{id:"copper",name:"Copper",symbol:"Cu",atomicNumber:29,atomicMass:63.546},{id:"silver",name:"Silver",symbol:"Ag",atomicNumber:47,atomicMass:107.868},{id:"gold",name:"Gold",symbol:"Au",atomicNumber:79,atomicMass:196.967},{id:"mercury",name:"Mercury",symbol:"Hg",atomicNumber:80,atomicMass:200.592},{id:"lead",name:"Lead",symbol:"Pb",atomicNumber:82,atomicMass:207.2},{id:"uranium",name:"Uranium",symbol:"U",atomicNumber:92,atomicMass:238.029}],musicalInstruments:[{id:"guitar",name:"Guitar",type:"String",family:"Stringed"},{id:"piano",name:"Piano",type:"Keyboard",family:"Percussion"},{id:"violin",name:"Violin",type:"String",family:"Stringed"},{id:"drums",name:"Drums",type:"Percussion",family:"Percussion"},{id:"trumpet",name:"Trumpet",type:"Brass",family:"Wind"},{id:"flute",name:"Flute",type:"Woodwind",family:"Wind"},{id:"saxophone",name:"Saxophone",type:"Woodwind",family:"Wind"},{id:"cello",name:"Cello",type:"String",family:"Stringed"},{id:"synthesizer",name:"Synthesizer",type:"Electronic",family:"Electronic"},{id:"harp",name:"Harp",type:"String",family:"Stringed"},{id:"clarinet",name:"Clarinet",type:"Woodwind",family:"Wind"},{id:"electric-guitar",name:"Electric Guitar",type:"String",family:"Stringed"}],todos:[{id:"plan-firestore-demo",title:"Plan Firestore Demo",titleLower:"plan firestore demo",description:"Outline the structure and key points",completed:!0,priority:"high",tags:["planning","demo"],createdAt:Up.fromDate(new Date("2024-01-15")),updatedAt:Up.fromDate(new Date("2024-01-16")),dueDate:Up.fromDate(new Date("2024-01-20"))},{id:"write-todo-copy",title:"Write Todo Copy",titleLower:"write todo copy",description:"Create engaging copy for todo items",completed:!1,priority:"medium",tags:["writing","ux"],createdAt:Up.fromDate(new Date("2024-01-16")),updatedAt:Up.fromDate(new Date("2024-01-16")),dueDate:Up.fromDate(new Date("2024-01-22"))},{id:"record-realtime-gif",title:"Record Realtime GIF",titleLower:"record realtime gif",description:"Capture realtime sync in action",completed:!1,priority:"high",tags:["demo","video"],createdAt:Up.fromDate(new Date("2024-01-17")),updatedAt:Up.fromDate(new Date("2024-01-17")),dueDate:Up.fromDate(new Date("2024-01-25"))},{id:"sync-seed-data",title:"Sync Seed Data",titleLower:"sync seed data",description:"Ensure all seed data is synchronized",completed:!1,priority:"medium",tags:["testing","data"],createdAt:Up.fromDate(new Date("2024-01-18")),updatedAt:Up.fromDate(new Date("2024-01-18")),dueDate:Up.fromDate(new Date("2024-01-28"))},{id:"add-pagination-tests",title:"Add Pagination Tests",titleLower:"add pagination tests",description:"Write comprehensive test suite",completed:!1,priority:"medium",tags:["testing","pagination"],createdAt:Up.fromDate(new Date("2024-01-19")),updatedAt:Up.fromDate(new Date("2024-01-19")),dueDate:Up.fromDate(new Date("2024-02-05"))},{id:"design-filter-menu",title:"Design Filter Menu",titleLower:"design filter menu",description:"Create intuitive filter interface",completed:!1,priority:"high",tags:["design","ux"],createdAt:Up.fromDate(new Date("2024-01-20")),updatedAt:Up.fromDate(new Date("2024-01-20")),dueDate:Up.fromDate(new Date("2024-02-10"))},{id:"document-offline",title:"Document Offline",titleLower:"document offline",description:"Write offline functionality docs",completed:!1,priority:"low",tags:["docs","offline"],createdAt:Up.fromDate(new Date("2024-01-21")),updatedAt:Up.fromDate(new Date("2024-01-21")),dueDate:Up.fromDate(new Date("2024-02-15"))},{id:"prep-query-examples",title:"Prep Query Examples",titleLower:"prep query examples",description:"Prepare example queries for docs",completed:!1,priority:"medium",tags:["docs","queries"],createdAt:Up.fromDate(new Date("2024-01-22")),updatedAt:Up.fromDate(new Date("2024-01-22")),dueDate:Up.fromDate(new Date("2024-02-12"))},{id:"review-accessibility",title:"Review Accessibility",titleLower:"review accessibility",description:"Ensure WCAG compliance",completed:!1,priority:"high",tags:["a11y","testing"],createdAt:Up.fromDate(new Date("2024-01-23")),updatedAt:Up.fromDate(new Date("2024-01-23")),dueDate:Up.fromDate(new Date("2024-02-01"))},{id:"publish-storybook",title:"Publish Storybook",titleLower:"publish storybook",description:"Deploy storybook to production",completed:!1,priority:"low",tags:["deployment","docs"],createdAt:Up.fromDate(new Date("2024-01-24")),updatedAt:Up.fromDate(new Date("2024-01-24")),dueDate:Up.fromDate(new Date("2024-02-20"))},{id:"draft-coaching-prompts",title:"Draft Coaching Prompts",titleLower:"draft coaching prompts",description:"Create coaching prompt library",completed:!1,priority:"medium",tags:["content","coaching"],createdAt:Up.fromDate(new Date("2024-01-25")),updatedAt:Up.fromDate(new Date("2024-01-25")),dueDate:Up.fromDate(new Date("2024-02-18"))},{id:"prep-live-coding",title:"Prep Live Coding",titleLower:"prep live coding",description:"Prepare live coding session",completed:!1,priority:"high",tags:["demo","live-coding"],createdAt:Up.fromDate(new Date("2024-01-26")),updatedAt:Up.fromDate(new Date("2024-01-26")),dueDate:Up.fromDate(new Date("2024-02-08"))}]};const pC=new class{statusSignal=Ln("idle");errorSignal=Ln(null);progressSignal=Ln(0);currentStepSignal=Ln("");isCompleteSignal=Ln(!1);state=zn(()=>({status:this.statusSignal.get(),error:this.errorSignal.get(),progress:this.progressSignal.get(),currentStep:this.currentStepSignal.get(),isComplete:this.isCompleteSignal.get()}));async seedFirestoreCollections(){this.statusSignal.set("loading"),this.errorSignal.set(null),this.progressSignal.set(0),this.isCompleteSignal.set(!1);try{const e=Gk(),t=Object.keys(uC),i=t.length;for(let r=0;r<t.length;r++){const n=t[r];this.currentStepSignal.set(`Seeding ${n}...`),await this.seedCollection(e,n,uC[n]);const o=Math.round((r+1)/i*100);this.progressSignal.set(o)}this.statusSignal.set("ready"),this.isCompleteSignal.set(!0),this.currentStepSignal.set("Seed data loaded successfully")}catch(e){this.statusSignal.set("error"),this.errorSignal.set(e instanceof Error?e.message:"Failed to seed data"),this.currentStepSignal.set("Error during seeding")}}async seedCollection(e,t,i){const r=Xk(e,t);for(const e of i){const{id:i,...n}=e;if("string"==typeof i)try{const e=Zk(r,i);await GS(e,n,{merge:!0})}catch(e){throw console.error(`Error seeding ${t}/${i}:`,e),e}}}reset(){this.statusSignal.set("idle"),this.errorSignal.set(null),this.progressSignal.set(0),this.currentStepSignal.set(""),this.isCompleteSignal.set(!1)}},fC=Ln([]),mC=Ln(!1),gC=Ln("");function vC(e,t){W_(B_())}zn(()=>({users:fC.get(),loading:mC.get(),error:gC.get()}));const OC=Ln(null),yC=Ln(0);const bC=Ln(!0);var xC=function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let wC=class extends(Nn(ve)){constructor(){super(),this.resourceLinkType="void",this.resourcePageType="void",this.linkUrl="",this.imageValid=!1,this.showUrlContainer=!1,this.showUploader=!1,this.showContent=!1,this.showLinkInput=!1,this.fileName="Select File to Upload",this.generatedLink="",this.disabledOptions=["Add","0"]}static{this.styles=l`
    :host {
      display: block;
      padding: 10px;
      font-family: 'Roboto', sans-serif;
      margin-top: 3px;
      --md-sys-color-primary: #5f9ea0;
    }

    div:first-of-type {
      display: flex;
      flex-direction: row; /* Aligns children in a row */
      align-items: center; /* Aligns items vertically in the center */
      gap: 10px; /* Adds space between elements */
    }

    .file-input-wrapper {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
      border-radius: 12px;
    }

    .file-label {
      height: 70px;
      border-radius: 12px;
      cursor: pointer;
      margin-right: 10px;
      font-size: 14px;
      white-space: nowrap;
      padding: 8px 16px;
      text-align: center;
      background-color: var(--md-sys-color-primary, #6200ea);
      color: var(--md-sys-color-on-primary, #ffffff);
      border: none;
      outline: none;
      line-height: 20px;
    }

    .file-input {
      display: none;
    }

    .input-container {
      display: flex;
      flex-direction: column;
      gap: 4px;
      max-width: 350px;
    }

    .thumbnail {
      height: 50px;
      object-fit: contain;
      border-radius: 12px;
      display: block;
    }

    .thumbnail.hidden {
      display: none;
    }

    df-segmented-button {
      display: inline-flex;
      flex-wrap: nowrap;
      white-space: nowrap;
      width: auto; /* Set width to auto to fit content */
    }
  `}async uploadFile(e){const t=e.target,i=t.files?t.files[0]:null;if(i&&bC.get()){const e=this.resourcePageType+"|"+this.resourceLinkType;this.fileName=i?i.name:"No screenshot chosen",OC.set(i),this.generatedLink=await async function(e){const t=OC.get();if(!t)throw new Error("No file to upload");return new Promise((i,r)=>{try{const n=XT(),o=Date.now(),s=Tl($l(n,`uploads/${e.replace(/\|/g,"/")}/${o}_${t.name}`),t);s.on("state_changed",e=>{const t=e.bytesTransferred/e.totalBytes;yC.set(1===t?0:Math.min(t+.1,1))},e=>{console.error("[df-upload-link-store] Upload failed:",e),yC.set(0),r(e)},async()=>{try{const e=await El(s.snapshot.ref);yC.set(0),i(e)}catch(e){console.error("[df-upload-link-store] Failed to get download URL:",e),yC.set(0),r(e)}})}catch(e){console.error("[df-upload-link-store] Upload initialization failed:",e),yC.set(0),r(e)}})}(e),this.linkUrl=this.generatedLink,this.showUrlContainer=!0,this.imageValid=!0,this.disabledOptions=["Site","Upload"],this.dispatchEvent(new CustomEvent("upload-link-gather-url",{detail:{linkUrl:this.linkUrl}}))}else console.error("No file selected or user not authenticated.")}handleInput(e){const t=e.target;this.linkUrl=t.value,this.validateImage()}validateImage(){const e=new Image;e.src=this.linkUrl,e.onload=()=>{this.imageValid=!0,this.showUrlContainer=!0,this.requestUpdate(),this.disabledOptions=["Site","Upload"],this.dispatchEvent(new CustomEvent("upload-link-gather-url",{detail:{linkUrl:this.linkUrl}}))},e.onerror=()=>{console.error("ERROR ON IMAGE"),this.imageValid=!1,this.requestUpdate()}}isValidUrl(e){try{return new URL(e),this.linkUrl=e,!0}catch{return!1}}handleSelectionChange(e){switch(e.detail.id){case"Upload":this.triggerUpload();break;case"Site":this.triggerLink();break;case"Add":this.triggerAdd();break;default:this.triggerNone()}}triggerUpload(){this.showContent=!0,this.showUrlContainer=!1,this.showUploader=!0,this.showLinkInput=!1}triggerLink(){this.showUrlContainer=!0,this.showUploader=!1,this.showContent=!0,this.showLinkInput=!0}triggerAdd(){this.dispatchEvent(new CustomEvent("upload-link-allocate",{detail:{linkUrl:this.linkUrl}})),this.disabledOptions=["Add","0"]}triggerNone(){this.showUrlContainer=!1,this.showUploader=!1,this.showContent=!1,this.showLinkInput=!1,this.disabledOptions=["Add","0"]}render(){return this.showUrlContainer=this.isValidUrl(this.generatedLink),this.showUrlContainer=!0,K`
      <div>Gather [${this.resourceLinkType}s]:
        <df-segmented-button
          @df-segmented-button-change=${this.handleSelectionChange}
          .disabledOptions=${this.disabledOptions}
        ></df-segmented-button>
        <div style="display: ${this.showContent?"flex":"none"};">
          <div style="display: ${this.showUploader?"block":"none"};">
            <label class="file-label">
              <span>${this.fileName}</span>
              <!-- md3-gap: native file input required to invoke OS file picker per MD3 upload guidelines -->
              <input type="file" class="file-input" @change="${this.uploadFile}"/>
            </label>
          </div>
          <a href="${this.generatedLink.valueOf()}" style="display: ${this.showUrlContainer?"block":"none"};"
             target="_blank"><img
            class="thumbnail" ${this.imageValid?"":"hidden"}"
              src=${this.imageValid?this.linkUrl:""}
            /></a>
          <md-outlined-text-field
            style="display: ${this.showLinkInput?"block":"none"};"
            label="URL" .value=${this.linkUrl}
            @input=${this.handleInput}></md-outlined-text-field>
          <md-circular-progress four-color value="${yC.get()}"></md-circular-progress>
        </div>
      </div>
    `}};xC([C()],wC.prototype,"resourceLinkType",void 0),xC([C()],wC.prototype,"resourcePageType",void 0),xC([C({type:String})],wC.prototype,"linkUrl",void 0),xC([C({type:Boolean})],wC.prototype,"imageValid",void 0),xC([P()],wC.prototype,"showUrlContainer",void 0),xC([P()],wC.prototype,"showUploader",void 0),xC([P()],wC.prototype,"showContent",void 0),xC([P()],wC.prototype,"showLinkInput",void 0),xC([P()],wC.prototype,"fileName",void 0),xC([P()],wC.prototype,"generatedLink",void 0),xC([P()],wC.prototype,"disabledOptions",void 0),wC=xC([i("df-upload-link")],wC);
/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class kC extends ii{computeValidity(e){return this.checkboxControl||(this.checkboxControl=document.createElement("input"),this.checkboxControl.type="checkbox"),this.checkboxControl.checked=e.checked,this.checkboxControl.required=e.required,{validity:this.checkboxControl.validity,validationMessage:this.checkboxControl.validationMessage}}equals(e,t){return e.checked===t.checked&&e.required===t.required}copy({checked:e,required:t}){return{checked:e,required:t}}}
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const SC=Ge(Bt(Wt(tt(ve))));class _C extends SC{constructor(){super(),this.checked=!1,this.indeterminate=!1,this.required=!1,this.value="on",this.prevChecked=!1,this.prevDisabled=!1,this.prevIndeterminate=!1,this.addEventListener("click",e=>{nt(e)&&this.input&&(this.focus(),rt(this.input))})}update(e){(e.has("checked")||e.has("disabled")||e.has("indeterminate"))&&(this.prevChecked=e.get("checked")??this.checked,this.prevDisabled=e.get("disabled")??this.disabled,this.prevIndeterminate=e.get("indeterminate")??this.indeterminate),super.update(e)}render(){const e=!this.prevChecked&&!this.prevIndeterminate,t=this.prevChecked&&!this.prevIndeterminate,i=this.prevIndeterminate,r=this.checked&&!this.indeterminate,n=this.indeterminate,o=De({disabled:this.disabled,selected:r||n,unselected:!r&&!n,checked:r,indeterminate:n,"prev-unselected":e,"prev-checked":t,"prev-indeterminate":i,"prev-disabled":this.prevDisabled}),{ariaLabel:s,ariaInvalid:a}=this;return K`
      <div class="container ${o}">
        <input
          type="checkbox"
          id="input"
          aria-checked=${n?"mixed":ee}
          aria-label=${s||ee}
          aria-invalid=${a||ee}
          ?disabled=${this.disabled}
          ?required=${this.required}
          .indeterminate=${this.indeterminate}
          .checked=${this.checked}
          @input=${this.handleInput}
          @change=${this.handleChange} />

        <div class="outline"></div>
        <div class="background"></div>
        <md-focus-ring part="focus-ring" for="input"></md-focus-ring>
        <md-ripple for="input" ?disabled=${this.disabled}></md-ripple>
        <svg class="icon" viewBox="0 0 18 18" aria-hidden="true">
          <rect class="mark short" />
          <rect class="mark long" />
        </svg>
      </div>
    `}handleInput(e){const t=e.target;this.checked=t.checked,this.indeterminate=t.indeterminate}handleChange(e){zt(this,e)}[jt](){return!this.checked||this.indeterminate?null:this.value}[Ft](){return String(this.checked)}formResetCallback(){this.checked=this.hasAttribute("checked")}formStateRestoreCallback(e){this.checked="true"===e}[Vt](){return new kC(()=>this)}[Ut](){return this.input}}_C.shadowRootOptions={...ve.shadowRootOptions,delegatesFocus:!0},t([C({type:Boolean})],_C.prototype,"checked",void 0),t([C({type:Boolean})],_C.prototype,"indeterminate",void 0),t([C({type:Boolean})],_C.prototype,"required",void 0),t([C()],_C.prototype,"value",void 0),t([P()],_C.prototype,"prevChecked",void 0),t([P()],_C.prototype,"prevDisabled",void 0),t([P()],_C.prototype,"prevIndeterminate",void 0),t([$("input")],_C.prototype,"input",void 0);
/**
 * @license
 * Copyright 2024 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const TC=l`:host{border-start-start-radius:var(--md-checkbox-container-shape-start-start, var(--md-checkbox-container-shape, 2px));border-start-end-radius:var(--md-checkbox-container-shape-start-end, var(--md-checkbox-container-shape, 2px));border-end-end-radius:var(--md-checkbox-container-shape-end-end, var(--md-checkbox-container-shape, 2px));border-end-start-radius:var(--md-checkbox-container-shape-end-start, var(--md-checkbox-container-shape, 2px));display:inline-flex;height:var(--md-checkbox-container-size, 18px);position:relative;vertical-align:top;width:var(--md-checkbox-container-size, 18px);-webkit-tap-highlight-color:rgba(0,0,0,0);cursor:pointer}:host([disabled]){cursor:default}:host([touch-target=wrapper]){margin:max(0px,(48px - var(--md-checkbox-container-size, 18px))/2)}md-focus-ring{height:44px;inset:unset;width:44px}input{appearance:none;height:48px;margin:0;opacity:0;outline:none;position:absolute;width:48px;z-index:1;cursor:inherit}:host([touch-target=none]) input{height:100%;width:100%}.container{border-radius:inherit;display:flex;height:100%;place-content:center;place-items:center;position:relative;width:100%}.outline,.background,.icon{inset:0;position:absolute}.outline,.background{border-radius:inherit}.outline{border-color:var(--md-checkbox-outline-color, var(--md-sys-color-on-surface-variant, #49454f));border-style:solid;border-width:var(--md-checkbox-outline-width, 2px);box-sizing:border-box}.background{background-color:var(--md-checkbox-selected-container-color, var(--md-sys-color-primary, #6750a4))}.background,.icon{opacity:0;transition-duration:150ms,50ms;transition-property:transform,opacity;transition-timing-function:cubic-bezier(0.3, 0, 0.8, 0.15),linear;transform:scale(0.6)}:where(.selected) :is(.background,.icon){opacity:1;transition-duration:350ms,50ms;transition-timing-function:cubic-bezier(0.05, 0.7, 0.1, 1),linear;transform:scale(1)}md-ripple{border-radius:var(--md-checkbox-state-layer-shape, var(--md-sys-shape-corner-full, 9999px));height:var(--md-checkbox-state-layer-size, 40px);inset:unset;width:var(--md-checkbox-state-layer-size, 40px);--md-ripple-hover-color: var(--md-checkbox-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--md-ripple-hover-opacity: var(--md-checkbox-hover-state-layer-opacity, 0.08);--md-ripple-pressed-color: var(--md-checkbox-pressed-state-layer-color, var(--md-sys-color-primary, #6750a4));--md-ripple-pressed-opacity: var(--md-checkbox-pressed-state-layer-opacity, 0.12)}.selected md-ripple{--md-ripple-hover-color: var(--md-checkbox-selected-hover-state-layer-color, var(--md-sys-color-primary, #6750a4));--md-ripple-hover-opacity: var(--md-checkbox-selected-hover-state-layer-opacity, 0.08);--md-ripple-pressed-color: var(--md-checkbox-selected-pressed-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--md-ripple-pressed-opacity: var(--md-checkbox-selected-pressed-state-layer-opacity, 0.12)}.icon{fill:var(--md-checkbox-selected-icon-color, var(--md-sys-color-on-primary, #fff));height:var(--md-checkbox-icon-size, 18px);width:var(--md-checkbox-icon-size, 18px)}.mark.short{height:2px;transition-property:transform,height;width:2px}.mark.long{height:2px;transition-property:transform,width;width:10px}.mark{animation-duration:150ms;animation-timing-function:cubic-bezier(0.3, 0, 0.8, 0.15);transition-duration:150ms;transition-timing-function:cubic-bezier(0.3, 0, 0.8, 0.15)}.selected .mark{animation-duration:350ms;animation-timing-function:cubic-bezier(0.05, 0.7, 0.1, 1);transition-duration:350ms;transition-timing-function:cubic-bezier(0.05, 0.7, 0.1, 1)}.checked .mark,.prev-checked.unselected .mark{transform:scaleY(-1) translate(7px, -14px) rotate(45deg)}.checked .mark.short,.prev-checked.unselected .mark.short{height:5.6568542495px}.checked .mark.long,.prev-checked.unselected .mark.long{width:11.313708499px}.indeterminate .mark,.prev-indeterminate.unselected .mark{transform:scaleY(-1) translate(4px, -10px) rotate(0deg)}.prev-unselected .mark{transition-property:none}.prev-unselected.checked .mark.long{animation-name:prev-unselected-to-checked}@keyframes prev-unselected-to-checked{from{width:0}}:where(:hover) .outline{border-color:var(--md-checkbox-hover-outline-color, var(--md-sys-color-on-surface, #1d1b20));border-width:var(--md-checkbox-hover-outline-width, 2px)}:where(:hover) .background{background:var(--md-checkbox-selected-hover-container-color, var(--md-sys-color-primary, #6750a4))}:where(:hover) .icon{fill:var(--md-checkbox-selected-hover-icon-color, var(--md-sys-color-on-primary, #fff))}:where(:focus-within) .outline{border-color:var(--md-checkbox-focus-outline-color, var(--md-sys-color-on-surface, #1d1b20));border-width:var(--md-checkbox-focus-outline-width, 2px)}:where(:focus-within) .background{background:var(--md-checkbox-selected-focus-container-color, var(--md-sys-color-primary, #6750a4))}:where(:focus-within) .icon{fill:var(--md-checkbox-selected-focus-icon-color, var(--md-sys-color-on-primary, #fff))}:where(:active) .outline{border-color:var(--md-checkbox-pressed-outline-color, var(--md-sys-color-on-surface, #1d1b20));border-width:var(--md-checkbox-pressed-outline-width, 2px)}:where(:active) .background{background:var(--md-checkbox-selected-pressed-container-color, var(--md-sys-color-primary, #6750a4))}:where(:active) .icon{fill:var(--md-checkbox-selected-pressed-icon-color, var(--md-sys-color-on-primary, #fff))}:where(.disabled,.prev-disabled) :is(.background,.icon,.mark){animation-duration:0s;transition-duration:0s}:where(.disabled) .outline{border-color:var(--md-checkbox-disabled-outline-color, var(--md-sys-color-on-surface, #1d1b20));border-width:var(--md-checkbox-disabled-outline-width, 2px);opacity:var(--md-checkbox-disabled-container-opacity, 0.38)}:where(.selected.disabled) .outline{visibility:hidden}:where(.selected.disabled) .background{background:var(--md-checkbox-selected-disabled-container-color, var(--md-sys-color-on-surface, #1d1b20));opacity:var(--md-checkbox-selected-disabled-container-opacity, 0.38)}:where(.disabled) .icon{fill:var(--md-checkbox-selected-disabled-icon-color, var(--md-sys-color-surface, #fef7ff))}@media(forced-colors: active){.background{background-color:CanvasText}.selected.disabled .background{background-color:GrayText;opacity:1}.outline{border-color:CanvasText}.disabled .outline{border-color:GrayText;opacity:1}.icon{fill:Canvas}}
`
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */;let CC=class extends _C{};CC.styles=[TC],CC=t([i("md-checkbox")],CC);var PC=function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let EC=class extends(Nn(ve)){static{this.styles=l`
    :host {
      display: block;
      max-width: 480px;
      border-radius: 16px;
      border: 1px solid var(--df-practice-outline-color, rgba(31, 41, 55, 0.15));
      padding: 24px;
      box-shadow: var(--df-practice-shadow, 0 10px 30px rgba(15, 23, 42, 0.08));
      background: var(--df-practice-surface, #ffffff);
      color: var(--df-practice-text, #111827);
      font-family: var(--df-font-family, 'Roboto', sans-serif);
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
      gap: 12px;
    }

    h2 {
      margin: 0;
      font-size: 1.25rem;
      font-weight: 600;
    }

    .actions {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      align-items: center;
    }

    md-outlined-select {
      min-width: 210px;
    }

    .auto-refresh {
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .status {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.85rem;
      color: rgba(55, 65, 81, 0.9);
      margin-bottom: 16px;
    }

    .dot {
      width: 10px;
      height: 10px;
      border-radius: 999px;
      background: var(--df-practice-primary, #2563eb);
      animation: pulse 1.2s ease-in-out infinite;
    }

    ul.task-list {
      list-style: none;
      margin: 0;
      padding: 0;
      display: grid;
      gap: 12px;
    }

    li {
      border: 1px solid rgba(148, 163, 184, 0.6);
      border-radius: 12px;
      padding: 12px 16px;
      background: rgba(248, 250, 252, 0.75);
    }

    .task-title {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .difficulty {
      font-size: 0.75rem;
      padding: 2px 8px;
      border-radius: 6px;
      background: rgba(37, 99, 235, 0.12);
      color: rgba(37, 99, 235, 0.9);
      text-transform: uppercase;
      letter-spacing: 0.04em;
    }

    .error {
      border-radius: 8px;
      padding: 10px 12px;
      background: rgba(239, 68, 68, 0.12);
      color: #b91c1c;
    }

    footer {
      margin-top: 16px;
      font-size: 0.8rem;
      color: rgba(100, 116, 139, 0.9);
    }

    @keyframes pulse {
      0%,
      100% {
        opacity: 0.2;
      }
      50% {
        opacity: 1;
      }
    }
  `}constructor(){super(),this.refreshInterval=15e3}set autoRefresh(e){e?oc(this.refreshInterval):sc()}get autoRefresh(){return ic.get().isAutoRefreshing}set topic(e){if(!e)return;rc(e)&&nc(e)}get topic(){return ic.get().topic}connectedCallback(){super.connectedCallback(),"idle"===ic.get().status&&nc()}disconnectedCallback(){super.disconnectedCallback(),this.autoRefresh&&sc()}updated(e){e.has("refreshInterval")&&this.autoRefresh&&oc(this.refreshInterval)}render(){const e=ic.get(),{status:t,tasks:i,errorMessage:r,lastUpdated:n,isAutoRefreshing:o,topic:s}=e;return K`
      <header>
        <h2>Practice planner</h2>
        <md-outlined-select
          label="Practice topic"
          .value=${s}
          @change=${this.handleTopicChange}
        >
          ${tc.map(e=>K`
              <md-select-option value=${e}>
                <div slot="headline">${this.formatTopic(e)}</div>
              </md-select-option>
            `)}
        </md-outlined-select>
      </header>

      <div class="actions">
        <md-filled-button @click=${this.handleRefresh} ?disabled=${"loading"===t}>
          Refresh tasks
        </md-filled-button>
        <div class="auto-refresh">
          <md-checkbox
            @change=${this.handleAutoRefreshToggle}
            .checked=${o}
            aria-label="Auto refresh tasks"
          ></md-checkbox>
          <span>Auto refresh</span>
        </div>
      </div>

      ${this.renderStatus(t,r)}

      ${"error"===t?ee:K`
            <ul class="task-list">
              ${i.map(e=>K`
                  <li>
                    <div class="task-title">
                      <span>${e.title}</span>
                      <span class="difficulty">${e.difficulty}</span>
                    </div>
                    <p>${e.summary}</p>
                  </li>
                `)}
            </ul>
          `}

      <footer>
        ${n?K`Last updated ${this.formatTimestamp(n)}${o?"  auto refresh on":""}`:"No tasks loaded yet"}
      </footer>
    `}renderStatus(e,t){switch(e){case"loading":return K`<div class="status"><span class="dot" aria-hidden="true"></span>Loading tasks</div>`;case"error":return K`<div class="error" role="alert">${t??"Unable to load practice tasks."}</div>`;case"ready":return ee;default:return K`<div class="status">Select a topic to generate practice ideas.</div>`}}handleRefresh(){nc()}handleTopicChange(e){const t=e.target.value??"";rc(t),nc(t),this.dispatchEvent(new CustomEvent("df-practice-topic-change",{detail:{topic:t},bubbles:!0,composed:!0}))}handleAutoRefreshToggle(e){e.target.checked?oc(this.refreshInterval):sc()}formatTopic(e){return e.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}formatTimestamp(e){return new Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(e)}};PC([C({type:Number,attribute:"refresh-interval"})],EC.prototype,"refreshInterval",void 0),PC([C({type:Boolean,attribute:"auto-refresh"})],EC.prototype,"autoRefresh",null),PC([C({type:String})],EC.prototype,"topic",null),EC=PC([i("df-practice-widget")],EC);var $C=function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let AC=class extends(Nn(ve)){static{this.styles=l`
    :host {
      display: block;
      background: white;
      min-width: 300px;
      max-width: 500px;
      width: 100%;
      border-radius: 5px;
      border: solid 1px #aaa;
      padding: 20px;
    }

    header {
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: space-between;
    }

    #logo {
      height: 38px;
      width: auto;
    }

    .initial {
      font-style: italic;
    }

    .error {
      color: red;
    }
  `}constructor(){super(),this.defaultPackage=""}set packageName(e){e&&e!==Ul.get().packageName&&ql(e)}get packageName(){return Ul.get().packageName}connectedCallback(){super.connectedCallback();const e=Ul.get();this.defaultPackage&&"idle"===e.status&&!e.packageName&&ql(this.defaultPackage)}render(){const e=Ul.get(),{status:t,packageName:i,packageData:r,errorMessage:n}=e;return K`
      <div>
        <md-outlined-text-field
          label="NPM Package Name" 
          supporting-text="Enter a package name like lit, chalk, react, or vue"
          .value=${i} 
          @input=${this.handlePackageNameInput}
          @keydown=${this.handleKeydown}>
        </md-outlined-text-field>
      </div>
      <header>
        <h1>${i}</h1>
        ${IC}
      </header>
      <div>
        <p>${t}</p>
        ${this.renderPackageInfo(t,r,n)}
      </div>
    `}renderPackageInfo(e,t,i){switch(e){case"idle":return K`<span class="initial">When does this ever actually display? Enter a package name to display its npm info</span>`;case"loading":return K`Loading npm info for <code>${Ul.get().packageName}</code>`;case"ready":return t?K`
          <h3>${t.description||"No description available"}</h3>
          <h4>dist-tags:</h4>
          <ul>
            ${Object.keys(t["dist-tags"]||{}).map(e=>K`<li><pre>${e}: ${t["dist-tags"]?.[e]}</pre></li>`)}
          </ul>
        `:ee;case"error":return K`<span class="error">Error: ${i||"Unknown error"}</span>`;default:return ee}}handlePackageNameInput(e){ql(e.target.value)}handleKeydown(e){if("Enter"===e.key){const e=Ul.get().packageName.trim();e&&this.dispatchEvent(new CustomEvent("df-npm-info-search",{detail:{packageName:e},bubbles:!0,composed:!0}))}}};$C([C({type:String,attribute:"default-package"})],AC.prototype,"defaultPackage",void 0),$C([C({type:String})],AC.prototype,"packageName",null),AC=$C([i("df-npm-info-widget")],AC);const IC=K`<img id="logo" src="https://raw.githubusercontent.com/npm/logos/master/npm%20logo/npm-logo-red.svg" alt="npm logo" />`;var QC=function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let RC=class extends(Nn(ve)){static{this.styles=l`
    :host {
      display: block;
      width: min(420px, 100%);
      font-family: var(--df-font-family, 'Roboto', system-ui, sans-serif);
      color: var(--md-sys-color-on-surface, #1f1f1f);
    }

    .container {
      display: grid;
      grid-template-rows: auto 1fr auto;
      gap: 16px;
      border-radius: 20px;
      padding: 20px;
      background: var(--md-sys-color-surface, rgba(255, 255, 255, 0.98));
      box-shadow: 0 24px 45px rgba(15, 23, 42, 0.18);
      border: 1px solid rgba(15, 23, 42, 0.08);
      height: var(--df-chat-height, 580px);
    }

    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
    }

    .title {
      display: grid;
      gap: 4px;
    }

    h2 {
      margin: 0;
      font-size: 1.2rem;
      font-weight: 600;
      color: var(--md-sys-color-on-surface, #0f172a);
    }

    .subtitle {
      font-size: 0.85rem;
      color: rgba(15, 23, 42, 0.65);
    }

    .messages {
      position: relative;
      overflow-y: auto;
      padding: 12px;
      border-radius: 16px;
      background: rgba(241, 245, 249, 0.65);
      display: grid;
      gap: 12px;
    }

    .message {
      display: grid;
      gap: 6px;
      padding: 12px 14px;
      border-radius: 14px;
      background: var(--md-sys-color-surface-container-low, #ffffff);
      border: 1px solid rgba(148, 163, 184, 0.24);
      box-shadow: 0 8px 20px rgba(15, 23, 42, 0.08);
    }

    .message[data-self='true'] {
      background: var(--md-sys-color-primary-container, rgba(99, 102, 241, 0.16));
      border-color: rgba(99, 102, 241, 0.32);
    }

    .message-header {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 12px;
    }

    .author {
      font-weight: 600;
      color: rgba(15, 23, 42, 0.9);
    }

    .timestamp {
      font-size: 0.75rem;
      color: rgba(99, 102, 241, 0.9);
    }

    .body {
      font-size: 0.95rem;
      line-height: 1.45;
      color: rgba(15, 23, 42, 0.85);
      white-space: pre-wrap;
      word-break: break-word;
    }

    .composer {
      display: grid;
      gap: 12px;
    }

    md-outlined-text-field {
      width: 100%;
    }

    .actions {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
    }

    .status {
      font-size: 0.78rem;
      color: rgba(100, 116, 139, 0.92);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .status[hidden] {
      display: none;
    }

    .status--error {
      color: rgba(220, 38, 38, 0.85);
    }

    md-circular-progress {
      --md-circular-progress-size: 18px;
    }

    .empty-state {
      text-align: center;
      color: rgba(100, 116, 139, 0.92);
      font-size: 0.9rem;
      padding: 24px 0;
    }
  `}constructor(){super(),this.messageText="",this.previousMessageCount=0,this.heading="Mon Wed Chat",this.submitOnEnter=!0,this.autoFocus=!1}connectedCallback(){super.connectedCallback();try{DT().startRealtime()}catch{}}disconnectedCallback(){try{DT().stopRealtime()}catch{}super.disconnectedCallback()}firstUpdated(){if(this.autoFocus){const e=this.renderRoot.querySelector("md-outlined-text-field");e?.focus()}}render(){const e=QT.get(),t=RT.get(),{authUser:i}=lT.get(),r="sending"===t.status,n=this.resolveStatusLabel(e.status,t.status,t.error),o=e.documents,s=!o.length&&"loading"!==e.status;return K`
      <div class="container" role="region" aria-live="polite">
        <header>
          <div class="title">
            <h2>${this.heading}</h2>
            <span class="subtitle">
              ${i?K`Signed in as <strong>${i.displayName??i.email??"Anonymous"}</strong>`:"Sign in to send messages"}
            </span>
          </div>
        </header>

        <section class="messages" aria-label="Chat messages">
          ${"loading"!==e.status||o.length?ee:K`<div class="empty-state">Loading conversation</div>`}

          ${s?K`<div class="empty-state">Start the conversation by sending the first message.</div>`:ee}

          ${o.map(e=>this.renderMessage(e,i?.uid??null))}
        </section>

        <section class="composer" aria-label="Send a message">
          <md-outlined-text-field
            label="Message"
            type="text"
            .value=${this.messageText}
            @input=${this.handleInput}
            @keydown=${this.handleKeydown}
            ?disabled=${!i||r}
            .supportingText=${i?"Shift+Enter for a new line":"Sign in to participate"}
            .maxLength=${1e3}
            .charCounter=${!0}>
          </md-outlined-text-field>

          <div class="actions">
            <span class="status" ?hidden=${!n} role="status">
              ${"sending"===t.status?K`<md-circular-progress indeterminate></md-circular-progress>`:ee}
              <span class=${"error"===t.status?"status--error":""}>${n}</span>
            </span>

            <md-filled-button
              ?disabled=${!this.canSubmit(null!==i,r)}
              @click=${this.submitMessage}
            >
              Send
            </md-filled-button>
          </div>
        </section>
      </div>
    `}updated(){const e=QT.get().documents.length;e>this.previousMessageCount&&this.scrollToLatest(),this.previousMessageCount=e}renderMessage(e,t){const i=null!==t&&e.userId===t;return K`
      <article class="message" data-self=${String(i)}>
        <div class="message-header">
          <span class="author">${e.userDisplayName}</span>
          <time class="timestamp" datetime=${this.formatIso(e.createdAt)}>
            ${this.formatTimestamp(e.createdAt)}
          </time>
        </div>
        <p class="body">${e.text}</p>
      </article>
    `}handleInput(e){const t=e.target;this.messageText=t.value}handleKeydown(e){this.submitOnEnter&&("Enter"!==e.key||e.shiftKey||(e.preventDefault(),this.submitMessage()))}async submitMessage(){const{authUser:e}=lT.get(),t=this.messageText.trim(),i="sending"===RT.get().status;if(e&&t&&!i)try{await async function(e){const t=e.text.trim();if(!t)throw new Error("Cannot send an empty message.");const i=DT(),{authUser:r}=lT.get();if(!r)throw new Error("You must be signed in to send messages.");$T.set("sending"),AT.set(null);const n={text:t,userId:r.uid,userDisplayName:MT(r.displayName,r.email),userPhotoURL:r.photoURL??null,createdAt:new Date};try{const e=await i.create(n);return $T.set("idle"),e}catch(e){const t=e instanceof Error?e.message:"Failed to send chat message.";throw $T.set("error"),AT.set(t),e}}({text:t}),this.messageText="",this.dispatchEvent(new CustomEvent("df-chat-widget-message-sent",{detail:{text:t},bubbles:!0,composed:!0}))}catch(e){this.dispatchEvent(new CustomEvent("df-chat-widget-error",{detail:{error:e},bubbles:!0,composed:!0}))}}canSubmit(e,t){return!(!e||t)&&Boolean(this.messageText.trim().length)}resolveStatusLabel(e,t,i){return"sending"===t?"Sending":"error"===t?i??"Unable to send message":"loading"===e?"Loading messages":"error"===e?"Failed to load messages":null}scrollToLatest(){const e=this.renderRoot.querySelector(".messages");e instanceof HTMLElement&&(e.scrollTop=e.scrollHeight)}formatTimestamp(e){return e?new Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit"}).format(e):"Unknown"}formatIso(e){return e?e.toISOString():""}};QC([C({type:String})],RC.prototype,"heading",void 0),QC([C({type:Boolean,attribute:"submit-on-enter"})],RC.prototype,"submitOnEnter",void 0),QC([C({type:Boolean,attribute:"auto-focus"})],RC.prototype,"autoFocus",void 0),QC([P()],RC.prototype,"messageText",void 0),RC=QC([i("df-chat-widget")],RC);let DC=[],MC=[];function NC(e){if(e<768)return!1;for(let t=0,i=DC.length;;){let r=t+i>>1;if(e<DC[r])i=r;else{if(!(e>=MC[r]))return!0;t=r+1}if(t==i)return!1}}function LC(e){return e>=127462&&e<=127487}(()=>{let e="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let t=0,i=0;t<e.length;t++)(t%2?MC:DC).push(i+=e[t])})();function zC(e,t,i=!0,r=!0){return(i?VC:UC)(e,t,r)}function VC(e,t,i){if(t==e.length)return t;t&&XC(e.charCodeAt(t))&&ZC(e.charCodeAt(t-1))&&t--;let r=qC(e,t);for(t+=BC(r);t<e.length;){let n=qC(e,t);if(8205==r||8205==n||i&&NC(n))t+=BC(n),r=n;else{if(!LC(n))break;{let i=0,r=t-2;for(;r>=0&&LC(qC(e,r));)i++,r-=2;if(i%2==0)break;t+=2}}}return t}function UC(e,t,i){for(;t>0;){let r=VC(e,t-2,i);if(r<t)return r;t--}return 0}function qC(e,t){let i=e.charCodeAt(t);if(!ZC(i)||t+1==e.length)return i;let r=e.charCodeAt(t+1);return XC(r)?r-56320+(i-55296<<10)+65536:i}function XC(e){return e>=56320&&e<57344}function ZC(e){return e>=55296&&e<56320}function BC(e){return e<65536?1:2}class jC{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){[e,t]=tP(this,e,t);let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(t,this.length,r,1),WC.from(r,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=tP(this,e,t);let i=[];return this.decompose(e,t,i,0),WC.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new HC(this),n=new HC(e);for(let e=t,o=t;;){if(r.next(e),n.next(e),e=0,r.lineBreak!=n.lineBreak||r.done!=n.done||r.value!=n.value)return!1;if(o+=r.value.length,r.done||o>=i)return!0}}iter(e=1){return new HC(this,e)}iterRange(e,t=this.length){return new KC(this,e,t)}iterLines(e,t){let i;if(null==e)i=this.iter();else{null==t&&(t=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new JC(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(0==e.length)throw new RangeError("A document must have at least one line");return 1!=e.length||e[0]?e.length<=32?new FC(e):WC.from(FC.split(e,[])):jC.empty}}class FC extends jC{constructor(e,t=function(e){let t=-1;for(let i of e)t+=i.length+1;return t}(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,r){for(let n=0;;n++){let o=this.text[n],s=r+o.length;if((t?i:s)>=e)return new eP(r,s,i,o);r=s+1,i++}}decompose(e,t,i,r){let n=e<=0&&t>=this.length?this:new FC(GC(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(1&r){let e=i.pop(),t=YC(n.text,e.text.slice(),0,n.length);if(t.length<=32)i.push(new FC(t,e.length+n.length));else{let e=t.length>>1;i.push(new FC(t.slice(0,e)),new FC(t.slice(e)))}}else i.push(n)}replace(e,t,i){if(!(i instanceof FC))return super.replace(e,t,i);[e,t]=tP(this,e,t);let r=YC(this.text,YC(i.text,GC(this.text,0,e)),t),n=this.length+i.length-(t-e);return r.length<=32?new FC(r,n):WC.from(FC.split(r,[]),n)}sliceString(e,t=this.length,i="\n"){[e,t]=tP(this,e,t);let r="";for(let n=0,o=0;n<=t&&o<this.text.length;o++){let s=this.text[o],a=n+s.length;n>e&&o&&(r+=i),e<a&&t>n&&(r+=s.slice(Math.max(0,e-n),t-n)),n=a+1}return r}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],r=-1;for(let n of e)i.push(n),r+=n.length+1,32==i.length&&(t.push(new FC(i,r)),i=[],r=-1);return r>-1&&t.push(new FC(i,r)),t}}class WC extends jC{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let t of e)this.lines+=t.lines}lineInner(e,t,i,r){for(let n=0;;n++){let o=this.children[n],s=r+o.length,a=i+o.lines-1;if((t?a:s)>=e)return o.lineInner(e,t,i,r);r=s+1,i=a+1}}decompose(e,t,i,r){for(let n=0,o=0;o<=t&&n<this.children.length;n++){let s=this.children[n],a=o+s.length;if(e<=a&&t>=o){let n=r&((o<=e?1:0)|(a>=t?2:0));o>=e&&a<=t&&!n?i.push(s):s.decompose(e-o,t-o,i,n)}o=a+1}}replace(e,t,i){if([e,t]=tP(this,e,t),i.lines<this.lines)for(let r=0,n=0;r<this.children.length;r++){let o=this.children[r],s=n+o.length;if(e>=n&&t<=s){let a=o.replace(e-n,t-n,i),l=this.lines-o.lines+a.lines;if(a.lines<l>>4&&a.lines>l>>6){let n=this.children.slice();return n[r]=a,new WC(n,this.length-(t-e)+i.length)}return super.replace(n,s,a)}n=s+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i="\n"){[e,t]=tP(this,e,t);let r="";for(let n=0,o=0;n<this.children.length&&o<=t;n++){let s=this.children[n],a=o+s.length;o>e&&n&&(r+=i),e<a&&t>o&&(r+=s.sliceString(e-o,t-o,i)),o=a+1}return r}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof WC))return 0;let i=0,[r,n,o,s]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=t,n+=t){if(r==o||n==s)return i;let a=this.children[r],l=e.children[n];if(a!=l)return i+a.scanIdentical(l,t);i+=a.length+1}}static from(e,t=e.reduce((e,t)=>e+t.length+1,-1)){let i=0;for(let t of e)i+=t.lines;if(i<32){let i=[];for(let t of e)t.flatten(i);return new FC(i,t)}let r=Math.max(32,i>>5),n=r<<1,o=r>>1,s=[],a=0,l=-1,c=[];function d(e){let t;if(e.lines>n&&e instanceof WC)for(let t of e.children)d(t);else e.lines>o&&(a>o||!a)?(h(),s.push(e)):e instanceof FC&&a&&(t=c[c.length-1])instanceof FC&&e.lines+t.lines<=32?(a+=e.lines,l+=e.length+1,c[c.length-1]=new FC(t.text.concat(e.text),t.length+1+e.length)):(a+e.lines>r&&h(),a+=e.lines,l+=e.length+1,c.push(e))}function h(){0!=a&&(s.push(1==c.length?c[0]:WC.from(c,l)),l=-1,a=c.length=0)}for(let t of e)d(t);return h(),1==s.length?s[0]:new WC(s,t)}}function YC(e,t,i=0,r=1e9){for(let n=0,o=0,s=!0;o<e.length&&n<=r;o++){let a=e[o],l=n+a.length;l>=i&&(l>r&&(a=a.slice(0,r-n)),n<i&&(a=a.slice(i-n)),s?(t[t.length-1]+=a,s=!1):t.push(a)),n=l+1}return t}function GC(e,t,i){return YC(e,[""],t,i)}jC.empty=new FC([""],0);class HC{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof FC?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],n=this.offsets[i],o=n>>1,s=r instanceof FC?r.text.length:r.children.length;if(o==(t>0?s:0)){if(0==i)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&n)==(t>0?0:1)){if(this.offsets[i]+=t,0==e)return this.lineBreak=!0,this.value="\n",this;e--}else if(r instanceof FC){let n=r.text[o+(t<0?-1:0)];if(this.offsets[i]+=t,n.length>Math.max(0,e))return this.value=0==e?n:t>0?n.slice(e):n.slice(0,n.length-e),this;e-=n.length}else{let n=r.children[o+(t<0?-1:0)];e>n.length?(e-=n.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(n),this.offsets.push(t>0?1:(n instanceof FC?n.text.length:n.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class KC{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new HC(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*t,this.value=r.length<=i?r:t<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class JC{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:r}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}"undefined"!=typeof Symbol&&(jC.prototype[Symbol.iterator]=function(){return this.iter()},HC.prototype[Symbol.iterator]=KC.prototype[Symbol.iterator]=JC.prototype[Symbol.iterator]=function(){return this});let eP=class{constructor(e,t,i,r){this.from=e,this.to=t,this.number=i,this.text=r}get length(){return this.to-this.from}};function tP(e,t,i){return[t=Math.max(0,Math.min(e.length,t)),Math.max(t,Math.min(e.length,i))]}function iP(e,t,i=!0,r=!0){return zC(e,t,i,r)}function rP(e,t){let i=e.charCodeAt(t);if(!(r=i,r>=55296&&r<56320&&t+1!=e.length))return i;var r;let n=e.charCodeAt(t+1);return function(e){return e>=56320&&e<57344}(n)?n-56320+(i-55296<<10)+65536:i}function nP(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function oP(e){return e<65536?1:2}const sP=/\r\n?|\n/;var aP=function(e){return e[e.Simple=0]="Simple",e[e.TrackDel=1]="TrackDel",e[e.TrackBefore=2]="TrackBefore",e[e.TrackAfter=3]="TrackAfter",e}(aP||(aP={}));class lP{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,r=0;t<this.sections.length;){let n=this.sections[t++],o=this.sections[t++];o<0?(e(i,r,n),r+=n):r+=o,i+=n}}iterChangedRanges(e,t=!1){uP(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],r=this.sections[t++];r<0?e.push(i,r):e.push(r,i)}return new lP(e)}composeDesc(e){return this.empty?e:e.empty?this:fP(this,e)}mapDesc(e,t=!1){return e.empty?this:pP(this,e,t)}mapPos(e,t=-1,i=aP.Simple){let r=0,n=0;for(let o=0;o<this.sections.length;){let s=this.sections[o++],a=this.sections[o++],l=r+s;if(a<0){if(l>e)return n+(e-r);n+=s}else{if(i!=aP.Simple&&l>=e&&(i==aP.TrackDel&&r<e&&l>e||i==aP.TrackBefore&&r<e||i==aP.TrackAfter&&l>e))return null;if(l>e||l==e&&t<0&&!s)return e==r||t<0?n:n+a;n+=a}r=l}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return n}touchesRange(e,t=e){for(let i=0,r=0;i<this.sections.length&&r<=t;){let n=r+this.sections[i++];if(this.sections[i++]>=0&&r<=t&&n>=e)return!(r<e&&n>t)||"cover";r=n}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],r=this.sections[t++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(e=>"number"!=typeof e))throw new RangeError("Invalid JSON representation of ChangeDesc");return new lP(e)}static create(e){return new lP(e)}}class cP extends lP{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return uP(this,(t,i,r,n,o)=>e=e.replace(r,r+(i-t),o),!1),e}mapDesc(e,t=!1){return pP(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let r=0,n=0;r<t.length;r+=2){let o=t[r],s=t[r+1];if(s>=0){t[r]=s,t[r+1]=o;let a=r>>1;for(;i.length<a;)i.push(jC.empty);i.push(o?e.slice(n,n+o):jC.empty)}n+=o}return new cP(t,i)}compose(e){return this.empty?e:e.empty?this:fP(this,e,!0)}map(e,t=!1){return e.empty?this:pP(this,e,t,!0)}iterChanges(e,t=!1){uP(this,e,t)}get desc(){return lP.create(this.sections)}filter(e){let t=[],i=[],r=[],n=new mP(this);e:for(let o=0,s=0;;){let a=o==e.length?1e9:e[o++];for(;s<a||s==a&&0==n.len;){if(n.done)break e;let e=Math.min(n.len,a-s);dP(r,e,-1);let o=-1==n.ins?-1:0==n.off?n.ins:0;dP(t,e,o),o>0&&hP(i,t,n.text),n.forward(e),s+=e}let l=e[o++];for(;s<l;){if(n.done)break e;let e=Math.min(n.len,l-s);dP(t,e,-1),dP(r,e,-1==n.ins?-1:0==n.off?n.ins:0),n.forward(e),s+=e}}return{changes:new cP(t,i),filtered:lP.create(r)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],r=this.sections[t+1];r<0?e.push(i):0==r?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let r=[],n=[],o=0,s=null;function a(e=!1){if(!e&&!r.length)return;o<t&&dP(r,t-o,-1);let i=new cP(r,n);s=s?s.compose(i.map(s)):i,r=[],n=[],o=0}return function e(l){if(Array.isArray(l))for(let t of l)e(t);else if(l instanceof cP){if(l.length!=t)throw new RangeError(`Mismatched change set length (got ${l.length}, expected ${t})`);a(),s=s?s.compose(l.map(s)):l}else{let{from:e,to:s=e,insert:c}=l;if(e>s||e<0||s>t)throw new RangeError(`Invalid change range ${e} to ${s} (in doc of length ${t})`);let d=c?"string"==typeof c?jC.of(c.split(i||sP)):c:jC.empty,h=d.length;if(e==s&&0==h)return;e<o&&a(),e>o&&dP(r,e-o,-1),dP(r,s-e,h),hP(n,r,d),o=s}}(e),a(!s),s}static empty(e){return new cP(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let r=0;r<e.length;r++){let n=e[r];if("number"==typeof n)t.push(n,-1);else{if(!Array.isArray(n)||"number"!=typeof n[0]||n.some((e,t)=>t&&"string"!=typeof e))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==n.length)t.push(n[0],0);else{for(;i.length<r;)i.push(jC.empty);i[r]=jC.of(n.slice(1)),t.push(n[0],i[r].length)}}}return new cP(t,i)}static createSet(e,t){return new cP(e,t)}}function dP(e,t,i,r=!1){if(0==t&&i<=0)return;let n=e.length-2;n>=0&&i<=0&&i==e[n+1]?e[n]+=t:n>=0&&0==t&&0==e[n]?e[n+1]+=i:r?(e[n]+=t,e[n+1]+=i):e.push(t,i)}function hP(e,t,i){if(0==i.length)return;let r=t.length-2>>1;if(r<e.length)e[e.length-1]=e[e.length-1].append(i);else{for(;e.length<r;)e.push(jC.empty);e.push(i)}}function uP(e,t,i){let r=e.inserted;for(let n=0,o=0,s=0;s<e.sections.length;){let a=e.sections[s++],l=e.sections[s++];if(l<0)n+=a,o+=a;else{let c=n,d=o,h=jC.empty;for(;c+=a,d+=l,l&&r&&(h=h.append(r[s-2>>1])),!(i||s==e.sections.length||e.sections[s+1]<0);)a=e.sections[s++],l=e.sections[s++];t(n,c,o,d,h),n=c,o=d}}}function pP(e,t,i,r=!1){let n=[],o=r?[]:null,s=new mP(e),a=new mP(t);for(let e=-1;;){if(s.done&&a.len||a.done&&s.len)throw new Error("Mismatched change set lengths");if(-1==s.ins&&-1==a.ins){let e=Math.min(s.len,a.len);dP(n,e,-1),s.forward(e),a.forward(e)}else if(a.ins>=0&&(s.ins<0||e==s.i||0==s.off&&(a.len<s.len||a.len==s.len&&!i))){let t=a.len;for(dP(n,a.ins,-1);t;){let i=Math.min(s.len,t);s.ins>=0&&e<s.i&&s.len<=i&&(dP(n,0,s.ins),o&&hP(o,n,s.text),e=s.i),s.forward(i),t-=i}a.next()}else{if(!(s.ins>=0)){if(s.done&&a.done)return o?cP.createSet(n,o):lP.create(n);throw new Error("Mismatched change set lengths")}{let t=0,i=s.len;for(;i;)if(-1==a.ins){let e=Math.min(i,a.len);t+=e,i-=e,a.forward(e)}else{if(!(0==a.ins&&a.len<i))break;i-=a.len,a.next()}dP(n,t,e<s.i?s.ins:0),o&&e<s.i&&hP(o,n,s.text),e=s.i,s.forward(s.len-i)}}}}function fP(e,t,i=!1){let r=[],n=i?[]:null,o=new mP(e),s=new mP(t);for(let e=!1;;){if(o.done&&s.done)return n?cP.createSet(r,n):lP.create(r);if(0==o.ins)dP(r,o.len,0,e),o.next();else if(0!=s.len||s.done){if(o.done||s.done)throw new Error("Mismatched change set lengths");{let t=Math.min(o.len2,s.len),i=r.length;if(-1==o.ins){let i=-1==s.ins?-1:s.off?0:s.ins;dP(r,t,i,e),n&&i&&hP(n,r,s.text)}else-1==s.ins?(dP(r,o.off?0:o.len,t,e),n&&hP(n,r,o.textBit(t))):(dP(r,o.off?0:o.len,s.off?0:s.ins,e),n&&!s.off&&hP(n,r,s.text));e=(o.ins>t||s.ins>=0&&s.len>t)&&(e||r.length>i),o.forward2(t),s.forward(t)}}else dP(r,0,s.ins,e),n&&hP(n,r,s.text),s.next()}}class mP{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return-2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?jC.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?jC.empty:t[i].slice(this.off,null==e?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){-1==this.ins?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class gP{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return 32&this.flags?this.to:this.from}get head(){return 32&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 8&this.flags?-1:16&this.flags?1:0}get bidiLevel(){let e=7&this.flags;return 7==e?null:e}get goalColumn(){let e=this.flags>>6;return 16777215==e?void 0:e}map(e,t=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new gP(i,r,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return vP.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return vP.range(this.anchor,i)}eq(e,t=!1){return!(this.anchor!=e.anchor||this.head!=e.head||t&&this.empty&&this.assoc!=e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||"number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid JSON representation for SelectionRange");return vP.range(e.anchor,e.head)}static create(e,t,i){return new gP(e,t,i)}}class vP{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:vP.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new vP([this.main],0)}addRange(e,t=!0){return vP.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,vP.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||"number"!=typeof e.main||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new vP(e.ranges.map(e=>gP.fromJSON(e)),e.main)}static single(e,t=e){return new vP([vP.range(e,t)],0)}static create(e,t=0){if(0==e.length)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let n=e[r];if(n.empty?n.from<=i:n.from<i)return vP.normalized(e.slice(),t);i=n.to}return new vP(e,t)}static cursor(e,t=0,i,r){return gP.create(e,e,(0==t?0:t<0?8:16)|(null==i?7:Math.min(6,i))|(null!=r?r:16777215)<<6)}static range(e,t,i,r){let n=(null!=i?i:16777215)<<6|(null==r?7:Math.min(6,r));return t<e?gP.create(t,e,48|n):gP.create(e,t,(t>e?8:0)|n)}static normalized(e,t=0){let i=e[t];e.sort((e,t)=>e.from-t.from),t=e.indexOf(i);for(let i=1;i<e.length;i++){let r=e[i],n=e[i-1];if(r.empty?r.from<=n.to:r.from<n.to){let o=n.from,s=Math.max(r.to,n.to);i<=t&&t--,e.splice(--i,2,r.anchor>r.head?vP.range(s,o):vP.range(o,s))}}return new vP(e,t)}}function OP(e,t){for(let i of e.ranges)if(i.to>t)throw new RangeError("Selection points outside of document")}let yP=0;class bP{constructor(e,t,i,r,n){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=r,this.id=yP++,this.default=e([]),this.extensions="function"==typeof n?n(this):n}get reader(){return this}static define(e={}){return new bP(e.combine||(e=>e),e.compareInput||((e,t)=>e===t),e.compare||(e.combine?(e,t)=>e===t:xP),!!e.static,e.enables)}of(e){return new wP([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new wP(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new wP(e,this,2,t)}from(e,t){return t||(t=e=>e),this.compute([e],i=>t(i.field(e)))}}function xP(e,t){return e==t||e.length==t.length&&e.every((e,i)=>e===t[i])}class wP{constructor(e,t,i,r){this.dependencies=e,this.facet=t,this.type=i,this.value=r,this.id=yP++}dynamicSlot(e){var t;let i=this.value,r=this.facet.compareInput,n=this.id,o=e[n]>>1,s=2==this.type,a=!1,l=!1,c=[];for(let i of this.dependencies)"doc"==i?a=!0:"selection"==i?l=!0:1&(null!==(t=e[i.id])&&void 0!==t?t:1)||c.push(e[i.id]);return{create:e=>(e.values[o]=i(e),1),update(e,t){if(a&&t.docChanged||l&&(t.docChanged||t.selection)||SP(e,c)){let t=i(e);if(s?!kP(t,e.values[o],r):!r(t,e.values[o]))return e.values[o]=t,1}return 0},reconfigure:(e,t)=>{let a,l=t.config.address[n];if(null!=l){let n=zP(t,l);if(this.dependencies.every(i=>i instanceof bP?t.facet(i)===e.facet(i):!(i instanceof CP)||t.field(i,!1)==e.field(i,!1))||(s?kP(a=i(e),n,r):r(a=i(e),n)))return e.values[o]=n,0}else a=i(e);return e.values[o]=a,1}}}}function kP(e,t,i){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!i(e[r],t[r]))return!1;return!0}function SP(e,t){let i=!1;for(let r of t)1&LP(e,r)&&(i=!0);return i}function _P(e,t,i){let r=i.map(t=>e[t.id]),n=i.map(e=>e.type),o=r.filter(e=>!(1&e)),s=e[t.id]>>1;function a(e){let i=[];for(let t=0;t<r.length;t++){let o=zP(e,r[t]);if(2==n[t])for(let e of o)i.push(e);else i.push(o)}return t.combine(i)}return{create(e){for(let t of r)LP(e,t);return e.values[s]=a(e),1},update(e,i){if(!SP(e,o))return 0;let r=a(e);return t.compare(r,e.values[s])?0:(e.values[s]=r,1)},reconfigure(e,n){let o=SP(e,r),l=n.config.facets[t.id],c=n.facet(t);if(l&&!o&&xP(i,l))return e.values[s]=c,0;let d=a(e);return t.compare(d,c)?(e.values[s]=c,0):(e.values[s]=d,1)}}}const TP=bP.define({static:!0});class CP{constructor(e,t,i,r,n){this.id=e,this.createF=t,this.updateF=i,this.compareF=r,this.spec=n,this.provides=void 0}static define(e){let t=new CP(yP++,e.create,e.update,e.compare||((e,t)=>e===t),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(TP).find(e=>e.field==this);return((null==t?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:e=>(e.values[t]=this.create(e),1),update:(e,i)=>{let r=e.values[t],n=this.updateF(r,i);return this.compareF(r,n)?0:(e.values[t]=n,1)},reconfigure:(e,i)=>{let r,n=e.facet(TP),o=i.facet(TP);return(r=n.find(e=>e.field==this))&&r!=o.find(e=>e.field==this)?(e.values[t]=r.create(e),1):null!=i.config.address[this.id]?(e.values[t]=i.field(this),0):(e.values[t]=this.create(e),1)}}}init(e){return[this,TP.of({field:this,create:e})]}get extension(){return this}}const PP=4,EP=3,$P=2,AP=1;function IP(e){return t=>new RP(t,e)}const QP={highest:IP(0),high:IP(AP),default:IP($P),low:IP(EP),lowest:IP(PP)};class RP{constructor(e,t){this.inner=e,this.prec=t}}class DP{of(e){return new MP(this,e)}reconfigure(e){return DP.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class MP{constructor(e,t){this.compartment=e,this.inner=t}}class NP{constructor(e,t,i,r,n,o){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=r,this.staticValues=n,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return null==t?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let r=[],n=Object.create(null),o=new Map;for(let i of function(e,t,i){let r=[[],[],[],[],[]],n=new Map;function o(e,s){let a=n.get(e);if(null!=a){if(a<=s)return;let t=r[a].indexOf(e);t>-1&&r[a].splice(t,1),e instanceof MP&&i.delete(e.compartment)}if(n.set(e,s),Array.isArray(e))for(let t of e)o(t,s);else if(e instanceof MP){if(i.has(e.compartment))throw new RangeError("Duplicate use of compartment in extensions");let r=t.get(e.compartment)||e.inner;i.set(e.compartment,r),o(r,s)}else if(e instanceof RP)o(e.inner,e.prec);else if(e instanceof CP)r[s].push(e),e.provides&&o(e.provides,s);else if(e instanceof wP)r[s].push(e),e.facet.extensions&&o(e.facet.extensions,$P);else{let t=e.extension;if(!t)throw new Error(`Unrecognized extension value in extension set (${e}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(t,s)}}return o(e,$P),r.reduce((e,t)=>e.concat(t))}(e,t,o))i instanceof CP?r.push(i):(n[i.facet.id]||(n[i.facet.id]=[])).push(i);let s=Object.create(null),a=[],l=[];for(let e of r)s[e.id]=l.length<<1,l.push(t=>e.slot(t));let c=null==i?void 0:i.config.facets;for(let e in n){let t=n[e],r=t[0].facet,o=c&&c[e]||[];if(t.every(e=>0==e.type))if(s[r.id]=a.length<<1|1,xP(o,t))a.push(i.facet(r));else{let e=r.combine(t.map(e=>e.value));a.push(i&&r.compare(e,i.facet(r))?i.facet(r):e)}else{for(let e of t)0==e.type?(s[e.id]=a.length<<1|1,a.push(e.value)):(s[e.id]=l.length<<1,l.push(t=>e.dynamicSlot(t)));s[r.id]=l.length<<1,l.push(e=>_P(e,r,t))}}let d=l.map(e=>e(s));return new NP(e,o,d,s,a,n)}}function LP(e,t){if(1&t)return 2;let i=t>>1,r=e.status[i];if(4==r)throw new Error("Cyclic dependency between fields and/or facets");if(2&r)return r;e.status[i]=4;let n=e.computeSlot(e,e.config.dynamicSlots[i]);return e.status[i]=2|n}function zP(e,t){return 1&t?e.config.staticValues[t>>1]:e.values[t>>1]}const VP=bP.define(),UP=bP.define({combine:e=>e.some(e=>e),static:!0}),qP=bP.define({combine:e=>e.length?e[0]:void 0,static:!0}),XP=bP.define(),ZP=bP.define(),BP=bP.define(),jP=bP.define({combine:e=>!!e.length&&e[0]});class FP{constructor(e,t){this.type=e,this.value=t}static define(){return new WP}}class WP{of(e){return new FP(this,e)}}class YP{constructor(e){this.map=e}of(e){return new GP(this,e)}}class GP{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return void 0===t?void 0:t==this.value?this:new GP(this.type,t)}is(e){return this.type==e}static define(e={}){return new YP(e.map||(e=>e))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let r of e){let e=r.map(t);e&&i.push(e)}return i}}GP.reconfigure=GP.define(),GP.appendConfig=GP.define();class HP{constructor(e,t,i,r,n,o){this.startState=e,this.changes=t,this.selection=i,this.effects=r,this.annotations=n,this.scrollIntoView=o,this._doc=null,this._state=null,i&&OP(i,t.newLength),n.some(e=>e.type==HP.time)||(this.annotations=n.concat(HP.time.of(Date.now())))}static create(e,t,i,r,n,o){return new HP(e,t,i,r,n,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(HP.userEvent);return!(!t||!(t==e||t.length>e.length&&t.slice(0,e.length)==e&&"."==t[e.length]))}}function KP(e,t){let i=[];for(let r=0,n=0;;){let o,s;if(r<e.length&&(n==t.length||t[n]>=e[r]))o=e[r++],s=e[r++];else{if(!(n<t.length))return i;o=t[n++],s=t[n++]}!i.length||i[i.length-1]<o?i.push(o,s):i[i.length-1]<s&&(i[i.length-1]=s)}}function JP(e,t,i){var r;let n,o,s;return i?(n=t.changes,o=cP.empty(t.changes.length),s=e.changes.compose(t.changes)):(n=t.changes.map(e.changes),o=e.changes.mapDesc(t.changes,!0),s=e.changes.compose(n)),{changes:s,selection:t.selection?t.selection.map(o):null===(r=e.selection)||void 0===r?void 0:r.map(n),effects:GP.mapEffects(e.effects,n).concat(GP.mapEffects(t.effects,o)),annotations:e.annotations.length?e.annotations.concat(t.annotations):t.annotations,scrollIntoView:e.scrollIntoView||t.scrollIntoView}}function eE(e,t,i){let r=t.selection,n=rE(t.annotations);return t.userEvent&&(n=n.concat(HP.userEvent.of(t.userEvent))),{changes:t.changes instanceof cP?t.changes:cP.of(t.changes||[],i,e.facet(qP)),selection:r&&(r instanceof vP?r:vP.single(r.anchor,r.head)),effects:rE(t.effects),annotations:n,scrollIntoView:!!t.scrollIntoView}}function tE(e,t,i){let r=eE(e,t.length?t[0]:{},e.doc.length);t.length&&!1===t[0].filter&&(i=!1);for(let n=1;n<t.length;n++){!1===t[n].filter&&(i=!1);let o=!!t[n].sequential;r=JP(r,eE(e,t[n],o?r.changes.newLength:e.doc.length),o)}let n=HP.create(e,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return function(e){let t=e.startState,i=t.facet(BP),r=e;for(let n=i.length-1;n>=0;n--){let o=i[n](e);o&&Object.keys(o).length&&(r=JP(r,eE(t,o,e.changes.newLength),!0))}return r==e?e:HP.create(t,e.changes,e.selection,r.effects,r.annotations,r.scrollIntoView)}(i?function(e){let t=e.startState,i=!0;for(let r of t.facet(XP)){let t=r(e);if(!1===t){i=!1;break}Array.isArray(t)&&(i=!0===i?t:KP(i,t))}if(!0!==i){let r,n;if(!1===i)n=e.changes.invertedDesc,r=cP.empty(t.doc.length);else{let t=e.changes.filter(i);r=t.changes,n=t.filtered.mapDesc(t.changes).invertedDesc}e=HP.create(t,r,e.selection&&e.selection.map(n),GP.mapEffects(e.effects,n),e.annotations,e.scrollIntoView)}let r=t.facet(ZP);for(let i=r.length-1;i>=0;i--){let n=r[i](e);e=n instanceof HP?n:Array.isArray(n)&&1==n.length&&n[0]instanceof HP?n[0]:tE(t,rE(n),!1)}return e}(n):n)}HP.time=FP.define(),HP.userEvent=FP.define(),HP.addToHistory=FP.define(),HP.remote=FP.define();const iE=[];function rE(e){return null==e?iE:Array.isArray(e)?e:[e]}var nE=function(e){return e[e.Word=0]="Word",e[e.Space=1]="Space",e[e.Other=2]="Other",e}(nE||(nE={}));const oE=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let sE;try{sE=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(F){}function aE(e){return t=>{if(!/\S/.test(t))return nE.Space;if(function(e){if(sE)return sE.test(e);for(let t=0;t<e.length;t++){let i=e[t];if(/\w/.test(i)||i>""&&(i.toUpperCase()!=i.toLowerCase()||oE.test(i)))return!0}return!1}(t))return nE.Word;for(let i=0;i<e.length;i++)if(t.indexOf(e[i])>-1)return nE.Word;return nE.Other}}class lE{constructor(e,t,i,r,n,o){this.config=e,this.doc=t,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=n,o&&(o._state=this);for(let e=0;e<this.config.dynamicSlots.length;e++)LP(this,e<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(null!=i)return LP(this,i),zP(this,i);if(t)throw new RangeError("Field is not present in this state")}update(...e){return tE(this,e,!0)}applyTransaction(e){let t,i=this.config,{base:r,compartments:n}=i;for(let t of e.effects)t.is(DP.reconfigure)?(i&&(n=new Map,i.compartments.forEach((e,t)=>n.set(t,e)),i=null),n.set(t.value.compartment,t.value.extension)):t.is(GP.reconfigure)?(i=null,r=t.value):t.is(GP.appendConfig)&&(i=null,r=rE(r).concat(t.value));if(i)t=e.startState.values.slice();else{i=NP.resolve(r,n,this),t=new lE(i,this.doc,this.selection,i.dynamicSlots.map(()=>null),(e,t)=>t.reconfigure(e,this),null).values}let o=e.startState.facet(UP)?e.newSelection:e.newSelection.asSingle();new lE(i,e.newDoc,o,t,(t,i)=>i.update(t,e),e)}replaceSelection(e){return"string"==typeof e&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:vP.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),r=this.changes(i.changes),n=[i.range],o=rE(i.effects);for(let i=1;i<t.ranges.length;i++){let s=e(t.ranges[i]),a=this.changes(s.changes),l=a.map(r);for(let e=0;e<i;e++)n[e]=n[e].map(l);let c=r.mapDesc(a,!0);n.push(s.range.map(c)),r=r.compose(l),o=GP.mapEffects(o,l).concat(GP.mapEffects(rE(s.effects),c))}return{changes:r,selection:vP.create(n,t.mainIndex),effects:o}}changes(e=[]){return e instanceof cP?e:cP.of(e,this.doc.length,this.facet(lE.lineSeparator))}toText(e){return jC.of(e.split(this.facet(lE.lineSeparator)||sP))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return null==t?e.default:(LP(this,t),zP(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof CP&&null!=this.config.address[r.id]&&(t[i]=r.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||"string"!=typeof e.doc)throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i)for(let t in i)if(Object.prototype.hasOwnProperty.call(e,t)){let n=i[t],o=e[t];r.push(n.init(e=>n.spec.fromJSON(o,e)))}return lE.create({doc:e.doc,selection:vP.fromJSON(e.selection),extensions:t.extensions?r.concat([t.extensions]):r})}static create(e={}){let t=NP.resolve(e.extensions||[],new Map),i=e.doc instanceof jC?e.doc:jC.of((e.doc||"").split(t.staticFacet(lE.lineSeparator)||sP)),r=e.selection?e.selection instanceof vP?e.selection:vP.single(e.selection.anchor,e.selection.head):vP.single(0);return OP(r,i.length),t.staticFacet(UP)||(r=r.asSingle()),new lE(t,i,r,t.dynamicSlots.map(()=>null),(e,t)=>t.create(e),null)}get tabSize(){return this.facet(lE.tabSize)}get lineBreak(){return this.facet(lE.lineSeparator)||"\n"}get readOnly(){return this.facet(jP)}phrase(e,...t){for(let t of this.facet(lE.phrases))if(Object.prototype.hasOwnProperty.call(t,e)){e=t[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(e,i)=>{if("$"==i)return"$";let r=+(i||1);return!r||r>t.length?e:t[r-1]})),e}languageDataAt(e,t,i=-1){let r=[];for(let n of this.facet(VP))for(let o of n(this,t,i))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return aE(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:r}=this.doc.lineAt(e),n=this.charCategorizer(e),o=e-i,s=e-i;for(;o>0;){let e=iP(t,o,!1);if(n(t.slice(e,o))!=nE.Word)break;o=e}for(;s<r;){let e=iP(t,s);if(n(t.slice(s,e))!=nE.Word)break;s=e}return o==s?null:vP.range(o+i,s+i)}}function cE(e,t,i={}){let r={};for(let t of e)for(let e of Object.keys(t)){let n=t[e],o=r[e];if(void 0===o)r[e]=n;else if(o===n||void 0===n);else{if(!Object.hasOwnProperty.call(i,e))throw new Error("Config merge conflict for field "+e);r[e]=i[e](o,n)}}for(let e in t)void 0===r[e]&&(r[e]=t[e]);return r}lE.allowMultipleSelections=UP,lE.tabSize=bP.define({combine:e=>e.length?e[0]:4}),lE.lineSeparator=qP,lE.readOnly=jP,lE.phrases=bP.define({compare(e,t){let i=Object.keys(e),r=Object.keys(t);return i.length==r.length&&i.every(i=>e[i]==t[i])}}),lE.languageData=VP,lE.changeFilter=XP,lE.transactionFilter=ZP,lE.transactionExtender=BP,DP.reconfigure=GP.define();class dE{eq(e){return this==e}range(e,t=e){return hE.create(e,t,this)}}dE.prototype.startSide=dE.prototype.endSide=0,dE.prototype.point=!1,dE.prototype.mapMode=aP.TrackDel;let hE=class e{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(t,i,r){return new e(t,i,r)}};function uE(e,t){return e.from-t.from||e.value.startSide-t.value.startSide}class pE{constructor(e,t,i,r){this.from=e,this.to=t,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,r=0){let n=i?this.to:this.from;for(let o=r,s=n.length;;){if(o==s)return o;let r=o+s>>1,a=n[r]-e||(i?this.value[r].endSide:this.value[r].startSide)-t;if(r==o)return a>=0?o:s;a>=0?s=r:o=r+1}}between(e,t,i,r){for(let n=this.findIndex(t,-1e9,!0),o=this.findIndex(i,1e9,!1,n);n<o;n++)if(!1===r(this.from[n]+e,this.to[n]+e,this.value[n]))return!1}map(e,t){let i=[],r=[],n=[],o=-1,s=-1;for(let a=0;a<this.value.length;a++){let l,c,d=this.value[a],h=this.from[a]+e,u=this.to[a]+e;if(h==u){let e=t.mapPos(h,d.startSide,d.mapMode);if(null==e)continue;if(l=c=e,d.startSide!=d.endSide&&(c=t.mapPos(h,d.endSide),c<l))continue}else if(l=t.mapPos(h,d.startSide),c=t.mapPos(u,d.endSide),l>c||l==c&&d.startSide>0&&d.endSide<=0)continue;(c-l||d.endSide-d.startSide)<0||(o<0&&(o=l),d.point&&(s=Math.max(s,c-l)),i.push(d),r.push(l-o),n.push(c-o))}return{mapped:i.length?new pE(r,n,i,s):null,pos:o}}}class fE{constructor(e,t,i,r){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=r}static create(e,t,i,r){return new fE(e,t,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:r=0,filterTo:n=this.length}=e,o=e.filter;if(0==t.length&&!o)return this;if(i&&(t=t.slice().sort(uE)),this.isEmpty)return t.length?fE.of(t):this;let s=new vE(this,null,-1).goto(0),a=0,l=[],c=new mE;for(;s.value||a<t.length;)if(a<t.length&&(s.from-t[a].from||s.startSide-t[a].value.startSide)>=0){let e=t[a++];c.addInner(e.from,e.to,e.value)||l.push(e)}else 1==s.rangeIndex&&s.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(s.chunkIndex)<t[a].from)&&(!o||r>this.chunkEnd(s.chunkIndex)||n<this.chunkPos[s.chunkIndex])&&c.addChunk(this.chunkPos[s.chunkIndex],this.chunk[s.chunkIndex])?s.nextChunk():((!o||r>s.to||n<s.from||o(s.from,s.to,s.value))&&(c.addInner(s.from,s.to,s.value)||l.push(hE.create(s.from,s.to,s.value))),s.next());return c.finishInner(this.nextLayer.isEmpty&&!l.length?fE.empty:this.nextLayer.update({add:l,filter:o,filterFrom:r,filterTo:n}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],r=-1;for(let n=0;n<this.chunk.length;n++){let o=this.chunkPos[n],s=this.chunk[n],a=e.touchesRange(o,o+s.length);if(!1===a)r=Math.max(r,s.maxPoint),t.push(s),i.push(e.mapPos(o));else if(!0===a){let{mapped:n,pos:a}=s.map(o,e);n&&(r=Math.max(r,n.maxPoint),t.push(n),i.push(a))}}let n=this.nextLayer.map(e);return 0==t.length?n:new fE(i,t,n||fE.empty,r)}between(e,t,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let n=this.chunkPos[r],o=this.chunk[r];if(t>=n&&e<=n+o.length&&!1===o.between(n,e-n,t-n,i))return}this.nextLayer.between(e,t,i)}}iter(e=0){return OE.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return OE.from(e).goto(t)}static compare(e,t,i,r,n=-1){let o=e.filter(e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=n),s=t.filter(e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=n),a=gE(o,s,i),l=new bE(o,a,n),c=new bE(s,a,n);i.iterGaps((e,t,i)=>xE(l,e,c,t,i,r)),i.empty&&0==i.length&&xE(l,0,c,0,0,r)}static eq(e,t,i=0,r){null==r&&(r=999999999);let n=e.filter(e=>!e.isEmpty&&t.indexOf(e)<0),o=t.filter(t=>!t.isEmpty&&e.indexOf(t)<0);if(n.length!=o.length)return!1;if(!n.length)return!0;let s=gE(n,o),a=new bE(n,s,0).goto(i),l=new bE(o,s,0).goto(i);for(;;){if(a.to!=l.to||!wE(a.active,l.active)||a.point&&(!l.point||!a.point.eq(l.point)))return!1;if(a.to>r)return!0;a.next(),l.next()}}static spans(e,t,i,r,n=-1){let o=new bE(e,null,n).goto(t),s=t,a=o.openStart;for(;;){let e=Math.min(o.to,i);if(o.point){let i=o.activeForPoint(o.to),n=o.pointFrom<t?i.length+1:o.point.startSide<0?i.length:Math.min(i.length,a);r.point(s,e,o.point,i,n,o.pointRank),a=Math.min(o.openEnd(e),i.length)}else e>s&&(r.span(s,e,o.active,a),a=o.openEnd(e));if(o.to>i)return a+(o.point&&o.to>i?1:0);s=o.to,o.next()}}static of(e,t=!1){let i=new mE;for(let r of e instanceof hE?[e]:t?function(e){if(e.length>1)for(let t=e[0],i=1;i<e.length;i++){let r=e[i];if(uE(t,r)>0)return e.slice().sort(uE);t=r}return e}(e):e)i.add(r.from,r.to,r.value);return i.finish()}static join(e){if(!e.length)return fE.empty;let t=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let r=e[i];r!=fE.empty;r=r.nextLayer)t=new fE(r.chunkPos,r.chunk,t,Math.max(r.maxPoint,t.maxPoint));return t}}fE.empty=new fE([],[],null,-1),fE.empty.nextLayer=fE.empty;class mE{finishChunk(e){this.chunks.push(new pE(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new mE)).add(e,t,i)}addInner(e,t,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(r<0)&&(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(fE.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return e;let t=fE.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function gE(e,t,i){let r=new Map;for(let t of e)for(let e=0;e<t.chunk.length;e++)t.chunk[e].maxPoint<=0&&r.set(t.chunk[e],t.chunkPos[e]);let n=new Set;for(let e of t)for(let t=0;t<e.chunk.length;t++){let o=r.get(e.chunk[t]);null==o||(i?i.mapPos(o):o)!=e.chunkPos[t]||(null==i?void 0:i.touchesRange(o,o+e.chunk[t].length))||n.add(e.chunk[t])}return n}class vE{constructor(e,t,i,r=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let t=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(t)||this.layer.chunkEnd(this.chunkIndex)<e||t.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class OE{constructor(e){this.heap=e}static from(e,t=null,i=-1){let r=[];for(let n=0;n<e.length;n++)for(let o=e[n];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&r.push(new vE(o,t,i,n));return 1==r.length?r[0]:new OE(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let e=this.heap.length>>1;e>=0;e--)yE(this.heap,e);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let e=this.heap.length>>1;e>=0;e--)yE(this.heap,e);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),yE(this.heap,0)}}}function yE(e,t){for(let i=e[t];;){let r=1+(t<<1);if(r>=e.length)break;let n=e[r];if(r+1<e.length&&n.compare(e[r+1])>=0&&(n=e[r+1],r++),i.compare(n)<0)break;e[r]=i,e[t]=n,t=r}}class bE{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=OE.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){kE(this.active,e),kE(this.activeTo,e),kE(this.activeRank,e),this.minActive=_E(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:r,rank:n}=this.cursor;for(;t<this.activeRank.length&&(n-this.activeRank[t]||r-this.activeTo[t])>0;)t++;SE(this.active,t,i),SE(this.activeTo,t,r),SE(this.activeRank,t,n),e&&SE(e,t,this.cursor.from),this.minActive=_E(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&kE(i,r)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let e=this.cursor.value;if(e.point){if(!(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)){this.point=e,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=e.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(i),this.cursor.next()}}}if(i){this.openStart=0;for(let t=i.length-1;t>=0&&i[t]<e;t--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function xE(e,t,i,r,n,o){e.goto(t),i.goto(r);let s=r+n,a=r,l=r-t;for(;;){let t=e.to+l-i.to,r=t||e.endSide-i.endSide,n=r<0?e.to+l:i.to,c=Math.min(n,s);if(e.point||i.point?e.point&&i.point&&(e.point==i.point||e.point.eq(i.point))&&wE(e.activeForPoint(e.to),i.activeForPoint(i.to))||o.comparePoint(a,c,e.point,i.point):c>a&&!wE(e.active,i.active)&&o.compareRange(a,c,e.active,i.active),n>s)break;(t||e.openEnd!=i.openEnd)&&o.boundChange&&o.boundChange(n),a=n,r<=0&&e.next(),r>=0&&i.next()}}function wE(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!=t[i]&&!e[i].eq(t[i]))return!1;return!0}function kE(e,t){for(let i=t,r=e.length-1;i<r;i++)e[i]=e[i+1];e.pop()}function SE(e,t,i){for(let i=e.length-1;i>=t;i--)e[i+1]=e[i];e[t]=i}function _E(e,t){let i=-1,r=1e9;for(let n=0;n<t.length;n++)(t[n]-r||e[n].endSide-e[i].endSide)<0&&(i=n,r=t[n]);return i}function TE(e,t,i=e.length){let r=0;for(let n=0;n<i&&n<e.length;)9==e.charCodeAt(n)?(r+=t-r%t,n++):(r++,n=iP(e,n));return r}function CE(e,t,i,r){for(let r=0,n=0;;){if(n>=t)return r;if(r==e.length)break;n+=9==e.charCodeAt(r)?i-n%i:1,r=iP(e,r)}return!0===r?-1:e.length}const PE="undefined"==typeof Symbol?"__":Symbol.for(""),EE="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),$E="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{};class AE{constructor(e,t){this.rules=[];let{finish:i}=t||{};function r(e){return/^@/.test(e)?[e]:e.split(/,\s*/)}function n(e,t,o,s){let a=[],l=/^@(\w+)\b/.exec(e[0]),c=l&&"keyframes"==l[1];if(l&&null==t)return o.push(e[0]+";");for(let i in t){let s=t[i];if(/&/.test(i))n(i.split(/,\s*/).map(t=>e.map(e=>t.replace(/&/,e))).reduce((e,t)=>e.concat(t)),s,o);else if(s&&"object"==typeof s){if(!l)throw new RangeError("The value of a property ("+i+") should be a primitive value.");n(r(i),s,a,c)}else null!=s&&a.push(i.replace(/_.*/,"").replace(/[A-Z]/g,e=>"-"+e.toLowerCase())+": "+s+";")}(a.length||c)&&o.push((!i||l||s?e:e.map(i)).join(", ")+" {"+a.join(" ")+"}")}for(let t in e)n(r(t),e[t],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let e=$E[PE]||1;return $E[PE]=e+1,""+e.toString(36)}static mount(e,t,i){let r=e[EE],n=i&&i.nonce;r?n&&r.setNonce(n):r=new QE(e,n),r.mount(Array.isArray(t)?t:[t],e)}}let IE=new Map;class QE{constructor(e,t){let i=e.ownerDocument||e,r=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let t=IE.get(i);if(t)return e[EE]=t;this.sheet=new r.CSSStyleSheet,IE.set(i,this)}else this.styleTag=i.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[EE]=this}mount(e,t){let i=this.sheet,r=0,n=0;for(let t=0;t<e.length;t++){let o=e[t],s=this.modules.indexOf(o);if(s<n&&s>-1&&(this.modules.splice(s,1),n--,s=-1),-1==s){if(this.modules.splice(n++,0,o),i)for(let e=0;e<o.rules.length;e++)i.insertRule(o.rules[e],r++)}else{for(;n<s;)r+=this.modules[n++].rules.length;r+=o.rules.length,n++}}if(i)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let e="";for(let t=0;t<this.modules.length;t++)e+=this.modules[t].getRules()+"\n";this.styleTag.textContent=e;let i=t.head||t;this.styleTag.parentNode!=i&&i.insertBefore(this.styleTag,i.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}for(var RE={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},DE={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},ME="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),NE="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),LE=0;LE<10;LE++)RE[48+LE]=RE[96+LE]=String(LE);for(LE=1;LE<=24;LE++)RE[LE+111]="F"+LE;for(LE=65;LE<=90;LE++)RE[LE]=String.fromCharCode(LE+32),DE[LE]=String.fromCharCode(LE);for(var zE in RE)DE.hasOwnProperty(zE)||(DE[zE]=RE[zE]);function VE(){var e=arguments[0];"string"==typeof e&&(e=document.createElement(e));var t=1,i=arguments[1];if(i&&"object"==typeof i&&null==i.nodeType&&!Array.isArray(i)){for(var r in i)if(Object.prototype.hasOwnProperty.call(i,r)){var n=i[r];"string"==typeof n?e.setAttribute(r,n):null!=n&&(e[r]=n)}t++}for(;t<arguments.length;t++)UE(e,arguments[t]);return e}function UE(e,t){if("string"==typeof t)e.appendChild(document.createTextNode(t));else if(null==t);else if(null!=t.nodeType)e.appendChild(t);else{if(!Array.isArray(t))throw new RangeError("Unsupported child node: "+t);for(var i=0;i<t.length;i++)UE(e,t[i])}}let qE="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},XE="undefined"!=typeof document?document:{documentElement:{style:{}}};const ZE=/Edge\/(\d+)/.exec(qE.userAgent),BE=/MSIE \d/.test(qE.userAgent),jE=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(qE.userAgent),FE=!!(BE||jE||ZE),WE=!FE&&/gecko\/(\d+)/i.test(qE.userAgent),YE=!FE&&/Chrome\/(\d+)/.exec(qE.userAgent),GE="webkitFontSmoothing"in XE.documentElement.style,HE=!FE&&/Apple Computer/.test(qE.vendor),KE=HE&&(/Mobile\/\w+/.test(qE.userAgent)||qE.maxTouchPoints>2);var JE={mac:KE||/Mac/.test(qE.platform),windows:/Win/.test(qE.platform),linux:/Linux|X11/.test(qE.platform),ie:FE,ie_version:BE?XE.documentMode||6:jE?+jE[1]:ZE?+ZE[1]:0,gecko:WE,gecko_version:WE?+(/Firefox\/(\d+)/.exec(qE.userAgent)||[0,0])[1]:0,chrome:!!YE,chrome_version:YE?+YE[1]:0,ios:KE,android:/Android\b/.test(qE.userAgent),webkit_version:GE?+(/\bAppleWebKit\/(\d+)/.exec(qE.userAgent)||[0,0])[1]:0,safari:HE,safari_version:HE?+(/\bVersion\/(\d+(\.\d+)?)/.exec(qE.userAgent)||[0,0])[1]:0,tabSize:null!=XE.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};function e$(e){let t;return t=11==e.nodeType?e.getSelection?e:e.ownerDocument:e,t.getSelection()}function t$(e,t){return!!t&&(e==t||e.contains(1!=t.nodeType?t.parentNode:t))}function i$(e,t){if(!t.anchorNode)return!1;try{return t$(e,t.anchorNode)}catch(e){return!1}}function r$(e){return 3==e.nodeType?g$(e,0,e.nodeValue.length).getClientRects():1==e.nodeType?e.getClientRects():[]}function n$(e,t,i,r){return!!i&&(a$(e,t,i,r,-1)||a$(e,t,i,r,1))}function o$(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t}function s$(e){return 1==e.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(e.nodeName)}function a$(e,t,i,r,n){for(;;){if(e==i&&t==r)return!0;if(t==(n<0?0:l$(e))){if("DIV"==e.nodeName)return!1;let i=e.parentNode;if(!i||1!=i.nodeType)return!1;t=o$(e)+(n<0?0:1),e=i}else{if(1!=e.nodeType)return!1;if(1==(e=e.childNodes[t+(n<0?-1:0)]).nodeType&&"false"==e.contentEditable)return!1;t=n<0?l$(e):0}}}function l$(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function c$(e,t){let i=t?e.left:e.right;return{left:i,right:i,top:e.top,bottom:e.bottom}}function d$(e){let t=e.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}function h$(e,t){let i=t.width/e.offsetWidth,r=t.height/e.offsetHeight;return(i>.995&&i<1.005||!isFinite(i)||Math.abs(t.width-e.offsetWidth)<1)&&(i=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(t.height-e.offsetHeight)<1)&&(r=1),{scaleX:i,scaleY:r}}class u${constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:i}=e;this.set(t,Math.min(e.anchorOffset,t?l$(t):0),i,Math.min(e.focusOffset,i?l$(i):0))}set(e,t,i,r){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=r}}let p$,f$=null;function m$(e){if(e.setActive)return e.setActive();if(f$)return e.focus(f$);let t=[];for(let i=e;i&&(t.push(i,i.scrollTop,i.scrollLeft),i!=i.ownerDocument);i=i.parentNode);if(e.focus(null==f$?{get preventScroll(){return f$={preventScroll:!0},!0}}:void 0),!f$){f$=!1;for(let e=0;e<t.length;){let i=t[e++],r=t[e++],n=t[e++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=n&&(i.scrollLeft=n)}}}function g$(e,t,i=t){let r=p$||(p$=document.createRange());return r.setEnd(e,i),r.setStart(e,t),r}function v$(e,t,i,r){let n={key:t,code:t,keyCode:i,which:i,cancelable:!0};r&&({altKey:n.altKey,ctrlKey:n.ctrlKey,shiftKey:n.shiftKey,metaKey:n.metaKey}=r);let o=new KeyboardEvent("keydown",n);o.synthetic=!0,e.dispatchEvent(o);let s=new KeyboardEvent("keyup",n);return s.synthetic=!0,e.dispatchEvent(s),o.defaultPrevented||s.defaultPrevented}function O$(e){for(;e.attributes.length;)e.removeAttributeNode(e.attributes[0])}function y$(e){return e.scrollTop>Math.max(1,e.scrollHeight-e.clientHeight-4)}function b$(e,t){for(let i=e,r=t;;){if(3==i.nodeType&&r>0)return{node:i,offset:r};if(1==i.nodeType&&r>0){if("false"==i.contentEditable)return null;i=i.childNodes[r-1],r=l$(i)}else{if(!i.parentNode||s$(i))return null;r=o$(i),i=i.parentNode}}}function x$(e,t){for(let i=e,r=t;;){if(3==i.nodeType&&r<i.nodeValue.length)return{node:i,offset:r};if(1==i.nodeType&&r<i.childNodes.length){if("false"==i.contentEditable)return null;i=i.childNodes[r],r=0}else{if(!i.parentNode||s$(i))return null;r=o$(i)+1,i=i.parentNode}}}JE.safari&&JE.safari_version>=26&&(f$=!1);class w${constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new w$(e.parentNode,o$(e),t)}static after(e,t){return new w$(e.parentNode,o$(e)+1,t)}}const k$=[];class S${constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(2&this.flags){let i,r=this.dom,n=null;for(let o of this.children){if(7&o.flags){if(!o.dom&&(i=n?n.nextSibling:r.firstChild)){let e=S$.get(i);(!e||!e.parent&&e.canReuseDOM(o))&&o.reuseDOM(i)}o.sync(e,t),o.flags&=-8}if(i=n?n.nextSibling:r.firstChild,t&&!t.written&&t.node==r&&i!=o.dom&&(t.written=!0),o.dom.parentNode==r)for(;i&&i!=o.dom;)i=_$(i);else r.insertBefore(o.dom,i);n=o.dom}for(i=n?n.nextSibling:r.firstChild,i&&t&&t.node==r&&(t.written=!0);i;)i=_$(i)}else if(1&this.flags)for(let i of this.children)7&i.flags&&(i.sync(e,t),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let r=0==l$(e)?0:0==t?-1:1;for(;;){let t=e.parentNode;if(t==this.dom)break;0==r&&t.firstChild!=t.lastChild&&(r=e==t.firstChild?-1:1),e=t}i=r<0?e:e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!S$.get(i);)i=i.nextSibling;if(!i)return this.length;for(let e=0,t=0;;e++){let r=this.children[e];if(r.dom==i)return t;t+=r.length+r.breakAfter}}domBoundsAround(e,t,i=0){let r=-1,n=-1,o=-1,s=-1;for(let a=0,l=i,c=i;a<this.children.length;a++){let i=this.children[a],d=l+i.length;if(l<e&&d>t)return i.domBoundsAround(e,t,l);if(d>=e&&-1==r&&(r=a,n=l),l>t&&i.dom.parentNode==this.dom){o=a,s=c;break}c=d,l=d+i.breakAfter}return{from:n,to:s<0?i+this.length:s,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),1&t.flags)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,7&this.flags&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=k$){this.markDirty();for(let r=e;r<t;r++){let e=this.children[r];e.parent==this&&i.indexOf(e)<0&&e.destroy()}i.length<250?this.children.splice(e,t-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(t));for(let e=0;e<i.length;e++)i[e].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new T$(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==e?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,i,r,n,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!(8&(this.flags|e.flags))}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}function _$(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}S$.prototype.breakAfter=0;class T${constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function C$(e,t,i,r,n,o,s,a,l){let{children:c}=e,d=c.length?c[t]:null,h=o.length?o[o.length-1]:null,u=h?h.breakAfter:s;if(!(t==r&&d&&!s&&!u&&o.length<2&&d.merge(i,n,o.length?h:null,0==i,a,l))){if(r<c.length){let e=c[r];e&&(n<e.length||e.breakAfter&&(null==h?void 0:h.breakAfter))?(t==r&&(e=e.split(n),n=0),!u&&h&&e.merge(0,n,h,!0,0,l)?o[o.length-1]=e:((n||e.children.length&&!e.children[0].length)&&e.merge(0,n,null,!1,0,l),o.push(e))):(null==e?void 0:e.breakAfter)&&(h?h.breakAfter=1:s=1),r++}for(d&&(d.breakAfter=s,i>0&&(!s&&o.length&&d.merge(i,d.length,o[0],!1,a,0)?d.breakAfter=o.shift().breakAfter:(i<d.length||d.children.length&&0==d.children[d.children.length-1].length)&&d.merge(i,d.length,null,!1,a,0),t++));t<r&&o.length;)if(c[r-1].become(o[o.length-1]))r--,o.pop(),l=o.length?0:a;else{if(!c[t].become(o[0]))break;t++,o.shift(),a=o.length?0:l}!o.length&&t&&r<c.length&&!c[t-1].breakAfter&&c[r].merge(0,0,c[t-1],!1,a,l)&&t--,(t<r||o.length)&&e.replaceChildren(t,r,o)}}function P$(e,t,i,r,n,o){let s=e.childCursor(),{i:a,off:l}=s.findPos(i,1),{i:c,off:d}=s.findPos(t,-1),h=t-i;for(let e of r)h+=e.length;e.length+=h,C$(e,c,d,a,l,r,0,n,o)}class E$ extends S${constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){3==e.nodeType&&this.createDOM(e)}merge(e,t,i){return!(8&this.flags||i&&(!(i instanceof E$)||this.length-(t-e)+i.length>256||8&i.flags))&&(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new E$(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=8&this.flags,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new w$(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return function(e,t,i){let r=e.nodeValue.length;t>r&&(t=r);let n=t,o=t,s=0;0==t&&i<0||t==r&&i>=0?JE.chrome||JE.gecko||(t?(n--,s=1):o<r&&(o++,s=-1)):i<0?n--:o<r&&o++;let a=g$(e,n,o).getClientRects();if(!a.length)return null;let l=a[(s?s<0:i>=0)?0:a.length-1];JE.safari&&!s&&0==l.width&&(l=Array.prototype.find.call(a,e=>e.width)||l);return s?c$(l,s<0):l||null}(this.dom,e,t)}}class $$ extends S${constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let e of t)e.setParent(this)}setAttrs(e){if(O$(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!(8&(this.flags|e.flags))}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?4&this.flags&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,i,r,n,o){return(!i||!(!(i instanceof $$&&i.mark.eq(this.mark))||e&&n<=0||t<this.length&&o<=0))&&(P$(this,e,t,i?i.children.slice():[],n-1,o-1),this.markDirty(),!0)}split(e){let t=[],i=0,r=-1,n=0;for(let o of this.children){let s=i+o.length;s>e&&t.push(i<e?o.split(e-i):o),r<0&&i>=e&&(r=n),i=s,n++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new $$(this.mark,t,o)}domAtPos(e){return Q$(this,e)}coordsAt(e,t){return D$(this,e,t)}}class A$ extends S${static create(e,t,i){return new A$(e,t,i)}constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}split(e){let t=A$.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){this.dom&&this.widget.updateDOM(this.dom,e)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,i,r,n,o){return!(i&&(!(i instanceof A$&&this.widget.compare(i.widget))||e>0&&n<=0||t<this.length&&o<=0))&&(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e instanceof A$&&e.side==this.side&&this.widget.constructor==e.widget.constructor&&(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(0==this.length)return jC.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,i=t&&t.state.doc,r=this.posAtStart;return i?i.slice(r,r+this.length):jC.empty}domAtPos(e){return(this.length?0==e:this.side>0)?w$.before(this.dom):w$.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);if(i)return i;let r=this.dom.getClientRects(),n=null;if(!r.length)return null;let o=this.side?this.side<0:e>0;for(let t=o?r.length-1:0;n=r[t],!(e>0?0==t:t==r.length-1||n.top<n.bottom);t+=o?-1:1);return c$(n,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class I$ extends S${constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof I$&&e.side==this.side}split(){return new I$(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?w$.before(this.dom):w$.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return jC.empty}get isHidden(){return!0}}function Q$(e,t){let i=e.dom,{children:r}=e,n=0;for(let e=0;n<r.length;n++){let o=r[n],s=e+o.length;if(!(s==e&&o.getSide()<=0)){if(t>e&&t<s&&o.dom.parentNode==i)return o.domAtPos(t-e);if(t<=e)break;e=s}}for(let e=n;e>0;e--){let t=r[e-1];if(t.dom.parentNode==i)return t.domAtPos(t.length)}for(let e=n;e<r.length;e++){let t=r[e];if(t.dom.parentNode==i)return t.domAtPos(0)}return new w$(i,0)}function R$(e,t,i){let r,{children:n}=e;i>0&&t instanceof $$&&n.length&&(r=n[n.length-1])instanceof $$&&r.mark.eq(t.mark)?R$(r,t.children[0],i-1):(n.push(t),t.setParent(e)),e.length+=t.length}function D$(e,t,i){let r=null,n=-1,o=null,s=-1;!function e(t,a){for(let l=0,c=0;l<t.children.length&&c<=a;l++){let d=t.children[l],h=c+d.length;h>=a&&(d.children.length?e(d,a-c):(!o||o.isHidden&&(i>0||M$(o,d)))&&(h>a||c==h&&d.getSide()>0)?(o=d,s=a-c):(c<a||c==h&&d.getSide()<0&&!d.isHidden)&&(r=d,n=a-c)),c=h}}(e,t);let a=(i<0?r:o)||r||o;return a?a.coordsAt(Math.max(0,a==r?n:s),i):function(e){let t=e.dom.lastChild;if(!t)return e.dom.getBoundingClientRect();let i=r$(t);return i[i.length-1]||null}(e)}function M$(e,t){let i=e.coordsAt(0,1),r=t.coordsAt(0,1);return i&&r&&r.top<i.bottom}function N$(e,t){for(let i in e)"class"==i&&t.class?t.class+=" "+e.class:"style"==i&&t.style?t.style+=";"+e.style:t[i]=e[i];return t}E$.prototype.children=A$.prototype.children=I$.prototype.children=k$;const L$=Object.create(null);function z$(e,t,i){if(e==t)return!0;e||(e=L$),t||(t=L$);let r=Object.keys(e),n=Object.keys(t);if(r.length-(i&&r.indexOf(i)>-1?1:0)!=n.length-(i&&n.indexOf(i)>-1?1:0))return!1;for(let o of r)if(o!=i&&(-1==n.indexOf(o)||e[o]!==t[o]))return!1;return!0}function V$(e,t,i){let r=!1;if(t)for(let n in t)i&&n in i||(r=!0,"style"==n?e.style.cssText="":e.removeAttribute(n));if(i)for(let n in i)t&&t[n]==i[n]||(r=!0,"style"==n?e.style.cssText=i[n]:e.setAttribute(n,i[n]));return r}function U$(e){let t=Object.create(null);for(let i=0;i<e.attributes.length;i++){let r=e.attributes[i];t[r.name]=r.value}return t}class q${eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var X$=function(e){return e[e.Text=0]="Text",e[e.WidgetBefore=1]="WidgetBefore",e[e.WidgetAfter=2]="WidgetAfter",e[e.WidgetRange=3]="WidgetRange",e}(X$||(X$={}));class Z$ extends dE{constructor(e,t,i,r){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new B$(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return t+=i&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new F$(e,t,t,i,e.widget||null,!1)}static replace(e){let t,i,r=!!e.block;if(e.isBlockGap)t=-5e8,i=4e8;else{let{start:n,end:o}=W$(e,r);t=(n?r?-3e8:-1:5e8)-1,i=1+(o?r?2e8:1:-6e8)}return new F$(e,t,i,r,e.widget||null,!0)}static line(e){return new j$(e)}static set(e,t=!1){return fE.of(e,t)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}Z$.none=fE.empty;class B$ extends Z${constructor(e){let{start:t,end:i}=W$(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,i;return this==e||e instanceof B$&&this.tagName==e.tagName&&(this.class||(null===(t=this.attrs)||void 0===t?void 0:t.class))==(e.class||(null===(i=e.attrs)||void 0===i?void 0:i.class))&&z$(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}B$.prototype.point=!1;class j$ extends Z${constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof j$&&this.spec.class==e.spec.class&&z$(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}j$.prototype.mapMode=aP.TrackBefore,j$.prototype.point=!0;class F$ extends Z${constructor(e,t,i,r,n,o){super(t,i,n,e),this.block=r,this.isReplace=o,this.mapMode=r?t<=0?aP.TrackBefore:aP.TrackAfter:aP.TrackDel}get type(){return this.startSide!=this.endSide?X$.WidgetRange:this.startSide<=0?X$.WidgetBefore:X$.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof F$&&function(e,t){return e==t||!!(e&&t&&e.compare(t))}(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}function W$(e,t=!1){let{inclusiveStart:i,inclusiveEnd:r}=e;return null==i&&(i=e.inclusive),null==r&&(r=e.inclusive),{start:null!=i?i:t,end:null!=r?r:t}}function Y$(e,t,i,r=0){let n=i.length-1;n>=0&&i[n]+r>=e?i[n]=Math.max(i[n],t):i.push(e,t)}F$.prototype.point=!0;class G$ extends S${constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,r,n,o){if(i){if(!(i instanceof G$))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),P$(this,e,t,i?i.children.slice():[],n,o),!0}split(e){let t=new G$;if(t.breakAfter=this.breakAfter,0==this.length)return t;let{i,off:r}=this.childPos(e);r&&(t.append(this.children[i].split(r),0),this.children[i].merge(r,this.children[i].length,null,!1,0,0),i++);for(let e=i;e<this.children.length;e++)t.append(this.children[e],0);for(;i>0&&0==this.children[i-1].length;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){z$(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){R$(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=N$(t,this.attrs||{})),i&&(this.attrs=N$({class:i},this.attrs||{}))}domAtPos(e){return Q$(this,e)}reuseDOM(e){"DIV"==e.nodeName&&(this.setDOM(e),this.flags|=6)}sync(e,t){var i;this.dom?4&this.flags&&(O$(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(V$(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let r=this.dom.lastChild;for(;r&&S$.get(r)instanceof $$;)r=r.lastChild;if(!(r&&this.length&&("BR"==r.nodeName||0!=(null===(i=S$.get(r))||void 0===i?void 0:i.isEditable)||JE.ios&&this.children.some(e=>e instanceof E$)))){let e=document.createElement("BR");e.cmIgnore=!0,this.dom.appendChild(e)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let e,t=0;for(let i of this.children){if(!(i instanceof E$)||/[^ -~]/.test(i.text))return null;let r=r$(i.dom);if(1!=r.length)return null;t+=r[0].width,e=r[0].height}return t?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:t/this.length,textHeight:e}:null}coordsAt(e,t){let i=D$(this,e,t);if(!this.children.length&&i&&this.parent){let{heightOracle:e}=this.parent.view.viewState,t=i.bottom-i.top;if(Math.abs(t-e.lineHeight)<2&&e.textHeight<t){let r=(t-e.textHeight)/2;return{top:i.top+r,bottom:i.bottom-r,left:i.left,right:i.left}}}return i}become(e){return e instanceof G$&&0==this.children.length&&0==e.children.length&&z$(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let i=0,r=0;i<e.children.length;i++){let n=e.children[i],o=r+n.length;if(o>=t){if(n instanceof G$)return n;if(o>t)break}r=o+n.breakAfter}return null}}class H$ extends S${constructor(e,t,i){super(),this.widget=e,this.length=t,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,r,n,o){return!(i&&(!(i instanceof H$&&this.widget.compare(i.widget))||e>0&&n<=0||t<this.length&&o<=0))&&(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return 0==e?w$.before(this.dom):w$.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new H$(this.widget,t,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return k$}sync(e){this.dom&&this.widget.updateDOM(this.dom,e)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):jC.empty}domBoundsAround(){return null}become(e){return e instanceof H$&&e.widget.constructor==this.widget.constructor&&(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);return i||(this.widget instanceof K$?null:c$(this.dom.getBoundingClientRect(),this.length?0==e:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:i}=this.deco;return t!=i&&(e<0?t<0:i>0)}}class K$ extends q${constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class J${constructor(e,t,i,r){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof H$&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new G$),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(eA(new I$(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||e&&this.content.length&&this.content[this.content.length-1]instanceof H$||this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:t,lineBreak:i,done:r}=this.cursor.next(this.skip);if(this.skip=0,r)throw new Error("Ran out of text content when drawing inline views");if(i){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}this.text=t,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e),n=Math.min(r,512);this.flushBuffer(t.slice(t.length-i)),this.getLine().append(eA(new E$(this.text.slice(this.textOff,this.textOff+n)),t),i),this.atCursorPos=!0,this.textOff+=n,e-=n,i=r<=n?0:t.length}}span(e,t,i,r){this.buildText(t-e,i,r),this.pos=t,this.openStart<0&&(this.openStart=r)}point(e,t,i,r,n,o){if(this.disallowBlockEffectsFor[o]&&i instanceof F$){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let s=t-e;if(i instanceof F$)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new H$(i.widget||tA.block,s,i));else{let o=A$.create(i.widget||tA.inline,s,s?0:i.startSide),a=this.atCursorPos&&!o.isEditable&&n<=r.length&&(e<t||i.startSide>0),l=!o.isEditable&&(e<t||n>r.length||i.startSide<=0),c=this.getLine();2!=this.pendingBuffer||a||o.isEditable||(this.pendingBuffer=0),this.flushBuffer(r),a&&(c.append(eA(new I$(1),r),n),n=r.length+Math.max(0,n-r.length)),c.append(eA(o,r),n),this.atCursorPos=l,this.pendingBuffer=l?e<t||n>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);s&&(this.textOff+s<=this.text.length?this.textOff+=s:(this.skip+=s-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=n)}static build(e,t,i,r,n){let o=new J$(e,t,i,n);return o.openEnd=fE.spans(r,t,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function eA(e,t){for(let i of t)e=new $$(i,[e],e.length);return e}class tA extends q${constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}tA.inline=new tA("span"),tA.block=new tA("div");var iA=function(e){return e[e.LTR=0]="LTR",e[e.RTL=1]="RTL",e}(iA||(iA={}));const rA=iA.LTR,nA=iA.RTL;function oA(e){let t=[];for(let i=0;i<e.length;i++)t.push(1<<+e[i]);return t}const sA=oA("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),aA=oA("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),lA=Object.create(null),cA=[];for(let e of["()","[]","{}"]){let t=e.charCodeAt(0),i=e.charCodeAt(1);lA[t]=i,lA[i]=-t}function dA(e){return e<=247?sA[e]:1424<=e&&e<=1524?2:1536<=e&&e<=1785?aA[e-1536]:1774<=e&&e<=2220?4:8192<=e&&e<=8204?256:64336<=e&&e<=65023?4:1}const hA=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class uA{get dir(){return this.level%2?nA:rA}constructor(e,t,i){this.from=e,this.to=t,this.level=i}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,i,r){let n=-1;for(let o=0;o<e.length;o++){let s=e[o];if(s.from<=t&&s.to>=t){if(s.level==i)return o;(n<0||(0!=r?r<0?s.from<t:s.to>t:e[n].level>s.level))&&(n=o)}}if(n<0)throw new RangeError("Index out of range");return n}}function pA(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],n=t[i];if(r.from!=n.from||r.to!=n.to||r.direction!=n.direction||!pA(r.inner,n.inner))return!1}return!0}const fA=[];function mA(e,t,i,r,n,o,s){let a=r%2?2:1;if(r%2==n%2)for(let l=t,c=0;l<i;){let t=!0,d=!1;if(c==o.length||l<o[c].from){let e=fA[l];e!=a&&(t=!1,d=16==e)}let h=t||1!=a?null:[],u=t?r:r+1,p=l;e:for(;;)if(c<o.length&&p==o[c].from){if(d)break e;let f=o[c];if(!t)for(let e=f.to,t=c+1;;){if(e==i)break e;if(!(t<o.length&&o[t].from==e)){if(fA[e]==a)break e;break}e=o[t++].to}if(c++,h)h.push(f);else{f.from>l&&s.push(new uA(l,f.from,u)),gA(e,f.direction==rA!=!(u%2)?r+1:r,n,f.inner,f.from,f.to,s),l=f.to}p=f.to}else{if(p==i||(t?fA[p]!=a:fA[p]==a))break;p++}h?mA(e,l,p,r+1,n,h,s):l<p&&s.push(new uA(l,p,u)),l=p}else for(let l=i,c=o.length;l>t;){let i=!0,d=!1;if(!c||l>o[c-1].to){let e=fA[l-1];e!=a&&(i=!1,d=16==e)}let h=i||1!=a?null:[],u=i?r:r+1,p=l;e:for(;;)if(c&&p==o[c-1].to){if(d)break e;let f=o[--c];if(!i)for(let e=f.from,i=c;;){if(e==t)break e;if(!i||o[i-1].to!=e){if(fA[e-1]==a)break e;break}e=o[--i].from}if(h)h.push(f);else{f.to<l&&s.push(new uA(f.to,l,u)),gA(e,f.direction==rA!=!(u%2)?r+1:r,n,f.inner,f.from,f.to,s),l=f.from}p=f.from}else{if(p==t||(i?fA[p-1]!=a:fA[p-1]==a))break;p--}h?mA(e,p,l,r+1,n,h,s):p<l&&s.push(new uA(p,l,u)),l=p}}function gA(e,t,i,r,n,o,s){let a=t%2?2:1;!function(e,t,i,r,n){for(let o=0;o<=r.length;o++){let s=o?r[o-1].to:t,a=o<r.length?r[o].from:i,l=o?256:n;for(let t=s,i=l,r=l;t<a;t++){let n=dA(e.charCodeAt(t));512==n?n=i:8==n&&4==r&&(n=16),fA[t]=4==n?2:n,7&n&&(r=n),i=n}for(let e=s,t=l,r=l;e<a;e++){let n=fA[e];if(128==n)e<a-1&&t==fA[e+1]&&24&t?n=fA[e]=t:fA[e]=256;else if(64==n){let n=e+1;for(;n<a&&64==fA[n];)n++;let o=e&&8==t||n<i&&8==fA[n]?1==r?1:8:256;for(let t=e;t<n;t++)fA[t]=o;e=n-1}else 8==n&&1==r&&(fA[e]=1);t=n,7&n&&(r=n)}}}(e,n,o,r,a),function(e,t,i,r,n){let o=1==n?2:1;for(let s=0,a=0,l=0;s<=r.length;s++){let c=s?r[s-1].to:t,d=s<r.length?r[s].from:i;for(let t,i,r,s=c;s<d;s++)if(i=lA[t=e.charCodeAt(s)])if(i<0){for(let e=a-3;e>=0;e-=3)if(cA[e+1]==-i){let t=cA[e+2],i=2&t?n:4&t?1&t?o:n:0;i&&(fA[s]=fA[cA[e]]=i),a=e;break}}else{if(189==cA.length)break;cA[a++]=s,cA[a++]=t,cA[a++]=l}else if(2==(r=fA[s])||1==r){let e=r==n;l=e?0:1;for(let t=a-3;t>=0;t-=3){let i=cA[t+2];if(2&i)break;if(e)cA[t+2]|=2;else{if(4&i)break;cA[t+2]|=4}}}}}(e,n,o,r,a),function(e,t,i,r){for(let n=0,o=r;n<=i.length;n++){let s=n?i[n-1].to:e,a=n<i.length?i[n].from:t;for(let l=s;l<a;){let s=fA[l];if(256==s){let s=l+1;for(;;)if(s==a){if(n==i.length)break;s=i[n++].to,a=n<i.length?i[n].from:t}else{if(256!=fA[s])break;s++}let c=1==o,d=c==(1==(s<t?fA[s]:r))?c?1:2:r;for(let t=s,r=n,o=r?i[r-1].to:e;t>l;)t==o&&(t=i[--r].from,o=r?i[r-1].to:e),fA[--t]=d;l=s}else o=s,l++}}}(n,o,r,a),mA(e,n,o,t,i,r,s)}function vA(e){return[new uA(0,e,0)]}let OA="";function yA(e,t,i,r,n){var o;let s=r.head-e.from,a=uA.find(t,s,null!==(o=r.bidiLevel)&&void 0!==o?o:-1,r.assoc),l=t[a],c=l.side(n,i);if(s==c){let e=a+=n?1:-1;if(e<0||e>=t.length)return null;l=t[a=e],s=l.side(!n,i),c=l.side(n,i)}let d=iP(e.text,s,l.forward(n,i));(d<l.from||d>l.to)&&(d=c),OA=e.text.slice(Math.min(s,d),Math.max(s,d));let h=a==(n?t.length-1:0)?null:t[a+(n?1:-1)];return h&&d==c&&h.level+(n?0:1)<l.level?vP.cursor(h.side(!n,i)+e.from,h.forward(n,i)?1:-1,h.level):vP.cursor(d+e.from,l.forward(n,i)?-1:1,l.level)}function bA(e,t,i){for(let r=t;r<i;r++){let t=dA(e.charCodeAt(r));if(1==t)return rA;if(2==t||4==t)return nA}return rA}const xA=bP.define(),wA=bP.define(),kA=bP.define(),SA=bP.define(),_A=bP.define(),TA=bP.define(),CA=bP.define(),PA=bP.define(),EA=bP.define(),$A=bP.define({combine:e=>e.some(e=>e)}),AA=bP.define({combine:e=>e.some(e=>e)}),IA=bP.define();class QA{constructor(e,t="nearest",i="nearest",r=5,n=5,o=!1){this.range=e,this.y=t,this.x=i,this.yMargin=r,this.xMargin=n,this.isSnapshot=o}map(e){return e.empty?this:new QA(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new QA(vP.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const RA=GP.define({map:(e,t)=>e.map(t)}),DA=GP.define();function MA(e,t,i){let r=e.facet(SA);r.length?r[0](t):window.onerror&&window.onerror(String(t),i,void 0,void 0,t)||(i?console.error(i+":",t):console.error(t))}const NA=bP.define({combine:e=>!e.length||e[0]});let LA=0;const zA=bP.define({combine:e=>e.filter((t,i)=>{for(let r=0;r<i;r++)if(e[r].plugin==t.plugin)return!1;return!0})});class VA{constructor(e,t,i,r,n){this.id=e,this.create=t,this.domEventHandlers=i,this.domEventObservers=r,this.baseExtensions=n(this),this.extension=this.baseExtensions.concat(zA.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(zA.of({plugin:this,arg:e}))}static define(e,t){const{eventHandlers:i,eventObservers:r,provide:n,decorations:o}=t||{};return new VA(LA++,e,i,r,e=>{let t=[];return o&&t.push(ZA.of(t=>{let i=t.plugin(e);return i?o(i):Z$.none})),n&&t.push(n(e)),t})}static fromClass(e,t){return VA.define((t,i)=>new e(t,i),t)}}class UA{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let e=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(e)}catch(t){if(MA(e.state,t,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(e){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(t){MA(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(null===(t=this.value)||void 0===t?void 0:t.destroy)try{this.value.destroy()}catch(t){MA(e.state,t,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const qA=bP.define(),XA=bP.define(),ZA=bP.define(),BA=bP.define(),jA=bP.define(),FA=bP.define();function WA(e,t){let i=e.state.facet(FA);if(!i.length)return i;let r=i.map(t=>t instanceof Function?t(e):t),n=[];return fE.spans(r,t.from,t.to,{point(){},span(e,i,r,o){let s=e-t.from,a=i-t.from,l=n;for(let e=r.length-1;e>=0;e--,o--){let i,n=r[e].spec.bidiIsolate;if(null==n&&(n=bA(t.text,s,a)),o>0&&l.length&&(i=l[l.length-1]).to==s&&i.direction==n)i.to=a,l=i.inner;else{let e={from:s,to:a,direction:n,inner:[]};l.push(e),l=e.inner}}}}),n}const YA=bP.define();function GA(e){let t=0,i=0,r=0,n=0;for(let o of e.state.facet(YA)){let s=o(e);s&&(null!=s.left&&(t=Math.max(t,s.left)),null!=s.right&&(i=Math.max(i,s.right)),null!=s.top&&(r=Math.max(r,s.top)),null!=s.bottom&&(n=Math.max(n,s.bottom)))}return{left:t,right:i,top:r,bottom:n}}const HA=bP.define();class KA{constructor(e,t,i,r){this.fromA=e,this.toA=t,this.fromB=i,this.toB=r}join(e){return new KA(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let r=e[t-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(0==t.length)return e;let i=[];for(let r=0,n=0,o=0,s=0;;r++){let a=r==e.length?null:e[r],l=o-s,c=a?a.fromB:1e9;for(;n<t.length&&t[n]<c;){let e=t[n],r=t[n+1],o=Math.max(s,e),a=Math.min(c,r);if(o<=a&&new KA(o+l,a+l,o,a).addToSet(i),r>c)break;n+=2}if(!a)return i;new KA(a.fromA,a.toA,a.fromB,a.toB).addToSet(i),o=a.toA,s=a.toB}}}class JA{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=cP.empty(this.startState.doc.length);for(let e of i)this.changes=this.changes.compose(e.changes);let r=[];this.changes.iterChangedRanges((e,t,i,n)=>r.push(new KA(e,t,i,n))),this.changedRanges=r}static create(e,t,i){return new JA(e,t,i)}get viewportChanged(){return(4&this.flags)>0}get viewportMoved(){return(8&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(18&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return 0==this.flags&&0==this.transactions.length}}class eI extends S${get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Z$.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new G$],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new KA(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:e,toA:t})=>t<this.minWidthFrom||e>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&((null===(t=this.domChanged)||void 0===t?void 0:t.newSel)?r=this.domChanged.newSel.head:function(e,t){let i=!1;t&&e.iterChangedRanges((e,r)=>{e<t.to&&r>t.from&&(i=!0)});return i}(e.changes,this.hasComposition)||e.selectionSet||(r=e.state.selection.main.head));let n=r>-1?function(e,t,i){let r=tI(e,i);if(!r)return null;let{node:n,from:o,to:s}=r,a=n.nodeValue;if(/[\n\r]/.test(a))return null;if(e.state.doc.sliceString(r.from,r.to)!=a)return null;let l=t.invertedDesc,c=new KA(l.mapPos(o),l.mapPos(s),o,s),d=[];for(let t=n.parentNode;;t=t.parentNode){let i=S$.get(t);if(i instanceof $$)d.push({node:t,deco:i.mark});else{if(i instanceof G$||"DIV"==t.nodeName&&t.parentNode==e.contentDOM)return{range:c,text:n,marks:d,line:t};if(t==e.contentDOM)return null;d.push({node:t,deco:new B$({inclusive:!0,attributes:U$(t),tagName:t.tagName.toLowerCase()})})}}}(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:t,to:r}=this.hasComposition;i=new KA(t,r,e.changes.mapPos(t,-1),e.changes.mapPos(r,1)).addToSet(i.slice())}this.hasComposition=n?{from:n.range.fromB,to:n.range.toB}:null,(JE.ie||JE.chrome)&&!n&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=function(e,t,i){let r=new iI;return fE.compare(e,t,i,r),r.changes}(this.decorations,this.updateDeco(),e.changes);return i=KA.extendWithRanges(i,o),!!(7&this.flags||0!=i.length)&&(this.updateInner(i,e.startState.doc.length,n),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,i);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let e=JE.chrome||JE.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,e),this.flags&=-8,e&&(e.written||r.selectionRange.focusNode!=e.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(e=>e.flags&=-9);let n=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let e of this.children)e instanceof H$&&e.widget instanceof K$&&n.push(e.dom);r.updateGaps(n)}updateChildren(e,t,i){let r=i?i.range.addToSet(e.slice()):e,n=this.childCursor(t);for(let e=r.length-1;;e--){let t=e>=0?r[e]:null;if(!t)break;let o,s,a,l,{fromA:c,toA:d,fromB:h,toB:u}=t;if(i&&i.range.fromB<u&&i.range.toB>h){let e=J$.build(this.view.state.doc,h,i.range.fromB,this.decorations,this.dynamicDecorationMap),t=J$.build(this.view.state.doc,i.range.toB,u,this.decorations,this.dynamicDecorationMap);s=e.breakAtStart,a=e.openStart,l=t.openEnd;let r=this.compositionView(i);t.breakAtStart?r.breakAfter=1:t.content.length&&r.merge(r.length,r.length,t.content[0],!1,t.openStart,0)&&(r.breakAfter=t.content[0].breakAfter,t.content.shift()),e.content.length&&r.merge(0,0,e.content[e.content.length-1],!0,0,e.openEnd)&&e.content.pop(),o=e.content.concat(r).concat(t.content)}else({content:o,breakAtStart:s,openStart:a,openEnd:l}=J$.build(this.view.state.doc,h,u,this.decorations,this.dynamicDecorationMap));let{i:p,off:f}=n.findPos(d,1),{i:m,off:g}=n.findPos(c,-1);C$(this,m,g,p,f,o,s,a,l)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let e of t.effects)e.is(DA)&&(this.editContextFormatting=e.value)}compositionView(e){let t=new E$(e.text.nodeValue);t.flags|=8;for(let{deco:i}of e.marks)t=new $$(i,[t],t.length);let i=new G$;return i.append(t,0),i}fixCompositionDOM(e){let t=(e,t)=>{t.flags|=8|(t.children.some(e=>7&e.flags)?1:0),this.markedForComposition.add(t);let i=S$.get(e);i&&i!=t&&(i.dom=null),t.setDOM(e)},i=this.childPos(e.range.fromB,1),r=this.children[i.i];t(e.line,r);for(let n=e.marks.length-1;n>=-1;n--)i=r.childPos(i.off,1),r=r.children[i.i],t(n>=0?e.marks[n].node:e.text,r)}updateSelection(e=!1,t=!1){!e&&this.view.observer.selectionRange.focusNode||this.view.observer.readSelectionRange();let i=this.view.root.activeElement,r=i==this.dom,n=!r&&!(this.view.state.facet(NA)||this.dom.tabIndex>-1)&&i$(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(r||t||n))return;let o=this.forceSelection;this.forceSelection=!1;let s=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(s.anchor)),l=s.empty?a:this.moveToLine(this.domAtPos(s.head));if(JE.gecko&&s.empty&&!this.hasComposition&&(1==(c=a).node.nodeType&&c.node.firstChild&&(0==c.offset||"false"==c.node.childNodes[c.offset-1].contentEditable)&&(c.offset==c.node.childNodes.length||"false"==c.node.childNodes[c.offset].contentEditable))){let e=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(e,a.node.childNodes[a.offset]||null)),a=l=new w$(e,0),o=!0}var c;let d=this.view.observer.selectionRange;!o&&d.focusNode&&(n$(a.node,a.offset,d.anchorNode,d.anchorOffset)&&n$(l.node,l.offset,d.focusNode,d.focusOffset)||this.suppressWidgetCursorChange(d,s))||(this.view.observer.ignore(()=>{JE.android&&JE.chrome&&this.dom.contains(d.focusNode)&&function(e,t){for(let i=e;i&&i!=t;i=i.assignedSlot||i.parentNode)if(1==i.nodeType&&"false"==i.contentEditable)return!0;return!1}(d.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let e=e$(this.view.root);if(e)if(s.empty){if(JE.gecko){let e=(t=a.node,r=a.offset,1!=t.nodeType?0:(r&&"false"==t.childNodes[r-1].contentEditable?1:0)|(r<t.childNodes.length&&"false"==t.childNodes[r].contentEditable?2:0));if(e&&3!=e){let t=(1==e?b$:x$)(a.node,a.offset);t&&(a=new w$(t.node,t.offset))}}e.collapse(a.node,a.offset),null!=s.bidiLevel&&void 0!==e.caretBidiLevel&&(e.caretBidiLevel=s.bidiLevel)}else if(e.extend){e.collapse(a.node,a.offset);try{e.extend(l.node,l.offset)}catch(e){}}else{let t=document.createRange();s.anchor>s.head&&([a,l]=[l,a]),t.setEnd(l.node,l.offset),t.setStart(a.node,a.offset),e.removeAllRanges(),e.addRange(t)}else;var t,r;n&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(a,l)),this.impreciseAnchor=a.precise?null:new w$(d.anchorNode,d.anchorOffset),this.impreciseHead=l.precise?null:new w$(d.focusNode,d.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&n$(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,i=e$(e.root),{anchorNode:r,anchorOffset:n}=e.observer.selectionRange;if(!(i&&t.empty&&t.assoc&&i.modify))return;let o=G$.find(this,t.head);if(!o)return;let s=o.posAtStart;if(t.head==s||t.head==s+o.length)return;let a=this.coordsAt(t.head,-1),l=this.coordsAt(t.head,1);if(!a||!l||a.bottom>l.top)return;let c=this.domAtPos(t.head+t.assoc);i.collapse(c.node,c.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=t.from&&i.collapse(r,n)}moveToLine(e){let t,i=this.dom;if(e.node!=i)return e;for(let r=e.offset;!t&&r<i.childNodes.length;r++){let e=S$.get(i.childNodes[r]);e instanceof G$&&(t=e.domAtPos(0))}for(let r=e.offset-1;!t&&r>=0;r--){let e=S$.get(i.childNodes[r]);e instanceof G$&&(t=e.domAtPos(e.length))}return t?new w$(t.node,t.offset,!0):e}nearest(e){for(let t=e;t;){let e=S$.get(t);if(e&&e.rootView==this)return e;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let e=this.children[t];if(i<e.length||e instanceof G$)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){let i=null,r=0;for(let n=this.length,o=this.children.length-1;o>=0;o--){let s=this.children[o],a=n-s.breakAfter,l=a-s.length;if(a<e)break;if(l<=e&&(l<e||s.covers(-1))&&(a>e||s.covers(1))&&(!i||s instanceof G$&&!(i instanceof G$&&t>=0)))i=s,r=l;else if(i&&l==e&&a==e&&s instanceof H$&&Math.abs(t)<2){if(s.deco.startSide<0)break;o&&(i=null)}n=l}return i?i.coordsAt(e-r,t):null}coordsForChar(e){let{i:t,off:i}=this.childPos(e,1),r=this.children[t];if(!(r instanceof G$))return null;for(;r.children.length;){let{i:e,off:t}=r.childPos(i,1);for(;;e++){if(e==r.children.length)return null;if((r=r.children[e]).length)break}i=t}if(!(r instanceof E$))return null;let n=iP(r.text,i);if(n==i)return null;let o=g$(r.dom,i,n).getClientRects();for(let e=0;e<o.length;e++){let t=o[e];if(e==o.length-1||t.top<t.bottom&&t.left<t.right)return t}return null}measureVisibleLineHeights(e){let t=[],{from:i,to:r}=e,n=this.view.contentDOM.clientWidth,o=n>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,s=-1,a=this.view.textDirection==iA.LTR;for(let e=0,l=0;l<this.children.length;l++){let c=this.children[l],d=e+c.length;if(d>r)break;if(e>=i){let i=c.dom.getBoundingClientRect();if(t.push(i.height),o){let t=c.dom.lastChild,r=t?r$(t):[];if(r.length){let t=r[r.length-1],o=a?t.right-i.left:i.right-t.left;o>s&&(s=o,this.minWidth=n,this.minWidthFrom=e,this.minWidthTo=d)}}}e=d+c.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return"rtl"==getComputedStyle(this.children[t].dom).direction?iA.RTL:iA.LTR}measureTextSize(){for(let e of this.children)if(e instanceof G$){let t=e.measureTextSize();if(t)return t}let e,t,i,r=document.createElement("div");return r.className="cm-line",r.style.width="99999px",r.style.position="absolute",r.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(r);let n=r$(r.firstChild)[0];e=r.getBoundingClientRect().height,t=n?n.width/27:7,i=n?n.height:e,r.remove()}),{lineHeight:e,charWidth:t,textHeight:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new T$(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,r=0;;r++){let n=r==t.viewports.length?null:t.viewports[r],o=n?n.from-1:this.length;if(o>i){let r=(t.lineBlockAt(o).bottom-t.lineBlockAt(i).top)/this.view.scaleY;e.push(Z$.replace({widget:new K$(r),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!n)break;i=n.to+1}return Z$.set(e)}updateDeco(){let e=1,t=this.view.state.facet(ZA).map(t=>(this.dynamicDecorationMap[e++]="function"==typeof t)?t(this.view):t),i=!1,r=this.view.state.facet(BA).map((e,t)=>{let r="function"==typeof e;return r&&(i=!0),r?e(this.view):e});for(r.length&&(this.dynamicDecorationMap[e++]=i,t.push(fE.join(r))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let t=this.view.viewState.lineBlockAt(e.range.head);return this.view.scrollDOM.scrollTop=t.top-e.yMargin,void(this.view.scrollDOM.scrollLeft=e.xMargin)}for(let t of this.view.state.facet(IA))try{if(t(this.view,e.range,e))return!0}catch(e){MA(this.view.state,e,"scroll handler")}let t,{range:i}=e,r=this.coordsAt(i.head,i.empty?i.assoc:i.head>i.anchor?-1:1);if(!r)return;!i.empty&&(t=this.coordsAt(i.anchor,i.anchor>i.head?-1:1))&&(r={left:Math.min(r.left,t.left),top:Math.min(r.top,t.top),right:Math.max(r.right,t.right),bottom:Math.max(r.bottom,t.bottom)});let n=GA(this.view),o={left:r.left-n.left,top:r.top-n.top,right:r.right+n.right,bottom:r.bottom+n.bottom},{offsetWidth:s,offsetHeight:a}=this.view.scrollDOM;!function(e,t,i,r,n,o,s,a){let l=e.ownerDocument,c=l.defaultView||window;for(let d=e,h=!1;d&&!h;)if(1==d.nodeType){let e,u=d==l.body,p=1,f=1;if(u)e=d$(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(d).position)&&(h=!0),d.scrollHeight<=d.clientHeight&&d.scrollWidth<=d.clientWidth){d=d.assignedSlot||d.parentNode;continue}let t=d.getBoundingClientRect();({scaleX:p,scaleY:f}=h$(d,t)),e={left:t.left,right:t.left+d.clientWidth*p,top:t.top,bottom:t.top+d.clientHeight*f}}let m=0,g=0;if("nearest"==n)t.top<e.top?(g=t.top-(e.top+s),i>0&&t.bottom>e.bottom+g&&(g=t.bottom-e.bottom+s)):t.bottom>e.bottom&&(g=t.bottom-e.bottom+s,i<0&&t.top-g<e.top&&(g=t.top-(e.top+s)));else{let r=t.bottom-t.top,o=e.bottom-e.top;g=("center"==n&&r<=o?t.top+r/2-o/2:"start"==n||"center"==n&&i<0?t.top-s:t.bottom-o+s)-e.top}if("nearest"==r?t.left<e.left?(m=t.left-(e.left+o),i>0&&t.right>e.right+m&&(m=t.right-e.right+o)):t.right>e.right&&(m=t.right-e.right+o,i<0&&t.left<e.left+m&&(m=t.left-(e.left+o))):m=("center"==r?t.left+(t.right-t.left)/2-(e.right-e.left)/2:"start"==r==a?t.left-o:t.right-(e.right-e.left)+o)-e.left,m||g)if(u)c.scrollBy(m,g);else{let e=0,i=0;if(g){let e=d.scrollTop;d.scrollTop+=g/f,i=(d.scrollTop-e)*f}if(m){let t=d.scrollLeft;d.scrollLeft+=m/p,e=(d.scrollLeft-t)*p}t={left:t.left-e,top:t.top-i,right:t.right-e,bottom:t.bottom-i},e&&Math.abs(e-m)<1&&(r="nearest"),i&&Math.abs(i-g)<1&&(n="nearest")}if(u)break;(t.top<e.top||t.bottom>e.bottom||t.left<e.left||t.right>e.right)&&(t={left:Math.max(t.left,e.left),right:Math.min(t.right,e.right),top:Math.max(t.top,e.top),bottom:Math.min(t.bottom,e.bottom)}),d=d.assignedSlot||d.parentNode}else{if(11!=d.nodeType)break;d=d.host}}(this.view.scrollDOM,o,i.head<i.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,s),-s),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==iA.LTR)}}function tI(e,t){let i=e.observer.selectionRange;if(!i.focusNode)return null;let r=b$(i.focusNode,i.focusOffset),n=x$(i.focusNode,i.focusOffset),o=r||n;if(n&&r&&n.node!=r.node){let t=S$.get(n.node);if(!t||t instanceof E$&&t.text!=n.node.nodeValue)o=n;else if(e.docView.lastCompositionAfterCursor){let e=S$.get(r.node);!e||e instanceof E$&&e.text!=r.node.nodeValue||(o=n)}}if(e.docView.lastCompositionAfterCursor=o!=r,!o)return null;let s=t-o.offset;return{from:s,to:s+o.node.nodeValue.length,node:o.node}}let iI=class{constructor(){this.changes=[]}compareRange(e,t){Y$(e,t,this.changes)}comparePoint(e,t){Y$(e,t,this.changes)}boundChange(e){Y$(e,e,this.changes)}};function rI(e,t){return t.left>e?t.left-e:Math.max(0,e-t.right)}function nI(e,t){return t.top>e?t.top-e:Math.max(0,e-t.bottom)}function oI(e,t){return e.top<t.bottom-1&&e.bottom>t.top+1}function sI(e,t){return t<e.top?{top:t,left:e.left,right:e.right,bottom:e.bottom}:e}function aI(e,t){return t>e.bottom?{top:e.top,left:e.left,right:e.right,bottom:t}:e}function lI(e,t,i){let r,n,o,s,a,l,c,d,h=!1;for(let u=e.firstChild;u;u=u.nextSibling){let e=r$(u);for(let p=0;p<e.length;p++){let f=e[p];n&&oI(n,f)&&(f=sI(aI(f,n.bottom),n.top));let m=rI(t,f),g=nI(i,f);if(0==m&&0==g)return 3==u.nodeType?cI(u,t,i):lI(u,t,i);(!r||s>g||s==g&&o>m)&&(r=u,n=f,o=m,s=g,h=!m||(t<f.left?p>0:p<e.length-1)),0==m?i>f.bottom&&(!c||c.bottom<f.bottom)?(a=u,c=f):i<f.top&&(!d||d.top>f.top)&&(l=u,d=f):c&&oI(c,f)?c=aI(c,f.bottom):d&&oI(d,f)&&(d=sI(d,f.top))}}if(c&&c.bottom>=i?(r=a,n=c):d&&d.top<=i&&(r=l,n=d),!r)return{node:e,offset:0};let u=Math.max(n.left,Math.min(n.right,t));return 3==r.nodeType?cI(r,u,i):h&&"false"!=r.contentEditable?lI(r,u,i):{node:e,offset:Array.prototype.indexOf.call(e.childNodes,r)+(t>=(n.left+n.right)/2?1:0)}}function cI(e,t,i){let r=e.nodeValue.length,n=-1,o=1e9,s=0;for(let a=0;a<r;a++){let r=g$(e,a,a+1).getClientRects();for(let l=0;l<r.length;l++){let c=r[l];if(c.top==c.bottom)continue;s||(s=t-c.left);let d=(c.top>i?c.top-i:i-c.bottom)-1;if(c.left-1<=t&&c.right+1>=t&&d<o){let i=t>=(c.left+c.right)/2,r=i;if(JE.chrome||JE.gecko){g$(e,a).getBoundingClientRect().left==c.right&&(r=!i)}if(d<=0)return{node:e,offset:a+(r?1:0)};n=a+(r?1:0),o=d}}}return{node:e,offset:n>-1?n:s>0?e.nodeValue.length:0}}function dI(e,t,i,r=-1){var n,o;let s,a=e.contentDOM.getBoundingClientRect(),l=a.top+e.viewState.paddingTop,{docHeight:c}=e.viewState,{x:d,y:h}=t,u=h-l;if(u<0)return 0;if(u>c)return e.state.doc.length;for(let t=e.viewState.heightOracle.textHeight/2,n=!1;s=e.elementAtHeight(u),s.type!=X$.Text;)for(;u=r>0?s.bottom+t:s.top-t,!(u>=0&&u<=c);){if(n)return i?null:0;n=!0,r=-r}h=l+u;let p=s.from;if(p<e.viewport.from)return 0==e.viewport.from?0:i?null:hI(e,a,s,d,h);if(p>e.viewport.to)return e.viewport.to==e.state.doc.length?e.state.doc.length:i?null:hI(e,a,s,d,h);let f=e.dom.ownerDocument,m=e.root.elementFromPoint?e.root:f,g=m.elementFromPoint(d,h);g&&!e.contentDOM.contains(g)&&(g=null),g||(d=Math.max(a.left+1,Math.min(a.right-1,d)),g=m.elementFromPoint(d,h),g&&!e.contentDOM.contains(g)&&(g=null));let v,O=-1;if(g&&0!=(null===(n=e.docView.nearest(g))||void 0===n?void 0:n.isEditable)){if(f.caretPositionFromPoint){let e=f.caretPositionFromPoint(d,h);e&&({offsetNode:v,offset:O}=e)}else if(f.caretRangeFromPoint){let e=f.caretRangeFromPoint(d,h);e&&({startContainer:v,startOffset:O}=e)}v&&(!e.contentDOM.contains(v)||JE.safari&&function(e,t,i){return uI(e,t,i)}(v,O,d)||JE.chrome&&function(e,t,i){if(0!=t)return uI(e,t,i);for(let t=e;;){let e=t.parentNode;if(!e||1!=e.nodeType||e.firstChild!=t)return!1;if(e.classList.contains("cm-line"))break;t=e}let r=1==e.nodeType?e.getBoundingClientRect():g$(e,0,Math.max(e.nodeValue.length,1)).getBoundingClientRect();return i-r.left>5}(v,O,d))&&(v=void 0),v&&(O=Math.min(l$(v),O))}if(!v||!e.docView.dom.contains(v)){let t=G$.find(e.docView,p);if(!t)return u>s.top+s.height/2?s.to:s.from;({node:v,offset:O}=lI(t.dom,d,h))}let y=e.docView.nearest(v);if(!y)return null;if(y.isWidget&&1==(null===(o=y.dom)||void 0===o?void 0:o.nodeType)){let e=y.dom.getBoundingClientRect();return t.y<e.top||t.y<=e.bottom&&t.x<=(e.left+e.right)/2?y.posAtStart:y.posAtEnd}return y.localPosFromDOM(v,O)+y.posAtStart}function hI(e,t,i,r,n){let o=Math.round((r-t.left)*e.defaultCharacterWidth);if(e.lineWrapping&&i.height>1.5*e.defaultLineHeight){let t=e.viewState.heightOracle.textHeight;o+=Math.floor((n-i.top-.5*(e.defaultLineHeight-t))/t)*e.viewState.heightOracle.lineLength}let s=e.state.sliceDoc(i.from,i.to);return i.from+CE(s,o,e.state.tabSize)}function uI(e,t,i){let r,n=e;if(3!=e.nodeType||t!=(r=e.nodeValue.length))return!1;for(;;){let e=n.nextSibling;if(e){if("BR"==e.nodeName)break;return!1}{let e=n.parentNode;if(!e||"DIV"==e.nodeName)break;n=e}}return g$(e,r-1,r).getBoundingClientRect().right>i}function pI(e,t,i){let r=e.lineBlockAt(t);if(Array.isArray(r.type)){let e;for(let n of r.type){if(n.from>t)break;if(!(n.to<t)){if(n.from<t&&n.to>t)return n;e&&(n.type!=X$.Text||e.type==n.type&&!(i<0?n.from<t:n.to>t))||(e=n)}}return e||r}return r}function fI(e,t,i,r){let n=e.state.doc.lineAt(t.head),o=e.bidiSpans(n),s=e.textDirectionAt(n.from);for(let a=t,l=null;;){let t=yA(n,o,s,a,i),c=OA;if(!t){if(n.number==(i?e.state.doc.lines:1))return a;c="\n",n=e.state.doc.line(n.number+(i?1:-1)),o=e.bidiSpans(n),t=e.visualLineSide(n,!i)}if(l){if(!l(c))return a}else{if(!r)return t;l=r(c)}a=t}}function mI(e,t,i){for(;;){let r=0;for(let n of e)n.between(t-1,t+1,(e,n,o)=>{if(t>e&&t<n){let o=r||i||(t-e<n-t?-1:1);t=o<0?e:n,r=o}});if(!r)return t}}function gI(e,t){let i=null;for(let r=0;r<t.ranges.length;r++){let n=t.ranges[r],o=null;if(n.empty){let t=mI(e,n.from,0);t!=n.from&&(o=vP.cursor(t,-1))}else{let t=mI(e,n.from,-1),i=mI(e,n.to,1);t==n.from&&i==n.to||(o=vP.range(n.from==n.anchor?t:i,n.from==n.head?t:i))}o&&(i||(i=t.ranges.slice()),i[r]=o)}return i?vP.create(i,t.mainIndex):t}function vI(e,t,i){let r=mI(e.state.facet(jA).map(t=>t(e)),i.from,t.head>i.from?-1:1);return r==i.from?i:vP.cursor(r,r<i.from?1:-1)}const OI="";class yI{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(lE.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=OI}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r);let e=this.text.length;this.readNode(r);let n=r.nextSibling;if(n==t)break;let o=S$.get(r),s=S$.get(n);(o&&s?o.breakAfter:(o?o.breakAfter:s$(r))||s$(n)&&("BR"!=r.nodeName||r.cmIgnore)&&this.text.length>e)&&!xI(n,t)&&this.lineBreak(),r=n}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let n,o=-1,s=1;if(this.lineSeparator?(o=t.indexOf(this.lineSeparator,i),s=this.lineSeparator.length):(n=r.exec(t))&&(o=n.index,s=n[0].length),this.append(t.slice(i,o<0?t.length:o)),o<0)break;if(this.lineBreak(),s>1)for(let t of this.points)t.node==e&&t.pos>this.text.length&&(t.pos-=s-1);i=o+s}}readNode(e){if(e.cmIgnore)return;let t=S$.get(e),i=t&&t.overrideDOMText;if(null!=i){this.findPointInside(e,i.length);for(let e=i.iter();!e.next().done;)e.lineBreak?this.lineBreak():this.append(e.value)}else 3==e.nodeType?this.readTextNode(e):"BR"==e.nodeName?e.nextSibling&&this.lineBreak():1==e.nodeType&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(3==e.nodeType?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(bI(e,i.node,i.offset)?t:0))}}function bI(e,t,i){for(;;){if(!t||i<l$(t))return!1;if(t==e)return!0;i=o$(t)+1,t=t.parentNode}}function xI(e,t){let i;for(;e!=t&&e;e=e.nextSibling){let t=S$.get(e);if(!(null==t?void 0:t.isWidget)&&!e.cmIgnore)return!1;t&&(i||(i=[])).push(t)}if(i)for(let e of i){let t=e.overrideDOMText;if(null==t?void 0:t.length)return!1}return!0}class wI{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class kI{constructor(e,t,i,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:n,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,i,0))){let t=n||o?[]:function(e){let t=[];if(e.root.activeElement!=e.contentDOM)return t;let{anchorNode:i,anchorOffset:r,focusNode:n,focusOffset:o}=e.observer.selectionRange;i&&(t.push(new wI(i,r)),n==i&&o==r||t.push(new wI(n,o)));return t}(e),i=new yI(t,e.state);i.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=i.text,this.newSel=function(e,t){if(0==e.length)return null;let i=e[0].pos,r=2==e.length?e[1].pos:i;return i>-1&&r>-1?vP.single(i+t,r+t):null}(t,this.bounds.from)}else{let t=e.observer.selectionRange,i=n&&n.node==t.focusNode&&n.offset==t.focusOffset||!t$(e.contentDOM,t.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(t.focusNode,t.focusOffset),r=o&&o.node==t.anchorNode&&o.offset==t.anchorOffset||!t$(e.contentDOM,t.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(t.anchorNode,t.anchorOffset),s=e.viewport;if((JE.ios||JE.chrome)&&e.state.selection.main.empty&&i!=r&&(s.from>0||s.to<e.state.doc.length)){let t=Math.min(i,r),n=Math.max(i,r),o=s.from-t,a=s.to-n;0!=o&&1!=o&&0!=t||0!=a&&-1!=a&&n!=e.state.doc.length||(i=0,r=e.state.doc.length)}this.newSel=vP.single(r,i)}}}function SI(e,t){let i,{newSel:r}=t,n=e.state.selection.main,o=e.inputState.lastKeyTime>Date.now()-100?e.inputState.lastKeyCode:-1;if(t.bounds){let{from:r,to:s}=t.bounds,a=n.from,l=null;(8===o||JE.android&&t.text.length<s-r)&&(a=n.to,l="end");let c=TI(e.state.doc.sliceString(r,s,OI),t.text,a-r,l);c&&(JE.chrome&&13==o&&c.toB==c.from+2&&t.text.slice(c.from,c.toB)==OI+OI&&c.toB--,i={from:r+c.from,to:r+c.toA,insert:jC.of(t.text.slice(c.from,c.toB).split(OI))})}else r&&(!e.hasFocus&&e.state.facet(NA)||r.main.eq(n))&&(r=null);if(!i&&!r)return!1;if(!i&&t.typeOver&&!n.empty&&r&&r.main.empty?i={from:n.from,to:n.to,insert:e.state.doc.slice(n.from,n.to)}:(JE.mac||JE.android)&&i&&i.from==i.to&&i.from==n.head-1&&/^\. ?$/.test(i.insert.toString())&&"off"==e.contentDOM.getAttribute("autocorrect")?(r&&2==i.insert.length&&(r=vP.single(r.main.anchor-1,r.main.head-1)),i={from:i.from,to:i.to,insert:jC.of([i.insert.toString().replace("."," ")])}):i&&i.from>=n.from&&i.to<=n.to&&(i.from!=n.from||i.to!=n.to)&&n.to-n.from-(i.to-i.from)<=4?i={from:n.from,to:n.to,insert:e.state.doc.slice(n.from,i.from).append(i.insert).append(e.state.doc.slice(i.to,n.to))}:JE.chrome&&i&&i.from==i.to&&i.from==n.head&&"\n "==i.insert.toString()&&e.lineWrapping&&(r&&(r=vP.single(r.main.anchor-1,r.main.head-1)),i={from:n.from,to:n.to,insert:jC.of([" "])}),i)return _I(e,i,r,o);if(r&&!r.main.eq(n)){let t=!1,i="select";return e.inputState.lastSelectionTime>Date.now()-50&&("select"==e.inputState.lastSelectionOrigin&&(t=!0),i=e.inputState.lastSelectionOrigin,"select.pointer"==i&&(r=gI(e.state.facet(jA).map(t=>t(e)),r))),e.dispatch({selection:r,scrollIntoView:t,userEvent:i}),!0}return!1}function _I(e,t,i,r=-1){if(JE.ios&&e.inputState.flushIOSKey(t))return!0;let n=e.state.selection.main;if(JE.android&&(t.to==n.to&&(t.from==n.from||t.from==n.from-1&&" "==e.state.sliceDoc(t.from,n.from))&&1==t.insert.length&&2==t.insert.lines&&v$(e.contentDOM,"Enter",13)||(t.from==n.from-1&&t.to==n.to&&0==t.insert.length||8==r&&t.insert.length<t.to-t.from&&t.to>n.head)&&v$(e.contentDOM,"Backspace",8)||t.from==n.from&&t.to==n.to+1&&0==t.insert.length&&v$(e.contentDOM,"Delete",46)))return!0;let o,s=t.insert.toString();e.inputState.composing>=0&&e.inputState.composing++;let a=()=>o||(o=function(e,t,i){let r,n=e.state,o=n.selection.main,s=-1;if(t.from==t.to&&t.from<o.from||t.from>o.to){let i=t.from<o.from?-1:1,r=i<0?o.from:o.to,a=mI(n.facet(jA).map(t=>t(e)),r,i);t.from==a&&(s=a)}if(s>-1)r={changes:t,selection:vP.cursor(t.from+t.insert.length,-1)};else if(t.from>=o.from&&t.to<=o.to&&t.to-t.from>=(o.to-o.from)/3&&(!i||i.main.empty&&i.main.from==t.from+t.insert.length)&&e.inputState.composing<0){let i=o.from<t.from?n.sliceDoc(o.from,t.from):"",s=o.to>t.to?n.sliceDoc(t.to,o.to):"";r=n.replaceSelection(e.state.toText(i+t.insert.sliceString(0,void 0,e.state.lineBreak)+s))}else{let s=n.changes(t),a=i&&i.main.to<=s.newLength?i.main:void 0;if(n.selection.ranges.length>1&&e.inputState.composing>=0&&t.to<=o.to&&t.to>=o.to-10){let l,c=e.state.sliceDoc(t.from,t.to),d=i&&tI(e,i.main.head);if(d){let e=t.insert.length-(t.to-t.from);l={from:d.from,to:d.to-e}}else l=e.state.doc.lineAt(o.head);let h=o.to-t.to,u=o.to-o.from;r=n.changeByRange(i=>{if(i.from==o.from&&i.to==o.to)return{changes:s,range:a||i.map(s)};let r=i.to-h,d=r-c.length;if(i.to-i.from!=u||e.state.sliceDoc(d,r)!=c||i.to>=l.from&&i.from<=l.to)return{range:i};let p=n.changes({from:d,to:r,insert:t.insert}),f=i.to-o.to;return{changes:p,range:a?vP.range(Math.max(0,a.anchor+f),Math.max(0,a.head+f)):i.map(p)}})}else r={changes:s,selection:a&&n.selection.replaceRange(a)}}let a="input.type";(e.composing||e.inputState.compositionPendingChange&&e.inputState.compositionEndedAt>Date.now()-50)&&(e.inputState.compositionPendingChange=!1,a+=".compose",e.inputState.compositionFirstChange&&(a+=".start",e.inputState.compositionFirstChange=!1));return n.update(r,{userEvent:a,scrollIntoView:!0})}(e,t,i));return e.state.facet(TA).some(i=>i(e,t.from,t.to,s,a))||e.dispatch(a()),!0}function TI(e,t,i,r){let n=Math.min(e.length,t.length),o=0;for(;o<n&&e.charCodeAt(o)==t.charCodeAt(o);)o++;if(o==n&&e.length==t.length)return null;let s=e.length,a=t.length;for(;s>0&&a>0&&e.charCodeAt(s-1)==t.charCodeAt(a-1);)s--,a--;if("end"==r){i-=s+Math.max(0,o-Math.min(s,a))-o}if(s<o&&e.length<t.length){o-=i<=o&&i>=s?o-i:0,a=o+(a-s),s=o}else if(a<o){o-=i<=o&&i>=a?o-i:0,s=o+(s-a),a=o}return{from:o,toA:s,toB:a}}class CI{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,JE.safari&&e.contentDOM.addEventListener("input",()=>null),JE.gecko&&function(e){eQ.has(e)||(eQ.add(e),e.addEventListener("copy",()=>{}),e.addEventListener("cut",()=>{}))}(e.contentDOM.ownerDocument)}handleEvent(e){(function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let i,r=t.target;r!=e.contentDOM;r=r.parentNode)if(!r||11==r.nodeType||(i=S$.get(r))&&i.ignoreEvent(t))return!1;return!0})(this.view,e)&&!this.ignoreDuringComposition(e)&&("keydown"==e.type&&this.keydown(e)||(0!=this.view.updateState?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e)))}runHandlers(e,t){let i=this.handlers[e];if(i){for(let e of i.observers)e(this.view,t);for(let e of i.handlers){if(t.defaultPrevented)break;if(e(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=EI(e),i=this.handlers,r=this.view.contentDOM;for(let e in t)if("scroll"!=e){let n=!t[e].handlers.length,o=i[e];o&&n!=!o.handlers.length&&(r.removeEventListener(e,this.handleEvent),o=null),o||r.addEventListener(e,this.handleEvent,{passive:n})}for(let e in i)"scroll"==e||t[e]||r.removeEventListener(e,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),9==e.keyCode&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&27!=e.keyCode&&II.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),JE.android&&JE.chrome&&!e.synthetic&&(13==e.keyCode||8==e.keyCode))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return!JE.ios||e.synthetic||e.altKey||e.metaKey||!((t=$I.find(t=>t.keyCode==e.keyCode))&&!e.ctrlKey||AI.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(229!=e.keyCode&&this.view.observer.forceFlush(),!1):(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0)}flushIOSKey(e){let t=this.pendingIOSKey;return!!t&&(!("Enter"==t.key&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString()))&&(this.pendingIOSKey=void 0,v$(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0)))}ignoreDuringComposition(e){return!(!/^key/.test(e.type)||e.synthetic)&&(this.composing>0||!!(JE.safari&&!JE.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100)&&(this.compositionPendingKey=!1,!0))}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function PI(e,t){return(i,r)=>{try{return t.call(e,r,i)}catch(e){MA(i.state,e)}}}function EI(e){let t=Object.create(null);function i(e){return t[e]||(t[e]={observers:[],handlers:[]})}for(let t of e){let e=t.spec,r=e&&e.plugin.domEventHandlers,n=e&&e.plugin.domEventObservers;if(r)for(let e in r){let n=r[e];n&&i(e).handlers.push(PI(t.value,n))}if(n)for(let e in n){let r=n[e];r&&i(e).observers.push(PI(t.value,r))}}for(let e in DI)i(e).handlers.push(DI[e]);for(let e in MI)i(e).observers.push(MI[e]);return t}const $I=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],AI="dthko",II=[16,17,18,20,91,92,224,225];function QI(e){return.7*Math.max(0,e)+8}class RI{constructor(e,t,i,r){this.view=e,this.startEvent=t,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=function(e){let t,i,r=e.ownerDocument;for(let n=e.parentNode;n&&!(n==r.body||t&&i);)if(1==n.nodeType)!i&&n.scrollHeight>n.clientHeight&&(i=n),!t&&n.scrollWidth>n.clientWidth&&(t=n),n=n.assignedSlot||n.parentNode;else{if(11!=n.nodeType)break;n=n.host}return{x:t,y:i}}(e.contentDOM),this.atoms=e.state.facet(jA).map(t=>t(e));let n=e.contentDOM.ownerDocument;n.addEventListener("mousemove",this.move=this.move.bind(this)),n.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(lE.allowMultipleSelections)&&function(e,t){let i=e.state.facet(xA);return i.length?i[0](t):JE.mac?t.metaKey:t.ctrlKey}(e,t),this.dragging=!(!function(e,t){let{main:i}=e.state.selection;if(i.empty)return!1;let r=e$(e.root);if(!r||0==r.rangeCount)return!0;let n=r.getRangeAt(0).getClientRects();for(let e=0;e<n.length;e++){let i=n[e];if(i.left<=t.clientX&&i.right>=t.clientX&&i.top<=t.clientY&&i.bottom>=t.clientY)return!0}return!1}(e,t)||1!=WI(t))&&null}start(e){!1===this.dragging&&this.select(e)}move(e){if(0==e.buttons)return this.destroy();if(this.dragging||null==this.dragging&&function(e,t){return Math.max(Math.abs(e.clientX-t.clientX),Math.abs(e.clientY-t.clientY))}(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,i=0,r=0,n=0,o=this.view.win.innerWidth,s=this.view.win.innerHeight;this.scrollParents.x&&({left:r,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:n,bottom:s}=this.scrollParents.y.getBoundingClientRect());let a=GA(this.view);e.clientX-a.left<=r+6?t=-QI(r-e.clientX):e.clientX+a.right>=o-6&&(t=QI(e.clientX-o)),e.clientY-a.top<=n+6?i=-QI(n-e.clientY):e.clientY+a.bottom>=s-6&&(i=QI(e.clientY-s)),this.setScrollSpeed(t,i)}up(e){null==this.dragging&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),!1===this.dragging&&this.select(this.lastEvent)}select(e){let{view:t}=this,i=gI(this.atoms,this.style.get(e,this.extend,this.multiple));!this.mustSelect&&i.eq(t.state.selection,!1===this.dragging)||this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(e=>e.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}const DI=Object.create(null),MI=Object.create(null),NI=JE.ie&&JE.ie_version<15||JE.ios&&JE.webkit_version<604;function LI(e,t,i){for(let r of e.facet(t))i=r(i,e);return i}function zI(e,t){t=LI(e.state,PA,t);let i,{state:r}=e,n=1,o=r.toText(t),s=o.lines==r.selection.ranges.length,a=null!=GI&&r.selection.ranges.every(e=>e.empty)&&GI==o.toString();if(a){let e=-1;i=r.changeByRange(i=>{let a=r.doc.lineAt(i.from);if(a.from==e)return{range:i};e=a.from;let l=r.toText((s?o.line(n++).text:t)+r.lineBreak);return{changes:{from:a.from,insert:l},range:vP.cursor(i.from+l.length)}})}else i=s?r.changeByRange(e=>{let t=o.line(n++);return{changes:{from:e.from,to:e.to,insert:t.text},range:vP.cursor(e.from+t.length)}}):r.replaceSelection(o);e.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}function VI(e,t,i,r){if(1==r)return vP.cursor(t,i);if(2==r)return function(e,t,i=1){let r=e.charCategorizer(t),n=e.doc.lineAt(t),o=t-n.from;if(0==n.length)return vP.cursor(t);0==o?i=1:o==n.length&&(i=-1);let s=o,a=o;i<0?s=iP(n.text,o,!1):a=iP(n.text,o);let l=r(n.text.slice(s,a));for(;s>0;){let e=iP(n.text,s,!1);if(r(n.text.slice(e,s))!=l)break;s=e}for(;a<n.length;){let e=iP(n.text,a);if(r(n.text.slice(a,e))!=l)break;a=e}return vP.range(s+n.from,a+n.from)}(e.state,t,i);{let i=G$.find(e.docView,t),r=e.state.doc.lineAt(i?i.posAtEnd:t),n=i?i.posAtStart:r.from,o=i?i.posAtEnd:r.to;return o<e.state.doc.length&&o==r.to&&o++,vP.range(n,o)}}MI.scroll=e=>{e.inputState.lastScrollTop=e.scrollDOM.scrollTop,e.inputState.lastScrollLeft=e.scrollDOM.scrollLeft},DI.keydown=(e,t)=>(e.inputState.setSelectionOrigin("select"),27==t.keyCode&&0!=e.inputState.tabFocusMode&&(e.inputState.tabFocusMode=Date.now()+2e3),!1),MI.touchstart=(e,t)=>{e.inputState.lastTouchTime=Date.now(),e.inputState.setSelectionOrigin("select.pointer")},MI.touchmove=e=>{e.inputState.setSelectionOrigin("select.pointer")},DI.mousedown=(e,t)=>{if(e.observer.flush(),e.inputState.lastTouchTime>Date.now()-2e3)return!1;let i=null;for(let r of e.state.facet(kA))if(i=r(e,t),i)break;if(i||0!=t.button||(i=function(e,t){let i=XI(e,t),r=WI(t),n=e.state.selection;return{update(e){e.docChanged&&(i.pos=e.changes.mapPos(i.pos),n=n.map(e.changes))},get(t,o,s){let a,l=XI(e,t),c=VI(e,l.pos,l.bias,r);if(i.pos!=l.pos&&!o){let t=VI(e,i.pos,i.bias,r),n=Math.min(t.from,c.from),o=Math.max(t.to,c.to);c=n<c.from?vP.range(n,o):vP.range(o,n)}return o?n.replaceRange(n.main.extend(c.from,c.to)):s&&1==r&&n.ranges.length>1&&(a=function(e,t){for(let i=0;i<e.ranges.length;i++){let{from:r,to:n}=e.ranges[i];if(r<=t&&n>=t)return vP.create(e.ranges.slice(0,i).concat(e.ranges.slice(i+1)),e.mainIndex==i?0:e.mainIndex-(e.mainIndex>i?1:0))}return null}(n,l.pos))?a:s?n.addRange(c):vP.create([c])}}}(e,t)),i){let r=!e.hasFocus;e.inputState.startMouseSelection(new RI(e,t,i,r)),r&&e.observer.ignore(()=>{m$(e.contentDOM);let t=e.root.activeElement;t&&!t.contains(e.contentDOM)&&t.blur()});let n=e.inputState.mouseSelection;if(n)return n.start(t),!1===n.dragging}else e.inputState.setSelectionOrigin("select.pointer");return!1};let UI=(e,t,i)=>t>=i.top&&t<=i.bottom&&e>=i.left&&e<=i.right;function qI(e,t,i,r){let n=G$.find(e.docView,t);if(!n)return 1;let o=t-n.posAtStart;if(0==o)return 1;if(o==n.length)return-1;let s=n.coordsAt(o,-1);if(s&&UI(i,r,s))return-1;let a=n.coordsAt(o,1);return a&&UI(i,r,a)?1:s&&s.bottom>=r?-1:1}function XI(e,t){let i=e.posAtCoords({x:t.clientX,y:t.clientY},!1);return{pos:i,bias:qI(e,i,t.clientX,t.clientY)}}const ZI=JE.ie&&JE.ie_version<=11;let BI=null,jI=0,FI=0;function WI(e){if(!ZI)return e.detail;let t=BI,i=FI;return BI=e,FI=Date.now(),jI=!t||i>Date.now()-400&&Math.abs(t.clientX-e.clientX)<2&&Math.abs(t.clientY-e.clientY)<2?(jI+1)%3:1}function YI(e,t,i,r){if(!(i=LI(e.state,PA,i)))return;let n=e.posAtCoords({x:t.clientX,y:t.clientY},!1),{draggedContent:o}=e.inputState,s=r&&o&&function(e,t){let i=e.state.facet(wA);return i.length?i[0](t):JE.mac?!t.altKey:!t.ctrlKey}(e,t)?{from:o.from,to:o.to}:null,a={from:n,insert:i},l=e.state.changes(s?[s,a]:a);e.focus(),e.dispatch({changes:l,selection:{anchor:l.mapPos(n,-1),head:l.mapPos(n,1)},userEvent:s?"move.drop":"input.drop"}),e.inputState.draggedContent=null}DI.dragstart=(e,t)=>{let{selection:{main:i}}=e.state;if(t.target.draggable){let r=e.docView.nearest(t.target);if(r&&r.isWidget){let e=r.posAtStart,t=e+r.length;(e>=i.to||t<=i.from)&&(i=vP.range(e,t))}}let{inputState:r}=e;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=i,t.dataTransfer&&(t.dataTransfer.setData("Text",LI(e.state,EA,e.state.sliceDoc(i.from,i.to))),t.dataTransfer.effectAllowed="copyMove"),!1},DI.dragend=e=>(e.inputState.draggedContent=null,!1),DI.drop=(e,t)=>{if(!t.dataTransfer)return!1;if(e.state.readOnly)return!0;let i=t.dataTransfer.files;if(i&&i.length){let r=Array(i.length),n=0,o=()=>{++n==i.length&&YI(e,t,r.filter(e=>null!=e).join(e.state.lineBreak),!1)};for(let e=0;e<i.length;e++){let t=new FileReader;t.onerror=o,t.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(t.result)||(r[e]=t.result),o()},t.readAsText(i[e])}return!0}{let i=t.dataTransfer.getData("Text");if(i)return YI(e,t,i,!0),!0}return!1},DI.paste=(e,t)=>{if(e.state.readOnly)return!0;e.observer.flush();let i=NI?null:t.clipboardData;return i?(zI(e,i.getData("text/plain")||i.getData("text/uri-list")),!0):(function(e){let t=e.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus(),setTimeout(()=>{e.focus(),i.remove(),zI(e,i.value)},50)}(e),!1)};let GI=null;DI.copy=DI.cut=(e,t)=>{let{text:i,ranges:r,linewise:n}=function(e){let t=[],i=[],r=!1;for(let r of e.selection.ranges)r.empty||(t.push(e.sliceDoc(r.from,r.to)),i.push(r));if(!t.length){let n=-1;for(let{from:r}of e.selection.ranges){let o=e.doc.lineAt(r);o.number>n&&(t.push(o.text),i.push({from:o.from,to:Math.min(e.doc.length,o.to+1)})),n=o.number}r=!0}return{text:LI(e,EA,t.join(e.lineBreak)),ranges:i,linewise:r}}(e.state);if(!i&&!n)return!1;GI=n?i:null,"cut"!=t.type||e.state.readOnly||e.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let o=NI?null:t.clipboardData;return o?(o.clearData(),o.setData("text/plain",i),!0):(function(e,t){let i=e.dom.parentNode;if(!i)return;let r=i.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=t,r.focus(),r.selectionEnd=t.length,r.selectionStart=0,setTimeout(()=>{r.remove(),e.focus()},50)}(e,i),!1)};const HI=FP.define();function KI(e,t){let i=[];for(let r of e.facet(CA)){let n=r(e,t);n&&i.push(n)}return i.length?e.update({effects:i,annotations:HI.of(!0)}):null}function JI(e){setTimeout(()=>{let t=e.hasFocus;if(t!=e.inputState.notifiedFocused){let i=KI(e.state,t);i?e.dispatch(i):e.update([])}},10)}MI.focus=e=>{e.inputState.lastFocusTime=Date.now(),e.scrollDOM.scrollTop||!e.inputState.lastScrollTop&&!e.inputState.lastScrollLeft||(e.scrollDOM.scrollTop=e.inputState.lastScrollTop,e.scrollDOM.scrollLeft=e.inputState.lastScrollLeft),JI(e)},MI.blur=e=>{e.observer.clearSelectionRange(),JI(e)},MI.compositionstart=MI.compositionupdate=e=>{e.observer.editContext||(null==e.inputState.compositionFirstChange&&(e.inputState.compositionFirstChange=!0),e.inputState.composing<0&&(e.inputState.composing=0))},MI.compositionend=e=>{e.observer.editContext||(e.inputState.composing=-1,e.inputState.compositionEndedAt=Date.now(),e.inputState.compositionPendingKey=!0,e.inputState.compositionPendingChange=e.observer.pendingRecords().length>0,e.inputState.compositionFirstChange=null,JE.chrome&&JE.android?e.observer.flushSoon():e.inputState.compositionPendingChange?Promise.resolve().then(()=>e.observer.flush()):setTimeout(()=>{e.inputState.composing<0&&e.docView.hasComposition&&e.update([])},50))},MI.contextmenu=e=>{e.inputState.lastContextMenu=Date.now()},DI.beforeinput=(e,t)=>{var i,r;if("insertReplacementText"==t.inputType&&e.observer.editContext){let r=null===(i=t.dataTransfer)||void 0===i?void 0:i.getData("text/plain"),n=t.getTargetRanges();if(r&&n.length){let t=n[0],i=e.posAtDOM(t.startContainer,t.startOffset),o=e.posAtDOM(t.endContainer,t.endOffset);return _I(e,{from:i,to:o,insert:e.state.toText(r)},null),!0}}let n;if(JE.chrome&&JE.android&&(n=$I.find(e=>e.inputType==t.inputType))&&(e.observer.delayAndroidKey(n.key,n.keyCode),"Backspace"==n.key||"Delete"==n.key)){let t=(null===(r=window.visualViewport)||void 0===r?void 0:r.height)||0;setTimeout(()=>{var i;((null===(i=window.visualViewport)||void 0===i?void 0:i.height)||0)>t+10&&e.hasFocus&&(e.contentDOM.blur(),e.focus())},100)}return JE.ios&&"deleteContentForward"==t.inputType&&e.observer.flushSoon(),JE.safari&&"insertText"==t.inputType&&e.inputState.composing>=0&&setTimeout(()=>MI.compositionend(e,t),20),!1};const eQ=new Set;const tQ=["pre-wrap","normal","pre-line","break-spaces"];let iQ=!1;function rQ(){iQ=!1}class nQ{constructor(e){this.lineWrapping=e,this.doc=jC.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){if(!this.lineWrapping)return this.lineHeight;return(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return tQ.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(10*r)]||(t=!0,this.heightSamples[Math.floor(10*r)]=!0)}return t}refresh(e,t,i,r,n,o){let s=tQ.indexOf(e)>-1,a=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=s;if(this.lineWrapping=s,this.lineHeight=t,this.charWidth=i,this.textHeight=r,this.lineLength=n,a){this.heightSamples={};for(let e=0;e<o.length;e++){let t=o[e];t<0?e++:this.heightSamples[Math.floor(10*t)]=!0}}return a}}class oQ{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class sQ{constructor(e,t,i,r,n){this.from=e,this.length=t,this.top=i,this.height=r,this._content=n}get type(){return"number"==typeof this._content?X$.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof F$?this._content.widget:null}get widgetLineBreaks(){return"number"==typeof this._content?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new sQ(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var aQ=function(e){return e[e.ByPos=0]="ByPos",e[e.ByHeight=1]="ByHeight",e[e.ByPosNoHeight=2]="ByPosNoHeight",e}(aQ||(aQ={}));const lQ=.001;class cQ{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(2&this.flags)>0}set outdated(e){this.flags=(e?2:0)|-3&this.flags}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>lQ&&(iQ=!0),this.height=e)}replace(e,t,i){return cQ.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,r){let n=this,o=i.doc;for(let s=r.length-1;s>=0;s--){let{fromA:a,toA:l,fromB:c,toB:d}=r[s],h=n.lineAt(a,aQ.ByPosNoHeight,i.setDoc(t),0,0),u=h.to>=l?h:n.lineAt(l,aQ.ByPosNoHeight,i,0,0);for(d+=u.to-l,l=u.to;s>0&&h.from<=r[s-1].toA;)a=r[s-1].fromA,c=r[s-1].fromB,s--,a<h.from&&(h=n.lineAt(a,aQ.ByPosNoHeight,i,0,0));c+=h.from-a,a=h.from;let p=gQ.build(i.setDoc(o),e,c,d);n=dQ(n,n.replace(a,l,p))}return n.updateHeight(i,0)}static empty(){return new uQ(0,0)}static of(e){if(1==e.length)return e[0];let t=0,i=e.length,r=0,n=0;for(;;)if(t==i)if(r>2*n){let n=e[t-1];n.break?e.splice(--t,1,n.left,null,n.right):e.splice(--t,1,n.left,n.right),i+=1+n.break,r-=n.size}else{if(!(n>2*r))break;{let t=e[i];t.break?e.splice(i,1,t.left,null,t.right):e.splice(i,1,t.left,t.right),i+=2+t.break,n-=t.size}}else if(r<n){let i=e[t++];i&&(r+=i.size)}else{let t=e[--i];t&&(n+=t.size)}let o=0;return null==e[t-1]?(o=1,t--):null==e[t]&&(o=1,i++),new fQ(cQ.of(e.slice(0,t)),o,cQ.of(e.slice(i)))}}function dQ(e,t){return e==t?e:(e.constructor!=t.constructor&&(iQ=!0),t)}cQ.prototype.size=1;class hQ extends cQ{constructor(e,t,i){super(e,t),this.deco=i}blockAt(e,t,i,r){return new sQ(r,this.length,i,this.height,this.deco||0)}lineAt(e,t,i,r,n){return this.blockAt(0,i,r,n)}forEachLine(e,t,i,r,n,o){e<=n+this.length&&t>=n&&o(this.blockAt(0,i,r,n))}updateHeight(e,t=0,i=!1,r){return r&&r.from<=t&&r.more&&this.setHeight(r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class uQ extends hQ{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,i,r){return new sQ(r,this.length,i,this.height,this.breaks)}replace(e,t,i){let r=i[0];return 1==i.length&&(r instanceof uQ||r instanceof pQ&&4&r.flags)&&Math.abs(this.length-r.length)<10?(r instanceof pQ?r=new uQ(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):cQ.of(i)}updateHeight(e,t=0,i=!1,r){return r&&r.from<=t&&r.more?this.setHeight(r.heights[r.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class pQ extends cQ{constructor(e){super(e,0)}heightMetrics(e,t){let i,r=e.doc.lineAt(t).number,n=e.doc.lineAt(t+this.length).number,o=n-r+1,s=0;if(e.lineWrapping){let t=Math.min(this.height,e.lineHeight*o);i=t/o,this.length>o+1&&(s=(this.height-t)/(this.length-o-1))}else i=this.height/o;return{firstLine:r,lastLine:n,perLine:i,perChar:s}}blockAt(e,t,i,r){let{firstLine:n,lastLine:o,perLine:s,perChar:a}=this.heightMetrics(t,r);if(t.lineWrapping){let n=r+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),o=t.doc.lineAt(n),l=s+o.length*a,c=Math.max(i,e-l/2);return new sQ(o.from,o.length,c,l,0)}{let r=Math.max(0,Math.min(o-n,Math.floor((e-i)/s))),{from:a,length:l}=t.doc.line(n+r);return new sQ(a,l,i+s*r,s,0)}}lineAt(e,t,i,r,n){if(t==aQ.ByHeight)return this.blockAt(e,i,r,n);if(t==aQ.ByPosNoHeight){let{from:t,to:r}=i.doc.lineAt(e);return new sQ(t,r-t,0,0,0)}let{firstLine:o,perLine:s,perChar:a}=this.heightMetrics(i,n),l=i.doc.lineAt(e),c=s+l.length*a,d=l.number-o,h=r+s*d+a*(l.from-n-d);return new sQ(l.from,l.length,Math.max(r,Math.min(h,r+this.height-c)),c,0)}forEachLine(e,t,i,r,n,o){e=Math.max(e,n),t=Math.min(t,n+this.length);let{firstLine:s,perLine:a,perChar:l}=this.heightMetrics(i,n);for(let c=e,d=r;c<=t;){let t=i.doc.lineAt(c);if(c==e){let i=t.number-s;d+=a*i+l*(e-n-i)}let r=a+l*t.length;o(new sQ(t.from,t.length,d,r,0)),d+=r,c=t.to+1}}replace(e,t,i){let r=this.length-t;if(r>0){let e=i[i.length-1];e instanceof pQ?i[i.length-1]=new pQ(e.length+r):i.push(null,new pQ(r-1))}if(e>0){let t=i[0];t instanceof pQ?i[0]=new pQ(e+t.length):i.unshift(new pQ(e-1),null)}return cQ.of(i)}decomposeLeft(e,t){t.push(new pQ(e-1),null)}decomposeRight(e,t){t.push(null,new pQ(this.length-e-1))}updateHeight(e,t=0,i=!1,r){let n=t+this.length;if(r&&r.from<=t+this.length&&r.more){let i=[],o=Math.max(t,r.from),s=-1;for(r.from>t&&i.push(new pQ(r.from-t-1).updateHeight(e,t));o<=n&&r.more;){let t=e.doc.lineAt(o).length;i.length&&i.push(null);let n=r.heights[r.index++];-1==s?s=n:Math.abs(n-s)>=lQ&&(s=-2);let a=new uQ(t,n);a.outdated=!1,i.push(a),o+=t+1}o<=n&&i.push(null,new pQ(n-o).updateHeight(e,o));let a=cQ.of(i);return(s<0||Math.abs(a.height-this.height)>=lQ||Math.abs(s-this.heightMetrics(e,t).perLine)>=lQ)&&(iQ=!0),dQ(this,a)}return(i||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class fQ extends cQ{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return 1&this.flags}blockAt(e,t,i,r){let n=i+this.left.height;return e<n?this.left.blockAt(e,t,i,r):this.right.blockAt(e,t,n,r+this.left.length+this.break)}lineAt(e,t,i,r,n){let o=r+this.left.height,s=n+this.left.length+this.break,a=t==aQ.ByHeight?e<o:e<s,l=a?this.left.lineAt(e,t,i,r,n):this.right.lineAt(e,t,i,o,s);if(this.break||(a?l.to<s:l.from>s))return l;let c=t==aQ.ByPosNoHeight?aQ.ByPosNoHeight:aQ.ByPos;return a?l.join(this.right.lineAt(s,c,i,o,s)):this.left.lineAt(s,c,i,r,n).join(l)}forEachLine(e,t,i,r,n,o){let s=r+this.left.height,a=n+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,i,r,n,o),t>=a&&this.right.forEachLine(e,t,i,s,a,o);else{let l=this.lineAt(a,aQ.ByPos,i,r,n);e<l.from&&this.left.forEachLine(e,l.from-1,i,r,n,o),l.to>=e&&l.from<=t&&o(l),t>l.to&&this.right.forEachLine(l.to+1,t,i,s,a,o)}}replace(e,t,i){let r=this.left.length+this.break;if(t<r)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,t-r,i));let n=[];e>0&&this.decomposeLeft(e,n);let o=n.length;for(let e of i)n.push(e);if(e>0&&mQ(n,o-1),t<this.length){let e=n.length;this.decomposeRight(t,n),mQ(n,e)}return cQ.of(n)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<r&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?cQ.of(this.break?[e,null,t]:[e,t]):(this.left=dQ(this.left,e),this.right=dQ(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,r){let{left:n,right:o}=this,s=t+n.length+this.break,a=null;return r&&r.from<=t+n.length&&r.more?a=n=n.updateHeight(e,t,i,r):n.updateHeight(e,t,i),r&&r.from<=s+o.length&&r.more?a=o=o.updateHeight(e,s,i,r):o.updateHeight(e,s,i),a?this.balanced(n,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function mQ(e,t){let i,r;null==e[t]&&(i=e[t-1])instanceof pQ&&(r=e[t+1])instanceof pQ&&e.splice(t-1,3,new pQ(i.length+1+r.length))}class gQ{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let e=Math.min(t,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof uQ?i.length+=e-this.pos:(e>this.pos||!this.isCovered)&&this.nodes.push(new uQ(e-this.pos,-1)),this.writtenTo=e,t>e&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,n=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let o=t-e;i.block?this.addBlock(new hQ(o,r,i)):(o||n||r>=5)&&this.addLineDeco(r,n,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new uQ(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new pQ(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof uQ)return e;let t=new uQ(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=t,this.writtenTo=this.pos=this.pos+i}finish(e){let t=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||t instanceof uQ||this.isCovered?(this.writtenTo<this.pos||null==t)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new uQ(0,-1));let i=e;for(let e of this.nodes)e instanceof uQ&&e.updateHeight(this.oracle,i),i+=e?e.length:1;return this.nodes}static build(e,t,i,r){let n=new gQ(i,e);return fE.spans(t,i,r,n,0),n.finish(i)}}class vQ{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,r){(e<t||i&&i.heightRelevant||r&&r.heightRelevant)&&Y$(e,t,this.changes,5)}}function OQ(e,t){let i=e.getBoundingClientRect(),r=e.ownerDocument,n=r.defaultView||window,o=Math.max(0,i.left),s=Math.min(n.innerWidth,i.right),a=Math.max(0,i.top),l=Math.min(n.innerHeight,i.bottom);for(let t=e.parentNode;t&&t!=r.body;)if(1==t.nodeType){let i=t,r=window.getComputedStyle(i);if((i.scrollHeight>i.clientHeight||i.scrollWidth>i.clientWidth)&&"visible"!=r.overflow){let r=i.getBoundingClientRect();o=Math.max(o,r.left),s=Math.min(s,r.right),a=Math.max(a,r.top),l=Math.min(t==e.parentNode?n.innerHeight:l,r.bottom)}t="absolute"==r.position||"fixed"==r.position?i.offsetParent:i.parentNode}else{if(11!=t.nodeType)break;t=t.host}return{left:o-i.left,right:Math.max(o,s)-i.left,top:a-(i.top+t),bottom:Math.max(a,l)-(i.top+t)}}function yQ(e,t){let i=e.getBoundingClientRect();return{left:0,right:i.right-i.left,top:t,bottom:i.bottom-(i.top+t)}}class bQ{constructor(e,t,i,r){this.from=e,this.to=t,this.size=i,this.displaySize=r}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],n=t[i];if(r.from!=n.from||r.to!=n.to||r.size!=n.size)return!1}return!0}draw(e,t){return Z$.replace({widget:new xQ(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class xQ extends q${constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class wQ{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=TQ,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=iA.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(XA).some(e=>"function"!=typeof e&&"cm-lineWrapping"==e.class);this.heightOracle=new nQ(t),this.stateDeco=e.facet(ZA).filter(e=>"function"!=typeof e),this.heightMap=cQ.empty().applyChanges(this.stateDeco,jC.empty,this.heightOracle.setDoc(e.doc),[new KA(0,0,0,e.doc.length)]);for(let e=0;e<2&&(this.viewport=this.getViewport(0,null),this.updateForViewport());e++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Z$.set(this.lineGaps.map(e=>e.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let r=i?t.head:t.anchor;if(!e.some(({from:e,to:t})=>r>=e&&r<=t)){let{from:t,to:i}=this.lineBlockAt(r);e.push(new kQ(t,i))}}return this.viewports=e.sort((e,t)=>e.from-t.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?TQ:new CQ(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(PQ(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(ZA).filter(e=>"function"!=typeof e);let r=e.changedRanges,n=KA.extendWithRanges(r,function(e,t,i){let r=new vQ;return fE.compare(e,t,i,r,0),r.changes}(i,this.stateDeco,e?e.changes:cP.empty(this.state.doc.length))),o=this.heightMap.height,s=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);rQ(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),n),(this.heightMap.height!=o||iQ)&&(e.flags|=2),s?(this.scrollAnchorPos=e.changes.mapPos(s.from,-1),this.scrollAnchorHeight=s.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let a=n.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<a.from||t.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,t));let l=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(l||!e.changes.empty||2&e.flags)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(AA)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),r=this.heightOracle,n=i.whiteSpace;this.defaultTextDirection="rtl"==i.direction?iA.RTL:iA.LTR;let o=this.heightOracle.mustRefreshForWrapping(n),s=t.getBoundingClientRect(),a=o||this.mustMeasureContent||this.contentDOMHeight!=s.height;this.contentDOMHeight=s.height,this.mustMeasureContent=!1;let l=0,c=0;if(s.width&&s.height){let{scaleX:e,scaleY:i}=h$(t,s);(e>.005&&Math.abs(this.scaleX-e)>.005||i>.005&&Math.abs(this.scaleY-i)>.005)&&(this.scaleX=e,this.scaleY=i,l|=16,o=a=!0)}let d=(parseInt(i.paddingTop)||0)*this.scaleY,h=(parseInt(i.paddingBottom)||0)*this.scaleY;this.paddingTop==d&&this.paddingBottom==h||(this.paddingTop=d,this.paddingBottom=h,l|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,l|=16);let u=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=u&&(this.scrollAnchorHeight=-1,this.scrollTop=u),this.scrolledToBottom=y$(e.scrollDOM);let p=(this.printing?yQ:OQ)(t,this.paddingTop),f=p.top-this.pixelViewport.top,m=p.bottom-this.pixelViewport.bottom;this.pixelViewport=p;let g=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(g!=this.inView&&(this.inView=g,g&&(a=!0)),!this.inView&&!this.scrollTarget&&!function(e){let t=e.getBoundingClientRect(),i=e.ownerDocument.defaultView||window;return t.left<i.innerWidth&&t.right>0&&t.top<i.innerHeight&&t.bottom>0}(e.dom))return 0;let v=s.width;if(this.contentDOMWidth==v&&this.editorHeight==e.scrollDOM.clientHeight||(this.contentDOMWidth=s.width,this.editorHeight=e.scrollDOM.clientHeight,l|=16),a){let t=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(t)&&(o=!0),o||r.lineWrapping&&Math.abs(v-this.contentDOMWidth)>r.charWidth){let{lineHeight:i,charWidth:s,textHeight:a}=e.docView.measureTextSize();o=i>0&&r.refresh(n,i,s,a,Math.max(5,v/s),t),o&&(e.docView.minWidth=0,l|=16)}f>0&&m>0?c=Math.max(f,m):f<0&&m<0&&(c=Math.min(f,m)),rQ();for(let i of this.viewports){let n=i.from==this.viewport.from?t:e.docView.measureVisibleLineHeights(i);this.heightMap=(o?cQ.empty().applyChanges(this.stateDeco,jC.empty,this.heightOracle,[new KA(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,o,new oQ(i.from,n))}iQ&&(l|=2)}let O=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return O&&(2&l&&(l|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),l|=this.updateForViewport()),(2&l||O)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),l|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),l}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,n=this.heightOracle,{visibleTop:o,visibleBottom:s}=this,a=new kQ(r.lineAt(o-1e3*i,aQ.ByHeight,n,0,0).from,r.lineAt(s+1e3*(1-i),aQ.ByHeight,n,0,0).to);if(t){let{head:e}=t.range;if(e<a.from||e>a.to){let i,o=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),s=r.lineAt(e,aQ.ByPos,n,0,0);i="center"==t.y?(s.top+s.bottom)/2-o/2:"start"==t.y||"nearest"==t.y&&e<a.from?s.top:s.bottom-o,a=new kQ(r.lineAt(i-500,aQ.ByHeight,n,0,0).from,r.lineAt(i+o+500,aQ.ByHeight,n,0,0).to)}}return a}mapViewport(e,t){let i=t.mapPos(e.from,-1),r=t.mapPos(e.to,1);return new kQ(this.heightMap.lineAt(i,aQ.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,aQ.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,aQ.ByPos,this.heightOracle,0,0),{bottom:n}=this.heightMap.lineAt(t,aQ.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:s}=this;return(0==e||r<=o-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||n>=s+Math.max(10,Math.min(i,250)))&&r>o-2e3&&n<s+2e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let r of e)t.touchesRange(r.from,r.to)||i.push(new bQ(t.mapPos(r.from),t.mapPos(r.to),r.size,r.displaySize));return i}ensureLineGaps(e,t){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,n=r>>1,o=r<<1;if(this.defaultTextDirection!=iA.LTR&&!i)return[];let s=[],a=(r,o,l,c)=>{if(o-r<n)return;let d=this.state.selection.main,h=[d.from];d.empty||h.push(d.to);for(let e of h)if(e>r&&e<o)return a(r,e-10,l,c),void a(e+10,o,l,c);let u=function(e,t){for(let i of e)if(t(i))return i;return}(e,e=>e.from>=l.from&&e.to<=l.to&&Math.abs(e.from-r)<n&&Math.abs(e.to-o)<n&&!h.some(t=>e.from<t&&e.to>t));if(!u){if(o<l.to&&t&&i&&t.visibleRanges.some(e=>e.from<=o&&e.to>=o)){let e=t.moveToLineBoundary(vP.cursor(o),!1,!0).head;e>r&&(o=e)}let e=this.gapSize(l,r,o,c);u=new bQ(r,o,e,i||e<2e6?e:2e6)}s.push(u)},l=t=>{if(t.length<o||t.type!=X$.Text)return;let n=function(e,t,i){let r=[],n=e,o=0;fE.spans(i,e,t,{span(){},point(e,t){e>n&&(r.push({from:n,to:e}),o+=e-n),n=t}},20),n<t&&(r.push({from:n,to:t}),o+=t-n);return{total:o,ranges:r}}(t.from,t.to,this.stateDeco);if(n.total<o)return;let s,l,c=this.scrollTarget?this.scrollTarget.range.head:null;if(i){let e,i,o=r/this.heightOracle.lineLength*this.heightOracle.lineHeight;if(null!=c){let r=_Q(n,c),s=((this.visibleBottom-this.visibleTop)/2+o)/t.height;e=r-s,i=r+s}else e=(this.visibleTop-t.top-o)/t.height,i=(this.visibleBottom-t.top+o)/t.height;s=SQ(n,e),l=SQ(n,i)}else{let i=n.total*this.heightOracle.charWidth,o=r*this.heightOracle.charWidth,a=0;if(i>2e6)for(let i of e)i.from>=t.from&&i.from<t.to&&i.size!=i.displaySize&&i.from*this.heightOracle.charWidth+a<this.pixelViewport.left&&(a=i.size-i.displaySize);let d,h,u=this.pixelViewport.left+a,p=this.pixelViewport.right+a;if(null!=c){let e=_Q(n,c),t=((p-u)/2+o)/i;d=e-t,h=e+t}else d=(u-o)/i,h=(p+o)/i;s=SQ(n,d),l=SQ(n,h)}s>t.from&&a(t.from,s,t,n),l<t.to&&a(l,t.to,t,n)};for(let e of this.viewportLines)Array.isArray(e.type)?e.type.forEach(l):l(e);return s}gapSize(e,t,i,r){let n=_Q(r,i)-_Q(r,t);return this.heightOracle.lineWrapping?e.height*n:r.total*this.heightOracle.charWidth*n}updateLineGaps(e){bQ.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Z$.set(e.map(e=>e.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let i=[];fE.spans(t,this.viewport.from,this.viewport.to,{span(e,t){i.push({from:e,to:t})},point(){}},20);let r=0;if(i.length!=this.visibleRanges.length)r=12;else for(let t=0;t<i.length&&!(8&r);t++){let n=this.visibleRanges[t],o=i[t];n.from==o.from&&n.to==o.to||(r|=4,e&&e.mapPos(n.from,-1)==o.from&&e.mapPos(n.to,1)==o.to||(r|=8))}return this.visibleRanges=i,r}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||PQ(this.heightMap.lineAt(e,aQ.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||PQ(this.heightMap.lineAt(this.scaler.fromDOM(e),aQ.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return PQ(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class kQ{constructor(e,t){this.from=e,this.to=t}}function SQ({total:e,ranges:t},i){if(i<=0)return t[0].from;if(i>=1)return t[t.length-1].to;let r=Math.floor(e*i);for(let e=0;;e++){let{from:i,to:n}=t[e],o=n-i;if(r<=o)return i+r;r-=o}}function _Q(e,t){let i=0;for(let{from:r,to:n}of e.ranges){if(t<=n){i+=t-r;break}i+=n-r}return i/e.total}const TQ={toDOM:e=>e,fromDOM:e=>e,scale:1,eq(e){return e==this}};class CQ{constructor(e,t,i){let r=0,n=0,o=0;this.viewports=i.map(({from:i,to:n})=>{let o=t.lineAt(i,aQ.ByPos,e,0,0).top,s=t.lineAt(n,aQ.ByPos,e,0,0).bottom;return r+=s-o,{from:i,to:n,top:o,bottom:s,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(t.height-r);for(let e of this.viewports)e.domTop=o+(e.top-n)*this.scale,o=e.domBottom=e.domTop+(e.bottom-e.top),n=e.bottom}toDOM(e){for(let t=0,i=0,r=0;;t++){let n=t<this.viewports.length?this.viewports[t]:null;if(!n||e<n.top)return r+(e-i)*this.scale;if(e<=n.bottom)return n.domTop+(e-n.top);i=n.bottom,r=n.domBottom}}fromDOM(e){for(let t=0,i=0,r=0;;t++){let n=t<this.viewports.length?this.viewports[t]:null;if(!n||e<n.domTop)return i+(e-r)/this.scale;if(e<=n.domBottom)return n.top+(e-n.domTop);i=n.bottom,r=n.domBottom}}eq(e){return e instanceof CQ&&(this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,i)=>t.from==e.viewports[i].from&&t.to==e.viewports[i].to))}}function PQ(e,t){if(1==t.scale)return e;let i=t.toDOM(e.top),r=t.toDOM(e.bottom);return new sQ(e.from,e.length,i,r-i,Array.isArray(e._content)?e._content.map(e=>PQ(e,t)):e._content)}const EQ=bP.define({combine:e=>e.join(" ")}),$Q=bP.define({combine:e=>e.indexOf(!0)>-1}),AQ=AE.newName(),IQ=AE.newName(),QQ=AE.newName(),RQ={"&light":"."+IQ,"&dark":"."+QQ};function DQ(e,t,i){return new AE(t,{finish:t=>/&/.test(t)?t.replace(/&\w*/,t=>{if("&"==t)return e;if(!i||!i[t])throw new RangeError(`Unsupported selector: ${t}`);return i[t]}):e+" "+t})}const MQ=DQ("."+AQ,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>\')',backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},RQ),NQ={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},LQ=JE.ie&&JE.ie_version<=11;class zQ{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new u$,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let e of t)this.queue.push(e);(JE.ie&&JE.ie_version<=11||JE.ios&&e.composing)&&t.some(e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length)?this.flushSoon():this.flush()}),!window.EditContext||!JE.android||!1===e.constructor.EDIT_CONTEXT||JE.chrome&&JE.chrome_version<126||(this.editContext=new qQ(e),e.state.facet(NA)&&(e.contentDOM.editContext=this.editContext.editContext)),LQ&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),"function"==typeof ResizeObserver&&(this.resizeScroll=new ResizeObserver(()=>{var e;(null===(e=this.view.docView)||void 0===e?void 0:e.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver(e=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),e.length>0&&e[e.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(e=>{e.length>0&&e[e.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){("change"!=e.type&&e.type||e.matches)&&(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(NA)?i.root.activeElement!=this.dom:!i$(this.dom,r))return;let n=r.anchorNode&&i.docView.nearest(r.anchorNode);n&&n.ignoreEvent(e)?t||(this.selectionChanged=!1):(JE.ie&&JE.ie_version<=11||JE.android&&JE.chrome)&&!i.state.selection.main.empty&&r.focusNode&&n$(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=e$(e.root);if(!t)return!1;let i=JE.safari&&11==e.root.nodeType&&e.root.activeElement==this.dom&&function(e,t){if(t.getComposedRanges){let i=t.getComposedRanges(e.root)[0];if(i)return UQ(e,i)}let i=null;function r(e){e.preventDefault(),e.stopImmediatePropagation(),i=e.getTargetRanges()[0]}return e.contentDOM.addEventListener("beforeinput",r,!0),e.dom.ownerDocument.execCommand("indent"),e.contentDOM.removeEventListener("beforeinput",r,!0),i?UQ(e,i):null}(this.view,t)||t;if(!i||this.selectionRange.eq(i))return!1;let r=i$(this.dom,i);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&function(e,t){let i=t.focusNode,r=t.focusOffset;if(!i||t.anchorNode!=i||t.anchorOffset!=r)return!1;for(r=Math.min(r,l$(i));;)if(r){if(1!=i.nodeType)return!1;let e=i.childNodes[r-1];"false"==e.contentEditable?r--:(i=e,r=l$(i))}else{if(i==e)return!0;r=o$(i),i=i.parentNode}}(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(1==i.nodeType)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else{if(11!=i.nodeType)break;i=i.host}if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);for(let e of this.scrollTargets=t)e.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,NQ),LQ&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),LQ&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var i;if(!this.delayedAndroidKey){let e=()=>{let e=this.delayedAndroidKey;if(e){this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=e.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&e.force&&v$(this.dom,e.key,e.keyCode)}};this.flushingAndroidKey=this.view.win.requestAnimationFrame(e)}this.delayedAndroidKey&&"Enter"!=e||(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(null===(i=this.delayedAndroidKey)||void 0===i?void 0:i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,i=-1,r=!1;for(let n of e){let e=this.readMutation(n);e&&(e.typeOver&&(r=!0),-1==t?({from:t,to:i}=e):(t=Math.min(e.from,t),i=Math.max(e.to,i)))}return{from:t,to:i,typeOver:r}}readChange(){let{from:e,to:t,typeOver:i}=this.processRecords(),r=this.selectionChanged&&i$(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let n=new kI(this.view,e,t,i);return this.view.docView.domChanged={newSel:n.newSel?n.newSel.main:null},n}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let i=this.view.state,r=SI(this.view,t);return this.view.state==i&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),r}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty("attributes"==e.type),"attributes"==e.type&&(t.flags|=4),"childList"==e.type){let i=VQ(t,e.previousSibling||e.target.previousSibling,-1),r=VQ(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:r?t.posBefore(r):t.posAtEnd,typeOver:!1}}return"characterData"==e.type?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(NA)!=e.state.facet(NA)&&(e.view.contentDOM.editContext=e.state.facet(NA)?this.editContext.editContext:null))}destroy(){var e,t,i;this.stop(),null===(e=this.intersection)||void 0===e||e.disconnect(),null===(t=this.gapIntersection)||void 0===t||t.disconnect(),null===(i=this.resizeScroll)||void 0===i||i.disconnect();for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function VQ(e,t,i){for(;t;){let r=S$.get(t);if(r&&r.parent==e)return r;let n=t.parentNode;t=n!=e.dom?n:i>0?t.nextSibling:t.previousSibling}return null}function UQ(e,t){let i=t.startContainer,r=t.startOffset,n=t.endContainer,o=t.endOffset,s=e.docView.domAtPos(e.state.selection.main.anchor);return n$(s.node,s.offset,n,o)&&([i,r,n,o]=[n,o,i,r]),{anchorNode:i,anchorOffset:r,focusNode:n,focusOffset:o}}class qQ{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let r=e.state.selection.main,{anchor:n,head:o}=r,s=this.toEditorPos(i.updateRangeStart),a=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:s,drifted:!1});let l=a-s>i.text.length;s==this.from&&n<this.from?s=n:a==this.to&&n>this.to&&(a=n);let c=TI(e.state.sliceDoc(s,a),i.text,(l?r.from:r.to)-s,l?"end":null);if(!c){let t=vP.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));return void(t.main.eq(r)||e.dispatch({selection:t,userEvent:"select"}))}let d={from:c.from+s,to:c.toA+s,insert:jC.of(i.text.slice(c.from,c.toB).split("\n"))};if((JE.mac||JE.android)&&d.from==o-1&&/^\. ?$/.test(i.text)&&"off"==e.contentDOM.getAttribute("autocorrect")&&(d={from:s,to:a,insert:jC.of([i.text.replace("."," ")])}),this.pendingContextChange=d,!e.state.readOnly){let t=this.to-this.from+(d.to-d.from+d.insert.length);_I(e,d,vP.single(this.toEditorPos(i.selectionStart,t),this.toEditorPos(i.selectionEnd,t)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),d.from<d.to&&!d.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(t.text.slice(Math.max(0,i.updateRangeStart-1),Math.min(t.text.length,i.updateRangeStart+1)))&&this.handlers.compositionend(i)},this.handlers.characterboundsupdate=i=>{let r=[],n=null;for(let t=this.toEditorPos(i.rangeStart),o=this.toEditorPos(i.rangeEnd);t<o;t++){let i=e.coordsForChar(t);n=i&&new DOMRect(i.left,i.top,i.right-i.left,i.bottom-i.top)||n||new DOMRect,r.push(n)}t.updateCharacterBounds(i.rangeStart,r)},this.handlers.textformatupdate=t=>{let i=[];for(let e of t.getTextFormats()){let t=e.underlineStyle,r=e.underlineThickness;if(!/none/i.test(t)&&!/none/i.test(r)){let n=this.toEditorPos(e.rangeStart),o=this.toEditorPos(e.rangeEnd);if(n<o){let e=`text-decoration: underline ${/^[a-z]/.test(t)?t+" ":"Dashed"==t?"dashed ":"Squiggle"==t?"wavy ":""}${/thin/i.test(r)?1:2}px`;i.push(Z$.mark({attributes:{style:e}}).range(n,o))}}}e.dispatch({effects:DA.of(Z$.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:t}=this.composing;this.composing=null,t&&this.reset(e.state)}};for(let e in this.handlers)t.addEventListener(e,this.handlers[e]);this.measureReq={read:e=>{this.editContext.updateControlBounds(e.contentDOM.getBoundingClientRect());let t=e$(e.root);t&&t.rangeCount&&this.editContext.updateSelectionBounds(t.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,i=!1,r=this.pendingContextChange;return e.changes.iterChanges((n,o,s,a,l)=>{if(i)return;let c=l.length-(o-n);if(r&&o>=r.to){if(r.from==n&&r.to==o&&r.insert.eq(l))return r=this.pendingContextChange=null,t+=c,void(this.to+=c);r=null,this.revertPending(e.state)}if(n+=t,(o+=t)<=this.from)this.from+=c,this.to+=c;else if(n<this.to){if(n<this.from||o>this.to||this.to-this.from+l.length>3e4)return void(i=!0);this.editContext.updateText(this.toContextPos(n),this.toContextPos(o),l.toString()),this.to+=c}t+=c}),r&&!i&&this.revertPending(e.state),!i}update(e){let t=this.pendingContextChange,i=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(i.from,i.to)&&e.transactions.some(e=>!e.isUserEvent("input.type")&&e.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):this.applyEdits(e)&&this.rangeIsValid(e.state)?(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state):(this.pendingContextChange=null,this.reset(e.state)),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),r=this.toContextPos(t.head);this.editContext.selectionStart==i&&this.editContext.selectionEnd==r||this.editContext.updateSelection(i,r)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>3e4)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class XQ{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(e=>e.forEach(e=>i(e,this)))||(e=>this.update(e)),this.dispatch=this.dispatch.bind(this),this._root=e.root||function(e){for(;e;){if(e&&(9==e.nodeType||11==e.nodeType&&e.host))return e;e=e.assignedSlot||e.parentNode}return null}(e.parent)||document,this.viewState=new wQ(e.state||lE.create(e)),e.scrollTo&&e.scrollTo.is(RA)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(zA).map(e=>new UA(e));for(let e of this.plugins)e.update(this);this.observer=new zQ(this),this.inputState=new CI(this),this.inputState.ensureHandlers(this.plugins),this.docView=new eI(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),(null===(t=document.fonts)||void 0===t?void 0:t.ready)&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=1==e.length&&e[0]instanceof HP?e:1==e.length&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t,i=!1,r=!1,n=this.state;for(let t of e){if(t.startState!=n)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");n=t.state}if(this.destroyed)return void(this.viewState.state=n);let o=this.hasFocus,s=0,a=null;e.some(e=>e.annotation(HI))?(this.inputState.notifiedFocused=o,s=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,a=KI(n,o),a||(s=1));let l=this.observer.delayedAndroidKey,c=null;if(l?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(n.doc)||!this.state.selection.eq(n.selection))&&(c=null)):this.observer.clear(),n.facet(lE.phrases)!=this.state.facet(lE.phrases))return this.setState(n);t=JA.create(this,n,e),t.flags|=s;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let t of e){if(d&&(d=d.map(t.changes)),t.scrollIntoView){let{main:e}=t.state.selection;d=new QA(e.empty?e:vP.cursor(e.head,e.head>e.anchor?-1:1))}for(let e of t.effects)e.is(RA)&&(d=e.value.clip(this.state))}this.viewState.update(t,d),this.bidiCache=jQ.update(this.bidiCache,t.changes),t.empty||(this.updatePlugins(t),this.inputState.update(t)),i=this.docView.update(t),this.state.facet(HA)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(i,e.some(e=>e.isUserEvent("select.pointer")))}finally{this.updateState=0}if(t.startState.facet(EQ)!=t.state.facet(EQ)&&(this.viewState.mustMeasureContent=!0),(i||r||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),i&&this.docViewUpdate(),!t.empty)for(let e of this.state.facet(_A))try{e(t)}catch(e){MA(this.state,e,"update listener")}(a||c)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),c&&!SI(this,c)&&l.force&&v$(this.contentDOM,l.key,l.keyCode)})}setState(e){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=e);this.updateState=2;let t=this.hasFocus;try{for(let e of this.plugins)e.destroy(this);this.viewState=new wQ(e),this.plugins=e.facet(zA).map(e=>new UA(e)),this.pluginMap.clear();for(let e of this.plugins)e.update(this);this.docView.destroy(),this.docView=new eI(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(zA),i=e.state.facet(zA);if(t!=i){let r=[];for(let n of i){let i=t.indexOf(n);if(i<0)r.push(new UA(n));else{let t=this.plugins[i];t.mustUpdate=e,r.push(t)}}for(let t of this.plugins)t.mustUpdate!=e&&t.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let t of this.plugins)t.mustUpdate=e;for(let e=0;e<this.plugins.length;e++)this.plugins[e].update(this);t!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(e){MA(this.state,e,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey)return this.measureScheduled=-1,void this.requestMeasure();this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,i=this.scrollDOM,r=i.scrollTop*this.scaleY,{scrollAnchorPos:n,scrollAnchorHeight:o}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let e=0;;e++){if(o<0)if(y$(i))n=-1,o=this.viewState.heightMap.height;else{let e=this.viewState.scrollAnchorAt(r);n=e.from,o=e.top}this.updateState=1;let s=this.viewState.measure(this);if(!s&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(e>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let a=[];4&s||([this.measureRequests,a]=[a,this.measureRequests]);let l=a.map(e=>{try{return e.read(this)}catch(e){return MA(this.state,e),BQ}}),c=JA.create(this,this.state,[]),d=!1;c.flags|=s,t?t.flags|=s:t=c,this.updateState=2,c.empty||(this.updatePlugins(c),this.inputState.update(c),this.updateAttrs(),d=this.docView.update(c),d&&this.docViewUpdate());for(let e=0;e<a.length;e++)if(l[e]!=BQ)try{let t=a[e];t.write&&t.write(l[e],this)}catch(e){MA(this.state,e)}if(d&&this.docView.updateSelection(!0),!c.viewportChanged&&0==this.measureRequests.length){if(this.viewState.editorHeight){if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}{let e=(n<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(n).top)-o;if(e>1||e<-1){r+=e,i.scrollTop=r/this.scaleY,o=-1;continue}}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let e of this.state.facet(_A))e(t)}get themeClasses(){return AQ+" "+(this.state.facet($Q)?QQ:IQ)+" "+this.state.facet(EQ)}updateAttrs(){let e=FQ(this,qA,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(NA)?"true":"false",class:"cm-content",style:`${JE.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),FQ(this,XA,t);let i=this.observer.ignore(()=>{let i=V$(this.contentDOM,this.contentAttrs,t),r=V$(this.dom,this.editorAttrs,e);return i||r});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let e of i.effects)if(e.is(XQ.announce)){t&&(this.announceDOM.textContent=""),t=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=e.value}}mountStyles(){this.styleModules=this.state.facet(HA);let e=this.state.facet(XQ.cspNonce);AE.mount(this.root,this.styleModules.concat(MQ).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(null!=e.key)for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key)return void(this.measureRequests[t]=e);this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(void 0===t||t&&t.plugin!=e)&&this.pluginMap.set(e,t=this.plugins.find(t=>t.plugin==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return vI(this,e,fI(this,e,t,i))}moveByGroup(e,t){return vI(this,e,fI(this,e,t,t=>function(e,t,i){let r=e.state.charCategorizer(t),n=r(i);return e=>{let t=r(e);return n==nE.Space&&(n=t),n==t}}(this,e.head,t)))}visualLineSide(e,t){let i=this.bidiSpans(e),r=this.textDirectionAt(e.from),n=i[t?i.length-1:0];return vP.cursor(n.side(t,r)+e.from,n.forward(!t,r)?1:-1)}moveToLineBoundary(e,t,i=!0){return function(e,t,i,r){let n=pI(e,t.head,t.assoc||-1),o=r&&n.type==X$.Text&&(e.lineWrapping||n.widgetLineBreaks)?e.coordsAtPos(t.assoc<0&&t.head>n.from?t.head-1:t.head):null;if(o){let t=e.dom.getBoundingClientRect(),r=e.textDirectionAt(n.from),s=e.posAtCoords({x:i==(r==iA.LTR)?t.right-1:t.left+1,y:(o.top+o.bottom)/2});if(null!=s)return vP.cursor(s,i?-1:1)}return vP.cursor(i?n.to:n.from,i?-1:1)}(this,e,t,i)}moveVertically(e,t,i){return vI(this,e,function(e,t,i,r){let n=t.head,o=i?1:-1;if(n==(i?e.state.doc.length:0))return vP.cursor(n,t.assoc);let s,a=t.goalColumn,l=e.contentDOM.getBoundingClientRect(),c=e.coordsAtPos(n,t.assoc||-1),d=e.documentTop;if(c)null==a&&(a=c.left-l.left),s=o<0?c.top:c.bottom;else{let t=e.viewState.lineBlockAt(n);null==a&&(a=Math.min(l.right-l.left,e.defaultCharacterWidth*(n-t.from))),s=(o<0?t.top:t.bottom)+d}let h=l.left+a,u=null!=r?r:e.viewState.heightOracle.textHeight>>1;for(let t=0;;t+=10){let i=s+(u+t)*o,r=dI(e,{x:h,y:i},!1,o);if(i<l.top||i>l.bottom||(o<0?r<n:r>n)){let t=e.docView.coordsForChar(r),n=!t||i<t.top?-1:1;return vP.cursor(r,n,void 0,a)}}}(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),dI(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),n=this.bidiSpans(r);return c$(i,n[uA.find(n,e-r.from,-1,t)].dir==iA.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet($A)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>ZQ)return vA(e.length);let t,i=this.textDirectionAt(e.from);for(let r of this.bidiCache)if(r.from==e.from&&r.dir==i&&(r.fresh||pA(r.isolates,t=WA(this,e))))return r.order;t||(t=WA(this,e));let r=function(e,t,i){if(!e)return[new uA(0,0,t==nA?1:0)];if(t==rA&&!i.length&&!hA.test(e))return vA(e.length);if(i.length)for(;e.length>fA.length;)fA[fA.length]=256;let r=[],n=t==rA?0:1;return gA(e,n,n,i,0,e.length,r),r}(e.text,i,t);return this.bidiCache.push(new jQ(e.from,e.to,i,t,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||JE.safari&&(null===(e=this.inputState)||void 0===e?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{m$(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((9==e.nodeType?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return RA.of(new QA("number"==typeof e?vP.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return RA.of(new QA(vP.cursor(i.from),"start","start",i.top-e,t,!0))}setTabFocusMode(e){null==e?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:"boolean"==typeof e?this.inputState.tabFocusMode=e?0:-1:0!=this.inputState.tabFocusMode&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return VA.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return VA.define(()=>({}),{eventObservers:e})}static theme(e,t){let i=AE.newName(),r=[EQ.of(i),HA.of(DQ(`.${i}`,e))];return t&&t.dark&&r.push($Q.of(!0)),r}static baseTheme(e){return QP.lowest(HA.of(DQ("."+AQ,e,RQ)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),r=i&&S$.get(i)||S$.get(e);return(null===(t=null==r?void 0:r.rootView)||void 0===t?void 0:t.view)||null}}XQ.styleModule=HA,XQ.inputHandler=TA,XQ.clipboardInputFilter=PA,XQ.clipboardOutputFilter=EA,XQ.scrollHandler=IA,XQ.focusChangeEffect=CA,XQ.perLineTextDirection=$A,XQ.exceptionSink=SA,XQ.updateListener=_A,XQ.editable=NA,XQ.mouseSelectionStyle=kA,XQ.dragMovesSelection=wA,XQ.clickAddsSelectionRange=xA,XQ.decorations=ZA,XQ.outerDecorations=BA,XQ.atomicRanges=jA,XQ.bidiIsolatedRanges=FA,XQ.scrollMargins=YA,XQ.darkTheme=$Q,XQ.cspNonce=bP.define({combine:e=>e.length?e[0]:""}),XQ.contentAttributes=XA,XQ.editorAttributes=qA,XQ.lineWrapping=XQ.contentAttributes.of({class:"cm-lineWrapping"}),XQ.announce=GP.define();const ZQ=4096,BQ={};class jQ{constructor(e,t,i,r,n,o){this.from=e,this.to=t,this.dir=i,this.isolates=r,this.fresh=n,this.order=o}static update(e,t){if(t.empty&&!e.some(e=>e.fresh))return e;let i=[],r=e.length?e[e.length-1].dir:iA.LTR;for(let n=Math.max(0,e.length-10);n<e.length;n++){let o=e[n];o.dir!=r||t.touchesRange(o.from,o.to)||i.push(new jQ(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return i}}function FQ(e,t,i){for(let r=e.state.facet(t),n=r.length-1;n>=0;n--){let t=r[n],o="function"==typeof t?t(e):t;o&&N$(o,i)}return i}const WQ=JE.mac?"mac":JE.windows?"win":JE.linux?"linux":"key";function YQ(e,t,i){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==i&&t.shiftKey&&(e="Shift-"+e),e}const GQ=QP.default(XQ.domEventHandlers({keydown:(e,t)=>rR(JQ(t.state),e,t,"editor")})),HQ=bP.define({enables:GQ}),KQ=new WeakMap;function JQ(e){let t=e.facet(HQ),i=KQ.get(t);return i||KQ.set(t,i=function(e,t=WQ){let i=Object.create(null),r=Object.create(null),n=(e,t)=>{let i=r[e];if(null==i)r[e]=t;else if(i!=t)throw new Error("Key binding "+e+" is used both as a regular binding and as a multi-stroke prefix")},o=(e,r,o,s,a)=>{var l,c;let d=i[e]||(i[e]=Object.create(null)),h=r.split(/ (?!$)/).map(e=>function(e,t){const i=e.split(/-(?!$)/);let r,n,o,s,a=i[i.length-1];"Space"==a&&(a=" ");for(let e=0;e<i.length-1;++e){const a=i[e];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))n=!0;else if(/^s(hift)?$/i.test(a))o=!0;else{if(!/^mod$/i.test(a))throw new Error("Unrecognized modifier name: "+a);"mac"==t?s=!0:n=!0}}return r&&(a="Alt-"+a),n&&(a="Ctrl-"+a),s&&(a="Meta-"+a),o&&(a="Shift-"+a),a}(e,t));for(let t=1;t<h.length;t++){let i=h.slice(0,t).join(" ");n(i,!0),d[i]||(d[i]={preventDefault:!0,stopPropagation:!1,run:[t=>{let r=eR={view:t,prefix:i,scope:e};return setTimeout(()=>{eR==r&&(eR=null)},tR),!0}]})}let u=h.join(" ");n(u,!1);let p=d[u]||(d[u]={preventDefault:!1,stopPropagation:!1,run:(null===(c=null===(l=d._any)||void 0===l?void 0:l.run)||void 0===c?void 0:c.slice())||[]});o&&p.run.push(o),s&&(p.preventDefault=!0),a&&(p.stopPropagation=!0)};for(let r of e){let e=r.scope?r.scope.split(" "):["editor"];if(r.any)for(let t of e){let e=i[t]||(i[t]=Object.create(null));e._any||(e._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:n}=r;for(let t in e)e[t].run.push(e=>n(e,iR))}let n=r[t]||r.key;if(n)for(let t of e)o(t,n,r.run,r.preventDefault,r.stopPropagation),r.shift&&o(t,"Shift-"+n,r.shift,r.preventDefault,r.stopPropagation)}return i}(t.reduce((e,t)=>e.concat(t),[]))),i}let eR=null;const tR=4e3;let iR=null;function rR(e,t,i,r){iR=t;let n=function(e){var t=!(ME&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||NE&&e.shiftKey&&e.key&&1==e.key.length||"Unidentified"==e.key)&&e.key||(e.shiftKey?DE:RE)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(t),o=oP(rP(n,0))==n.length&&" "!=n,s="",a=!1,l=!1,c=!1;eR&&eR.view==i&&eR.scope==r&&(s=eR.prefix+" ",II.indexOf(t.keyCode)<0&&(l=!0,eR=null));let d,h,u=new Set,p=e=>{if(e){for(let t of e.run)if(!u.has(t)&&(u.add(t),t(i)))return e.stopPropagation&&(c=!0),!0;e.preventDefault&&(e.stopPropagation&&(c=!0),l=!0)}return!1},f=e[r];return f&&(p(f[s+YQ(n,t,!o)])?a=!0:!o||!(t.altKey||t.metaKey||t.ctrlKey)||JE.windows&&t.ctrlKey&&t.altKey||JE.mac&&t.altKey&&!t.ctrlKey&&!t.metaKey||!(d=RE[t.keyCode])||d==n?o&&t.shiftKey&&p(f[s+YQ(n,t,!0)])&&(a=!0):(p(f[s+YQ(d,t,!0)])||t.shiftKey&&(h=DE[t.keyCode])!=n&&h!=d&&p(f[s+YQ(h,t,!1)]))&&(a=!0),!a&&p(f._any)&&(a=!0)),l&&(a=!0),a&&c&&t.stopPropagation(),iR=null,a}class nR{constructor(e,t,i,r,n){this.className=e,this.left=t,this.top=i,this.width=r,this.height=n}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className==this.className&&(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",null!=this.width&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,i){if(i.empty){let r=e.coordsAtPos(i.head,i.assoc||1);if(!r)return[];let n=oR(e);return[new nR(t,r.left-n.left,r.top-n.top,null,r.bottom-r.top)]}return function(e,t,i){if(i.to<=e.viewport.from||i.from>=e.viewport.to)return[];let r=Math.max(i.from,e.viewport.from),n=Math.min(i.to,e.viewport.to),o=e.textDirection==iA.LTR,s=e.contentDOM,a=s.getBoundingClientRect(),l=oR(e),c=s.querySelector(".cm-line"),d=c&&window.getComputedStyle(c),h=a.left+(d?parseInt(d.paddingLeft)+Math.min(0,parseInt(d.textIndent)):0),u=a.right-(d?parseInt(d.paddingRight):0),p=pI(e,r,1),f=pI(e,n,-1),m=p.type==X$.Text?p:null,g=f.type==X$.Text?f:null;m&&(e.lineWrapping||p.widgetLineBreaks)&&(m=sR(e,r,1,m));g&&(e.lineWrapping||f.widgetLineBreaks)&&(g=sR(e,n,-1,g));if(m&&g&&m.from==g.from&&m.to==g.to)return O(y(i.from,i.to,m));{let t=m?y(i.from,null,m):b(p,!1),r=g?y(null,i.to,g):b(f,!0),n=[];return(m||p).to<(g||f).from-(m&&g?1:0)||p.widgetLineBreaks>1&&t.bottom+e.defaultLineHeight/2<r.top?n.push(v(h,t.bottom,u,r.top)):t.bottom<r.top&&e.elementAtHeight((t.bottom+r.top)/2).type==X$.Text&&(t.bottom=r.top=(t.bottom+r.top)/2),O(t).concat(n).concat(O(r))}function v(e,i,r,n){return new nR(t,e-l.left,i-l.top,r-e,n-i)}function O({top:e,bottom:t,horizontal:i}){let r=[];for(let n=0;n<i.length;n+=2)r.push(v(i[n],e,i[n+1],t));return r}function y(t,i,r){let n=1e9,s=-1e9,a=[];function l(t,i,l,c,d){let p=e.coordsAtPos(t,t==r.to?-2:2),f=e.coordsAtPos(l,l==r.from?2:-2);p&&f&&(n=Math.min(p.top,f.top,n),s=Math.max(p.bottom,f.bottom,s),d==iA.LTR?a.push(o&&i?h:p.left,o&&c?u:f.right):a.push(!o&&c?h:f.left,!o&&i?u:p.right))}let c=null!=t?t:r.from,d=null!=i?i:r.to;for(let r of e.visibleRanges)if(r.to>c&&r.from<d)for(let n=Math.max(r.from,c),o=Math.min(r.to,d);;){let r=e.state.doc.lineAt(n);for(let s of e.bidiSpans(r)){let e=s.from+r.from,a=s.to+r.from;if(e>=o)break;a>n&&l(Math.max(e,n),null==t&&e<=c,Math.min(a,o),null==i&&a>=d,s.dir)}if(n=r.to+1,n>=o)break}return 0==a.length&&l(c,null==t,d,null==i,e.textDirection),{top:n,bottom:s,horizontal:a}}function b(e,t){let i=a.top+(t?e.top:e.bottom);return{top:i,bottom:i,horizontal:[]}}}(e,t,i)}}function oR(e){let t=e.scrollDOM.getBoundingClientRect();return{left:(e.textDirection==iA.LTR?t.left:t.right-e.scrollDOM.clientWidth*e.scaleX)-e.scrollDOM.scrollLeft*e.scaleX,top:t.top-e.scrollDOM.scrollTop*e.scaleY}}function sR(e,t,i,r){let n=e.coordsAtPos(t,2*i);if(!n)return r;let o=e.dom.getBoundingClientRect(),s=(n.top+n.bottom)/2,a=e.posAtCoords({x:o.left+1,y:s}),l=e.posAtCoords({x:o.right-1,y:s});return null==a||null==l?r:{from:Math.max(r.from,Math.min(a,l)),to:Math.min(r.to,Math.max(a,l))}}class aR{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(lR)!=e.state.facet(lR)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){!1!==this.layer.updateOnDocViewUpdate&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,i=e.facet(lR);for(;t<i.length&&i[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;e==this.scaleX&&t==this.scaleY||(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((e,t)=>!function(e,t){return e.constructor==t.constructor&&e.eq(t)}(e,this.drawn[t]))){let t=this.dom.firstChild,i=0;for(let r of e)r.update&&t&&r.constructor&&this.drawn[i].constructor&&r.update(t,this.drawn[i])?(t=t.nextSibling,i++):this.dom.insertBefore(r.draw(),t);for(;t;){let e=t.nextSibling;t.remove(),t=e}this.drawn=e,JE.safari&&JE.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const lR=bP.define();function cR(e){return[VA.define(t=>new aR(t,e)),lR.of(e)]}const dR=bP.define({combine:e=>cE(e,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})});function hR(e={}){return[dR.of(e),pR,mR,gR,AA.of(!0)]}function uR(e){return e.startState.facet(dR)!=e.state.facet(dR)}const pR=cR({above:!0,markers(e){let{state:t}=e,i=t.facet(dR),r=[];for(let n of t.selection.ranges){let o=n==t.selection.main;if(n.empty||i.drawRangeCursor){let t=o?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",i=n.empty?n:vP.cursor(n.head,n.head>n.anchor?-1:1);for(let n of nR.forRange(e,t,i))r.push(n)}}return r},update(e,t){e.transactions.some(e=>e.selection)&&(t.style.animationName="cm-blink"==t.style.animationName?"cm-blink2":"cm-blink");let i=uR(e);return i&&fR(e.state,t),e.docChanged||e.selectionSet||i},mount(e,t){fR(t.state,e)},class:"cm-cursorLayer"});function fR(e,t){t.style.animationDuration=e.facet(dR).cursorBlinkRate+"ms"}const mR=cR({above:!1,markers:e=>e.state.selection.ranges.map(t=>t.empty?[]:nR.forRange(e,"cm-selectionBackground",t)).reduce((e,t)=>e.concat(t)),update:(e,t)=>e.docChanged||e.selectionSet||e.viewportChanged||uR(e),class:"cm-selectionLayer"}),gR=QP.highest(XQ.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),vR=GP.define({map:(e,t)=>null==e?null:t.mapPos(e)}),OR=CP.define({create:()=>null,update:(e,t)=>(null!=e&&(e=t.changes.mapPos(e)),t.effects.reduce((e,t)=>t.is(vR)?t.value:e,e))}),yR=VA.fromClass(class{constructor(e){this.view=e,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(e){var t;let i=e.state.field(OR);null==i?null!=this.cursor&&(null===(t=this.cursor)||void 0===t||t.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(e.startState.field(OR)!=i||e.docChanged||e.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:e}=this,t=e.state.field(OR),i=null!=t&&e.coordsAtPos(t);if(!i)return null;let r=e.scrollDOM.getBoundingClientRect();return{left:i.left-r.left+e.scrollDOM.scrollLeft*e.scaleX,top:i.top-r.top+e.scrollDOM.scrollTop*e.scaleY,height:i.bottom-i.top}}drawCursor(e){if(this.cursor){let{scaleX:t,scaleY:i}=this.view;e?(this.cursor.style.left=e.left/t+"px",this.cursor.style.top=e.top/i+"px",this.cursor.style.height=e.height/i+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(e){this.view.state.field(OR)!=e&&this.view.dispatch({effects:vR.of(e)})}},{eventObservers:{dragover(e){this.setDropPos(this.view.posAtCoords({x:e.clientX,y:e.clientY}))},dragleave(e){e.target!=this.view.contentDOM&&this.view.contentDOM.contains(e.relatedTarget)||this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function bR(e,t,i,r,n){t.lastIndex=0;for(let o,s=e.iterRange(i,r),a=i;!s.next().done;a+=s.value.length)if(!s.lineBreak)for(;o=t.exec(s.value);)n(a+o.index,o)}class xR{constructor(e){const{regexp:t,decoration:i,decorate:r,boundary:n,maxLength:o=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,r)this.addMatch=(e,t,i,n)=>r(n,i,i+e[0].length,e,t);else if("function"==typeof i)this.addMatch=(e,t,r,n)=>{let o=i(e,t,r);o&&n(r,r+e[0].length,o)};else{if(!i)throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.addMatch=(e,t,r,n)=>n(r,r+e[0].length,i)}this.boundary=n,this.maxLength=o}createDeco(e){let t=new mE,i=t.add.bind(t);for(let{from:t,to:r}of function(e,t){let i=e.visibleRanges;if(1==i.length&&i[0].from==e.viewport.from&&i[0].to==e.viewport.to)return i;let r=[];for(let{from:n,to:o}of i)n=Math.max(e.state.doc.lineAt(n).from,n-t),o=Math.min(e.state.doc.lineAt(o).to,o+t),r.length&&r[r.length-1].to>=n?r[r.length-1].to=o:r.push({from:n,to:o});return r}(e,this.maxLength))bR(e.state.doc,this.regexp,t,r,(t,r)=>this.addMatch(r,e,t,i));return t.finish()}updateDeco(e,t){let i=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((t,n,o,s)=>{s>=e.view.viewport.from&&o<=e.view.viewport.to&&(i=Math.min(o,i),r=Math.max(s,r))}),e.viewportMoved||r-i>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,t.map(e.changes),i,r):t}updateRange(e,t,i,r){for(let n of e.visibleRanges){let o=Math.max(n.from,i),s=Math.min(n.to,r);if(s>=o){let i=e.state.doc.lineAt(o),r=i.to<s?e.state.doc.lineAt(s):i,a=Math.max(n.from,i.from),l=Math.min(n.to,r.to);if(this.boundary){for(;o>i.from;o--)if(this.boundary.test(i.text[o-1-i.from])){a=o;break}for(;s<r.to;s++)if(this.boundary.test(r.text[s-r.from])){l=s;break}}let c,d=[],h=(e,t,i)=>d.push(i.range(e,t));if(i==r)for(this.regexp.lastIndex=a-i.from;(c=this.regexp.exec(i.text))&&c.index<l-i.from;)this.addMatch(c,e,c.index+i.from,h);else bR(e.state.doc,this.regexp,a,l,(t,i)=>this.addMatch(i,e,t,h));t=t.update({filterFrom:a,filterTo:l,filter:(e,t)=>e<a||t>l,add:d})}}return t}}const wR=null!=/x/.unicode?"gu":"g",kR=new RegExp("[\0-\b\n--\u2028\u2029\ufeff-]",wR),SR={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let _R=null;const TR=bP.define({combine(e){let t=cE(e,{render:null,specialChars:kR,addSpecialChars:null});return(t.replaceTabs=!function(){var e;if(null==_R&&"undefined"!=typeof document&&document.body){let t=document.body.style;_R=null!=(null!==(e=t.tabSize)&&void 0!==e?e:t.MozTabSize)}return _R||!1}())&&(t.specialChars=new RegExp("\t|"+t.specialChars.source,wR)),t.addSpecialChars&&(t.specialChars=new RegExp(t.specialChars.source+"|"+t.addSpecialChars.source,wR)),t}});function CR(e={}){return[TR.of(e),PR||(PR=VA.fromClass(class{constructor(e){this.view=e,this.decorations=Z$.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(e.state.facet(TR)),this.decorations=this.decorator.createDeco(e)}makeDecorator(e){return new xR({regexp:e.specialChars,decoration:(t,i,r)=>{let{doc:n}=i.state,o=rP(t[0],0);if(9==o){let e=n.lineAt(r),t=i.state.tabSize,o=TE(e.text,t,r-e.from);return Z$.replace({widget:new $R((t-o%t)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[o]||(this.decorationCache[o]=Z$.replace({widget:new ER(e,o)}))},boundary:e.replaceTabs?void 0:/[^]/})}update(e){let t=e.state.facet(TR);e.startState.facet(TR)!=t?(this.decorator=this.makeDecorator(t),this.decorations=this.decorator.createDeco(e.view)):this.decorations=this.decorator.updateDeco(e,this.decorations)}},{decorations:e=>e.decorations}))]}let PR=null;class ER extends q${constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=function(e){return e>=32?"":10==e?"":String.fromCharCode(9216+e)}(this.code),i=e.state.phrase("Control character")+" "+(SR[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,t);if(r)return r;let n=document.createElement("span");return n.textContent=t,n.title=i,n.setAttribute("aria-label",i),n.className="cm-specialChar",n}ignoreEvent(){return!1}}class $R extends q${constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="\t",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}const AR=Z$.line({class:"cm-activeLine"}),IR=VA.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.docChanged||e.selectionSet)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=-1,i=[];for(let r of e.state.selection.ranges){let n=e.lineBlockAt(r.head);n.from>t&&(i.push(AR.range(n.from)),t=n.from)}return Z$.set(i)}},{decorations:e=>e.decorations}),QR=2e3;function RR(e,t){let i=e.posAtCoords({x:t.clientX,y:t.clientY},!1),r=e.state.doc.lineAt(i),n=i-r.from,o=n>QR?-1:n==r.length?function(e,t){let i=e.coordsAtPos(e.viewport.from);return i?Math.round(Math.abs((i.left-t)/e.defaultCharacterWidth)):-1}(e,t.clientX):TE(r.text,e.state.tabSize,i-r.from);return{line:r.number,col:o,off:n}}function DR(e,t){let i=RR(e,t),r=e.state.selection;return i?{update(e){if(e.docChanged){let t=e.changes.mapPos(e.startState.doc.line(i.line).from),n=e.state.doc.lineAt(t);i={line:n.number,col:i.col,off:Math.min(i.off,n.length)},r=r.map(e.changes)}},get(t,n,o){let s=RR(e,t);if(!s)return r;let a=function(e,t,i){let r=Math.min(t.line,i.line),n=Math.max(t.line,i.line),o=[];if(t.off>QR||i.off>QR||t.col<0||i.col<0){let s=Math.min(t.off,i.off),a=Math.max(t.off,i.off);for(let t=r;t<=n;t++){let i=e.doc.line(t);i.length<=a&&o.push(vP.range(i.from+s,i.to+a))}}else{let s=Math.min(t.col,i.col),a=Math.max(t.col,i.col);for(let t=r;t<=n;t++){let i=e.doc.line(t),r=CE(i.text,s,e.tabSize,!0);if(r<0)o.push(vP.cursor(i.to));else{let t=CE(i.text,a,e.tabSize);o.push(vP.range(i.from+r,i.from+t))}}}return o}(e.state,i,s);return a.length?o?vP.create(a.concat(r.ranges)):vP.create(a):r}}:null}const MR={Alt:[18,e=>!!e.altKey],Control:[17,e=>!!e.ctrlKey],Shift:[16,e=>!!e.shiftKey],Meta:[91,e=>!!e.metaKey]},NR={style:"cursor: crosshair"};function LR(e={}){let[t,i]=MR[e.key||"Alt"],r=VA.fromClass(class{constructor(e){this.view=e,this.isDown=!1}set(e){this.isDown!=e&&(this.isDown=e,this.view.update([]))}},{eventObservers:{keydown(e){this.set(e.keyCode==t||i(e))},keyup(e){e.keyCode!=t&&i(e)||this.set(!1)},mousemove(e){this.set(i(e))}}});return[r,XQ.contentAttributes.of(e=>{var t;return(null===(t=e.plugin(r))||void 0===t?void 0:t.isDown)?NR:null})]}const zR="-10000px";class VR{constructor(e,t,i,r){this.facet=t,this.createTooltipView=i,this.removeTooltipView=r,this.input=e.state.facet(t),this.tooltips=this.input.filter(e=>e);let n=null;this.tooltipViews=this.tooltips.map(e=>n=i(e,n))}update(e,t){var i;let r=e.state.facet(this.facet),n=r.filter(e=>e);if(r===this.input){for(let t of this.tooltipViews)t.update&&t.update(e);return!1}let o=[],s=t?[]:null;for(let i=0;i<n.length;i++){let r=n[i],a=-1;if(r){for(let e=0;e<this.tooltips.length;e++){let t=this.tooltips[e];t&&t.create==r.create&&(a=e)}if(a<0)o[i]=this.createTooltipView(r,i?o[i-1]:null),s&&(s[i]=!!r.above);else{let r=o[i]=this.tooltipViews[a];s&&(s[i]=t[a]),r.update&&r.update(e)}}}for(let e of this.tooltipViews)o.indexOf(e)<0&&(this.removeTooltipView(e),null===(i=e.destroy)||void 0===i||i.call(e));return t&&(s.forEach((e,i)=>t[i]=e),t.length=s.length),this.input=r,this.tooltips=n,this.tooltipViews=o,!0}}function UR(e){let t=e.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:t.clientHeight,right:t.clientWidth}}const qR=bP.define({combine:e=>{var t,i,r;return{position:JE.ios?"absolute":(null===(t=e.find(e=>e.position))||void 0===t?void 0:t.position)||"fixed",parent:(null===(i=e.find(e=>e.parent))||void 0===i?void 0:i.parent)||null,tooltipSpace:(null===(r=e.find(e=>e.tooltipSpace))||void 0===r?void 0:r.tooltipSpace)||UR}}}),XR=new WeakMap,ZR=VA.fromClass(class{constructor(e){this.view=e,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let t=e.state.facet(qR);this.position=t.position,this.parent=t.parent,this.classes=e.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver="function"==typeof ResizeObserver?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new VR(e,WR,(e,t)=>this.createTooltip(e,t),e=>{this.resizeObserver&&this.resizeObserver.unobserve(e.dom),e.dom.remove()}),this.above=this.manager.tooltips.map(e=>!!e.above),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver(e=>{Date.now()>this.lastTransaction-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),e.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let e of this.manager.tooltipViews)this.intersectionObserver.observe(e.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(e){e.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(e,this.above);t&&this.observeIntersection();let i=t||e.geometryChanged,r=e.state.facet(qR);if(r.position!=this.position&&!this.madeAbsolute){this.position=r.position;for(let e of this.manager.tooltipViews)e.dom.style.position=this.position;i=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let e of this.manager.tooltipViews)this.container.appendChild(e.dom);i=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);i&&this.maybeMeasure()}createTooltip(e,t){let i=e.create(this.view),r=t?t.dom:null;if(i.dom.classList.add("cm-tooltip"),e.arrow&&!i.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let e=document.createElement("div");e.className="cm-tooltip-arrow",i.dom.appendChild(e)}return i.dom.style.position=this.position,i.dom.style.top=zR,i.dom.style.left="0px",this.container.insertBefore(i.dom,r),i.mount&&i.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(i.dom),i}destroy(){var e,t,i;this.view.win.removeEventListener("resize",this.measureSoon);for(let t of this.manager.tooltipViews)t.dom.remove(),null===(e=t.destroy)||void 0===e||e.call(t);this.parent&&this.container.remove(),null===(t=this.resizeObserver)||void 0===t||t.disconnect(),null===(i=this.intersectionObserver)||void 0===i||i.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let e=1,t=1,i=!1;if("fixed"==this.position&&this.manager.tooltipViews.length){let{dom:e}=this.manager.tooltipViews[0];if(JE.gecko)i=e.offsetParent!=this.container.ownerDocument.body;else if(e.style.top==zR&&"0px"==e.style.left){let t=e.getBoundingClientRect();i=Math.abs(t.top+1e4)>1||Math.abs(t.left)>1}}if(i||"absolute"==this.position)if(this.parent){let i=this.parent.getBoundingClientRect();i.width&&i.height&&(e=i.width/this.parent.offsetWidth,t=i.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:t}=this.view.viewState);let r=this.view.scrollDOM.getBoundingClientRect(),n=GA(this.view);return{visible:{left:r.left+n.left,top:r.top+n.top,right:r.right-n.right,bottom:r.bottom-n.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((e,t)=>{let i=this.manager.tooltipViews[t];return i.getCoords?i.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(qR).tooltipSpace(this.view),scaleX:e,scaleY:t,makeAbsolute:i}}writeMeasure(e){var t;if(e.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let e of this.manager.tooltipViews)e.dom.style.position="absolute"}let{visible:i,space:r,scaleX:n,scaleY:o}=e,s=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],c=this.manager.tooltipViews[a],{dom:d}=c,h=e.pos[a],u=e.size[a];if(!h||!1!==l.clip&&(h.bottom<=Math.max(i.top,r.top)||h.top>=Math.min(i.bottom,r.bottom)||h.right<Math.max(i.left,r.left)-.1||h.left>Math.min(i.right,r.right)+.1)){d.style.top=zR;continue}let p=l.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,f=p?7:0,m=u.right-u.left,g=null!==(t=XR.get(c))&&void 0!==t?t:u.bottom-u.top,v=c.offset||FR,O=this.view.textDirection==iA.LTR,y=u.width>r.right-r.left?O?r.left:r.right-u.width:O?Math.max(r.left,Math.min(h.left-(p?14:0)+v.x,r.right-m)):Math.min(Math.max(r.left,h.left-m+(p?14:0)-v.x),r.right-m),b=this.above[a];!l.strictSide&&(b?h.top-g-f-v.y<r.top:h.bottom+g+f+v.y>r.bottom)&&b==r.bottom-h.bottom>h.top-r.top&&(b=this.above[a]=!b);let x=(b?h.top-r.top:r.bottom-h.bottom)-f;if(x<g&&!1!==c.resize){if(x<this.view.defaultLineHeight){d.style.top=zR;continue}XR.set(c,g),d.style.height=(g=x)/o+"px"}else d.style.height&&(d.style.height="");let w=b?h.top-g-f-v.y:h.bottom+f+v.y,k=y+m;if(!0!==c.overlap)for(let e of s)e.left<k&&e.right>y&&e.top<w+g&&e.bottom>w&&(w=b?e.top-g-2-f:e.bottom+f+2);if("absolute"==this.position?(d.style.top=(w-e.parent.top)/o+"px",BR(d,(y-e.parent.left)/n)):(d.style.top=w/o+"px",BR(d,y/n)),p){let e=h.left+(O?v.x:-v.x)-(y+14-7);p.style.left=e/n+"px"}!0!==c.overlap&&s.push({left:y,top:w,right:k,bottom:w+g}),d.classList.toggle("cm-tooltip-above",b),d.classList.toggle("cm-tooltip-below",!b),c.positioned&&c.positioned(e.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let e of this.manager.tooltipViews)e.dom.style.top=zR}},{eventObservers:{scroll(){this.maybeMeasure()}}});function BR(e,t){let i=parseInt(e.style.left,10);(isNaN(i)||Math.abs(t-i)>1)&&(e.style.left=t+"px")}const jR=XQ.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),FR={x:0,y:0},WR=bP.define({enables:[ZR,jR]}),YR=bP.define({combine:e=>e.reduce((e,t)=>e.concat(t),[])});class GR{static create(e){return new GR(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new VR(e,YR,(e,t)=>this.createHostedView(e,t),e=>e.dom.remove())}createHostedView(e,t){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)null===(e=t.destroy)||void 0===e||e.call(t)}passProp(e){let t;for(let i of this.manager.tooltipViews){let r=i[e];if(void 0!==r)if(void 0===t)t=r;else if(t!==r)return}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const HR=WR.compute([YR],e=>{let t=e.facet(YR);return 0===t.length?null:{pos:Math.min(...t.map(e=>e.pos)),end:Math.max(...t.map(e=>{var t;return null!==(t=e.end)&&void 0!==t?t:e.pos})),create:GR.create,above:t[0].above,arrow:t.some(e=>e.arrow)}});class KR{constructor(e,t,i,r,n){this.view=e,this.source=t,this.field=i,this.setHover=r,this.hoverTime=n,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,i=e.docView.nearest(t.target);if(!i)return;let r,n=1;if(i instanceof A$)r=i.posAtStart;else{if(r=e.posAtCoords(t),null==r)return;let i=e.coordsAtPos(r);if(!i||t.y<i.top||t.y>i.bottom||t.x<i.left-e.defaultCharacterWidth||t.x>i.right+e.defaultCharacterWidth)return;let o=e.bidiSpans(e.state.doc.lineAt(r)).find(e=>e.from<=r&&e.to>=r),s=o&&o.dir==iA.RTL?-1:1;n=t.x<i.left?-s:s}let o=this.source(e,r,n);if(null==o?void 0:o.then){let t=this.pending={pos:r};o.then(i=>{this.pending==t&&(this.pending=null,!i||Array.isArray(i)&&!i.length||e.dispatch({effects:this.setHover.of(Array.isArray(i)?i:[i])}))},t=>MA(e.state,t,"hover tooltip"))}else!o||Array.isArray(o)&&!o.length||e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(ZR),t=e?e.manager.tooltips.findIndex(e=>e.create==GR.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:n}=this;if(r.length&&n&&!function(e,t){let i,{left:r,right:n,top:o,bottom:s}=e.getBoundingClientRect();if(i=e.querySelector(".cm-tooltip-arrow")){let e=i.getBoundingClientRect();o=Math.min(e.top,o),s=Math.max(e.bottom,s)}return t.clientX>=r-JR&&t.clientX<=n+JR&&t.clientY>=o-JR&&t.clientY<=s+JR}(n.dom,e)||this.pending){let{pos:n}=r[0]||this.pending,o=null!==(i=null===(t=r[0])||void 0===t?void 0:t.end)&&void 0!==i?i:n;(n==o?this.view.posAtCoords(this.lastMove)==n:function(e,t,i,r,n){let o=e.scrollDOM.getBoundingClientRect(),s=e.documentTop+e.documentPadding.top+e.contentHeight;if(o.left>r||o.right<r||o.top>n||Math.min(o.bottom,s)<n)return!1;let a=e.posAtCoords({x:r,y:n},!1);return a>=t&&a<=i}(this.view,n,o,e.clientX,e.clientY))||(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:t}=this;t&&t.dom.contains(e.relatedTarget)?this.watchTooltipLeave(t.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=i=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const JR=4;function eD(e,t={}){let i=GP.define(),r=CP.define({create:()=>[],update(e,r){if(e.length&&(t.hideOnChange&&(r.docChanged||r.selection)?e=[]:t.hideOn&&(e=e.filter(e=>!t.hideOn(r,e))),r.docChanged)){let t=[];for(let i of e){let e=r.changes.mapPos(i.pos,-1,aP.TrackDel);if(null!=e){let n=Object.assign(Object.create(null),i);n.pos=e,null!=n.end&&(n.end=r.changes.mapPos(n.end)),t.push(n)}}e=t}for(let t of r.effects)t.is(i)&&(e=t.value),t.is(iD)&&(e=[]);return e},provide:e=>YR.from(e)});return{active:r,extension:[r,VA.define(n=>new KR(n,e,r,i,t.hoverTime||300)),HR]}}function tD(e,t){let i=e.plugin(ZR);if(!i)return null;let r=i.manager.tooltips.indexOf(t);return r<0?null:i.manager.tooltipViews[r]}const iD=GP.define(),rD=bP.define({combine(e){let t,i;for(let r of e)t=t||r.topContainer,i=i||r.bottomContainer;return{topContainer:t,bottomContainer:i}}});function nD(e,t){let i=e.plugin(oD),r=i?i.specs.indexOf(t):-1;return r>-1?i.panels[r]:null}const oD=VA.fromClass(class{constructor(e){this.input=e.state.facet(lD),this.specs=this.input.filter(e=>e),this.panels=this.specs.map(t=>t(e));let t=e.state.facet(rD);this.top=new sD(e,!0,t.topContainer),this.bottom=new sD(e,!1,t.bottomContainer),this.top.sync(this.panels.filter(e=>e.top)),this.bottom.sync(this.panels.filter(e=>!e.top));for(let e of this.panels)e.dom.classList.add("cm-panel"),e.mount&&e.mount()}update(e){let t=e.state.facet(rD);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new sD(e.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new sD(e.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let i=e.state.facet(lD);if(i!=this.input){let t=i.filter(e=>e),r=[],n=[],o=[],s=[];for(let i of t){let t,a=this.specs.indexOf(i);a<0?(t=i(e.view),s.push(t)):(t=this.panels[a],t.update&&t.update(e)),r.push(t),(t.top?n:o).push(t)}this.specs=t,this.panels=r,this.top.sync(n),this.bottom.sync(o);for(let e of s)e.dom.classList.add("cm-panel"),e.mount&&e.mount()}else for(let t of this.panels)t.update&&t.update(e)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:e=>XQ.scrollMargins.of(t=>{let i=t.plugin(e);return i&&{top:i.top.scrollMargin(),bottom:i.bottom.scrollMargin()}})});class sD{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(0==this.panels.length)return void(this.dom&&(this.dom.remove(),this.dom=void 0));if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let e=this.container||this.view.dom;e.insertBefore(this.dom,this.top?e.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=aD(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=aD(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function aD(e){let t=e.nextSibling;return e.remove(),t}const lD=bP.define({enables:oD});class cD extends dE{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}cD.prototype.elementClass="",cD.prototype.toDOM=void 0,cD.prototype.mapMode=aP.TrackBefore,cD.prototype.startSide=cD.prototype.endSide=-1,cD.prototype.point=!0;const dD=bP.define(),hD=bP.define(),uD={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>fE.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},pD=bP.define();function fD(e){return[gD(),pD.of({...uD,...e})]}const mD=bP.define({combine:e=>e.some(e=>e)});function gD(e){return[vD]}const vD=VA.fromClass(class{constructor(e){this.view=e,this.domAfter=null,this.prevViewport=e.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=e.state.facet(pD).map(t=>new xD(e,t)),this.fixed=!e.state.facet(mD);for(let e of this.gutters)"after"==e.config.side?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),e.scrollDOM.insertBefore(this.dom,e.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(e){if(this.updateGutters(e)){let t=this.prevViewport,i=e.view.viewport,r=Math.min(t.to,i.to)-Math.max(t.from,i.from);this.syncGutters(r<.8*(i.to-i.from))}if(e.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(mD)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=e.view.viewport}syncGutters(e){let t=this.dom.nextSibling;e&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let i=fE.iter(this.view.state.facet(dD),this.view.viewport.from),r=[],n=this.gutters.map(e=>new bD(e,this.view.viewport,-this.view.documentPadding.top));for(let e of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(e.type)){let t=!0;for(let o of e.type)if(o.type==X$.Text&&t){yD(i,r,o.from);for(let e of n)e.line(this.view,o,r);t=!1}else if(o.widget)for(let e of n)e.widget(this.view,o)}else if(e.type==X$.Text){yD(i,r,e.from);for(let t of n)t.line(this.view,e,r)}else if(e.widget)for(let t of n)t.widget(this.view,e);for(let e of n)e.finish();e&&(this.view.scrollDOM.insertBefore(this.dom,t),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(e){let t=e.startState.facet(pD),i=e.state.facet(pD),r=e.docChanged||e.heightChanged||e.viewportChanged||!fE.eq(e.startState.facet(dD),e.state.facet(dD),e.view.viewport.from,e.view.viewport.to);if(t==i)for(let t of this.gutters)t.update(e)&&(r=!0);else{r=!0;let n=[];for(let r of i){let i=t.indexOf(r);i<0?n.push(new xD(this.view,r)):(this.gutters[i].update(e),n.push(this.gutters[i]))}for(let e of this.gutters)e.dom.remove(),n.indexOf(e)<0&&e.destroy();for(let e of n)"after"==e.config.side?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.gutters=n}return r}destroy(){for(let e of this.gutters)e.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:e=>XQ.scrollMargins.of(t=>{let i=t.plugin(e);if(!i||0==i.gutters.length||!i.fixed)return null;let r=i.dom.offsetWidth*t.scaleX,n=i.domAfter?i.domAfter.offsetWidth*t.scaleX:0;return t.textDirection==iA.LTR?{left:r,right:n}:{right:r,left:n}})});function OD(e){return Array.isArray(e)?e:[e]}function yD(e,t,i){for(;e.value&&e.from<=i;)e.from==i&&t.push(e.value),e.next()}class bD{constructor(e,t,i){this.gutter=e,this.height=i,this.i=0,this.cursor=fE.iter(e.markers,t.from)}addElement(e,t,i){let{gutter:r}=this,n=(t.top-this.height)/e.scaleY,o=t.height/e.scaleY;if(this.i==r.elements.length){let t=new wD(e,o,n,i);r.elements.push(t),r.dom.appendChild(t.dom)}else r.elements[this.i].update(e,o,n,i);this.height=t.bottom,this.i++}line(e,t,i){let r=[];yD(this.cursor,r,t.from),i.length&&(r=r.concat(i));let n=this.gutter.config.lineMarker(e,t,r);n&&r.unshift(n);let o=this.gutter;(0!=r.length||o.config.renderEmptyElements)&&this.addElement(e,t,r)}widget(e,t){let i=this.gutter.config.widgetMarker(e,t.widget,t),r=i?[i]:null;for(let i of e.state.facet(hD)){let n=i(e,t.widget,t);n&&(r||(r=[])).push(n)}r&&this.addElement(e,t,r)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class xD{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,r=>{let n,o=r.target;if(o!=this.dom&&this.dom.contains(o)){for(;o.parentNode!=this.dom;)o=o.parentNode;let e=o.getBoundingClientRect();n=(e.top+e.bottom)/2}else n=r.clientY;let s=e.lineBlockAtHeight(n-e.documentTop);t.domEventHandlers[i](e,s,r)&&r.preventDefault()});this.markers=OD(t.markers(e)),t.initialSpacer&&(this.spacer=new wD(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=OD(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let t=this.config.updateSpacer(this.spacer.markers[0],e);t!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[t])}let i=e.view.viewport;return!fE.eq(this.markers,t,i.from,i.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)}destroy(){for(let e of this.elements)e.destroy()}}class wD{constructor(e,t,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,r)}update(e,t,i,r){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),function(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++)if(!e[i].compare(t[i]))return!1;return!0}(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,t){let i="cm-gutterElement",r=this.dom.firstChild;for(let n=0,o=0;;){let s=o,a=n<t.length?t[n++]:null,l=!1;if(a){let e=a.elementClass;e&&(i+=" "+e);for(let e=o;e<this.markers.length;e++)if(this.markers[e].compare(a)){s=e,l=!0;break}}else s=this.markers.length;for(;o<s;){let e=this.markers[o++];if(e.toDOM){e.destroy(r);let t=r.nextSibling;r.remove(),r=t}}if(!a)break;a.toDOM&&(l?r=r.nextSibling:this.dom.insertBefore(a.toDOM(e),r)),l&&o++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}}const kD=bP.define(),SD=bP.define(),_D=bP.define({combine:e=>cE(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let e in t){let r=i[e],n=t[e];i[e]=r?(e,t,i)=>r(e,t,i)||n(e,t,i):n}return i}})});class TD extends cD{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function CD(e,t){return e.state.facet(_D).formatNumber(t,e.state)}const PD=pD.compute([_D],e=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers:e=>e.state.facet(kD),lineMarker:(e,t,i)=>i.some(e=>e.toDOM)?null:new TD(CD(e,e.state.doc.lineAt(t.from).number)),widgetMarker:(e,t,i)=>{for(let r of e.state.facet(SD)){let n=r(e,t,i);if(n)return n}return null},lineMarkerChange:e=>e.startState.facet(_D)!=e.state.facet(_D),initialSpacer:e=>new TD(CD(e,$D(e.state.doc.lines))),updateSpacer(e,t){let i=CD(t.view,$D(t.view.state.doc.lines));return i==e.number?e:new TD(i)},domEventHandlers:e.facet(_D).domEventHandlers,side:"before"}));function ED(e={}){return[_D.of(e),gD(),PD]}function $D(e){let t=9;for(;t<e;)t=10*t+9;return t}const AD=new class extends cD{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},ID=dD.compute(["selection"],e=>{let t=[],i=-1;for(let r of e.selection.ranges){let n=e.doc.lineAt(r.head).from;n>i&&(i=n,t.push(AD.range(n)))}return fE.of(t)});const QD=1024;let RD=0;class DD{constructor(e,t){this.from=e,this.to=t}}class MD{constructor(e={}){this.id=RD++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=zD.match(e)),t=>{let i=e(t);return void 0===i?null:[this,i]}}}MD.closedBy=new MD({deserialize:e=>e.split(" ")}),MD.openedBy=new MD({deserialize:e=>e.split(" ")}),MD.group=new MD({deserialize:e=>e.split(" ")}),MD.isolate=new MD({deserialize:e=>{if(e&&"rtl"!=e&&"ltr"!=e&&"auto"!=e)throw new RangeError("Invalid value for isolate: "+e);return e||"auto"}}),MD.contextHash=new MD({perNode:!0}),MD.lookAhead=new MD({perNode:!0}),MD.mounted=new MD({perNode:!0});class ND{constructor(e,t,i){this.tree=e,this.overlay=t,this.parser=i}static get(e){return e&&e.props&&e.props[MD.mounted.id]}}const LD=Object.create(null);class zD{constructor(e,t,i,r=0){this.name=e,this.props=t,this.id=i,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):LD,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0),r=new zD(e.name||"",t,e.id,i);if(e.props)for(let i of e.props)if(Array.isArray(i)||(i=i(r)),i){if(i[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[i[0].id]=i[1]}return r}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(MD.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let r of i.split(" "))t[r]=e[i];return e=>{for(let i=e.prop(MD.group),r=-1;r<(i?i.length:0);r++){let n=t[r<0?e.name:i[r]];if(n)return n}}}}zD.none=new zD("",Object.create(null),0,8);class VD{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let r=null;for(let t of e){let e=t(i);e&&(r||(r=Object.assign({},i.props)),r[e[0].id]=e[1])}t.push(r?new zD(i.name,r,i.id,i.flags):i)}return new VD(t)}}const UD=new WeakMap,qD=new WeakMap;var XD;!function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"}(XD||(XD={}));class ZD{constructor(e,t,i,r,n){if(this.type=e,this.children=t,this.positions=i,this.length=r,this.props=null,n&&n.length){this.props=Object.create(null);for(let[e,t]of n)this.props["number"==typeof e?e:e.id]=t}}toString(){let e=ND.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let e of this.children){let i=e.toString();i&&(t&&(t+=","),t+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new rM(this.topNode,e)}cursorAt(e,t=0,i=0){let r=UD.get(this)||this.topNode,n=new rM(r);return n.moveTo(e,t),UD.set(this,n._tree),n}get topNode(){return new GD(this,0,0,null)}resolve(e,t=0){let i=WD(UD.get(this)||this.topNode,e,t,!1);return UD.set(this,i),i}resolveInner(e,t=0){let i=WD(qD.get(this)||this.topNode,e,t,!0);return qD.set(this,i),i}resolveStack(e,t=0){return function(e,t,i){let r=e.resolveInner(t,i),n=null;for(let e=r instanceof GD?r:r.context.parent;e;e=e.parent)if(e.index<0){let o=e.parent;(n||(n=[r])).push(o.resolve(t,i)),e=o}else{let o=ND.get(e.tree);if(o&&o.overlay&&o.overlay[0].from<=t&&o.overlay[o.overlay.length-1].to>=t){let s=new GD(o.tree,o.overlay[0].from+e.from,-1,e);(n||(n=[r])).push(WD(s,t,i,!1))}}return n?tM(n):r}(this,e,t)}iterate(e){let{enter:t,leave:i,from:r=0,to:n=this.length}=e,o=e.mode||0,s=(o&XD.IncludeAnonymous)>0;for(let e=this.cursor(o|XD.IncludeAnonymous);;){let o=!1;if(e.from<=n&&e.to>=r&&(!s&&e.type.isAnonymous||!1!==t(e))){if(e.firstChild())continue;o=!0}for(;o&&i&&(s||!e.type.isAnonymous)&&i(e),!e.nextSibling();){if(!e.parent())return;o=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:aM(zD.none,this.children,this.positions,0,this.children.length,0,this.length,(e,t,i)=>new ZD(this.type,e,t,i,this.propValues),e.makeTree||((e,t,i)=>new ZD(zD.none,e,t,i)))}static build(e){return function(e){var t;let{buffer:i,nodeSet:r,maxBufferLength:n=QD,reused:o=[],minRepeatType:s=r.types.length}=e,a=Array.isArray(i)?new BD(i,i.length):i,l=r.types,c=0,d=0;function h(e,t,i,O,y,b){let{id:x,start:w,end:k,size:S}=a,_=d,T=c;for(;S<0;){if(a.next(),-1==S){let t=o[x];return i.push(t),void O.push(w-e)}if(-3==S)return void(c=x);if(-4==S)return void(d=x);throw new RangeError(`Unrecognized record size: ${S}`)}let C,P,E=l[x],$=w-e;if(k-w<=n&&(P=g(a.pos-t,y))){let t=new Uint16Array(P.size-P.skip),i=a.pos-P.size,n=t.length;for(;a.pos>i;)n=v(P.start,t,n);C=new jD(t,k-P.start,r),$=P.start-e}else{let e=a.pos-S;a.next();let t=[],i=[],r=x>=s?x:-1,o=0,l=k;for(;a.pos>e;)r>=0&&a.id==r&&a.size>=0?(a.end<=l-n&&(f(t,i,w,o,a.end,l,r,_,T),o=t.length,l=a.end),a.next()):b>2500?u(w,e,t,i):h(w,e,t,i,r,b+1);if(r>=0&&o>0&&o<t.length&&f(t,i,w,o,w,l,r,_,T),t.reverse(),i.reverse(),r>-1&&o>0){let e=p(E,T);C=aM(E,t,i,0,t.length,0,k-w,e,e)}else C=m(E,t,i,k-w,_-k,T)}i.push(C),O.push($)}function u(e,t,i,o){let s=[],l=0,c=-1;for(;a.pos>t;){let{id:e,start:t,end:i,size:r}=a;if(r>4)a.next();else{if(c>-1&&t<c)break;c<0&&(c=i-n),s.push(e,t,i),l++,a.next()}}if(l){let t=new Uint16Array(4*l),n=s[s.length-2];for(let e=s.length-3,i=0;e>=0;e-=3)t[i++]=s[e],t[i++]=s[e+1]-n,t[i++]=s[e+2]-n,t[i++]=i;i.push(new jD(t,s[2]-n,r)),o.push(n-e)}}function p(e,t){return(i,r,n)=>{let o,s,a=0,l=i.length-1;if(l>=0&&(o=i[l])instanceof ZD){if(!l&&o.type==e&&o.length==n)return o;(s=o.prop(MD.lookAhead))&&(a=r[l]+o.length+s)}return m(e,i,r,n,a,t)}}function f(e,t,i,n,o,s,a,l,c){let d=[],h=[];for(;e.length>n;)d.push(e.pop()),h.push(t.pop()+i-o);e.push(m(r.types[a],d,h,s-o,l-s,c)),t.push(o-i)}function m(e,t,i,r,n,o,s){if(o){let e=[MD.contextHash,o];s=s?[e].concat(s):[e]}if(n>25){let e=[MD.lookAhead,n];s=s?[e].concat(s):[e]}return new ZD(e,t,i,r,s)}function g(e,t){let i=a.fork(),r=0,o=0,l=0,c=i.end-n,d={size:0,start:0,skip:0};e:for(let n=i.pos-e;i.pos>n;){let e=i.size;if(i.id==t&&e>=0){d.size=r,d.start=o,d.skip=l,l+=4,r+=4,i.next();continue}let a=i.pos-e;if(e<0||a<n||i.start<c)break;let h=i.id>=s?4:0,u=i.start;for(i.next();i.pos>a;){if(i.size<0){if(-3!=i.size)break e;h+=4}else i.id>=s&&(h+=4);i.next()}o=u,r+=e,l+=h}return(t<0||r==e)&&(d.size=r,d.start=o,d.skip=l),d.size>4?d:void 0}function v(e,t,i){let{id:r,start:n,end:o,size:l}=a;if(a.next(),l>=0&&r<s){let s=i;if(l>4){let r=a.pos-(l-4);for(;a.pos>r;)i=v(e,t,i)}t[--i]=s,t[--i]=o-e,t[--i]=n-e,t[--i]=r}else-3==l?c=r:-4==l&&(d=r);return i}let O=[],y=[];for(;a.pos>0;)h(e.start||0,e.bufferStart||0,O,y,-1,0);let b=null!==(t=e.length)&&void 0!==t?t:O.length?y[0]+O[0].length:0;return new ZD(l[e.topID],O.reverse(),y.reverse(),b)}(e)}}ZD.empty=new ZD(zD.none,[],[],0);class BD{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new BD(this.buffer,this.index)}}class jD{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return zD.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],r=this.set.types[t],n=r.name;if(/\W/.test(n)&&!r.isError&&(n=JSON.stringify(n)),i==(e+=4))return n;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return n+"("+o.join(",")+")"}findChild(e,t,i,r,n){let{buffer:o}=this,s=-1;for(let a=e;a!=t&&!(FD(n,r,o[a+1],o[a+2])&&(s=a,i>0));a=o[a+3]);return s}slice(e,t,i){let r=this.buffer,n=new Uint16Array(t-e),o=0;for(let s=e,a=0;s<t;){n[a++]=r[s++],n[a++]=r[s++]-i;let t=n[a++]=r[s++]-i;n[a++]=r[s++]-e,o=Math.max(o,t)}return new jD(n,o,this.set)}}function FD(e,t,i,r){switch(e){case-2:return i<t;case-1:return r>=t&&i<t;case 0:return i<t&&r>t;case 1:return i<=t&&r>t;case 2:return r>t;case 4:return!0}}function WD(e,t,i,r){for(var n;e.from==e.to||(i<1?e.from>=t:e.from>t)||(i>-1?e.to<=t:e.to<t);){let t=!r&&e instanceof GD&&e.index<0?null:e.parent;if(!t)return e;e=t}let o=r?0:XD.IgnoreOverlays;if(r)for(let r=e,s=r.parent;s;r=s,s=r.parent)r instanceof GD&&r.index<0&&(null===(n=s.enter(t,i,o))||void 0===n?void 0:n.from)!=r.from&&(e=s);for(;;){let r=e.enter(t,i,o);if(!r)return e;e=r}}class YD{cursor(e=0){return new rM(this,e)}getChild(e,t=null,i=null){let r=HD(this,e,t,i);return r.length?r[0]:null}getChildren(e,t=null,i=null){return HD(this,e,t,i)}resolve(e,t=0){return WD(this,e,t,!1)}resolveInner(e,t=0){return WD(this,e,t,!0)}matchContext(e){return KD(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),i=this;for(;t;){let e=t.lastChild;if(!e||e.to!=t.to)break;e.type.isError&&e.from==e.to?(i=t,t=e.prevSibling):t=e}return i}get node(){return this}get next(){return this.parent}}class GD extends YD{constructor(e,t,i,r){super(),this._tree=e,this.from=t,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,r,n=0){for(let o=this;;){for(let{children:s,positions:a}=o._tree,l=t>0?s.length:-1;e!=l;e+=t){let l=s[e],c=a[e]+o.from;if(FD(r,i,c,c+l.length))if(l instanceof jD){if(n&XD.ExcludeBuffers)continue;let s=l.findChild(0,l.buffer.length,t,i-c,r);if(s>-1)return new eM(new JD(o,l,e,c),null,s)}else if(n&XD.IncludeAnonymous||!l.type.isAnonymous||nM(l)){let s;if(!(n&XD.IgnoreMounts)&&(s=ND.get(l))&&!s.overlay)return new GD(s.tree,c,e,o);let a=new GD(l,c,e,o);return n&XD.IncludeAnonymous||!a.type.isAnonymous?a:a.nextChild(t<0?l.children.length-1:0,t,i,r)}}if(n&XD.IncludeAnonymous||!o.type.isAnonymous)return null;if(e=o.index>=0?o.index+t:t<0?-1:o._parent._tree.children.length,o=o._parent,!o)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let r;if(!(i&XD.IgnoreOverlays)&&(r=ND.get(this._tree))&&r.overlay){let i=e-this.from;for(let{from:e,to:n}of r.overlay)if((t>0?e<=i:e<i)&&(t<0?n>=i:n>i))return new GD(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function HD(e,t,i,r){let n=e.cursor(),o=[];if(!n.firstChild())return o;if(null!=i)for(let e=!1;!e;)if(e=n.type.is(i),!n.nextSibling())return o;for(;;){if(null!=r&&n.type.is(r))return o;if(n.type.is(t)&&o.push(n.node),!n.nextSibling())return null==r?o:[]}}function KD(e,t,i=t.length-1){for(let r=e;i>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(t[i]&&t[i]!=r.name)return!1;i--}}return!0}class JD{constructor(e,t,i,r){this.parent=e,this.buffer=t,this.index=i,this.start=r}}class eM extends YD{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,i){super(),this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,t,i){let{buffer:r}=this.context,n=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,i);return n<0?null:new eM(this.context,this,n)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&XD.ExcludeBuffers)return null;let{buffer:r}=this.context,n=r.findChild(this.index+4,r.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return n<0?null:new eM(this.context,this,n)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new eM(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new eM(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,r=this.index+4,n=i.buffer[this.index+3];if(n>r){let o=i.buffer[this.index+1];e.push(i.slice(r,n,o)),t.push(0)}return new ZD(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function tM(e){if(!e.length)return null;let t=0,i=e[0];for(let r=1;r<e.length;r++){let n=e[r];(n.from>i.from||n.to<i.to)&&(i=n,t=r)}let r=i instanceof GD&&i.index<0?null:i.parent,n=e.slice();return r?n[t]=r:n.splice(t,1),new iM(n,i)}class iM{constructor(e,t){this.heads=e,this.node=t}get next(){return tM(this.heads)}}class rM{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof GD)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return!!e&&(e instanceof GD?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:r}=this.buffer,n=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,i);return!(n<0)&&(this.stack.push(this.index),this.yieldBuf(n))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?!(i&XD.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&XD.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&XD.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let e=i<0?0:this.stack[i]+4;if(this.index!=e)return this.yieldBuf(t.findChild(e,this.index,-1,0,4))}else{let e=t.buffer[this.index+3];if(e<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(e)}return i<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let e=0;e<this.index;e++)if(r.buffer.buffer[e+3]<this.index)return!1;({index:t,parent:i}=r)}else({index:t,_parent:i}=this._tree);for(;i;({index:t,_parent:i}=i))if(t>-1)for(let r=t+e,n=e<0?-1:i._tree.children.length;r!=n;r+=e){let e=i._tree.children[r];if(this.mode&XD.IncludeAnonymous||e instanceof jD||!e.type.isAnonymous||nM(e))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer)e:for(let r=this.index,n=this.stack.length;n>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;t=o,i=n+1;break e}r=this.stack[--n]}for(let e=i;e<this.stack.length;e++)t=new eM(this.buffer,t,this.stack[e]);return this.bufferNode=new eM(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let r=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&t&&t(this),r=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return KD(this.node.parent,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let r=e.length-1,n=this.stack.length-1;r>=0;n--){if(n<0)return KD(this._tree,e,r);let o=i[t.buffer[this.stack[n]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function nM(e){return e.children.some(e=>e instanceof jD||!e.type.isAnonymous||nM(e))}const oM=new WeakMap;function sM(e,t){if(!e.isAnonymous||t instanceof jD||t.type!=e)return 1;let i=oM.get(t);if(null==i){i=1;for(let r of t.children){if(r.type!=e||!(r instanceof ZD)){i=1;break}i+=sM(e,r)}oM.set(t,i)}return i}function aM(e,t,i,r,n,o,s,a,l){let c=0;for(let i=r;i<n;i++)c+=sM(e,t[i]);let d=Math.ceil(1.5*c/8),h=[],u=[];return function t(i,r,n,s,a){for(let c=n;c<s;){let n=c,p=r[c],f=sM(e,i[c]);for(c++;c<s;c++){let t=sM(e,i[c]);if(f+t>=d)break;f+=t}if(c==n+1){if(f>d){let e=i[n];t(e.children,e.positions,0,e.children.length,r[n]+a);continue}h.push(i[n])}else{let t=r[c-1]+i[c-1].length-p;h.push(aM(e,i,r,n,c,p,t,null,l))}u.push(p+a-o)}}(t,i,r,n,0),(a||l)(h,u,s)}class lM{constructor(){this.map=new WeakMap}setBuffer(e,t,i){let r=this.map.get(e);r||this.map.set(e,r=new Map),r.set(t,i)}getBuffer(e,t){let i=this.map.get(e);return i&&i.get(t)}set(e,t){e instanceof eM?this.setBuffer(e.context.buffer,e.index,t):e instanceof GD&&this.map.set(e.tree,t)}get(e){return e instanceof eM?this.getBuffer(e.context.buffer,e.index):e instanceof GD?this.map.get(e.tree):void 0}cursorSet(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class cM{constructor(e,t,i,r,n=!1,o=!1){this.from=e,this.to=t,this.tree=i,this.offset=r,this.open=(n?1:0)|(o?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(e,t=[],i=!1){let r=[new cM(0,e.length,e,0,!1,i)];for(let i of t)i.to>e.length&&r.push(i);return r}static applyChanges(e,t,i=128){if(!t.length)return e;let r=[],n=1,o=e.length?e[0]:null;for(let s=0,a=0,l=0;;s++){let c=s<t.length?t[s]:null,d=c?c.fromA:1e9;if(d-a>=i)for(;o&&o.from<d;){let t=o;if(a>=t.from||d<=t.to||l){let e=Math.max(t.from,a)-l,i=Math.min(t.to,d)-l;t=e>=i?null:new cM(e,i,t.tree,t.offset+l,s>0,!!c)}if(t&&r.push(t),o.to>d)break;o=n<e.length?e[n++]:null}if(!c)break;a=c.toA,l=c.toA-c.toB}return r}}class dM{startParse(e,t,i){return"string"==typeof e&&(e=new hM(e)),i=i?i.length?i.map(e=>new DD(e.from,e.to)):[new DD(0,0)]:[new DD(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let r=this.startParse(e,t,i);for(;;){let e=r.advance();if(e)return e}}}class hM{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}function uM(e){return(t,i,r,n)=>new vM(t,e,i,r,n)}class pM{constructor(e,t,i,r,n){this.parser=e,this.parse=t,this.overlay=i,this.target=r,this.from=n}}function fM(e){if(!e.length||e.some(e=>e.from>=e.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(e))}class mM{constructor(e,t,i,r,n,o,s){this.parser=e,this.predicate=t,this.mounts=i,this.index=r,this.start=n,this.target=o,this.prev=s,this.depth=0,this.ranges=[]}}const gM=new MD({perNode:!0});class vM{constructor(e,t,i,r,n){this.nest=t,this.input=i,this.fragments=r,this.ranges=n,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let e=this.baseParse.advance();if(!e)return null;if(this.baseParse=null,this.baseTree=e,this.startInner(),null!=this.stoppedAt)for(let e of this.inner)e.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let e=this.baseTree;return null!=this.stoppedAt&&(e=new ZD(e.type,e.children,e.positions,e.length,e.propValues.concat([[gM,this.stoppedAt]]))),e}let e=this.inner[this.innerDone],t=e.parse.advance();if(t){this.innerDone++;let i=Object.assign(Object.create(null),e.target.props);i[MD.mounted.id]=new ND(t,e.overlay,e.parser),e.target.props=i}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].from<e&&(e=Math.min(e,this.inner[t].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].parse.stopAt(e)}startInner(){let e=new wM(this.fragments),t=null,i=null,r=new rM(new GD(this.baseTree,this.ranges[0].from,0,null),XD.IncludeAnonymous|XD.IgnoreMounts);e:for(let n,o;;){let s,a=!0;if(null!=this.stoppedAt&&r.from>=this.stoppedAt)a=!1;else if(e.hasNode(r)){if(t){let e=t.mounts.find(e=>e.frag.from<=r.from&&e.frag.to>=r.to&&e.mount.overlay);if(e)for(let i of e.mount.overlay){let n=i.from+e.pos,o=i.to+e.pos;n>=r.from&&o<=r.to&&!t.ranges.some(e=>e.from<o&&e.to>n)&&t.ranges.push({from:n,to:o})}}a=!1}else if(i&&(o=OM(i.ranges,r.from,r.to)))a=2!=o;else if(!r.type.isAnonymous&&(n=this.nest(r,this.input))&&(r.from<r.to||!n.overlay)){r.tree||bM(r);let o=e.findMounts(r.from,n.parser);if("function"==typeof n.overlay)t=new mM(n.parser,n.overlay,o,this.inner.length,r.from,r.tree,t);else{let e=kM(this.ranges,n.overlay||(r.from<r.to?[new DD(r.from,r.to)]:[]));e.length&&fM(e),!e.length&&n.overlay||this.inner.push(new pM(n.parser,e.length?n.parser.startParse(this.input,_M(o,e),e):n.parser.startParse(""),n.overlay?n.overlay.map(e=>new DD(e.from-r.from,e.to-r.from)):null,r.tree,e.length?e[0].from:r.from)),n.overlay?e.length&&(i={ranges:e,depth:0,prev:i}):a=!1}}else if(t&&(s=t.predicate(r))&&(!0===s&&(s=new DD(r.from,r.to)),s.from<s.to)){let e=t.ranges.length-1;e>=0&&t.ranges[e].to==s.from?t.ranges[e]={from:t.ranges[e].from,to:s.to}:t.ranges.push(s)}if(a&&r.firstChild())t&&t.depth++,i&&i.depth++;else for(;!r.nextSibling();){if(!r.parent())break e;if(t&&! --t.depth){let e=kM(this.ranges,t.ranges);e.length&&(fM(e),this.inner.splice(t.index,0,new pM(t.parser,t.parser.startParse(this.input,_M(t.mounts,e),e),t.ranges.map(e=>new DD(e.from-t.start,e.to-t.start)),t.target,e[0].from))),t=t.prev}i&&! --i.depth&&(i=i.prev)}}}}function OM(e,t,i){for(let r of e){if(r.from>=i)break;if(r.to>t)return r.from<=t&&r.to>=i?2:1}return 0}function yM(e,t,i,r,n,o){if(t<i){let s=e.buffer[t+1];r.push(e.slice(t,i,s)),n.push(s-o)}}function bM(e){let{node:t}=e,i=[],r=t.context.buffer;do{i.push(e.index),e.parent()}while(!e.tree);let n=e.tree,o=n.children.indexOf(r),s=n.children[o],a=s.buffer,l=[o];n.children[o]=function e(r,n,o,c,d,h){let u=i[h],p=[],f=[];yM(s,r,u,p,f,c);let m=a[u+1],g=a[u+2];l.push(p.length);let v=h?e(u+4,a[u+3],s.set.types[a[u]],m,g-m,h-1):t.toTree();return p.push(v),f.push(m-c),yM(s,a[u+3],n,p,f,c),new ZD(o,p,f,d)}(0,a.length,zD.none,0,s.length,i.length-1);for(let t of l){let i=e.tree.children[t],r=e.tree.positions[t];e.yield(new GD(i,r+e.from,t,e._tree))}}class xM{constructor(e,t){this.offset=t,this.done=!1,this.cursor=e.cursor(XD.IncludeAnonymous|XD.IgnoreMounts)}moveTo(e){let{cursor:t}=this,i=e-this.offset;for(;!this.done&&t.from<i;)t.to>=e&&t.enter(i,1,XD.IgnoreOverlays|XD.ExcludeBuffers)||t.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let t=this.cursor.tree;;){if(t==e.tree)return!0;if(!(t.children.length&&0==t.positions[0]&&t.children[0]instanceof ZD))break;t=t.children[0]}return!1}}let wM=class{constructor(e){var t;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let i=this.curFrag=e[0];this.curTo=null!==(t=i.tree.prop(gM))&&void 0!==t?t:i.to,this.inner=new xM(i.tree,-i.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let t=this.curFrag=this.fragments[this.fragI];this.curTo=null!==(e=t.tree.prop(gM))&&void 0!==e?e:t.to,this.inner=new xM(t.tree,-t.offset)}}findMounts(e,t){var i;let r=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let e=this.inner.cursor.node;e;e=e.parent){let n=null===(i=e.tree)||void 0===i?void 0:i.prop(MD.mounted);if(n&&n.parser==t)for(let t=this.fragI;t<this.fragments.length;t++){let i=this.fragments[t];if(i.from>=e.to)break;i.tree==this.curFrag.tree&&r.push({frag:i,pos:e.from-i.offset,mount:n})}}}return r}};function kM(e,t){let i=null,r=t;for(let n=1,o=0;n<e.length;n++){let s=e[n-1].to,a=e[n].from;for(;o<r.length;o++){let e=r[o];if(e.from>=a)break;e.to<=s||(i||(r=i=t.slice()),e.from<s?(i[o]=new DD(e.from,s),e.to>a&&i.splice(o+1,0,new DD(a,e.to))):e.to>a?i[o--]=new DD(a,e.to):i.splice(o--,1))}}return r}function SM(e,t,i,r){let n=0,o=0,s=!1,a=!1,l=-1e9,c=[];for(;;){let d=n==e.length?1e9:s?e[n].to:e[n].from,h=o==t.length?1e9:a?t[o].to:t[o].from;if(s!=a){let e=Math.max(l,i),t=Math.min(d,h,r);e<t&&c.push(new DD(e,t))}if(l=Math.min(d,h),1e9==l)break;d==l&&(s?(s=!1,n++):s=!0),h==l&&(a?(a=!1,o++):a=!0)}return c}function _M(e,t){let i=[];for(let{pos:r,mount:n,frag:o}of e){let e=r+(n.overlay?n.overlay[0].from:0),s=e+n.tree.length,a=Math.max(o.from,e),l=Math.min(o.to,s);if(n.overlay){let s=n.overlay.map(e=>new DD(e.from+r,e.to+r)),c=SM(t,s,a,l);for(let t=0,r=a;;t++){let s=t==c.length,a=s?l:c[t].from;if(a>r&&i.push(new cM(r,a,n.tree,-e,o.from>=r||o.openStart,o.to<=a||o.openEnd)),s)break;r=c[t].to}}else i.push(new cM(a,l,n.tree,-e,o.from>=e||o.openStart,o.to<=s||o.openEnd))}return i}let TM=0;class CM{constructor(e,t,i,r){this.name=e,this.set=t,this.base=i,this.modified=r,this.id=TM++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let i="string"==typeof e?e:"?";if(e instanceof CM&&(t=e),null==t?void 0:t.base)throw new Error("Can not derive from a modified tag");let r=new CM(i,[],null,[]);if(r.set.push(r),t)for(let e of t.set)r.set.push(e);return r}static defineModifier(e){let t=new EM(e);return e=>e.modified.indexOf(t)>-1?e:EM.get(e.base||e,e.modified.concat(t).sort((e,t)=>e.id-t.id))}}let PM=0;class EM{constructor(e){this.name=e,this.instances=[],this.id=PM++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(i=>i.base==e&&function(e,t){return e.length==t.length&&e.every((e,i)=>e==t[i])}(t,i.modified));if(i)return i;let r=[],n=new CM(e.name,r,e,t);for(let e of t)e.instances.push(n);let o=function(e){let t=[[]];for(let i=0;i<e.length;i++)for(let r=0,n=t.length;r<n;r++)t.push(t[r].concat(e[i]));return t.sort((e,t)=>t.length-e.length)}(t);for(let t of e.set)if(!t.modified.length)for(let e of o)r.push(EM.get(t,e));return n}}function $M(e){let t=Object.create(null);for(let i in e){let r=e[i];Array.isArray(r)||(r=[r]);for(let e of i.split(" "))if(e){let i=[],n=2,o=e;for(let t=0;;){if("..."==o&&t>0&&t+3==e.length){n=1;break}let r=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!r)throw new RangeError("Invalid path: "+e);if(i.push("*"==r[0]?"":'"'==r[0][0]?JSON.parse(r[0]):r[0]),t+=r[0].length,t==e.length)break;let s=e[t++];if(t==e.length&&"!"==s){n=0;break}if("/"!=s)throw new RangeError("Invalid path: "+e);o=e.slice(t)}let s=i.length-1,a=i[s];if(!a)throw new RangeError("Invalid path: "+e);let l=new IM(r,n,s>0?i.slice(0,s):null);t[a]=l.sort(t[a])}}return AM.add(t)}const AM=new MD;class IM{constructor(e,t,i,r){this.tags=e,this.mode=t,this.context=i,this.next=r}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function QM(e,t){let i=Object.create(null);for(let t of e)if(Array.isArray(t.tag))for(let e of t.tag)i[e.id]=t.class;else i[t.tag.id]=t.class;let{scope:r,all:n=null}=t||{};return{style:e=>{let t=n;for(let r of e)for(let e of r.set){let r=i[e.id];if(r){t=t?t+" "+r:r;break}}return t},scope:r}}function RM(e,t,i,r=0,n=e.length){let o=new DM(r,Array.isArray(t)?t:[t],i);o.highlightRange(e.cursor(),r,n,"",o.highlighters),o.flush(n)}IM.empty=new IM([],2,null);class DM{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,r,n){let{type:o,from:s,to:a}=e;if(s>=i||a<=t)return;o.isTop&&(n=this.highlighters.filter(e=>!e.scope||e.scope(o)));let l=r,c=function(e){let t=e.type.prop(AM);for(;t&&t.context&&!e.matchContext(t.context);)t=t.next;return t||null}(e)||IM.empty,d=function(e,t){let i=null;for(let r of e){let e=r.style(t);e&&(i=i?i+" "+e:e)}return i}(n,c.tags);if(d&&(l&&(l+=" "),l+=d,1==c.mode&&(r+=(r?" ":"")+d)),this.startSpan(Math.max(t,s),l),c.opaque)return;let h=e.tree&&e.tree.prop(MD.mounted);if(h&&h.overlay){let o=e.node.enter(h.overlay[0].from+s,1),c=this.highlighters.filter(e=>!e.scope||e.scope(h.tree.type)),d=e.firstChild();for(let u=0,p=s;;u++){let f=u<h.overlay.length?h.overlay[u]:null,m=f?f.from+s:a,g=Math.max(t,p),v=Math.min(i,m);if(g<v&&d)for(;e.from<v&&(this.highlightRange(e,g,v,r,n),this.startSpan(Math.min(v,e.to),l),!(e.to>=m)&&e.nextSibling()););if(!f||m>i)break;p=f.to+s,p>t&&(this.highlightRange(o.cursor(),Math.max(t,f.from+s),Math.min(i,p),"",c),this.startSpan(Math.min(i,p),l))}d&&e.parent()}else if(e.firstChild()){h&&(r="");do{if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,r,n),this.startSpan(Math.min(i,e.to),l)}}while(e.nextSibling());e.parent()}}}const MM=CM.define,NM=MM(),LM=MM(),zM=MM(LM),VM=MM(LM),UM=MM(),qM=MM(UM),XM=MM(UM),ZM=MM(),BM=MM(ZM),jM=MM(),FM=MM(),WM=MM(),YM=MM(WM),GM=MM(),HM={comment:NM,lineComment:MM(NM),blockComment:MM(NM),docComment:MM(NM),name:LM,variableName:MM(LM),typeName:zM,tagName:MM(zM),propertyName:VM,attributeName:MM(VM),className:MM(LM),labelName:MM(LM),namespace:MM(LM),macroName:MM(LM),literal:UM,string:qM,docString:MM(qM),character:MM(qM),attributeValue:MM(qM),number:XM,integer:MM(XM),float:MM(XM),bool:MM(UM),regexp:MM(UM),escape:MM(UM),color:MM(UM),url:MM(UM),keyword:jM,self:MM(jM),null:MM(jM),atom:MM(jM),unit:MM(jM),modifier:MM(jM),operatorKeyword:MM(jM),controlKeyword:MM(jM),definitionKeyword:MM(jM),moduleKeyword:MM(jM),operator:FM,derefOperator:MM(FM),arithmeticOperator:MM(FM),logicOperator:MM(FM),bitwiseOperator:MM(FM),compareOperator:MM(FM),updateOperator:MM(FM),definitionOperator:MM(FM),typeOperator:MM(FM),controlOperator:MM(FM),punctuation:WM,separator:MM(WM),bracket:YM,angleBracket:MM(YM),squareBracket:MM(YM),paren:MM(YM),brace:MM(YM),content:ZM,heading:BM,heading1:MM(BM),heading2:MM(BM),heading3:MM(BM),heading4:MM(BM),heading5:MM(BM),heading6:MM(BM),contentSeparator:MM(ZM),list:MM(ZM),quote:MM(ZM),emphasis:MM(ZM),strong:MM(ZM),link:MM(ZM),monospace:MM(ZM),strikethrough:MM(ZM),inserted:MM(),deleted:MM(),changed:MM(),invalid:MM(),meta:GM,documentMeta:MM(GM),annotation:MM(GM),processingInstruction:MM(GM),definition:CM.defineModifier("definition"),constant:CM.defineModifier("constant"),function:CM.defineModifier("function"),standard:CM.defineModifier("standard"),local:CM.defineModifier("local"),special:CM.defineModifier("special")};for(let e in HM){let t=HM[e];t instanceof CM&&(t.name=e)}var KM;QM([{tag:HM.link,class:"tok-link"},{tag:HM.heading,class:"tok-heading"},{tag:HM.emphasis,class:"tok-emphasis"},{tag:HM.strong,class:"tok-strong"},{tag:HM.keyword,class:"tok-keyword"},{tag:HM.atom,class:"tok-atom"},{tag:HM.bool,class:"tok-bool"},{tag:HM.url,class:"tok-url"},{tag:HM.labelName,class:"tok-labelName"},{tag:HM.inserted,class:"tok-inserted"},{tag:HM.deleted,class:"tok-deleted"},{tag:HM.literal,class:"tok-literal"},{tag:HM.string,class:"tok-string"},{tag:HM.number,class:"tok-number"},{tag:[HM.regexp,HM.escape,HM.special(HM.string)],class:"tok-string2"},{tag:HM.variableName,class:"tok-variableName"},{tag:HM.local(HM.variableName),class:"tok-variableName tok-local"},{tag:HM.definition(HM.variableName),class:"tok-variableName tok-definition"},{tag:HM.special(HM.variableName),class:"tok-variableName2"},{tag:HM.definition(HM.propertyName),class:"tok-propertyName tok-definition"},{tag:HM.typeName,class:"tok-typeName"},{tag:HM.namespace,class:"tok-namespace"},{tag:HM.className,class:"tok-className"},{tag:HM.macroName,class:"tok-macroName"},{tag:HM.propertyName,class:"tok-propertyName"},{tag:HM.operator,class:"tok-operator"},{tag:HM.comment,class:"tok-comment"},{tag:HM.meta,class:"tok-meta"},{tag:HM.invalid,class:"tok-invalid"},{tag:HM.punctuation,class:"tok-punctuation"}]);const JM=new MD;function eN(e){return bP.define({combine:e?t=>t.concat(e):void 0})}const tN=new MD;class iN{constructor(e,t,i=[],r=""){this.data=e,this.name=r,lE.prototype.hasOwnProperty("tree")||Object.defineProperty(lE.prototype,"tree",{get(){return oN(this)}}),this.parser=t,this.extension=[fN.of(this),lE.languageData.of((e,t,i)=>{let r=rN(e,t,i),n=r.type.prop(JM);if(!n)return[];let o=e.facet(n),s=r.type.prop(tN);if(s){let n=r.resolve(t-r.from,i);for(let t of s)if(t.test(n,e)){let i=e.facet(t.facet);return"replace"==t.type?i:i.concat(o)}}return o})].concat(i)}isActiveAt(e,t,i=-1){return rN(e,t,i).type.prop(JM)==this.data}findRegions(e){let t=e.facet(fN);if((null==t?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],r=(e,t)=>{if(e.prop(JM)==this.data)return void i.push({from:t,to:t+e.length});let n=e.prop(MD.mounted);if(n){if(n.tree.prop(JM)==this.data){if(n.overlay)for(let e of n.overlay)i.push({from:e.from+t,to:e.to+t});else i.push({from:t,to:t+e.length});return}if(n.overlay){let e=i.length;if(r(n.tree,n.overlay[0].from+t),i.length>e)return}}for(let i=0;i<e.children.length;i++){let n=e.children[i];n instanceof ZD&&r(n,e.positions[i]+t)}};return r(oN(e),0),i}get allowsNesting(){return!0}}function rN(e,t,i){let r=e.facet(fN),n=oN(e).topNode;if(!r||r.allowsNesting)for(let e=n;e;e=e.enter(t,i,XD.ExcludeBuffers))e.type.isTop&&(n=e);return n}iN.setState=GP.define();class nN extends iN{constructor(e,t,i){super(e,t,[],i),this.parser=t}static define(e){let t=eN(e.languageData);return new nN(t,e.parser.configure({props:[JM.add(e=>e.isTop?t:void 0)]}),e.name)}configure(e,t){return new nN(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function oN(e){let t=e.field(iN.state,!1);return t?t.tree:ZD.empty}class sN{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let aN=null;class lN{constructor(e,t,i=[],r,n,o,s,a){this.parser=e,this.state=t,this.fragments=i,this.tree=r,this.treeLen=n,this.viewport=o,this.skipped=s,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new lN(e,t,[],ZD.empty,0,i,[],null)}startParse(){return this.parser.startParse(new sN(this.state.doc),this.fragments)}work(e,t){return null!=t&&t>=this.state.doc.length&&(t=void 0),this.tree!=ZD.empty&&this.isDone(null!=t?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if("number"==typeof e){let t=Date.now()+e;e=()=>Date.now()>t}for(this.parse||(this.parse=this.startParse()),null!=t&&(null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r){if(this.fragments=this.withoutTempSkipped(cM.addTree(r,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(i=this.parse.stoppedAt)&&void 0!==i?i:this.state.doc.length,this.tree=r,this.parse=null,!(this.treeLen<(null!=t?t:this.state.doc.length)))return!0;this.parse=this.startParse()}if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(cM.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=aN;aN=this;try{return e()}finally{aN=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=cN(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:r,treeLen:n,viewport:o,skipped:s}=this;if(this.takeTree(),!e.empty){let t=[];if(e.iterChangedRanges((e,i,r,n)=>t.push({fromA:e,toA:i,fromB:r,toB:n})),i=cM.applyChanges(i,t),r=ZD.empty,n=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){s=[];for(let t of this.skipped){let i=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);i<r&&s.push({from:i,to:r})}}}return new lN(this.parser,t,i,r,n,o,s,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let t=0;t<this.skipped.length;t++){let{from:i,to:r}=this.skipped[t];i<e.to&&r>e.from&&(this.fragments=cN(this.fragments,i,r),this.skipped.splice(t--,1))}return!(this.skipped.length>=t)&&(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends dM{createParse(t,i,r){let n=r[0].from,o=r[r.length-1].to,s={parsedPos:n,advance(){let t=aN;if(t){for(let e of r)t.tempSkipped.push(e);e&&(t.scheduleOn=t.scheduleOn?Promise.all([t.scheduleOn,e]):e)}return this.parsedPos=o,new ZD(zD.none,[],[],o-n)},stoppedAt:null,stopAt(){}};return s}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&0==t[0].from&&t[0].to>=e}static get(){return aN}}function cN(e,t,i){return cM.applyChanges(e,[{fromA:t,toA:i,fromB:t,toB:i}])}class dN{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new dN(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=lN.create(e.facet(fN).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new dN(i)}}iN.state=CP.define({create:dN.init,update(e,t){for(let e of t.effects)if(e.is(iN.setState))return e.value;return t.startState.facet(fN)!=t.state.facet(fN)?dN.init(t.state):e.apply(t)}});let hN=e=>{let t=setTimeout(()=>e(),500);return()=>clearTimeout(t)};"undefined"!=typeof requestIdleCallback&&(hN=e=>{let t=-1,i=setTimeout(()=>{t=requestIdleCallback(e,{timeout:400})},100);return()=>t<0?clearTimeout(i):cancelIdleCallback(t)});const uN="undefined"!=typeof navigator&&(null===(KM=navigator.scheduling)||void 0===KM?void 0:KM.isInputPending)?()=>navigator.scheduling.isInputPending():null,pN=VA.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(iN.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(iN.state);t.tree==t.context.tree&&t.context.isDone(e.doc.length)||(this.working=hN(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,n=i.field(iN.state);if(n.tree==n.context.tree&&n.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!uN?Math.max(25,e.timeRemaining()-5):1e9),s=n.context.treeLen<r&&i.doc.length>r+1e3,a=n.context.work(()=>uN&&uN()||Date.now()>o,r+(s?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(n.context.takeTree(),this.view.dispatch({effects:iN.setState.of(new dN(n.context))})),this.chunkBudget>0&&(!a||s)&&this.scheduleWork(),this.checkAsyncSchedule(n.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(e=>MA(this.view.state,e)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),fN=bP.define({combine:e=>e.length?e[0]:null,enables:e=>[iN.state,pN,XQ.contentAttributes.compute([e],t=>{let i=t.facet(e);return i&&i.name?{"data-language":i.name}:{}})]});class mN{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}class gN{constructor(e,t,i,r,n,o=void 0){this.name=e,this.alias=t,this.extensions=i,this.filename=r,this.loadFunc=n,this.support=o,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(e=>this.support=e,e=>{throw this.loading=null,e}))}static of(e){let{load:t,support:i}=e;if(!t){if(!i)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");t=()=>Promise.resolve(i)}return new gN(e.name,(e.alias||[]).concat(e.name).map(e=>e.toLowerCase()),e.extensions||[],e.filename,t,i)}static matchFilename(e,t){for(let i of e)if(i.filename&&i.filename.test(t))return i;let i=/\.([^.]+)$/.exec(t);if(i)for(let t of e)if(t.extensions.indexOf(i[1])>-1)return t;return null}static matchLanguageName(e,t,i=!0){t=t.toLowerCase();for(let i of e)if(i.alias.some(e=>e==t))return i;if(i)for(let i of e)for(let e of i.alias){let r=t.indexOf(e);if(r>-1&&(e.length>2||!/\w/.test(t[r-1])&&!/\w/.test(t[r+e.length])))return i}return null}}const vN=bP.define(),ON=bP.define({combine:e=>{if(!e.length)return"  ";let t=e[0];if(!t||/\S/.test(t)||Array.from(t).some(e=>e!=t[0]))throw new Error("Invalid indent unit: "+JSON.stringify(e[0]));return t}});function yN(e){let t=e.facet(ON);return 9==t.charCodeAt(0)?e.tabSize*t.length:t.length}function bN(e,t){let i="",r=e.tabSize,n=e.facet(ON)[0];if("\t"==n){for(;t>=r;)i+="\t",t-=r;n=" "}for(let e=0;e<t;e++)i+=n;return i}function xN(e,t){e instanceof lE&&(e=new wN(e));for(let i of e.state.facet(vN)){let r=i(e,t);if(void 0!==r)return r}let i=oN(e.state);return i.length>=t?function(e,t,i){let r=t.resolveStack(i),n=t.resolveInner(i,-1).resolve(i,0).enterUnfinishedNodesBefore(i);if(n!=r.node){let e=[];for(let t=n;t&&!(t.from<r.node.from||t.to>r.node.to||t.from==r.node.from&&t.type==r.node.type);t=t.parent)e.push(t);for(let t=e.length-1;t>=0;t--)r={node:e[t],next:r}}return SN(r,e,i)}(e,i,t):null}class wN{constructor(e,t={}){this.state=e,this.options=t,this.unit=yN(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:n}=this.options;return null!=r&&r>=i.from&&r<=i.to?n&&r==e?{text:"",from:e}:(t<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,t);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,t=1){let{text:i,from:r}=this.lineAt(e,t),n=this.countColumn(i,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(n+=o-this.countColumn(i,i.search(/\S|$/))),n}countColumn(e,t=e.length){return TE(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:r}=this.lineAt(e,t),n=this.options.overrideIndentation;if(n){let e=n(r);if(e>-1)return e}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const kN=new MD;function SN(e,t,i){for(let r=e;r;r=r.next){let e=_N(r.node);if(e)return e(CN.create(t,i,r))}return 0}function _N(e){let t=e.type.prop(kN);if(t)return t;let i,r=e.firstChild;if(r&&(i=r.type.prop(MD.closedBy))){let t=e.lastChild,r=t&&i.indexOf(t.name)>-1;return e=>$N(e,!0,1,void 0,r&&!function(e){return e.pos==e.options.simulateBreak&&e.options.simulateDoubleBreak}(e)?t.from:void 0)}return null==e.parent?TN:null}function TN(){return 0}class CN extends wN{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.context=i}get node(){return this.context.node}static create(e,t,i){return new CN(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(t.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(PN(i,e))break;t=this.state.doc.lineAt(i.from)}return this.lineIndent(t.from)}continue(){return SN(this.context.next,this.base,this.pos)}}function PN(e,t){for(let i=t;i;i=i.parent)if(e==i)return!0;return!1}function EN({closing:e,align:t=!0,units:i=1}){return r=>$N(r,t,i,e)}function $N(e,t,i,r,n){let o=e.textAfter,s=o.match(/^\s*/)[0].length,a=r&&o.slice(s,s+r.length)==r||n==e.pos+s,l=t?function(e){let t=e.node,i=t.childAfter(t.from),r=t.lastChild;if(!i)return null;let n=e.options.simulateBreak,o=e.state.doc.lineAt(i.from),s=null==n||n<=o.from?o.to:Math.min(o.to,n);for(let e=i.to;;){let n=t.childAfter(e);if(!n||n==r)return null;if(!n.type.isSkipped){if(n.from>=s)return null;let e=/^ */.exec(o.text.slice(i.to-o.from))[0].length;return{from:i.from,to:i.to+e}}e=n.to}}(e):null;return l?a?e.column(l.from):e.column(l.to):e.baseIndent+(a?0:e.unit*i)}function AN({except:e,units:t=1}={}){return i=>{let r=e&&e.test(i.textAfter);return i.baseIndent+(r?0:t*i.unit)}}const IN=bP.define(),QN=new MD;function RN(e){let t=e.firstChild,i=e.lastChild;return t&&t.to<i.from?{from:t.to,to:i.type.isError?e.to:i.from}:null}function DN(e){let t=e.lastChild;return t&&t.to==e.to&&t.type.isError}function MN(e,t,i){for(let r of e.facet(IN)){let n=r(e,t,i);if(n)return n}return function(e,t,i){let r=oN(e);if(r.length<i)return null;let n=null;for(let o=r.resolveStack(i,1);o;o=o.next){let s=o.node;if(s.to<=i||s.from>i)continue;if(n&&s.from<t)break;let a=s.type.prop(QN);if(a&&(s.to<r.length-50||r.length==e.doc.length||!DN(s))){let r=a(s,e);r&&r.from<=i&&r.from>=t&&r.to>i&&(n=r)}}return n}(e,t,i)}function NN(e,t){let i=t.mapPos(e.from,1),r=t.mapPos(e.to,-1);return i>=r?void 0:{from:i,to:r}}const LN=GP.define({map:NN}),zN=GP.define({map:NN});function VN(e){let t=[];for(let{head:i}of e.state.selection.ranges)t.some(e=>e.from<=i&&e.to>=i)||t.push(e.lineBlockAt(i));return t}const UN=CP.define({create:()=>Z$.none,update(e,t){t.isUserEvent("delete")&&t.changes.iterChangedRanges((t,i)=>e=qN(e,t,i)),e=e.map(t.changes);for(let i of t.effects)if(i.is(LN)&&!ZN(e,i.value.from,i.value.to)){let{preparePlaceholder:r}=t.state.facet(YN),n=r?Z$.replace({widget:new JN(r(t.state,i.value))}):KN;e=e.update({add:[n.range(i.value.from,i.value.to)]})}else i.is(zN)&&(e=e.update({filter:(e,t)=>i.value.from!=e||i.value.to!=t,filterFrom:i.value.from,filterTo:i.value.to}));return t.selection&&(e=qN(e,t.selection.main.head)),e},provide:e=>XQ.decorations.from(e),toJSON(e,t){let i=[];return e.between(0,t.doc.length,(e,t)=>{i.push(e,t)}),i},fromJSON(e){if(!Array.isArray(e)||e.length%2)throw new RangeError("Invalid JSON for fold state");let t=[];for(let i=0;i<e.length;){let r=e[i++],n=e[i++];if("number"!=typeof r||"number"!=typeof n)throw new RangeError("Invalid JSON for fold state");t.push(KN.range(r,n))}return Z$.set(t,!0)}});function qN(e,t,i=t){let r=!1;return e.between(t,i,(e,n)=>{e<i&&n>t&&(r=!0)}),r?e.update({filterFrom:t,filterTo:i,filter:(e,r)=>e>=i||r<=t}):e}function XN(e,t,i){var r;let n=null;return null===(r=e.field(UN,!1))||void 0===r||r.between(t,i,(e,t)=>{(!n||n.from>e)&&(n={from:e,to:t})}),n}function ZN(e,t,i){let r=!1;return e.between(t,t,(e,n)=>{e==t&&n==i&&(r=!0)}),r}function BN(e,t){return e.field(UN,!1)?t:t.concat(GP.appendConfig.of(GN()))}function jN(e,t,i=!0){let r=e.state.doc.lineAt(t.from).number,n=e.state.doc.lineAt(t.to).number;return XQ.announce.of(`${e.state.phrase(i?"Folded lines":"Unfolded lines")} ${r} ${e.state.phrase("to")} ${n}.`)}const FN=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:e=>{for(let t of VN(e)){let i=MN(e.state,t.from,t.to);if(i)return e.dispatch({effects:BN(e.state,[LN.of(i),jN(e,i)])}),!0}return!1}},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:e=>{if(!e.state.field(UN,!1))return!1;let t=[];for(let i of VN(e)){let r=XN(e.state,i.from,i.to);r&&t.push(zN.of(r),jN(e,r,!1))}return t.length&&e.dispatch({effects:t}),t.length>0}},{key:"Ctrl-Alt-[",run:e=>{let{state:t}=e,i=[];for(let r=0;r<t.doc.length;){let n=e.lineBlockAt(r),o=MN(t,n.from,n.to);o&&i.push(LN.of(o)),r=(o?e.lineBlockAt(o.to):n).to+1}return i.length&&e.dispatch({effects:BN(e.state,i)}),!!i.length}},{key:"Ctrl-Alt-]",run:e=>{let t=e.state.field(UN,!1);if(!t||!t.size)return!1;let i=[];return t.between(0,e.state.doc.length,(e,t)=>{i.push(zN.of({from:e,to:t}))}),e.dispatch({effects:i}),!0}}],WN={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},YN=bP.define({combine:e=>cE(e,WN)});function GN(e){return[UN,rL]}function HN(e,t){let{state:i}=e,r=i.facet(YN),n=t=>{let i=e.lineBlockAt(e.posAtDOM(t.target)),r=XN(e.state,i.from,i.to);r&&e.dispatch({effects:zN.of(r)}),t.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(e,n,t);let o=document.createElement("span");return o.textContent=r.placeholderText,o.setAttribute("aria-label",i.phrase("folded code")),o.title=i.phrase("unfold"),o.className="cm-foldPlaceholder",o.onclick=n,o}const KN=Z$.replace({widget:new class extends q${toDOM(e){return HN(e,null)}}});class JN extends q${constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return HN(e,this.value)}}const eL={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class tL extends cD{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function iL(e={}){let t={...eL,...e},i=new tL(t,!0),r=new tL(t,!1),n=VA.fromClass(class{constructor(e){this.from=e.viewport.from,this.markers=this.buildMarkers(e)}update(e){(e.docChanged||e.viewportChanged||e.startState.facet(fN)!=e.state.facet(fN)||e.startState.field(UN,!1)!=e.state.field(UN,!1)||oN(e.startState)!=oN(e.state)||t.foldingChanged(e))&&(this.markers=this.buildMarkers(e.view))}buildMarkers(e){let t=new mE;for(let n of e.viewportLineBlocks){let o=XN(e.state,n.from,n.to)?r:MN(e.state,n.from,n.to)?i:null;o&&t.add(n.from,n.from,o)}return t.finish()}}),{domEventHandlers:o}=t;return[n,fD({class:"cm-foldGutter",markers(e){var t;return(null===(t=e.plugin(n))||void 0===t?void 0:t.markers)||fE.empty},initialSpacer:()=>new tL(t,!1),domEventHandlers:{...o,click:(e,t,i)=>{if(o.click&&o.click(e,t,i))return!0;let r=XN(e.state,t.from,t.to);if(r)return e.dispatch({effects:zN.of(r)}),!0;let n=MN(e.state,t.from,t.to);return!!n&&(e.dispatch({effects:LN.of(n)}),!0)}}}),GN()]}const rL=XQ.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class nL{constructor(e,t){let i;function r(e){let t=AE.newName();return(i||(i=Object.create(null)))["."+t]=e,t}this.specs=e;const n="string"==typeof t.all?t.all:t.all?r(t.all):void 0,o=t.scope;this.scope=o instanceof iN?e=>e.prop(JM)==o.data:o?e=>e==o:void 0,this.style=QM(e.map(e=>({tag:e.tag,class:e.class||r(Object.assign({},e,{tag:null}))})),{all:n}).style,this.module=i?new AE(i):null,this.themeType=t.themeType}static define(e,t){return new nL(e,t||{})}}const oL=bP.define(),sL=bP.define({combine:e=>e.length?[e[0]]:null});function aL(e){let t=e.facet(oL);return t.length?t:e.facet(sL)}function lL(e,t){let i,r=[dL];return e instanceof nL&&(e.module&&r.push(XQ.styleModule.of(e.module)),i=e.themeType),(null==t?void 0:t.fallback)?r.push(sL.of(e)):i?r.push(oL.computeN([XQ.darkTheme],t=>t.facet(XQ.darkTheme)==("dark"==i)?[e]:[])):r.push(oL.of(e)),r}class cL{constructor(e){this.markCache=Object.create(null),this.tree=oN(e.state),this.decorations=this.buildDeco(e,aL(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=oN(e.state),i=aL(e.state),r=i!=aL(e.startState),{viewport:n}=e.view,o=e.changes.mapPos(this.decoratedTo,1);t.length<n.to&&!r&&t.type==this.tree.type&&o>=n.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=n.to)}buildDeco(e,t){if(!t||!this.tree.length)return Z$.none;let i=new mE;for(let{from:r,to:n}of e.visibleRanges)RM(this.tree,t,(e,t,r)=>{i.add(e,t,this.markCache[r]||(this.markCache[r]=Z$.mark({class:r})))},r,n);return i.finish()}}const dL=QP.high(VA.fromClass(cL,{decorations:e=>e.decorations})),hL=nL.define([{tag:HM.meta,color:"#404740"},{tag:HM.link,textDecoration:"underline"},{tag:HM.heading,textDecoration:"underline",fontWeight:"bold"},{tag:HM.emphasis,fontStyle:"italic"},{tag:HM.strong,fontWeight:"bold"},{tag:HM.strikethrough,textDecoration:"line-through"},{tag:HM.keyword,color:"#708"},{tag:[HM.atom,HM.bool,HM.url,HM.contentSeparator,HM.labelName],color:"#219"},{tag:[HM.literal,HM.inserted],color:"#164"},{tag:[HM.string,HM.deleted],color:"#a11"},{tag:[HM.regexp,HM.escape,HM.special(HM.string)],color:"#e40"},{tag:HM.definition(HM.variableName),color:"#00f"},{tag:HM.local(HM.variableName),color:"#30a"},{tag:[HM.typeName,HM.namespace],color:"#085"},{tag:HM.className,color:"#167"},{tag:[HM.special(HM.variableName),HM.macroName],color:"#256"},{tag:HM.definition(HM.propertyName),color:"#00c"},{tag:HM.comment,color:"#940"},{tag:HM.invalid,color:"#f00"}]),uL=XQ.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),pL="()[]{}",fL=bP.define({combine:e=>cE(e,{afterCursor:!0,brackets:pL,maxScanDistance:1e4,renderMatch:vL})}),mL=Z$.mark({class:"cm-matchingBracket"}),gL=Z$.mark({class:"cm-nonmatchingBracket"});function vL(e){let t=[],i=e.matched?mL:gL;return t.push(i.range(e.start.from,e.start.to)),e.end&&t.push(i.range(e.end.from,e.end.to)),t}const OL=CP.define({create:()=>Z$.none,update(e,t){if(!t.docChanged&&!t.selection)return e;let i=[],r=t.state.facet(fL);for(let e of t.state.selection.ranges){if(!e.empty)continue;let n=SL(t.state,e.head,-1,r)||e.head>0&&SL(t.state,e.head-1,1,r)||r.afterCursor&&(SL(t.state,e.head,1,r)||e.head<t.state.doc.length&&SL(t.state,e.head+1,-1,r));n&&(i=i.concat(r.renderMatch(n,t.state)))}return Z$.set(i,!0)},provide:e=>XQ.decorations.from(e)}),yL=[OL,uL];function bL(e={}){return[fL.of(e),yL]}const xL=new MD;function wL(e,t,i){let r=e.prop(t<0?MD.openedBy:MD.closedBy);if(r)return r;if(1==e.name.length){let r=i.indexOf(e.name);if(r>-1&&r%2==(t<0?1:0))return[i[r+t]]}return null}function kL(e){let t=e.type.prop(xL);return t?t(e.node):e}function SL(e,t,i,r={}){let n=r.maxScanDistance||1e4,o=r.brackets||pL,s=oN(e),a=s.resolveInner(t,i);for(let r=a;r;r=r.parent){let n=wL(r.type,i,o);if(n&&r.from<r.to){let s=kL(r);if(s&&(i>0?t>=s.from&&t<s.to:t>s.from&&t<=s.to))return _L(e,t,i,r,s,n,o)}}return function(e,t,i,r,n,o,s){let a=i<0?e.sliceDoc(t-1,t):e.sliceDoc(t,t+1),l=s.indexOf(a);if(l<0||l%2==0!=i>0)return null;let c={from:i<0?t-1:t,to:i>0?t+1:t},d=e.doc.iterRange(t,i>0?e.doc.length:0),h=0;for(let e=0;!d.next().done&&e<=o;){let o=d.value;i<0&&(e+=o.length);let a=t+e*i;for(let e=i>0?0:o.length-1,t=i>0?o.length:-1;e!=t;e+=i){let t=s.indexOf(o[e]);if(!(t<0||r.resolveInner(a+e,1).type!=n))if(t%2==0==i>0)h++;else{if(1==h)return{start:c,end:{from:a+e,to:a+e+1},matched:t>>1==l>>1};h--}}i>0&&(e+=o.length)}return d.done?{start:c,matched:!1}:null}(e,t,i,s,a.type,n,o)}function _L(e,t,i,r,n,o,s){let a=r.parent,l={from:n.from,to:n.to},c=0,d=null==a?void 0:a.cursor();if(d&&(i<0?d.childBefore(r.from):d.childAfter(r.to)))do{if(i<0?d.to<=r.from:d.from>=r.to){if(0==c&&o.indexOf(d.type.name)>-1&&d.from<d.to){let e=kL(d);return{start:l,end:e?{from:e.from,to:e.to}:void 0,matched:!0}}if(wL(d.type,i,s))c++;else if(wL(d.type,-i,s)){if(0==c){let e=kL(d);return{start:l,end:e&&e.from<e.to?{from:e.from,to:e.to}:void 0,matched:!1}}c--}}}while(i<0?d.prevSibling():d.nextSibling());return{start:l,matched:!1}}const TL=Object.create(null),CL=[zD.none],PL=[],EL=Object.create(null),$L=Object.create(null);for(let[e,t]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])$L[e]=IL(TL,t);function AL(e,t){PL.indexOf(e)>-1||(PL.push(e),console.warn(t))}function IL(e,t){let i=[];for(let r of t.split(" ")){let t=[];for(let i of r.split(".")){let r=e[i]||HM[i];r?"function"==typeof r?t.length?t=t.map(r):AL(i,`Modifier ${i} used at start of tag`):t.length?AL(i,`Tag ${i} used as modifier`):t=Array.isArray(r)?r:[r]:AL(i,`Unknown highlighting tag ${i}`)}for(let e of t)i.push(e)}if(!i.length)return 0;let r=t.replace(/ /g,"_"),n=r+" "+i.map(e=>e.id),o=EL[n];if(o)return o.id;let s=EL[n]=zD.define({id:CL.length,name:r,props:[$M({[r]:i})]});return CL.push(s),s.id}iA.RTL,iA.LTR;function QL(e,t){return({state:i,dispatch:r})=>{if(i.readOnly)return!1;let n=e(t,i);return!!n&&(r(i.update(n)),!0)}}const RL=QL(VL,0),DL=QL(zL,0),ML=QL((e,t)=>zL(e,t,function(e){let t=[];for(let i of e.selection.ranges){let r=e.doc.lineAt(i.from),n=i.to<=r.to?r:e.doc.lineAt(i.to);n.from>r.from&&n.from==i.to&&(n=i.to==r.to+1?r:e.doc.lineAt(i.to-1));let o=t.length-1;o>=0&&t[o].to>r.from?t[o].to=n.to:t.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:n.to})}return t}(t)),0);function NL(e,t){let i=e.languageDataAt("commentTokens",t,1);return i.length?i[0]:{}}const LL=50;function zL(e,t,i=t.selection.ranges){let r=i.map(e=>NL(t,e.from).block);if(!r.every(e=>e))return null;let n=i.map((e,i)=>function(e,{open:t,close:i},r,n){let o,s,a=e.sliceDoc(r-LL,r),l=e.sliceDoc(n,n+LL),c=/\s*$/.exec(a)[0].length,d=/^\s*/.exec(l)[0].length,h=a.length-c;if(a.slice(h-t.length,h)==t&&l.slice(d,d+i.length)==i)return{open:{pos:r-c,margin:c&&1},close:{pos:n+d,margin:d&&1}};n-r<=2*LL?o=s=e.sliceDoc(r,n):(o=e.sliceDoc(r,r+LL),s=e.sliceDoc(n-LL,n));let u=/^\s*/.exec(o)[0].length,p=/\s*$/.exec(s)[0].length,f=s.length-p-i.length;return o.slice(u,u+t.length)==t&&s.slice(f,f+i.length)==i?{open:{pos:r+u+t.length,margin:/\s/.test(o.charAt(u+t.length))?1:0},close:{pos:n-p-i.length,margin:/\s/.test(s.charAt(f-1))?1:0}}:null}(t,r[i],e.from,e.to));if(2!=e&&!n.every(e=>e))return{changes:t.changes(i.map((e,t)=>n[t]?[]:[{from:e.from,insert:r[t].open+" "},{from:e.to,insert:" "+r[t].close}]))};if(1!=e&&n.some(e=>e)){let e=[];for(let t,i=0;i<n.length;i++)if(t=n[i]){let n=r[i],{open:o,close:s}=t;e.push({from:o.pos-n.open.length,to:o.pos+o.margin},{from:s.pos-s.margin,to:s.pos+n.close.length})}return{changes:e}}return null}function VL(e,t,i=t.selection.ranges){let r=[],n=-1;for(let{from:e,to:o}of i){let i=r.length,s=1e9,a=NL(t,e).line;if(a){for(let i=e;i<=o;){let l=t.doc.lineAt(i);if(l.from>n&&(e==o||o>l.from)){n=l.from;let e=/^\s*/.exec(l.text)[0].length,t=e==l.length,i=l.text.slice(e,e+a.length)==a?e:-1;e<l.text.length&&e<s&&(s=e),r.push({line:l,comment:i,token:a,indent:e,empty:t,single:!1})}i=l.to+1}if(s<1e9)for(let e=i;e<r.length;e++)r[e].indent<r[e].line.text.length&&(r[e].indent=s);r.length==i+1&&(r[i].single=!0)}}if(2!=e&&r.some(e=>e.comment<0&&(!e.empty||e.single))){let e=[];for(let{line:t,token:i,indent:n,empty:o,single:s}of r)!s&&o||e.push({from:t.from+n,insert:i+" "});let i=t.changes(e);return{changes:i,selection:t.selection.map(i,1)}}if(1!=e&&r.some(e=>e.comment>=0)){let e=[];for(let{line:t,comment:i,token:n}of r)if(i>=0){let r=t.from+i,o=r+n.length;" "==t.text[o-t.from]&&o++,e.push({from:r,to:o})}return{changes:e}}return null}const UL=FP.define(),qL=FP.define(),XL=bP.define(),ZL=bP.define({combine:e=>cE(e,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(i,r)=>e(i,r)||t(i,r)})}),BL=CP.define({create:()=>lz.empty,update(e,t){let i=t.state.facet(ZL),r=t.annotation(UL);if(r){let n=KL.fromTransaction(t,r.selection),o=r.side,s=0==o?e.undone:e.done;return s=n?JL(s,s.length,i.minDepth,n):rz(s,t.startState.selection),new lz(0==o?r.rest:s,0==o?s:r.rest)}let n=t.annotation(qL);if("full"!=n&&"before"!=n||(e=e.isolate()),!1===t.annotation(HP.addToHistory))return t.changes.empty?e:e.addMapping(t.changes.desc);let o=KL.fromTransaction(t),s=t.annotation(HP.time),a=t.annotation(HP.userEvent);return o?e=e.addChanges(o,s,a,i,t):t.selection&&(e=e.addSelection(t.startState.selection,s,a,i.newGroupDelay)),"full"!=n&&"after"!=n||(e=e.isolate()),e},toJSON:e=>({done:e.done.map(e=>e.toJSON()),undone:e.undone.map(e=>e.toJSON())}),fromJSON:e=>new lz(e.done.map(KL.fromJSON),e.undone.map(KL.fromJSON))});function jL(e={}){return[BL,ZL.of(e),XQ.domEventHandlers({beforeinput(e,t){let i="historyUndo"==e.inputType?WL:"historyRedo"==e.inputType?YL:null;return!!i&&(e.preventDefault(),i(t))}})]}function FL(e,t){return function({state:i,dispatch:r}){if(!t&&i.readOnly)return!1;let n=i.field(BL,!1);if(!n)return!1;let o=n.pop(e,i,t);return!!o&&(r(o),!0)}}const WL=FL(0,!1),YL=FL(1,!1),GL=FL(0,!0),HL=FL(1,!0);class KL{constructor(e,t,i,r,n){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=r,this.selectionsAfter=n}setSelAfter(e){return new KL(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:null===(e=this.changes)||void 0===e?void 0:e.toJSON(),mapped:null===(t=this.mapped)||void 0===t?void 0:t.toJSON(),startSelection:null===(i=this.startSelection)||void 0===i?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(e=>e.toJSON())}}static fromJSON(e){return new KL(e.changes&&cP.fromJSON(e.changes),[],e.mapped&&lP.fromJSON(e.mapped),e.startSelection&&vP.fromJSON(e.startSelection),e.selectionsAfter.map(vP.fromJSON))}static fromTransaction(e,t){let i=tz;for(let t of e.startState.facet(XL)){let r=t(e);r.length&&(i=i.concat(r))}return!i.length&&e.changes.empty?null:new KL(e.changes.invert(e.startState.doc),i,void 0,t||e.startState.selection,tz)}static selection(e){return new KL(void 0,tz,void 0,void 0,e)}}function JL(e,t,i,r){let n=t+1>i+20?t-i-1:0,o=e.slice(n,t);return o.push(r),o}function ez(e,t){return e.length?t.length?e.concat(t):e:t}const tz=[],iz=200;function rz(e,t){if(e.length){let i=e[e.length-1],r=i.selectionsAfter.slice(Math.max(0,i.selectionsAfter.length-iz));return r.length&&r[r.length-1].eq(t)?e:(r.push(t),JL(e,e.length-1,1e9,i.setSelAfter(r)))}return[KL.selection([t])]}function nz(e){let t=e[e.length-1],i=e.slice();return i[e.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),i}function oz(e,t){if(!e.length)return e;let i=e.length,r=tz;for(;i;){let n=sz(e[i-1],t,r);if(n.changes&&!n.changes.empty||n.effects.length){let t=e.slice(0,i);return t[i-1]=n,t}t=n.mapped,i--,r=n.selectionsAfter}return r.length?[KL.selection(r)]:tz}function sz(e,t,i){let r=ez(e.selectionsAfter.length?e.selectionsAfter.map(e=>e.map(t)):tz,i);if(!e.changes)return KL.selection(r);let n=e.changes.map(t),o=t.mapDesc(e.changes,!0),s=e.mapped?e.mapped.composeDesc(o):o;return new KL(n,GP.mapEffects(e.effects,t),s,e.startSelection.map(o),r)}const az=/^(input\.type|delete)($|\.)/;class lz{constructor(e,t,i=0,r=void 0){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=r}isolate(){return this.prevTime?new lz(this.done,this.undone):this}addChanges(e,t,i,r,n){let o=this.done,s=o[o.length-1];return o=s&&s.changes&&!s.changes.empty&&e.changes&&(!i||az.test(i))&&(!s.selectionsAfter.length&&t-this.prevTime<r.newGroupDelay&&r.joinToEvent(n,function(e,t){let i=[],r=!1;return e.iterChangedRanges((e,t)=>i.push(e,t)),t.iterChangedRanges((e,t,n,o)=>{for(let e=0;e<i.length;){let t=i[e++],s=i[e++];o>=t&&n<=s&&(r=!0)}}),r}(s.changes,e.changes))||"input.type.compose"==i)?JL(o,o.length-1,r.minDepth,new KL(e.changes.compose(s.changes),ez(GP.mapEffects(e.effects,s.changes),s.effects),s.mapped,s.startSelection,tz)):JL(o,o.length,r.minDepth,e),new lz(o,tz,t,i)}addSelection(e,t,i,r){let n=this.done.length?this.done[this.done.length-1].selectionsAfter:tz;return n.length>0&&t-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&function(e,t){return e.ranges.length==t.ranges.length&&0===e.ranges.filter((e,i)=>e.empty!=t.ranges[i].empty).length}(n[n.length-1],e)?this:new lz(rz(this.done,e),this.undone,t,i)}addMapping(e){return new lz(oz(this.done,e),oz(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let r=0==e?this.done:this.undone;if(0==r.length)return null;let n=r[r.length-1],o=n.selectionsAfter[0]||t.selection;if(i&&n.selectionsAfter.length)return t.update({selection:n.selectionsAfter[n.selectionsAfter.length-1],annotations:UL.of({side:e,rest:nz(r),selection:o}),userEvent:0==e?"select.undo":"select.redo",scrollIntoView:!0});if(n.changes){let i=1==r.length?tz:r.slice(0,r.length-1);return n.mapped&&(i=oz(i,n.mapped)),t.update({changes:n.changes,selection:n.startSelection,effects:n.effects,annotations:UL.of({side:e,rest:i,selection:o}),filter:!1,userEvent:0==e?"undo":"redo",scrollIntoView:!0})}return null}}lz.empty=new lz(tz,tz);const cz=[{key:"Mod-z",run:WL,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:YL,preventDefault:!0},{linux:"Ctrl-Shift-z",run:YL,preventDefault:!0},{key:"Mod-u",run:GL,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:HL,preventDefault:!0}];function dz(e,t){return vP.create(e.ranges.map(t),e.mainIndex)}function hz(e,t){return e.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function uz({state:e,dispatch:t},i){let r=dz(e.selection,i);return!r.eq(e.selection,!0)&&(t(hz(e,r)),!0)}function pz(e,t){return vP.cursor(t?e.to:e.from)}function fz(e,t){return uz(e,i=>i.empty?e.moveByChar(i,t):pz(i,t))}function mz(e){return e.textDirectionAt(e.state.selection.main.head)==iA.LTR}const gz=e=>fz(e,!mz(e)),vz=e=>fz(e,mz(e));function Oz(e,t){return uz(e,i=>i.empty?e.moveByGroup(i,t):pz(i,t))}function yz(e,t,i){if(t.type.prop(i))return!0;let r=t.to-t.from;return r&&(r>2||/[^\s,.;:]/.test(e.sliceDoc(t.from,t.to)))||t.firstChild}function bz(e,t,i){let r,n,o=oN(e).resolveInner(t.head),s=i?MD.closedBy:MD.openedBy;for(let r=t.head;;){let t=i?o.childAfter(r):o.childBefore(r);if(!t)break;yz(e,t,s)?o=t:r=i?t.to:t.from}return n=o.type.prop(s)&&(r=i?SL(e,o.from,1):SL(e,o.to,-1))&&r.matched?i?r.end.to:r.end.from:i?o.to:o.from,vP.cursor(n,i?-1:1)}function xz(e,t){return uz(e,i=>{if(!i.empty)return pz(i,t);let r=e.moveVertically(i,t);return r.head!=i.head?r:e.moveToLineBoundary(i,t)})}const wz=e=>xz(e,!1),kz=e=>xz(e,!0);function Sz(e){let t,i=e.scrollDOM.clientHeight<e.scrollDOM.scrollHeight-2,r=0,n=0;if(i){for(let t of e.state.facet(XQ.scrollMargins)){let i=t(e);(null==i?void 0:i.top)&&(r=Math.max(null==i?void 0:i.top,r)),(null==i?void 0:i.bottom)&&(n=Math.max(null==i?void 0:i.bottom,n))}t=e.scrollDOM.clientHeight-r-n}else t=(e.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:r,marginBottom:n,selfScroll:i,height:Math.max(e.defaultLineHeight,t-5)}}function _z(e,t){let i,r=Sz(e),{state:n}=e,o=dz(n.selection,i=>i.empty?e.moveVertically(i,t,r.height):pz(i,t));if(o.eq(n.selection))return!1;if(r.selfScroll){let t=e.coordsAtPos(n.selection.main.head),s=e.scrollDOM.getBoundingClientRect(),a=s.top+r.marginTop,l=s.bottom-r.marginBottom;t&&t.top>a&&t.bottom<l&&(i=XQ.scrollIntoView(o.main.head,{y:"start",yMargin:t.top-a}))}return e.dispatch(hz(n,o),{effects:i}),!0}const Tz=e=>_z(e,!1),Cz=e=>_z(e,!0);function Pz(e,t,i){let r=e.lineBlockAt(t.head),n=e.moveToLineBoundary(t,i);if(n.head==t.head&&n.head!=(i?r.to:r.from)&&(n=e.moveToLineBoundary(t,i,!1)),!i&&n.head==r.from&&r.length){let i=/^\s*/.exec(e.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;i&&t.head!=r.from+i&&(n=vP.cursor(r.from+i))}return n}function Ez(e,t){let i=dz(e.state.selection,e=>{let i=t(e);return vP.range(e.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return!i.eq(e.state.selection)&&(e.dispatch(hz(e.state,i)),!0)}function $z(e,t){return Ez(e,i=>e.moveByChar(i,t))}const Az=e=>$z(e,!mz(e)),Iz=e=>$z(e,mz(e));function Qz(e,t){return Ez(e,i=>e.moveByGroup(i,t))}function Rz(e,t){return Ez(e,i=>e.moveVertically(i,t))}const Dz=e=>Rz(e,!1),Mz=e=>Rz(e,!0);function Nz(e,t){return Ez(e,i=>e.moveVertically(i,t,Sz(e).height))}const Lz=e=>Nz(e,!1),zz=e=>Nz(e,!0),Vz=({state:e,dispatch:t})=>(t(hz(e,{anchor:0})),!0),Uz=({state:e,dispatch:t})=>(t(hz(e,{anchor:e.doc.length})),!0),qz=({state:e,dispatch:t})=>(t(hz(e,{anchor:e.selection.main.anchor,head:0})),!0),Xz=({state:e,dispatch:t})=>(t(hz(e,{anchor:e.selection.main.anchor,head:e.doc.length})),!0);function Zz(e,t){let{state:i}=e,r=i.selection,n=i.selection.ranges.slice();for(let r of i.selection.ranges){let o=i.doc.lineAt(r.head);if(t?o.to<e.state.doc.length:o.from>0)for(let i=r;;){let r=e.moveVertically(i,t);if(r.head<o.from||r.head>o.to){n.some(e=>e.head==r.head)||n.push(r);break}if(r.head==i.head)break;i=r}}return n.length!=r.ranges.length&&(e.dispatch(hz(i,vP.create(n,n.length-1))),!0)}function Bz(e,t){if(e.state.readOnly)return!1;let i="delete.selection",{state:r}=e,n=r.changeByRange(r=>{let{from:n,to:o}=r;if(n==o){let s=t(r);s<n?(i="delete.backward",s=jz(e,s,!1)):s>n&&(i="delete.forward",s=jz(e,s,!0)),n=Math.min(n,s),o=Math.max(o,s)}else n=jz(e,n,!1),o=jz(e,o,!0);return n==o?{range:r}:{changes:{from:n,to:o},range:vP.cursor(n,n<r.head?-1:1)}});return!n.changes.empty&&(e.dispatch(r.update(n,{scrollIntoView:!0,userEvent:i,effects:"delete.selection"==i?XQ.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function jz(e,t,i){if(e instanceof XQ)for(let r of e.state.facet(XQ.atomicRanges).map(t=>t(e)))r.between(t,t,(e,r)=>{e<t&&r>t&&(t=i?r:e)});return t}const Fz=(e,t,i)=>Bz(e,r=>{let n,o,s=r.from,{state:a}=e,l=a.doc.lineAt(s);if(i&&!t&&s>l.from&&s<l.from+200&&!/[^ \t]/.test(n=l.text.slice(0,s-l.from))){if("\t"==n[n.length-1])return s-1;let e=TE(n,a.tabSize)%yN(a)||yN(a);for(let t=0;t<e&&" "==n[n.length-1-t];t++)s--;o=s}else o=iP(l.text,s-l.from,t,t)+l.from,o==s&&l.number!=(t?a.doc.lines:1)?o+=t?1:-1:!t&&/[\ufe00-\ufe0f]/.test(l.text.slice(o-l.from,s-l.from))&&(o=iP(l.text,o-l.from,!1,!1)+l.from);return o}),Wz=e=>Fz(e,!1,!0),Yz=e=>Fz(e,!0,!1),Gz=(e,t)=>Bz(e,i=>{let r=i.head,{state:n}=e,o=n.doc.lineAt(r),s=n.charCategorizer(r);for(let e=null;;){if(r==(t?o.to:o.from)){r==i.head&&o.number!=(t?n.doc.lines:1)&&(r+=t?1:-1);break}let a=iP(o.text,r-o.from,t)+o.from,l=o.text.slice(Math.min(r,a)-o.from,Math.max(r,a)-o.from),c=s(l);if(null!=e&&c!=e)break;" "==l&&r==i.head||(e=c),r=a}return r}),Hz=e=>Gz(e,!1);function Kz(e){let t=[],i=-1;for(let r of e.selection.ranges){let n=e.doc.lineAt(r.from),o=e.doc.lineAt(r.to);if(r.empty||r.to!=o.from||(o=e.doc.lineAt(r.to-1)),i>=n.number){let e=t[t.length-1];e.to=o.to,e.ranges.push(r)}else t.push({from:n.from,to:o.to,ranges:[r]});i=o.number+1}return t}function Jz(e,t,i){if(e.readOnly)return!1;let r=[],n=[];for(let t of Kz(e)){if(i?t.to==e.doc.length:0==t.from)continue;let o=e.doc.lineAt(i?t.to+1:t.from-1),s=o.length+1;if(i){r.push({from:t.to,to:o.to},{from:t.from,insert:o.text+e.lineBreak});for(let i of t.ranges)n.push(vP.range(Math.min(e.doc.length,i.anchor+s),Math.min(e.doc.length,i.head+s)))}else{r.push({from:o.from,to:t.from},{from:t.to,insert:e.lineBreak+o.text});for(let e of t.ranges)n.push(vP.range(e.anchor-s,e.head-s))}}return!!r.length&&(t(e.update({changes:r,scrollIntoView:!0,selection:vP.create(n,e.selection.mainIndex),userEvent:"move.line"})),!0)}function eV(e,t,i){if(e.readOnly)return!1;let r=[];for(let t of Kz(e))i?r.push({from:t.from,insert:e.doc.slice(t.from,t.to)+e.lineBreak}):r.push({from:t.to,insert:e.lineBreak+e.doc.slice(t.from,t.to)});return t(e.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const tV=rV(!1),iV=rV(!0);function rV(e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let r=t.changeByRange(i=>{let{from:r,to:n}=i,o=t.doc.lineAt(r),s=!e&&r==n&&function(e,t){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(t-1,t+1)))return{from:t,to:t};let i,r=oN(e).resolveInner(t),n=r.childBefore(t),o=r.childAfter(t);return n&&o&&n.to<=t&&o.from>=t&&(i=n.type.prop(MD.closedBy))&&i.indexOf(o.name)>-1&&e.doc.lineAt(n.to).from==e.doc.lineAt(o.from).from&&!/\S/.test(e.sliceDoc(n.to,o.from))?{from:n.to,to:o.from}:null}(t,r);e&&(r=n=(n<=o.to?o:t.doc.lineAt(n)).to);let a=new wN(t,{simulateBreak:r,simulateDoubleBreak:!!s}),l=xN(a,r);for(null==l&&(l=TE(/^\s*/.exec(t.doc.lineAt(r).text)[0],t.tabSize));n<o.to&&/\s/.test(o.text[n-o.from]);)n++;s?({from:r,to:n}=s):r>o.from&&r<o.from+100&&!/\S/.test(o.text.slice(0,r))&&(r=o.from);let c=["",bN(t,l)];return s&&c.push(bN(t,a.lineIndent(o.from,-1))),{changes:{from:r,to:n,insert:jC.of(c)},range:vP.cursor(r+1+c[1].length)}});return i(t.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function nV(e,t){let i=-1;return e.changeByRange(r=>{let n=[];for(let o=r.from;o<=r.to;){let s=e.doc.lineAt(o);s.number>i&&(r.empty||r.to>s.from)&&(t(s,n,r),i=s.number),o=s.to+1}let o=e.changes(n);return{changes:n,range:vP.range(o.mapPos(r.anchor,1),o.mapPos(r.head,1))}})}const oV=[{key:"Ctrl-b",run:gz,shift:Az,preventDefault:!0},{key:"Ctrl-f",run:vz,shift:Iz},{key:"Ctrl-p",run:wz,shift:Dz},{key:"Ctrl-n",run:kz,shift:Mz},{key:"Ctrl-a",run:e=>uz(e,t=>vP.cursor(e.lineBlockAt(t.head).from,1)),shift:e=>Ez(e,t=>vP.cursor(e.lineBlockAt(t.head).from))},{key:"Ctrl-e",run:e=>uz(e,t=>vP.cursor(e.lineBlockAt(t.head).to,-1)),shift:e=>Ez(e,t=>vP.cursor(e.lineBlockAt(t.head).to))},{key:"Ctrl-d",run:Yz},{key:"Ctrl-h",run:Wz},{key:"Ctrl-k",run:e=>Bz(e,t=>{let i=e.lineBlockAt(t.head).to;return t.head<i?i:Math.min(e.state.doc.length,t.head+1)})},{key:"Ctrl-Alt-h",run:Hz},{key:"Ctrl-o",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(e=>({changes:{from:e.from,to:e.to,insert:jC.of(["",""])},range:vP.cursor(e.from)}));return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(t=>{if(!t.empty||0==t.from||t.from==e.doc.length)return{range:t};let i=t.from,r=e.doc.lineAt(i),n=i==r.from?i-1:iP(r.text,i-r.from,!1)+r.from,o=i==r.to?i+1:iP(r.text,i-r.from,!0)+r.from;return{changes:{from:n,to:o,insert:e.doc.slice(i,o).append(e.doc.slice(n,i))},range:vP.cursor(o)}});return!i.changes.empty&&(t(e.update(i,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Ctrl-v",run:Cz}],sV=[{key:"ArrowLeft",run:gz,shift:Az,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:e=>Oz(e,!mz(e)),shift:e=>Qz(e,!mz(e)),preventDefault:!0},{mac:"Cmd-ArrowLeft",run:e=>uz(e,t=>Pz(e,t,!mz(e))),shift:e=>Ez(e,t=>Pz(e,t,!mz(e))),preventDefault:!0},{key:"ArrowRight",run:vz,shift:Iz,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:e=>Oz(e,mz(e)),shift:e=>Qz(e,mz(e)),preventDefault:!0},{mac:"Cmd-ArrowRight",run:e=>uz(e,t=>Pz(e,t,mz(e))),shift:e=>Ez(e,t=>Pz(e,t,mz(e))),preventDefault:!0},{key:"ArrowUp",run:wz,shift:Dz,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Vz,shift:qz},{mac:"Ctrl-ArrowUp",run:Tz,shift:Lz},{key:"ArrowDown",run:kz,shift:Mz,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Uz,shift:Xz},{mac:"Ctrl-ArrowDown",run:Cz,shift:zz},{key:"PageUp",run:Tz,shift:Lz},{key:"PageDown",run:Cz,shift:zz},{key:"Home",run:e=>uz(e,t=>Pz(e,t,!1)),shift:e=>Ez(e,t=>Pz(e,t,!1)),preventDefault:!0},{key:"Mod-Home",run:Vz,shift:qz},{key:"End",run:e=>uz(e,t=>Pz(e,t,!0)),shift:e=>Ez(e,t=>Pz(e,t,!0)),preventDefault:!0},{key:"Mod-End",run:Uz,shift:Xz},{key:"Enter",run:tV,shift:tV},{key:"Mod-a",run:({state:e,dispatch:t})=>(t(e.update({selection:{anchor:0,head:e.doc.length},userEvent:"select"})),!0)},{key:"Backspace",run:Wz,shift:Wz,preventDefault:!0},{key:"Delete",run:Yz,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Hz,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:e=>Gz(e,!0),preventDefault:!0},{mac:"Mod-Backspace",run:e=>Bz(e,t=>{let i=e.moveToLineBoundary(t,!1).head;return t.head>i?i:Math.max(0,t.head-1)}),preventDefault:!0},{mac:"Mod-Delete",run:e=>Bz(e,t=>{let i=e.moveToLineBoundary(t,!0).head;return t.head<i?i:Math.min(e.state.doc.length,t.head+1)}),preventDefault:!0}].concat(oV.map(e=>({mac:e.key,run:e.run,shift:e.shift}))),aV=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:e=>uz(e,t=>bz(e.state,t,!mz(e))),shift:e=>Ez(e,t=>bz(e.state,t,!mz(e)))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:e=>uz(e,t=>bz(e.state,t,mz(e))),shift:e=>Ez(e,t=>bz(e.state,t,mz(e)))},{key:"Alt-ArrowUp",run:({state:e,dispatch:t})=>Jz(e,t,!1)},{key:"Shift-Alt-ArrowUp",run:({state:e,dispatch:t})=>eV(e,t,!1)},{key:"Alt-ArrowDown",run:({state:e,dispatch:t})=>Jz(e,t,!0)},{key:"Shift-Alt-ArrowDown",run:({state:e,dispatch:t})=>eV(e,t,!0)},{key:"Mod-Alt-ArrowUp",run:e=>Zz(e,!1)},{key:"Mod-Alt-ArrowDown",run:e=>Zz(e,!0)},{key:"Escape",run:({state:e,dispatch:t})=>{let i=e.selection,r=null;return i.ranges.length>1?r=vP.create([i.main]):i.main.empty||(r=vP.create([vP.cursor(i.main.head)])),!!r&&(t(hz(e,r)),!0)}},{key:"Mod-Enter",run:iV},{key:"Alt-l",mac:"Ctrl-l",run:({state:e,dispatch:t})=>{let i=Kz(e).map(({from:t,to:i})=>vP.range(t,Math.min(i+1,e.doc.length)));return t(e.update({selection:vP.create(i),userEvent:"select"})),!0}},{key:"Mod-i",run:({state:e,dispatch:t})=>{let i=dz(e.selection,t=>{let i=oN(e),r=i.resolveStack(t.from,1);if(t.empty){let e=i.resolveStack(t.from,-1);e.node.from>=r.node.from&&e.node.to<=r.node.to&&(r=e)}for(let e=r;e;e=e.next){let{node:i}=e;if((i.from<t.from&&i.to>=t.to||i.to>t.to&&i.from<=t.from)&&e.next)return vP.range(i.to,i.from)}return t});return!i.eq(e.selection)&&(t(hz(e,i)),!0)},preventDefault:!0},{key:"Mod-[",run:({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(nV(e,(t,i)=>{let r=/^\s*/.exec(t.text)[0];if(!r)return;let n=TE(r,e.tabSize),o=0,s=bN(e,Math.max(0,n-yN(e)));for(;o<r.length&&o<s.length&&r.charCodeAt(o)==s.charCodeAt(o);)o++;i.push({from:t.from+o,to:t.from+r.length,insert:s.slice(o)})}),{userEvent:"delete.dedent"})),!0)},{key:"Mod-]",run:({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(nV(e,(t,i)=>{i.push({from:t.from,insert:e.facet(ON)})}),{userEvent:"input.indent"})),!0)},{key:"Mod-Alt-\\",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=Object.create(null),r=new wN(e,{overrideIndentation:e=>{let t=i[e];return t??-1}}),n=nV(e,(t,n,o)=>{let s=xN(r,t.from);if(null==s)return;/\S/.test(t.text)||(s=0);let a=/^\s*/.exec(t.text)[0],l=bN(e,s);(a!=l||o.from<t.from+a.length)&&(i[t.from]=s,n.push({from:t.from,to:t.from+a.length,insert:l}))});return n.changes.empty||t(e.update(n,{userEvent:"indent"})),!0}},{key:"Shift-Mod-k",run:e=>{if(e.state.readOnly)return!1;let{state:t}=e,i=t.changes(Kz(t).map(({from:e,to:i})=>(e>0?e--:i<t.doc.length&&i++,{from:e,to:i}))),r=dz(t.selection,t=>{let i;if(e.lineWrapping){let r=e.lineBlockAt(t.head),n=e.coordsAtPos(t.head,t.assoc||1);n&&(i=r.bottom+e.documentTop-n.bottom+e.defaultLineHeight/2)}return e.moveVertically(t,!0,i)}).map(i);return e.dispatch({changes:i,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:({state:e,dispatch:t})=>function(e,t){let i=!1,r=dz(e.selection,t=>{let r=SL(e,t.head,-1)||SL(e,t.head,1)||t.head>0&&SL(e,t.head-1,1)||t.head<e.doc.length&&SL(e,t.head+1,-1);if(!r||!r.end)return t;i=!0;let n=r.start.from==t.head?r.end.to:r.end.from;return vP.cursor(n)});return!!i&&(t(hz(e,r)),!0)}(e,t)},{key:"Mod-/",run:e=>{let{state:t}=e,i=t.doc.lineAt(t.selection.main.from),r=NL(e.state,i.from);return r.line?RL(e):!!r.block&&ML(e)}},{key:"Alt-A",run:DL},{key:"Ctrl-m",mac:"Shift-Alt-m",run:e=>(e.setTabFocusMode(),!0)}].concat(sV),lV="function"==typeof String.prototype.normalize?e=>e.normalize("NFKD"):e=>e;class cV{constructor(e,t,i=0,r=e.length,n,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,r),this.bufferStart=i,this.normalize=n?e=>n(lV(e)):lV,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return rP(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=nP(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=oP(e);let r=this.normalize(t);if(r.length)for(let e=0,n=i;;e++){let o=r.charCodeAt(e),s=this.match(o,n,this.bufferPos+this.bufferStart);if(e==r.length-1){if(s)return this.value=s,this;break}n==i&&e<t.length&&t.charCodeAt(e)==o&&n++}}}match(e,t,i){let r=null;for(let t=0;t<this.matches.length;t+=2){let n=this.matches[t],o=!1;this.query.charCodeAt(n)==e&&(n==this.query.length-1?r={from:this.matches[t+1],to:i}:(this.matches[t]++,o=!0)),o||(this.matches.splice(t,2),t-=2)}return this.query.charCodeAt(0)==e&&(1==this.query.length?r={from:t,to:i}:this.matches.push(1,t)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferStart)&&(r=null),r}}"undefined"!=typeof Symbol&&(cV.prototype[Symbol.iterator]=function(){return this});const dV={from:-1,to:-1,match:/.*/.exec("")},hV="gm"+(null==/x/.unicode?"":"u");class uV{constructor(e,t,i,r=0,n=e.length){if(this.text=e,this.to=n,this.curLine="",this.done=!1,this.value=dV,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new mV(e,t,i,r,n);this.re=new RegExp(t,hV+((null==i?void 0:i.ignoreCase)?"i":"")),this.test=null==i?void 0:i.test,this.iter=e.iter();let o=e.lineAt(r);this.curLineStart=o.from,this.matchPos=gV(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let i=this.curLineStart+t.index,r=i+t[0].length;if(this.matchPos=gV(this.text,r+(i==r?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<r||i>this.value.to)&&(!this.test||this.test(i,r,t)))return this.value={from:i,to:r,match:t},this;e=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),e=0}}}}const pV=new WeakMap;class fV{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,i){let r=pV.get(e);if(!r||r.from>=i||r.to<=t){let r=new fV(t,e.sliceString(t,i));return pV.set(e,r),r}if(r.from==t&&r.to==i)return r;let{text:n,from:o}=r;return o>t&&(n=e.sliceString(t,o)+n,o=t),r.to<i&&(n+=e.sliceString(r.to,i)),pV.set(e,new fV(o,n)),new fV(t,n.slice(t-o,i-o))}}class mV{constructor(e,t,i,r,n){this.text=e,this.to=n,this.done=!1,this.value=dV,this.matchPos=gV(e,r),this.re=new RegExp(t,hV+((null==i?void 0:i.ignoreCase)?"i":"")),this.test=null==i?void 0:i.test,this.flat=fV.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let e=this.flat.from+t.index,i=e+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(e,i,t)))return this.value={from:e,to:i,match:t},this.matchPos=gV(this.text,i+(e==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=fV.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}}}function gV(e,t){if(t>=e.length)return t;let i,r=e.lineAt(t);for(;t<r.to&&(i=r.text.charCodeAt(t-r.from))>=56320&&i<57344;)t++;return t}function vV(e){let t=VE("input",{class:"cm-textfield",name:"line",value:String(e.state.doc.lineAt(e.state.selection.main.head).number)});function i(){let i=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!i)return;let{state:r}=e,n=r.doc.lineAt(r.selection.main.head),[,o,s,a,l]=i,c=a?+a.slice(1):0,d=s?+s:n.number;if(s&&l){let e=d/100;o&&(e=e*("-"==o?-1:1)+n.number/r.doc.lines),d=Math.round(r.doc.lines*e)}else s&&o&&(d=d*("-"==o?-1:1)+n.number);let h=r.doc.line(Math.max(1,Math.min(r.doc.lines,d))),u=vP.cursor(h.from+Math.max(0,Math.min(c,h.length)));e.dispatch({effects:[OV.of(!1),XQ.scrollIntoView(u.from,{y:"center"})],selection:u}),e.focus()}return{dom:VE("form",{class:"cm-gotoLine",onkeydown:t=>{27==t.keyCode?(t.preventDefault(),e.dispatch({effects:OV.of(!1)}),e.focus()):13==t.keyCode&&(t.preventDefault(),i())},onsubmit:e=>{e.preventDefault(),i()}},VE("label",e.state.phrase("Go to line"),": ",t)," ",VE("button",{class:"cm-button",type:"submit"},e.state.phrase("go")),VE("button",{name:"close",onclick:()=>{e.dispatch({effects:OV.of(!1)}),e.focus()},"aria-label":e.state.phrase("close"),type:"button"},[""]))}}"undefined"!=typeof Symbol&&(uV.prototype[Symbol.iterator]=mV.prototype[Symbol.iterator]=function(){return this});const OV=GP.define(),yV=CP.define({create:()=>!0,update(e,t){for(let i of t.effects)i.is(OV)&&(e=i.value);return e},provide:e=>lD.from(e,e=>e?vV:null)}),bV=XQ.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),xV={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},wV=bP.define({combine:e=>cE(e,xV,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})});const kV=Z$.mark({class:"cm-selectionMatch"}),SV=Z$.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function _V(e,t,i,r){return!(0!=i&&e(t.sliceDoc(i-1,i))==nE.Word||r!=t.doc.length&&e(t.sliceDoc(r,r+1))==nE.Word)}const TV=VA.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.selectionSet||e.docChanged||e.viewportChanged)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=e.state.facet(wV),{state:i}=e,r=i.selection;if(r.ranges.length>1)return Z$.none;let n,o=r.main,s=null;if(o.empty){if(!t.highlightWordAroundCursor)return Z$.none;let e=i.wordAt(o.head);if(!e)return Z$.none;s=i.charCategorizer(o.head),n=i.sliceDoc(e.from,e.to)}else{let e=o.to-o.from;if(e<t.minSelectionLength||e>200)return Z$.none;if(t.wholeWords){if(n=i.sliceDoc(o.from,o.to),s=i.charCategorizer(o.head),!_V(s,i,o.from,o.to)||!function(e,t,i,r){return e(t.sliceDoc(i,i+1))==nE.Word&&e(t.sliceDoc(r-1,r))==nE.Word}(s,i,o.from,o.to))return Z$.none}else if(n=i.sliceDoc(o.from,o.to),!n)return Z$.none}let a=[];for(let r of e.visibleRanges){let e=new cV(i.doc,n,r.from,r.to);for(;!e.next().done;){let{from:r,to:n}=e.value;if((!s||_V(s,i,r,n))&&(o.empty&&r<=o.from&&n>=o.to?a.push(SV.range(r,n)):(r>=o.to||n<=o.from)&&a.push(kV.range(r,n)),a.length>t.maxMatches))return Z$.none}}return Z$.set(a)}},{decorations:e=>e.decorations}),CV=XQ.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}});const PV=bP.define({combine:e=>cE(e,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new rU(e),scrollToMatch:e=>XQ.scrollIntoView(e)})});class EV{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||function(e){try{return new RegExp(e,hV),!0}catch(e){return!1}}(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(e,t)=>"n"==t?"\n":"r"==t?"\r":"t"==t?"\t":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new MV(this):new IV(this)}getCursor(e,t=0,i){let r=e.doc?e:lE.create({doc:e});return null==i&&(i=r.doc.length),this.regexp?QV(this,r,t,i):AV(this,r,t,i)}}class $V{constructor(e){this.spec=e}}function AV(e,t,i,r){return new cV(t.doc,e.unquoted,i,r,e.caseSensitive?void 0:e=>e.toLowerCase(),e.wholeWord?function(e,t){return(i,r,n,o)=>((o>i||o+n.length<r)&&(o=Math.max(0,i-2),n=e.sliceString(o,Math.min(e.length,r+2))),!(t(RV(n,i-o))==nE.Word&&t(DV(n,i-o))==nE.Word||t(DV(n,r-o))==nE.Word&&t(RV(n,r-o))==nE.Word))}(t.doc,t.charCategorizer(t.selection.main.head)):void 0)}class IV extends $V{constructor(e){super(e)}nextMatch(e,t,i){let r=AV(this.spec,e,i,e.doc.length).nextOverlapping();if(r.done){let i=Math.min(e.doc.length,t+this.spec.unquoted.length);r=AV(this.spec,e,0,i).nextOverlapping()}return r.done||r.value.from==t&&r.value.to==i?null:r.value}prevMatchInRange(e,t,i){for(let r=i;;){let i=Math.max(t,r-1e4-this.spec.unquoted.length),n=AV(this.spec,e,i,r),o=null;for(;!n.nextOverlapping().done;)o=n.value;if(o)return o;if(i==t)return null;r-=1e4}}prevMatch(e,t,i){let r=this.prevMatchInRange(e,0,t);return r||(r=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),!r||r.from==t&&r.to==i?null:r}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let i=AV(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=t)return null;r.push(i.value)}return r}highlight(e,t,i,r){let n=AV(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!n.next().done;)r(n.value.from,n.value.to)}}function QV(e,t,i,r){return new uV(t.doc,e.search,{ignoreCase:!e.caseSensitive,test:e.wholeWord?(n=t.charCategorizer(t.selection.main.head),(e,t,i)=>!i[0].length||(n(RV(i.input,i.index))!=nE.Word||n(DV(i.input,i.index))!=nE.Word)&&(n(DV(i.input,i.index+i[0].length))!=nE.Word||n(RV(i.input,i.index+i[0].length))!=nE.Word)):void 0},i,r);var n}function RV(e,t){return e.slice(iP(e,t,!1),t)}function DV(e,t){return e.slice(t,iP(e,t))}class MV extends $V{nextMatch(e,t,i){let r=QV(this.spec,e,i,e.doc.length).next();return r.done&&(r=QV(this.spec,e,0,t).next()),r.done?null:r.value}prevMatchInRange(e,t,i){for(let r=1;;r++){let n=Math.max(t,i-1e4*r),o=QV(this.spec,e,n,i),s=null;for(;!o.next().done;)s=o.value;if(s&&(n==t||s.from>n+10))return s;if(n==t)return null}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(t,i)=>{if("&"==i)return e.match[0];if("$"==i)return"$";for(let t=i.length;t>0;t--){let r=+i.slice(0,t);if(r>0&&r<e.match.length)return e.match[r]+i.slice(t)}return t})}matchAll(e,t){let i=QV(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=t)return null;r.push(i.value)}return r}highlight(e,t,i,r){let n=QV(this.spec,e,Math.max(0,t-250),Math.min(i+250,e.doc.length));for(;!n.next().done;)r(n.value.from,n.value.to)}}const NV=GP.define(),LV=GP.define(),zV=CP.define({create:e=>new VV(HV(e).create(),null),update(e,t){for(let i of t.effects)i.is(NV)?e=new VV(i.value.create(),e.panel):i.is(LV)&&(e=new VV(e.query,i.value?GV:null));return e},provide:e=>lD.from(e,e=>e.panel)});class VV{constructor(e,t){this.query=e,this.panel=t}}const UV=Z$.mark({class:"cm-searchMatch"}),qV=Z$.mark({class:"cm-searchMatch cm-searchMatch-selected"}),XV=VA.fromClass(class{constructor(e){this.view=e,this.decorations=this.highlight(e.state.field(zV))}update(e){let t=e.state.field(zV);(t!=e.startState.field(zV)||e.docChanged||e.selectionSet||e.viewportChanged)&&(this.decorations=this.highlight(t))}highlight({query:e,panel:t}){if(!t||!e.spec.valid)return Z$.none;let{view:i}=this,r=new mE;for(let t=0,n=i.visibleRanges,o=n.length;t<o;t++){let{from:s,to:a}=n[t];for(;t<o-1&&a>n[t+1].from-500;)a=n[++t].to;e.highlight(i.state,s,a,(e,t)=>{let n=i.state.selection.ranges.some(i=>i.from==e&&i.to==t);r.add(e,t,n?qV:UV)})}return r.finish()}},{decorations:e=>e.decorations});function ZV(e){return t=>{let i=t.state.field(zV,!1);return i&&i.query.spec.valid?e(t,i):eU(t)}}const BV=ZV((e,{query:t})=>{let{to:i}=e.state.selection.main,r=t.nextMatch(e.state,i,i);if(!r)return!1;let n=vP.single(r.from,r.to),o=e.state.facet(PV);return e.dispatch({selection:n,effects:[aU(e,r),o.scrollToMatch(n.main,e)],userEvent:"select.search"}),JV(e),!0}),jV=ZV((e,{query:t})=>{let{state:i}=e,{from:r}=i.selection.main,n=t.prevMatch(i,r,r);if(!n)return!1;let o=vP.single(n.from,n.to),s=e.state.facet(PV);return e.dispatch({selection:o,effects:[aU(e,n),s.scrollToMatch(o.main,e)],userEvent:"select.search"}),JV(e),!0}),FV=ZV((e,{query:t})=>{let i=t.matchAll(e.state,1e3);return!(!i||!i.length)&&(e.dispatch({selection:vP.create(i.map(e=>vP.range(e.from,e.to))),userEvent:"select.search.matches"}),!0)}),WV=ZV((e,{query:t})=>{let{state:i}=e,{from:r,to:n}=i.selection.main;if(i.readOnly)return!1;let o=t.nextMatch(i,r,r);if(!o)return!1;let s,a,l=o,c=[],d=[];l.from==r&&l.to==n&&(a=i.toText(t.getReplacement(l)),c.push({from:l.from,to:l.to,insert:a}),l=t.nextMatch(i,l.from,l.to),d.push(XQ.announce.of(i.phrase("replaced match on line $",i.doc.lineAt(r).number)+".")));let h=e.state.changes(c);return l&&(s=vP.single(l.from,l.to).map(h),d.push(aU(e,l)),d.push(i.facet(PV).scrollToMatch(s.main,e))),e.dispatch({changes:h,selection:s,effects:d,userEvent:"input.replace"}),!0}),YV=ZV((e,{query:t})=>{if(e.state.readOnly)return!1;let i=t.matchAll(e.state,1e9).map(e=>{let{from:i,to:r}=e;return{from:i,to:r,insert:t.getReplacement(e)}});if(!i.length)return!1;let r=e.state.phrase("replaced $ matches",i.length)+".";return e.dispatch({changes:i,effects:XQ.announce.of(r),userEvent:"input.replace.all"}),!0});function GV(e){return e.state.facet(PV).createPanel(e)}function HV(e,t){var i,r,n,o,s;let a=e.selection.main,l=a.empty||a.to>a.from+100?"":e.sliceDoc(a.from,a.to);if(t&&!l)return t;let c=e.facet(PV);return new EV({search:(null!==(i=null==t?void 0:t.literal)&&void 0!==i?i:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:null!==(r=null==t?void 0:t.caseSensitive)&&void 0!==r?r:c.caseSensitive,literal:null!==(n=null==t?void 0:t.literal)&&void 0!==n?n:c.literal,regexp:null!==(o=null==t?void 0:t.regexp)&&void 0!==o?o:c.regexp,wholeWord:null!==(s=null==t?void 0:t.wholeWord)&&void 0!==s?s:c.wholeWord})}function KV(e){let t=nD(e,GV);return t&&t.dom.querySelector("[main-field]")}function JV(e){let t=KV(e);t&&t==e.root.activeElement&&t.select()}const eU=e=>{let t=e.state.field(zV,!1);if(t&&t.panel){let i=KV(e);if(i&&i!=e.root.activeElement){let r=HV(e.state,t.query.spec);r.valid&&e.dispatch({effects:NV.of(r)}),i.focus(),i.select()}}else e.dispatch({effects:[LV.of(!0),t?NV.of(HV(e.state,t.query.spec)):GP.appendConfig.of(cU)]});return!0},tU=e=>{let t=e.state.field(zV,!1);if(!t||!t.panel)return!1;let i=nD(e,GV);return i&&i.dom.contains(e.root.activeElement)&&e.focus(),e.dispatch({effects:LV.of(!1)}),!0},iU=[{key:"Mod-f",run:eU,scope:"editor search-panel"},{key:"F3",run:BV,shift:jV,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:BV,shift:jV,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:tU,scope:"editor search-panel"},{key:"Mod-Shift-l",run:({state:e,dispatch:t})=>{let i=e.selection;if(i.ranges.length>1||i.main.empty)return!1;let{from:r,to:n}=i.main,o=[],s=0;for(let t=new cV(e.doc,e.sliceDoc(r,n));!t.next().done;){if(o.length>1e3)return!1;t.value.from==r&&(s=o.length),o.push(vP.range(t.value.from,t.value.to))}return t(e.update({selection:vP.create(o,s),userEvent:"select.search.matches"})),!0}},{key:"Mod-Alt-g",run:e=>{let t=nD(e,vV);if(!t){let i=[OV.of(!0)];null==e.state.field(yV,!1)&&i.push(GP.appendConfig.of([yV,bV])),e.dispatch({effects:i}),t=nD(e,vV)}return t&&t.dom.querySelector("input").select(),!0}},{key:"Mod-d",run:({state:e,dispatch:t})=>{let{ranges:i}=e.selection;if(i.some(e=>e.from===e.to))return(({state:e,dispatch:t})=>{let{selection:i}=e,r=vP.create(i.ranges.map(t=>e.wordAt(t.head)||vP.cursor(t.head)),i.mainIndex);return!r.eq(i)&&(t(e.update({selection:r})),!0)})({state:e,dispatch:t});let r=e.sliceDoc(i[0].from,i[0].to);if(e.selection.ranges.some(t=>e.sliceDoc(t.from,t.to)!=r))return!1;let n=function(e,t){let{main:i,ranges:r}=e.selection,n=e.wordAt(i.head),o=n&&n.from==i.from&&n.to==i.to;for(let i=!1,n=new cV(e.doc,t,r[r.length-1].to);;){if(n.next(),!n.done){if(i&&r.some(e=>e.from==n.value.from))continue;if(o){let t=e.wordAt(n.value.from);if(!t||t.from!=n.value.from||t.to!=n.value.to)continue}return n.value}if(i)return null;n=new cV(e.doc,t,0,Math.max(0,r[r.length-1].from-1)),i=!0}}(e,r);return!!n&&(t(e.update({selection:e.selection.addRange(vP.range(n.from,n.to),!1),effects:XQ.scrollIntoView(n.to)})),!0)},preventDefault:!0}];class rU{constructor(e){this.view=e;let t=this.query=e.state.field(zV).query.spec;function i(e,t,i){return VE("button",{class:"cm-button",name:e,onclick:t,type:"button"},i)}this.commit=this.commit.bind(this),this.searchField=VE("input",{value:t.search,placeholder:nU(e,"Find"),"aria-label":nU(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=VE("input",{value:t.replace,placeholder:nU(e,"Replace"),"aria-label":nU(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=VE("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=VE("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=VE("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit}),this.dom=VE("div",{onkeydown:e=>this.keydown(e),class:"cm-search"},[this.searchField,i("next",()=>BV(e),[nU(e,"next")]),i("prev",()=>jV(e),[nU(e,"previous")]),i("select",()=>FV(e),[nU(e,"all")]),VE("label",null,[this.caseField,nU(e,"match case")]),VE("label",null,[this.reField,nU(e,"regexp")]),VE("label",null,[this.wordField,nU(e,"by word")]),...e.state.readOnly?[]:[VE("br"),this.replaceField,i("replace",()=>WV(e),[nU(e,"replace")]),i("replaceAll",()=>YV(e),[nU(e,"replace all")])],VE("button",{name:"close",onclick:()=>tU(e),"aria-label":nU(e,"close"),type:"button"},[""])])}commit(){let e=new EV({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:NV.of(e)}))}keydown(e){var t,i,r;t=this.view,i=e,r="search-panel",rR(JQ(t.state),i,t,r)?e.preventDefault():13==e.keyCode&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?jV:BV)(this.view)):13==e.keyCode&&e.target==this.replaceField&&(e.preventDefault(),WV(this.view))}update(e){for(let t of e.transactions)for(let e of t.effects)e.is(NV)&&!e.value.eq(this.query)&&this.setQuery(e.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(PV).top}}function nU(e,t){return e.state.phrase(t)}const oU=30,sU=/[\s\.,:;?!]/;function aU(e,{from:t,to:i}){let r=e.state.doc.lineAt(t),n=e.state.doc.lineAt(i).to,o=Math.max(r.from,t-oU),s=Math.min(n,i+oU),a=e.state.sliceDoc(o,s);if(o!=r.from)for(let e=0;e<oU;e++)if(!sU.test(a[e+1])&&sU.test(a[e])){a=a.slice(e);break}if(s!=n)for(let e=a.length-1;e>a.length-oU;e--)if(!sU.test(a[e-1])&&sU.test(a[e])){a=a.slice(0,e);break}return XQ.announce.of(`${e.state.phrase("current match")}. ${a} ${e.state.phrase("on line")} ${r.number}.`)}const lU=XQ.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),cU=[zV,QP.low(XV),lU];class dU{constructor(e,t,i,r){this.state=e,this.pos=t,this.explicit=i,this.view=r,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=oN(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),r=t.text.slice(i-t.from,this.pos-t.from),n=r.search(mU(e,!1));return n<0?null:{from:i+n,to:this.pos,text:r.slice(n)}}get aborted(){return null==this.abortListeners}addEventListener(e,t,i){"abort"==e&&this.abortListeners&&(this.abortListeners.push(t),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function hU(e){let t=Object.keys(e).join(""),i=/\w/.test(t);return i&&(t=t.replace(/\w/g,"")),`[${i?"\\w":""}${t.replace(/[^\w\s]/g,"\\$&")}]`}function uU(e){let t=e.map(e=>"string"==typeof e?{label:e}:e),[i,r]=t.every(e=>/^\w+$/.test(e.label))?[/\w*$/,/\w+$/]:function(e){let t=Object.create(null),i=Object.create(null);for(let{label:r}of e){t[r[0]]=!0;for(let e=1;e<r.length;e++)i[r[e]]=!0}let r=hU(t)+hU(i)+"*$";return[new RegExp("^"+r),new RegExp(r)]}(t);return e=>{let n=e.matchBefore(r);return n||e.explicit?{from:n?n.from:e.pos,options:t,validFor:i}:null}}class pU{constructor(e,t,i,r){this.completion=e,this.source=t,this.match=i,this.score=r}}function fU(e){return e.selection.main.from}function mU(e,t){var i;let{source:r}=e,n=t&&"^"!=r[0],o="$"!=r[r.length-1];return n||o?new RegExp(`${n?"^":""}(?:${r})${o?"$":""}`,null!==(i=e.flags)&&void 0!==i?i:e.ignoreCase?"i":""):e}const gU=FP.define();function vU(e,t,i,r){let{main:n}=e.selection,o=i-n.from,s=r-n.from;return{...e.changeByRange(a=>{if(a!=n&&i!=r&&e.sliceDoc(a.from+o,a.from+s)!=e.sliceDoc(i,r))return{range:a};let l=e.toText(t);return{changes:{from:a.from+o,to:r==n.from?a.to:a.from+s,insert:l},range:vP.cursor(a.from+o+l.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const OU=new WeakMap;function yU(e){if(!Array.isArray(e))return e;let t=OU.get(e);return t||OU.set(e,t=uU(e)),t}const bU=GP.define(),xU=GP.define();class wU{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let i=rP(e,t),r=oP(i);this.chars.push(i);let n=e.slice(t,t+r),o=n.toUpperCase();this.folded.push(rP(o==n?n.toLowerCase():o,0)),t+=r}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(0==this.pattern.length)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:i,any:r,precise:n,byWord:o}=this;if(1==t.length){let r=rP(e,0),n=oP(r),o=n==e.length?0:-100;if(r==t[0]);else{if(r!=i[0])return null;o+=-200}return this.ret(o,[0,n])}let s=e.indexOf(this.pattern);if(0==s)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=t.length,l=0;if(s<0){for(let n=0,o=Math.min(e.length,200);n<o&&l<a;){let o=rP(e,n);o!=t[l]&&o!=i[l]||(r[l++]=n),n+=oP(o)}if(l<a)return null}let c=0,d=0,h=!1,u=0,p=-1,f=-1,m=/[a-z]/.test(e),g=!0;for(let r=0,l=Math.min(e.length,200),v=0;r<l&&d<a;){let l=rP(e,r);s<0&&(c<a&&l==t[c]&&(n[c++]=r),u<a&&(l==t[u]||l==i[u]?(0==u&&(p=r),f=r+1,u++):u=0));let O,y=l<255?l>=48&&l<=57||l>=97&&l<=122?2:l>=65&&l<=90?1:0:(O=nP(l))!=O.toLowerCase()?1:O!=O.toUpperCase()?2:0;(!r||1==y&&m||0==v&&0!=y)&&(t[d]==l||i[d]==l&&(h=!0)?o[d++]=r:o.length&&(g=!1)),v=y,r+=oP(l)}return d==a&&0==o[0]&&g?this.result((h?-200:0)-100,o,e):u==a&&0==p?this.ret(-200-e.length+(f==e.length?0:-100),[0,f]):s>-1?this.ret(-700-e.length,[s,s+this.pattern.length]):u==a?this.ret(-900-e.length,[p,f]):d==a?this.result((h?-200:0)-100-700+(g?0:-1100),o,e):2==t.length?null:this.result((r[0]?-700:0)-200-1100,r,e)}result(e,t,i){let r=[],n=0;for(let e of t){let t=e+(this.astral?oP(rP(i,e)):1);n&&r[n-1]==e?r[n-1]=t:(r[n++]=e,r[n++]=t)}return this.ret(e-i.length,r)}}class kU{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),i=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return null==i?null:(this.matched=[0,t.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const SU=bP.define({combine:e=>cE(e,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:TU,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>i=>_U(e(i),t(i)),optionClass:(e,t)=>i=>_U(e(i),t(i)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})});function _U(e,t){return e?t?e+" "+t:e:t}function TU(e,t,i,r,n,o){let s,a,l=e.textDirection==iA.RTL,c=l,d=!1,h="top",u=t.left-n.left,p=n.right-t.right,f=r.right-r.left,m=r.bottom-r.top;if(c&&u<Math.min(f,p)?c=!1:!c&&p<Math.min(f,u)&&(c=!0),f<=(c?u:p))s=Math.max(n.top,Math.min(i.top,n.bottom-m))-t.top,a=Math.min(400,c?u:p);else{d=!0,a=Math.min(400,(l?t.right:n.right-t.left)-30);let e=n.bottom-t.bottom;e>=m||e>t.top?s=i.bottom-t.top:(h="bottom",s=t.bottom-i.top)}return{style:`${h}: ${s/((t.bottom-t.top)/o.offsetHeight)}px; max-width: ${a/((t.right-t.left)/o.offsetWidth)}px`,class:"cm-completionInfo-"+(d?l?"left-narrow":"right-narrow":c?"left":"right")}}function CU(e,t,i){if(e<=i)return{from:0,to:e};if(t<0&&(t=0),t<=e>>1){let e=Math.floor(t/i);return{from:e*i,to:(e+1)*i}}let r=Math.floor((e-t)/i);return{from:e-(r+1)*i,to:e-r*i}}class PU{constructor(e,t,i){this.view=e,this.stateField=t,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:e=>this.placeInfo(e),key:this},this.space=null,this.currentClass="";let r=e.state.field(t),{options:n,selected:o}=r.open,s=e.state.facet(SU);this.optionContent=function(e){let t=e.addToOptions.slice();return e.icons&&t.push({render(e){let t=document.createElement("div");return t.classList.add("cm-completionIcon"),e.type&&t.classList.add(...e.type.split(/\s+/g).map(e=>"cm-completionIcon-"+e)),t.setAttribute("aria-hidden","true"),t},position:20}),t.push({render(e,t,i,r){let n=document.createElement("span");n.className="cm-completionLabel";let o=e.displayLabel||e.label,s=0;for(let e=0;e<r.length;){let t=r[e++],i=r[e++];t>s&&n.appendChild(document.createTextNode(o.slice(s,t)));let a=n.appendChild(document.createElement("span"));a.appendChild(document.createTextNode(o.slice(t,i))),a.className="cm-completionMatchedText",s=i}return s<o.length&&n.appendChild(document.createTextNode(o.slice(s))),n},position:50},{render(e){if(!e.detail)return null;let t=document.createElement("span");return t.className="cm-completionDetail",t.textContent=e.detail,t},position:80}),t.sort((e,t)=>e.position-t.position).map(e=>e.render)}(s),this.optionClass=s.optionClass,this.tooltipClass=s.tooltipClass,this.range=CU(n.length,o,s.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",i=>{let{options:r}=e.state.field(t).open;for(let t,n=i.target;n&&n!=this.dom;n=n.parentNode)if("LI"==n.nodeName&&(t=/-(\d+)$/.exec(n.id))&&+t[1]<r.length)return this.applyCompletion(e,r[+t[1]]),void i.preventDefault()}),this.dom.addEventListener("focusout",t=>{let i=e.state.field(this.stateField,!1);i&&i.tooltip&&e.state.facet(SU).closeOnBlur&&t.relatedTarget!=e.contentDOM&&e.dispatch({effects:xU.of(null)})}),this.showOptions(n,r.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let i=e.state.field(this.stateField),r=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=r){let{options:n,selected:o,disabled:s}=i.open;r.open&&r.open.options==n||(this.range=CU(n.length,o,e.state.facet(SU).maxRenderedOptions),this.showOptions(n,i.id)),this.updateSel(),s!=(null===(t=r.open)||void 0===t?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!s)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let e of this.currentClass.split(" "))e&&this.dom.classList.remove(e);for(let e of t.split(" "))e&&this.dom.classList.add(e);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=CU(t.options.length,t.selected,this.view.state.facet(SU).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:i}=t.options[t.selected],{info:r}=i;if(!r)return;let n="string"==typeof r?document.createTextNode(r):r(i);if(!n)return;"then"in n?n.then(t=>{t&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(t,i)}).catch(e=>MA(this.view.state,e,"completion info")):this.addInfoPane(n,i)}}addInfoPane(e,t){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",null!=e.nodeType)i.appendChild(e),this.infoDestroy=null;else{let{dom:t,destroy:r}=e;i.appendChild(t),this.infoDestroy=r||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)"LI"==i.nodeName&&i.id?r==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected"):r--;return t&&function(e,t){let i=e.getBoundingClientRect(),r=t.getBoundingClientRect(),n=i.height/e.offsetHeight;r.top<i.top?e.scrollTop-=(i.top-r.top)/n:r.bottom>i.bottom&&(e.scrollTop+=(r.bottom-i.bottom)/n)}(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),n=this.space;if(!n){let e=this.dom.ownerDocument.documentElement;n={left:0,top:0,right:e.clientWidth,bottom:e.clientHeight}}return r.top>Math.min(n.bottom,t.bottom)-10||r.bottom<Math.max(n.top,t.top)+10?null:this.view.state.facet(SU).positionInfo(this.view,t,r,i,n,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,i){const r=document.createElement("ul");r.id=t,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions")),r.addEventListener("mousedown",e=>{e.target==r&&e.preventDefault()});let n=null;for(let o=i.from;o<i.to;o++){let{completion:s,match:a}=e[o],{section:l}=s;if(l){let e="string"==typeof l?l:l.name;if(e!=n&&(o>i.from||0==i.from))if(n=e,"string"!=typeof l&&l.header)r.appendChild(l.header(l));else{r.appendChild(document.createElement("completion-section")).textContent=e}}const c=r.appendChild(document.createElement("li"));c.id=t+"-"+o,c.setAttribute("role","option");let d=this.optionClass(s);d&&(c.className=d);for(let e of this.optionContent){let t=e(s,this.view.state,this.view,a);t&&c.appendChild(t)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function EU(e,t){return i=>new PU(i,e,t)}function $U(e){return 100*(e.boost||0)+(e.apply?10:0)+(e.info?5:0)+(e.type?1:0)}class AU{constructor(e,t,i,r,n,o){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=r,this.selected=n,this.disabled=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new AU(this.options,DU(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,i,r,n,o){if(r&&!o&&e.some(e=>e.isPending))return r.setDisabled();let s=function(e,t){let i=[],r=null,n=null,o=e=>{i.push(e);let{section:t}=e.completion;if(t){r||(r=[]);let e="string"==typeof t?t:t.name;r.some(t=>t.name==e)||r.push("string"==typeof t?{name:e}:t)}},s=t.facet(SU);for(let r of e)if(r.hasResult()){let e=r.result.getMatch;if(!1===r.result.filter)for(let t of r.result.options)o(new pU(t,r.source,e?e(t):[],1e9-i.length));else{let i,a=t.sliceDoc(r.from,r.to),l=s.filterStrict?new kU(a):new wU(a);for(let t of r.result.options)if(i=l.match(t.label)){let s=t.displayLabel?e?e(t,i.matched):[]:i.matched,a=i.score+(t.boost||0);if(o(new pU(t,r.source,s,a)),"object"==typeof t.section&&"dynamic"===t.section.rank){let{name:e}=t.section;n||(n=Object.create(null)),n[e]=Math.max(a,n[e]||-1e9)}}}}if(r){let e=Object.create(null),t=0,o=(e,t)=>("dynamic"===e.rank&&"dynamic"===t.rank?n[t.name]-n[e.name]:0)||("number"==typeof e.rank?e.rank:1e9)-("number"==typeof t.rank?t.rank:1e9)||(e.name<t.name?-1:1);for(let i of r.sort(o))t-=1e5,e[i.name]=t;for(let t of i){let{section:i}=t.completion;i&&(t.score+=e["string"==typeof i?i:i.name])}}let a=[],l=null,c=s.compareCompletions;for(let e of i.sort((e,t)=>t.score-e.score||c(e.completion,t.completion))){let t=e.completion;!l||l.label!=t.label||l.detail!=t.detail||null!=l.type&&null!=t.type&&l.type!=t.type||l.apply!=t.apply||l.boost!=t.boost?a.push(e):$U(e.completion)>$U(l)&&(a[a.length-1]=e),l=e.completion}return a}(e,t);if(!s.length)return r&&e.some(e=>e.isPending)?r.setDisabled():null;let a=t.facet(SU).selectOnOpen?0:-1;if(r&&r.selected!=a&&-1!=r.selected){let e=r.options[r.selected].completion;for(let t=0;t<s.length;t++)if(s[t].completion==e){a=t;break}}return new AU(s,DU(i,a),{pos:e.reduce((e,t)=>t.hasResult()?Math.min(e,t.from):e,1e8),create:ZU,above:n.aboveCursor},r?r.timestamp:Date.now(),a,!1)}map(e){return new AU(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new AU(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class IU{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new IU(MU,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}update(e){let{state:t}=e,i=t.facet(SU),r=(i.override||t.languageDataAt("autocomplete",fU(t)).map(yU)).map(t=>{let r=this.active.find(e=>e.source==t)||new LU(t,this.active.some(e=>0!=e.state)?1:0);return r.update(e,i)});r.length==this.active.length&&r.every((e,t)=>e==this.active[t])&&(r=this.active);let n=this.open,o=e.effects.some(e=>e.is(VU));n&&e.docChanged&&(n=n.map(e.changes)),e.selection||r.some(t=>t.hasResult()&&e.changes.touchesRange(t.from,t.to))||!function(e,t){if(e==t)return!0;for(let i=0,r=0;;){for(;i<e.length&&!e[i].hasResult();)i++;for(;r<t.length&&!t[r].hasResult();)r++;let n=i==e.length,o=r==t.length;if(n||o)return n==o;if(e[i++].result!=t[r++].result)return!1}}(r,this.active)||o?n=AU.build(r,t,this.id,n,i,o):n&&n.disabled&&!r.some(e=>e.isPending)&&(n=null),!n&&r.every(e=>!e.isPending)&&r.some(e=>e.hasResult())&&(r=r.map(e=>e.hasResult()?new LU(e.source,0):e));for(let t of e.effects)t.is(UU)&&(n=n&&n.setSelected(t.value,this.id));return r==this.active&&n==this.open?this:new IU(r,this.id,n)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?QU:RU}}const QU={"aria-autocomplete":"list"},RU={};function DU(e,t){let i={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":e};return t>-1&&(i["aria-activedescendant"]=e+"-"+t),i}const MU=[];function NU(e,t){if(e.isUserEvent("input.complete")){let i=e.annotation(gU);if(i&&t.activateOnCompletion(i))return 12}let i=e.isUserEvent("input.type");return i&&t.activateOnTyping?5:i?1:e.isUserEvent("delete.backward")?2:e.selection?8:e.docChanged?16:0}class LU{constructor(e,t,i=!1){this.source=e,this.state=t,this.explicit=i}hasResult(){return!1}get isPending(){return 1==this.state}update(e,t){let i=NU(e,t),r=this;(8&i||16&i&&this.touches(e))&&(r=new LU(r.source,0)),4&i&&0==r.state&&(r=new LU(this.source,1)),r=r.updateFor(e,i);for(let t of e.effects)if(t.is(bU))r=new LU(r.source,1,t.value);else if(t.is(xU))r=new LU(r.source,0);else if(t.is(VU))for(let e of t.value)e.source==r.source&&(r=e);return r}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(fU(e.state))}}class zU extends LU{constructor(e,t,i,r,n,o){super(e,3,t),this.limit=i,this.result=r,this.from=n,this.to=o}hasResult(){return!0}updateFor(e,t){var i;if(!(3&t))return this.map(e.changes);let r=this.result;r.map&&!e.changes.empty&&(r=r.map(r,e.changes));let n=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),s=fU(e.state);if(s>o||!r||2&t&&(fU(e.startState)==this.from||s<this.limit))return new LU(this.source,4&t?1:0);let a=e.changes.mapPos(this.limit);return function(e,t,i,r){if(!e)return!1;let n=t.sliceDoc(i,r);return"function"==typeof e?e(n,i,r,t):mU(e,!0).test(n)}(r.validFor,e.state,n,o)?new zU(this.source,this.explicit,a,r,n,o):r.update&&(r=r.update(r,n,o,new dU(e.state,s,!1)))?new zU(this.source,this.explicit,a,r,r.from,null!==(i=r.to)&&void 0!==i?i:fU(e.state)):new LU(this.source,1,this.explicit)}map(e){if(e.empty)return this;return(this.result.map?this.result.map(this.result,e):this.result)?new zU(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new LU(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}const VU=GP.define({map:(e,t)=>e.map(e=>e.map(t))}),UU=GP.define(),qU=CP.define({create:()=>IU.start(),update:(e,t)=>e.update(t),provide:e=>[WR.from(e,e=>e.tooltip),XQ.contentAttributes.from(e,e=>e.attrs)]});function XU(e,t){const i=t.completion.apply||t.completion.label;let r=e.state.field(qU).active.find(e=>e.source==t.source);return r instanceof zU&&("string"==typeof i?e.dispatch({...vU(e.state,i,r.from,r.to),annotations:gU.of(t.completion)}):i(e,t.completion,r.from,r.to),!0)}const ZU=EU(qU,XU);function BU(e,t="option"){return i=>{let r=i.state.field(qU,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<i.state.facet(SU).interactionDelay)return!1;let n,o=1;"page"==t&&(n=tD(i,r.open.tooltip))&&(o=Math.max(2,Math.floor(n.dom.offsetHeight/n.dom.querySelector("li").offsetHeight)-1));let{length:s}=r.open.options,a=r.open.selected>-1?r.open.selected+o*(e?1:-1):e?0:s-1;return a<0?a="page"==t?0:s-1:a>=s&&(a="page"==t?s-1:0),i.dispatch({effects:UU.of(a)}),!0}}const jU=e=>!!e.state.field(qU,!1)&&(e.dispatch({effects:bU.of(!0)}),!0);class FU{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const WU=VA.fromClass(class{constructor(e){this.view=e,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let t of e.state.field(qU).active)t.isPending&&this.startQuery(t)}update(e){let t=e.state.field(qU),i=e.state.facet(SU);if(!e.selectionSet&&!e.docChanged&&e.startState.field(qU)==t)return;let r=e.transactions.some(e=>{let t=NU(e,i);return 8&t||(e.selection||e.docChanged)&&!(3&t)});for(let t=0;t<this.running.length;t++){let i=this.running[t];if(r||i.context.abortOnDocChange&&e.docChanged||i.updates.length+e.transactions.length>50&&Date.now()-i.time>1e3){for(let e of i.context.abortListeners)try{e()}catch(e){MA(this.view.state,e)}i.context.abortListeners=null,this.running.splice(t--,1)}else i.updates.push(...e.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),e.transactions.some(e=>e.effects.some(e=>e.is(bU)))&&(this.pendingStart=!0);let n=this.pendingStart?50:i.activateOnTypingDelay;if(this.debounceUpdate=t.active.some(e=>e.isPending&&!this.running.some(t=>t.active.source==e.source))?setTimeout(()=>this.startUpdate(),n):-1,0!=this.composing)for(let t of e.transactions)t.isUserEvent("input.type")?this.composing=2:2==this.composing&&t.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:e}=this.view,t=e.field(qU);for(let e of t.active)e.isPending&&!this.running.some(t=>t.active.source==e.source)&&this.startQuery(e);this.running.length&&t.open&&t.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(SU).updateSyncTime))}startQuery(e){let{state:t}=this.view,i=fU(t),r=new dU(t,i,e.explicit,this.view),n=new FU(e,r);this.running.push(n),Promise.resolve(e.source(r)).then(e=>{n.context.aborted||(n.done=e||null,this.scheduleAccept())},e=>{this.view.dispatch({effects:xU.of(null)}),MA(this.view.state,e)})}scheduleAccept(){this.running.every(e=>void 0!==e.done)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(SU).updateSyncTime))}accept(){var e;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let t=[],i=this.view.state.facet(SU),r=this.view.state.field(qU);for(let n=0;n<this.running.length;n++){let o=this.running[n];if(void 0===o.done)continue;if(this.running.splice(n--,1),o.done){let r=fU(o.updates.length?o.updates[0].startState:this.view.state),n=Math.min(r,o.done.from+(o.active.explicit?0:1)),s=new zU(o.active.source,o.active.explicit,n,o.done,o.done.from,null!==(e=o.done.to)&&void 0!==e?e:r);for(let e of o.updates)s=s.update(e,i);if(s.hasResult()){t.push(s);continue}}let s=r.active.find(e=>e.source==o.active.source);if(s&&s.isPending)if(null==o.done){let e=new LU(o.active.source,0);for(let t of o.updates)e=e.update(t,i);e.isPending||t.push(e)}else this.startQuery(s)}(t.length||r.open&&r.open.disabled)&&this.view.dispatch({effects:VU.of(t)})}},{eventHandlers:{blur(e){let t=this.view.state.field(qU,!1);if(t&&t.tooltip&&this.view.state.facet(SU).closeOnBlur){let i=t.open&&tD(this.view,t.open.tooltip);i&&i.dom.contains(e.relatedTarget)||setTimeout(()=>this.view.dispatch({effects:xU.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){3==this.composing&&setTimeout(()=>this.view.dispatch({effects:bU.of(!1)}),20),this.composing=0}}}),YU="object"==typeof navigator&&/Win/.test(navigator.platform),GU=QP.highest(XQ.domEventHandlers({keydown(e,t){let i=t.state.field(qU,!1);if(!i||!i.open||i.open.disabled||i.open.selected<0||e.key.length>1||e.ctrlKey&&(!YU||!e.altKey)||e.metaKey)return!1;let r=i.open.options[i.open.selected],n=i.active.find(e=>e.source==r.source),o=r.completion.commitCharacters||n.result.commitCharacters;return o&&o.indexOf(e.key)>-1&&XU(t,r),!1}})),HU=XQ.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class KU{constructor(e,t,i,r){this.field=e,this.line=t,this.from=i,this.to=r}}class JU{constructor(e,t,i){this.field=e,this.from=t,this.to=i}map(e){let t=e.mapPos(this.from,-1,aP.TrackDel),i=e.mapPos(this.to,1,aP.TrackDel);return null==t||null==i?null:new JU(this.field,t,i)}}class eq{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let i=[],r=[t],n=e.doc.lineAt(t),o=/^\s*/.exec(n.text)[0];for(let n of this.lines){if(i.length){let i=o,s=/^\t*/.exec(n)[0].length;for(let t=0;t<s;t++)i+=e.facet(ON);r.push(t+i.length-s),n=i+n.slice(s)}i.push(n),t+=n.length+1}let s=this.fieldPositions.map(e=>new JU(e.field,r[e.line]+e.from,r[e.line]+e.to));return{text:i,ranges:s}}static parse(e){let t,i=[],r=[],n=[];for(let o of e.split(/\r\n?|\n/)){for(;t=/[#$]\{(?:(\d+)(?::([^{}]*))?|((?:\\[{}]|[^{}])*))\}/.exec(o);){let e=t[1]?+t[1]:null,s=t[2]||t[3]||"",a=-1,l=s.replace(/\\[{}]/g,e=>e[1]);for(let t=0;t<i.length;t++)(null!=e?i[t].seq==e:l&&i[t].name==l)&&(a=t);if(a<0){let t=0;for(;t<i.length&&(null==e||null!=i[t].seq&&i[t].seq<e);)t++;i.splice(t,0,{seq:e,name:l}),a=t;for(let e of n)e.field>=a&&e.field++}for(let e of n)if(e.line==r.length&&e.from>t.index){let i=t[2]?3+(t[1]||"").length:2;e.from-=i,e.to-=i}n.push(new KU(a,r.length,t.index,t.index+l.length)),o=o.slice(0,t.index)+s+o.slice(t.index+t[0].length)}o=o.replace(/\\([{}])/g,(e,t,i)=>{for(let e of n)e.line==r.length&&e.from>i&&(e.from--,e.to--);return t}),r.push(o)}return new eq(r,n)}}let tq=Z$.widget({widget:new class extends q${toDOM(){let e=document.createElement("span");return e.className="cm-snippetFieldPosition",e}ignoreEvent(){return!1}}}),iq=Z$.mark({class:"cm-snippetField"});class rq{constructor(e,t){this.ranges=e,this.active=t,this.deco=Z$.set(e.map(e=>(e.from==e.to?tq:iq).range(e.from,e.to)),!0)}map(e){let t=[];for(let i of this.ranges){let r=i.map(e);if(!r)return null;t.push(r)}return new rq(t,this.active)}selectionInsideField(e){return e.ranges.every(e=>this.ranges.some(t=>t.field==this.active&&t.from<=e.from&&t.to>=e.to))}}const nq=GP.define({map:(e,t)=>e&&e.map(t)}),oq=GP.define(),sq=CP.define({create:()=>null,update(e,t){for(let i of t.effects){if(i.is(nq))return i.value;if(i.is(oq)&&e)return new rq(e.ranges,i.value)}return e&&t.docChanged&&(e=e.map(t.changes)),e&&t.selection&&!e.selectionInsideField(t.selection)&&(e=null),e},provide:e=>XQ.decorations.from(e,e=>e?e.deco:Z$.none)});function aq(e,t){return vP.create(e.filter(e=>e.field==t).map(e=>vP.range(e.from,e.to)))}function lq(e){let t=eq.parse(e);return(e,i,r,n)=>{let{text:o,ranges:s}=t.instantiate(e.state,r),{main:a}=e.state.selection,l={changes:{from:r,to:n==a.from?a.to:n,insert:jC.of(o)},scrollIntoView:!0,annotations:i?[gU.of(i),HP.userEvent.of("input.complete")]:void 0};if(s.length&&(l.selection=aq(s,0)),s.some(e=>e.field>0)){let t=new rq(s,0),i=l.effects=[nq.of(t)];void 0===e.state.field(sq,!1)&&i.push(GP.appendConfig.of([sq,uq,fq,HU]))}e.dispatch(e.state.update(l))}}function cq(e){return({state:t,dispatch:i})=>{let r=t.field(sq,!1);if(!r||e<0&&0==r.active)return!1;let n=r.active+e,o=e>0&&!r.ranges.some(t=>t.field==n+e);return i(t.update({selection:aq(r.ranges,n),effects:nq.of(o?null:new rq(r.ranges,n)),scrollIntoView:!0})),!0}}const dq=[{key:"Tab",run:cq(1),shift:cq(-1)},{key:"Escape",run:({state:e,dispatch:t})=>!!e.field(sq,!1)&&(t(e.update({effects:nq.of(null)})),!0)}],hq=bP.define({combine:e=>e.length?e[0]:dq}),uq=QP.highest(HQ.compute([hq],e=>e.facet(hq)));function pq(e,t){return{...t,apply:lq(e)}}const fq=XQ.domEventHandlers({mousedown(e,t){let i,r=t.state.field(sq,!1);if(!r||null==(i=t.posAtCoords({x:e.clientX,y:e.clientY})))return!1;let n=r.ranges.find(e=>e.from<=i&&e.to>=i);return!(!n||n.field==r.active)&&(t.dispatch({selection:aq(r.ranges,n.field),effects:nq.of(r.ranges.some(e=>e.field>n.field)?new rq(r.ranges,n.field):null),scrollIntoView:!0}),!0)}}),mq={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},gq=GP.define({map(e,t){let i=t.mapPos(e,-1,aP.TrackAfter);return i??void 0}}),vq=new class extends dE{};vq.startSide=1,vq.endSide=-1;const Oq=CP.define({create:()=>fE.empty,update(e,t){if(e=e.map(t.changes),t.selection){let i=t.state.doc.lineAt(t.selection.main.head);e=e.update({filter:e=>e>=i.from&&e<=i.to})}for(let i of t.effects)i.is(gq)&&(e=e.update({add:[vq.range(i.value,i.value+1)]}));return e}});const yq="()[]{}<>";function bq(e){for(let t=0;t<16;t+=2)if(yq.charCodeAt(t)==e)return yq.charAt(t+1);return nP(e<128?e:e+1)}function xq(e,t){return e.languageDataAt("closeBrackets",t)[0]||mq}const wq="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),kq=XQ.inputHandler.of((e,t,i,r)=>{if((wq?e.composing:e.compositionStarted)||e.state.readOnly)return!1;let n=e.state.selection.main;if(r.length>2||2==r.length&&1==oP(rP(r,0))||t!=n.from||i!=n.to)return!1;let o=function(e,t){let i=xq(e,e.selection.main.head),r=i.brackets||mq.brackets;for(let n of r){let o=bq(rP(n,0));if(t==n)return o==n?Eq(e,n,r.indexOf(n+n+n)>-1,i):Cq(e,n,o,i.before||mq.before);if(t==o&&_q(e,e.selection.main.from))return Pq(e,n,o)}return null}(e.state,r);return!!o&&(e.dispatch(o),!0)}),Sq=[{key:"Backspace",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=xq(e,e.selection.main.head).brackets||mq.brackets,r=null,n=e.changeByRange(t=>{if(t.empty){let r=function(e,t){let i=e.sliceString(t-2,t);return oP(rP(i,0))==i.length?i:i.slice(1)}(e.doc,t.head);for(let n of i)if(n==r&&Tq(e.doc,t.head)==bq(rP(n,0)))return{changes:{from:t.head-n.length,to:t.head+n.length},range:vP.cursor(t.head-n.length)}}return{range:r=t}});return r||t(e.update(n,{scrollIntoView:!0,userEvent:"delete.backward"})),!r}}];function _q(e,t){let i=!1;return e.field(Oq).between(0,e.doc.length,e=>{e==t&&(i=!0)}),i}function Tq(e,t){let i=e.sliceString(t,t+2);return i.slice(0,oP(rP(i,0)))}function Cq(e,t,i,r){let n=null,o=e.changeByRange(o=>{if(!o.empty)return{changes:[{insert:t,from:o.from},{insert:i,from:o.to}],effects:gq.of(o.to+t.length),range:vP.range(o.anchor+t.length,o.head+t.length)};let s=Tq(e.doc,o.head);return!s||/\s/.test(s)||r.indexOf(s)>-1?{changes:{insert:t+i,from:o.head},effects:gq.of(o.head+t.length),range:vP.cursor(o.head+t.length)}:{range:n=o}});return n?null:e.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function Pq(e,t,i){let r=null,n=e.changeByRange(t=>t.empty&&Tq(e.doc,t.head)==i?{changes:{from:t.head,to:t.head+i.length,insert:i},range:vP.cursor(t.head+i.length)}:r={range:t});return r?null:e.update(n,{scrollIntoView:!0,userEvent:"input.type"})}function Eq(e,t,i,r){let n=r.stringPrefixes||mq.stringPrefixes,o=null,s=e.changeByRange(r=>{if(!r.empty)return{changes:[{insert:t,from:r.from},{insert:t,from:r.to}],effects:gq.of(r.to+t.length),range:vP.range(r.anchor+t.length,r.head+t.length)};let s,a=r.head,l=Tq(e.doc,a);if(l==t){if($q(e,a))return{changes:{insert:t+t,from:a},effects:gq.of(a+t.length),range:vP.cursor(a+t.length)};if(_q(e,a)){let r=i&&e.sliceDoc(a,a+3*t.length)==t+t+t?t+t+t:t;return{changes:{from:a,to:a+r.length,insert:r},range:vP.cursor(a+r.length)}}}else{if(i&&e.sliceDoc(a-2*t.length,a)==t+t&&(s=Aq(e,a-2*t.length,n))>-1&&$q(e,s))return{changes:{insert:t+t+t+t,from:a},effects:gq.of(a+t.length),range:vP.cursor(a+t.length)};if(e.charCategorizer(a)(l)!=nE.Word&&Aq(e,a,n)>-1&&!function(e,t,i,r){let n=oN(e).resolveInner(t,-1),o=r.reduce((e,t)=>Math.max(e,t.length),0);for(let s=0;s<5;s++){let s=e.sliceDoc(n.from,Math.min(n.to,n.from+i.length+o)),a=s.indexOf(i);if(!a||a>-1&&r.indexOf(s.slice(0,a))>-1){let t=n.firstChild;for(;t&&t.from==n.from&&t.to-t.from>i.length+a;){if(e.sliceDoc(t.to-i.length,t.to)==i)return!1;t=t.firstChild}return!0}let l=n.to==t&&n.parent;if(!l)break;n=l}return!1}(e,a,t,n))return{changes:{insert:t+t,from:a},effects:gq.of(a+t.length),range:vP.cursor(a+t.length)}}return{range:o=r}});return o?null:e.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function $q(e,t){let i=oN(e).resolveInner(t+1);return i.parent&&i.from==t}function Aq(e,t,i){let r=e.charCategorizer(t);if(r(e.sliceDoc(t-1,t))!=nE.Word)return t;for(let n of i){let i=t-n.length;if(e.sliceDoc(i,t)==n&&r(e.sliceDoc(i-1,i))!=nE.Word)return i}return-1}function Iq(e={}){return[GU,qU,SU.of(e),WU,Rq,HU]}const Qq=[{key:"Ctrl-Space",run:jU},{mac:"Alt-`",run:jU},{mac:"Alt-i",run:jU},{key:"Escape",run:e=>{let t=e.state.field(qU,!1);return!(!t||!t.active.some(e=>0!=e.state))&&(e.dispatch({effects:xU.of(null)}),!0)}},{key:"ArrowDown",run:BU(!0)},{key:"ArrowUp",run:BU(!1)},{key:"PageDown",run:BU(!0,"page")},{key:"PageUp",run:BU(!1,"page")},{key:"Enter",run:e=>{let t=e.state.field(qU,!1);return!(e.state.readOnly||!t||!t.open||t.open.selected<0||t.open.disabled||Date.now()-t.open.timestamp<e.state.facet(SU).interactionDelay)&&XU(e,t.open.options[t.open.selected])}}],Rq=QP.highest(HQ.computeN([SU],e=>e.facet(SU).defaultKeymap?[Qq]:[]));class Dq{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}}class Mq{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}static init(e,t,i){let r=i.facet(Fq).markerFilter;r&&(e=r(e,i));let n=e.slice().sort((e,t)=>e.from-t.from||e.to-t.to),o=new mE,s=[],a=0;for(let e=0;;){let t,r,l=e==n.length?null:n[e];if(!l&&!s.length)break;for(s.length?(t=a,r=s.reduce((e,t)=>Math.min(e,t.to),l&&l.from>t?l.from:1e8)):(t=l.from,r=l.to,s.push(l),e++);e<n.length;){let i=n[e];if(i.from!=t||!(i.to>i.from||i.to==t)){r=Math.min(i.from,r);break}s.push(i),e++,r=Math.min(i.to,r)}let c=rX(s);if(s.some(e=>e.from==e.to||e.from==e.to-1&&i.doc.lineAt(e.from).to==e.from))o.add(t,t,Z$.widget({widget:new Hq(c),diagnostics:s.slice()}));else{let e=s.reduce((e,t)=>t.markClass?e+" "+t.markClass:e,"");o.add(t,r,Z$.mark({class:"cm-lintRange cm-lintRange-"+c+e,diagnostics:s.slice(),inclusiveEnd:s.some(e=>e.to>r)}))}a=r;for(let e=0;e<s.length;e++)s[e].to<=a&&s.splice(e--,1)}let l=o.finish();return new Mq(l,t,Nq(l))}}function Nq(e,t=null,i=0){let r=null;return e.between(i,1e9,(e,i,{spec:n})=>{if(!(t&&n.diagnostics.indexOf(t)<0))if(r){if(n.diagnostics.indexOf(r.diagnostic)<0)return!1;r=new Dq(r.from,i,r.diagnostic)}else r=new Dq(e,i,t||n.diagnostics[0])}),r}const Lq=GP.define(),zq=GP.define(),Vq=GP.define(),Uq=CP.define({create:()=>new Mq(Z$.none,null,null),update(e,t){if(t.docChanged&&e.diagnostics.size){let i=e.diagnostics.map(t.changes),r=null,n=e.panel;if(e.selected){let n=t.changes.mapPos(e.selected.from,1);r=Nq(i,e.selected.diagnostic,n)||Nq(i,null,n)}!i.size&&n&&t.state.facet(Fq).autoPanel&&(n=null),e=new Mq(i,n,r)}for(let i of t.effects)if(i.is(Lq)){let r=t.state.facet(Fq).autoPanel?i.value.length?Jq.open:null:e.panel;e=Mq.init(i.value,r,t.state)}else i.is(zq)?e=new Mq(e.diagnostics,i.value?Jq.open:null,e.selected):i.is(Vq)&&(e=new Mq(e.diagnostics,e.panel,i.value));return e},provide:e=>[lD.from(e,e=>e.panel),XQ.decorations.from(e,e=>e.diagnostics)]}),qq=Z$.mark({class:"cm-lintRange cm-lintRange-active"});function Xq(e,t,i){let r,{diagnostics:n}=e.state.field(Uq),o=-1,s=-1;n.between(t-(i<0?1:0),t+(i>0?1:0),(e,n,{spec:a})=>{if(t>=e&&t<=n&&(e==n||(t>e||i>0)&&(t<n||i<0)))return r=a.diagnostics,o=e,s=n,!1});let a=e.state.facet(Fq).tooltipFilter;return r&&a&&(r=a(r,e.state)),r?{pos:o,end:s,above:e.state.doc.lineAt(o).to<s,create:()=>({dom:Zq(e,r)})}:null}function Zq(e,t){return VE("ul",{class:"cm-tooltip-lint"},t.map(t=>Gq(e,t,!1)))}const Bq=e=>{let t=e.state.field(Uq,!1);return!(!t||!t.panel)&&(e.dispatch({effects:zq.of(!1)}),!0)},jq=[{key:"Mod-Shift-m",run:e=>{let t=e.state.field(Uq,!1);var i,r;t&&t.panel||e.dispatch({effects:(i=e.state,r=[zq.of(!0)],i.field(Uq,!1)?r:r.concat(GP.appendConfig.of(nX)))});let n=nD(e,Jq.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},preventDefault:!0},{key:"F8",run:e=>{let t=e.state.field(Uq,!1);if(!t)return!1;let i=e.state.selection.main,r=t.diagnostics.iter(i.to+1);return!(!r.value&&(r=t.diagnostics.iter(0),!r.value||r.from==i.from&&r.to==i.to))&&(e.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)}}],Fq=bP.define({combine:e=>({sources:e.map(e=>e.source).filter(e=>null!=e),...cE(e.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:Wq,tooltipFilter:Wq,needsRefresh:(e,t)=>e?t?i=>e(i)||t(i):e:t,hideOn:(e,t)=>e?t?(i,r,n)=>e(i,r,n)||t(i,r,n):e:t,autoPanel:(e,t)=>e||t})})});function Wq(e,t){return e?t?(i,r)=>t(e(i,r),r):e:t}function Yq(e){let t=[];if(e)e:for(let{name:i}of e){for(let e=0;e<i.length;e++){let r=i[e];if(/[a-zA-Z]/.test(r)&&!t.some(e=>e.toLowerCase()==r.toLowerCase())){t.push(r);continue e}}t.push("")}return t}function Gq(e,t,i){var r;let n=i?Yq(t.actions):[];return VE("li",{class:"cm-diagnostic cm-diagnostic-"+t.severity},VE("span",{class:"cm-diagnosticText"},t.renderMessage?t.renderMessage(e):t.message),null===(r=t.actions)||void 0===r?void 0:r.map((i,r)=>{let o=!1,s=r=>{if(r.preventDefault(),o)return;o=!0;let n=Nq(e.state.field(Uq).diagnostics,t);n&&i.apply(e,n.from,n.to)},{name:a}=i,l=n[r]?a.indexOf(n[r]):-1,c=l<0?a:[a.slice(0,l),VE("u",a.slice(l,l+1)),a.slice(l+1)];return VE("button",{type:"button",class:"cm-diagnosticAction"+(i.markClass?" "+i.markClass:""),onclick:s,onmousedown:s,"aria-label":` Action: ${a}${l<0?"":` (access key "${n[r]})"`}.`},c)}),t.source&&VE("div",{class:"cm-diagnosticSource"},t.source))}class Hq extends q${constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return VE("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class Kq{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(4294967295*Math.random()).toString(16),this.dom=Gq(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Jq{constructor(e){this.view=e,this.items=[];this.list=VE("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t=>{if(27==t.keyCode)Bq(this.view),this.view.focus();else if(38==t.keyCode||33==t.keyCode)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(40==t.keyCode||34==t.keyCode)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(36==t.keyCode)this.moveSelection(0);else if(35==t.keyCode)this.moveSelection(this.items.length-1);else if(13==t.keyCode)this.view.focus();else{if(!(t.keyCode>=65&&t.keyCode<=90&&this.selectedIndex>=0))return;{let{diagnostic:i}=this.items[this.selectedIndex],r=Yq(i.actions);for(let n=0;n<r.length;n++)if(r[n].toUpperCase().charCodeAt(0)==t.keyCode){let t=Nq(this.view.state.field(Uq).diagnostics,i);t&&i.actions[n].apply(e,t.from,t.to)}}}t.preventDefault()},onclick:e=>{for(let t=0;t<this.items.length;t++)this.items[t].dom.contains(e.target)&&this.moveSelection(t)}}),this.dom=VE("div",{class:"cm-panel-lint"},this.list,VE("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Bq(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(Uq).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(Uq),i=0,r=!1,n=null,o=new Set;for(e.between(0,this.view.state.doc.length,(e,s,{spec:a})=>{for(let e of a.diagnostics){if(o.has(e))continue;o.add(e);let s,a=-1;for(let t=i;t<this.items.length;t++)if(this.items[t].diagnostic==e){a=t;break}a<0?(s=new Kq(this.view,e),this.items.splice(i,0,s),r=!0):(s=this.items[a],a>i&&(this.items.splice(i,a-i),r=!0)),t&&s.diagnostic==t.diagnostic?s.dom.hasAttribute("aria-selected")||(s.dom.setAttribute("aria-selected","true"),n=s):s.dom.hasAttribute("aria-selected")&&s.dom.removeAttribute("aria-selected"),i++}});i<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();0==this.items.length&&(this.items.push(new Kq(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),n?(this.list.setAttribute("aria-activedescendant",n.id),this.view.requestMeasure({key:this,read:()=>({sel:n.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:e,panel:t})=>{let i=t.height/this.list.offsetHeight;e.top<t.top?this.list.scrollTop-=(t.top-e.top)/i:e.bottom>t.bottom&&(this.list.scrollTop+=(e.bottom-t.bottom)/i)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function t(){let t=e;e=t.nextSibling,t.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=Nq(this.view.state.field(Uq).diagnostics,this.items[e].diagnostic);t&&this.view.dispatch({selection:{anchor:t.from,head:t.to},scrollIntoView:!0,effects:Vq.of(t)})}static open(e){return new Jq(e)}}function eX(e){return function(e,t='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${t}>${encodeURIComponent(e)}</svg>')`}(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${e}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const tX=XQ.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:eX("#d11")},".cm-lintRange-warning":{backgroundImage:eX("orange")},".cm-lintRange-info":{backgroundImage:eX("#999")},".cm-lintRange-hint":{backgroundImage:eX("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function iX(e){return"error"==e?4:"warning"==e?3:"info"==e?2:1}function rX(e){let t="hint",i=1;for(let r of e){let e=iX(r.severity);e>i&&(i=e,t=r.severity)}return t}const nX=[Uq,XQ.decorations.compute([Uq],e=>{let{selected:t,panel:i}=e.field(Uq);return t&&i&&t.from!=t.to?Z$.set([qq.range(t.from,t.to)]):Z$.none}),eD(Xq,{hideOn:function(e,t){let i=t.pos,r=t.end||i,n=e.state.facet(Fq).hideOn(e,i,r);if(null!=n)return n;let o=e.startState.doc.lineAt(t.pos);return!(!e.effects.some(e=>e.is(Lq))&&!e.changes.touchesRange(o.from,Math.max(o.to,r)))}}),tX],oX=(()=>[ED(),ID,CR(),jL(),iL(),hR(),[OR,yR],lE.allowMultipleSelections.of(!0),lE.transactionFilter.of(e=>{if(!e.docChanged||!e.isUserEvent("input.type")&&!e.isUserEvent("input.complete"))return e;let t=e.startState.languageDataAt("indentOnInput",e.startState.selection.main.head);if(!t.length)return e;let i=e.newDoc,{head:r}=e.newSelection.main,n=i.lineAt(r);if(r>n.from+200)return e;let o=i.sliceString(n.from,r);if(!t.some(e=>e.test(o)))return e;let{state:s}=e,a=-1,l=[];for(let{head:e}of s.selection.ranges){let t=s.doc.lineAt(e);if(t.from==a)continue;a=t.from;let i=xN(s,t.from);if(null==i)continue;let r=/^\s*/.exec(t.text)[0],n=bN(s,i);r!=n&&l.push({from:t.from,to:t.from+r.length,insert:n})}return l.length?[e,{changes:l,sequential:!0}]:e}),lL(hL,{fallback:!0}),bL(),[kq,Oq],Iq(),XQ.mouseSelectionStyle.of((e,t)=>(e=>e.altKey&&0==e.button)(t)?DR(e,t):null),LR(),IR,[CV,TV],HQ.of([...Sq,...aV,...iU,...cz,...FN,...Qq,...jq])])();class sX{static create(e,t,i,r,n){return new sX(e,t,i,r+(r<<8)+e+(t<<4)|0,n,[],[])}constructor(e,t,i,r,n,o,s){this.type=e,this.value=t,this.from=i,this.hash=r,this.end=n,this.children=o,this.positions=s,this.hashProp=[[MD.contextHash,r]]}addChild(e,t){e.prop(MD.contextHash)!=this.hash&&(e=new ZD(e.type,e.children,e.positions,e.length,this.hashProp)),this.children.push(e),this.positions.push(t)}toTree(e,t=this.end){let i=this.children.length-1;return i>=0&&(t=Math.max(t,this.positions[i]+this.children[i].length+this.from)),new ZD(e.types[this.type],this.children,this.positions,t-this.from).balance({makeTree:(e,t,i)=>new ZD(zD.none,e,t,i,this.hashProp)})}}var aX;!function(e){e[e.Document=1]="Document",e[e.CodeBlock=2]="CodeBlock",e[e.FencedCode=3]="FencedCode",e[e.Blockquote=4]="Blockquote",e[e.HorizontalRule=5]="HorizontalRule",e[e.BulletList=6]="BulletList",e[e.OrderedList=7]="OrderedList",e[e.ListItem=8]="ListItem",e[e.ATXHeading1=9]="ATXHeading1",e[e.ATXHeading2=10]="ATXHeading2",e[e.ATXHeading3=11]="ATXHeading3",e[e.ATXHeading4=12]="ATXHeading4",e[e.ATXHeading5=13]="ATXHeading5",e[e.ATXHeading6=14]="ATXHeading6",e[e.SetextHeading1=15]="SetextHeading1",e[e.SetextHeading2=16]="SetextHeading2",e[e.HTMLBlock=17]="HTMLBlock",e[e.LinkReference=18]="LinkReference",e[e.Paragraph=19]="Paragraph",e[e.CommentBlock=20]="CommentBlock",e[e.ProcessingInstructionBlock=21]="ProcessingInstructionBlock",e[e.Escape=22]="Escape",e[e.Entity=23]="Entity",e[e.HardBreak=24]="HardBreak",e[e.Emphasis=25]="Emphasis",e[e.StrongEmphasis=26]="StrongEmphasis",e[e.Link=27]="Link",e[e.Image=28]="Image",e[e.InlineCode=29]="InlineCode",e[e.HTMLTag=30]="HTMLTag",e[e.Comment=31]="Comment",e[e.ProcessingInstruction=32]="ProcessingInstruction",e[e.Autolink=33]="Autolink",e[e.HeaderMark=34]="HeaderMark",e[e.QuoteMark=35]="QuoteMark",e[e.ListMark=36]="ListMark",e[e.LinkMark=37]="LinkMark",e[e.EmphasisMark=38]="EmphasisMark",e[e.CodeMark=39]="CodeMark",e[e.CodeText=40]="CodeText",e[e.CodeInfo=41]="CodeInfo",e[e.LinkTitle=42]="LinkTitle",e[e.LinkLabel=43]="LinkLabel",e[e.URL=44]="URL"}(aX||(aX={}));class lX{constructor(e,t){this.start=e,this.content=t,this.marks=[],this.parsers=[]}}class cX{constructor(){this.text="",this.baseIndent=0,this.basePos=0,this.depth=0,this.markers=[],this.pos=0,this.indent=0,this.next=-1}forward(){this.basePos>this.pos&&this.forwardInner()}forwardInner(){let e=this.skipSpace(this.basePos);this.indent=this.countIndent(e,this.pos,this.indent),this.pos=e,this.next=e==this.text.length?-1:this.text.charCodeAt(e)}skipSpace(e){return pX(this.text,e)}reset(e){for(this.text=e,this.baseIndent=this.basePos=this.pos=this.indent=0,this.forwardInner(),this.depth=1;this.markers.length;)this.markers.pop()}moveBase(e){this.basePos=e,this.baseIndent=this.countIndent(e,this.pos,this.indent)}moveBaseColumn(e){this.baseIndent=e,this.basePos=this.findColumn(e)}addMarker(e){this.markers.push(e)}countIndent(e,t=0,i=0){for(let r=t;r<e;r++)i+=9==this.text.charCodeAt(r)?4-i%4:1;return i}findColumn(e){let t=0;for(let i=0;t<this.text.length&&i<e;t++)i+=9==this.text.charCodeAt(t)?4-i%4:1;return t}scrub(){if(!this.baseIndent)return this.text;let e="";for(let t=0;t<this.basePos;t++)e+=" ";return e+this.text.slice(this.basePos)}}function dX(e,t,i){if(i.pos==i.text.length||e!=t.block&&i.indent>=t.stack[i.depth+1].value+i.baseIndent)return!0;if(i.indent>=i.baseIndent+4)return!1;let r=(e.type==aX.OrderedList?bX:yX)(i,t,!1);return r>0&&(e.type!=aX.BulletList||vX(i,t,!1)<0)&&i.text.charCodeAt(i.pos+r-1)==e.value}const hX={[aX.Blockquote]:(e,t,i)=>62==i.next&&(i.markers.push(WX(aX.QuoteMark,t.lineStart+i.pos,t.lineStart+i.pos+1)),i.moveBase(i.pos+(uX(i.text.charCodeAt(i.pos+1))?2:1)),e.end=t.lineStart+i.text.length,!0),[aX.ListItem]:(e,t,i)=>!(i.indent<i.baseIndent+e.value&&i.next>-1)&&(i.moveBaseColumn(i.baseIndent+e.value),!0),[aX.OrderedList]:dX,[aX.BulletList]:dX,[aX.Document]:()=>!0};function uX(e){return 32==e||9==e||10==e||13==e}function pX(e,t=0){for(;t<e.length&&uX(e.charCodeAt(t));)t++;return t}function fX(e,t,i){for(;t>i&&uX(e.charCodeAt(t-1));)t--;return t}function mX(e){if(96!=e.next&&126!=e.next)return-1;let t=e.pos+1;for(;t<e.text.length&&e.text.charCodeAt(t)==e.next;)t++;if(t<e.pos+3)return-1;if(96==e.next)for(let i=t;i<e.text.length;i++)if(96==e.text.charCodeAt(i))return-1;return t}function gX(e){return 62!=e.next?-1:32==e.text.charCodeAt(e.pos+1)?2:1}function vX(e,t,i){if(42!=e.next&&45!=e.next&&95!=e.next)return-1;let r=1;for(let t=e.pos+1;t<e.text.length;t++){let i=e.text.charCodeAt(t);if(i==e.next)r++;else if(!uX(i))return-1}return i&&45==e.next&&wX(e)>-1&&e.depth==t.stack.length&&t.parser.leafBlockParsers.indexOf(RX.SetextHeading)>-1||r<3?-1:1}function OX(e,t){for(let i=e.stack.length-1;i>=0;i--)if(e.stack[i].type==t)return!0;return!1}function yX(e,t,i){return 45!=e.next&&43!=e.next&&42!=e.next||e.pos!=e.text.length-1&&!uX(e.text.charCodeAt(e.pos+1))||!(!i||OX(t,aX.BulletList)||e.skipSpace(e.pos+2)<e.text.length)?-1:1}function bX(e,t,i){let r=e.pos,n=e.next;for(;n>=48&&n<=57;){if(r++,r==e.text.length)return-1;n=e.text.charCodeAt(r)}return r==e.pos||r>e.pos+9||46!=n&&41!=n||r<e.text.length-1&&!uX(e.text.charCodeAt(r+1))||i&&!OX(t,aX.OrderedList)&&(e.skipSpace(r+1)==e.text.length||r>e.pos+1||49!=e.next)?-1:r+1-e.pos}function xX(e){if(35!=e.next)return-1;let t=e.pos+1;for(;t<e.text.length&&35==e.text.charCodeAt(t);)t++;if(t<e.text.length&&32!=e.text.charCodeAt(t))return-1;let i=t-e.pos;return i>6?-1:i}function wX(e){if(45!=e.next&&61!=e.next||e.indent>=e.baseIndent+4)return-1;let t=e.pos+1;for(;t<e.text.length&&e.text.charCodeAt(t)==e.next;)t++;let i=t;for(;t<e.text.length&&uX(e.text.charCodeAt(t));)t++;return t==e.text.length?i:-1}const kX=/^[ \t]*$/,SX=/-->/,_X=/\?>/,TX=[[/^<(?:script|pre|style)(?:\s|>|$)/i,/<\/(?:script|pre|style)>/i],[/^\s*<!--/,SX],[/^\s*<\?/,_X],[/^\s*<![A-Z]/,/>/],[/^\s*<!\[CDATA\[/,/\]\]>/],[/^\s*<\/?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h1|h2|h3|h4|h5|h6|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|\/?>|$)/i,kX],[/^\s*(?:<\/[a-z][\w-]*\s*>|<[a-z][\w-]*(\s+[a-z:_][\w-.]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*>)\s*$/i,kX]];function CX(e,t,i){if(60!=e.next)return-1;let r=e.text.slice(e.pos);for(let e=0,t=TX.length-(i?1:0);e<t;e++)if(TX[e][0].test(r))return e;return-1}function PX(e,t){let i=e.countIndent(t,e.pos,e.indent),r=e.countIndent(e.skipSpace(t),t,i);return r>=i+5?i+1:r}function EX(e,t,i){let r=e.length-1;r>=0&&e[r].to==t&&e[r].type==aX.CodeText?e[r].to=i:e.push(WX(aX.CodeText,t,i))}const $X={LinkReference:void 0,IndentedCode(e,t){let i=t.baseIndent+4;if(t.indent<i)return!1;let r=t.findColumn(i),n=e.lineStart+r,o=e.lineStart+t.text.length,s=[],a=[];for(EX(s,n,o);e.nextLine()&&t.depth>=e.stack.length;)if(t.pos==t.text.length){EX(a,e.lineStart-1,e.lineStart);for(let e of t.markers)a.push(e)}else{if(t.indent<i)break;{if(a.length){for(let e of a)e.type==aX.CodeText?EX(s,e.from,e.to):s.push(e);a=[]}EX(s,e.lineStart-1,e.lineStart);for(let e of t.markers)s.push(e);o=e.lineStart+t.text.length;let i=e.lineStart+t.findColumn(t.baseIndent+4);i<o&&EX(s,i,o)}}return a.length&&(a=a.filter(e=>e.type!=aX.CodeText),a.length&&(t.markers=a.concat(t.markers))),e.addNode(e.buffer.writeElements(s,-n).finish(aX.CodeBlock,o-n),n),!0},FencedCode(e,t){let i=mX(t);if(i<0)return!1;let r=e.lineStart+t.pos,n=t.next,o=i-t.pos,s=t.skipSpace(i),a=fX(t.text,t.text.length,s),l=[WX(aX.CodeMark,r,r+o)];s<a&&l.push(WX(aX.CodeInfo,e.lineStart+s,e.lineStart+a));for(let i=!0;e.nextLine()&&t.depth>=e.stack.length;i=!1){let r=t.pos;if(t.indent-t.baseIndent<4)for(;r<t.text.length&&t.text.charCodeAt(r)==n;)r++;if(r-t.pos>=o&&t.skipSpace(r)==t.text.length){for(let e of t.markers)l.push(e);l.push(WX(aX.CodeMark,e.lineStart+t.pos,e.lineStart+r)),e.nextLine();break}{i||EX(l,e.lineStart-1,e.lineStart);for(let e of t.markers)l.push(e);let r=e.lineStart+t.basePos,n=e.lineStart+t.text.length;r<n&&EX(l,r,n)}}return e.addNode(e.buffer.writeElements(l,-r).finish(aX.FencedCode,e.prevLineEnd()-r),r),!0},Blockquote(e,t){let i=gX(t);return!(i<0)&&(e.startContext(aX.Blockquote,t.pos),e.addNode(aX.QuoteMark,e.lineStart+t.pos,e.lineStart+t.pos+1),t.moveBase(t.pos+i),null)},HorizontalRule(e,t){if(vX(t,e,!1)<0)return!1;let i=e.lineStart+t.pos;return e.nextLine(),e.addNode(aX.HorizontalRule,i),!0},BulletList(e,t){let i=yX(t,e,!1);if(i<0)return!1;e.block.type!=aX.BulletList&&e.startContext(aX.BulletList,t.basePos,t.next);let r=PX(t,t.pos+1);return e.startContext(aX.ListItem,t.basePos,r-t.baseIndent),e.addNode(aX.ListMark,e.lineStart+t.pos,e.lineStart+t.pos+i),t.moveBaseColumn(r),null},OrderedList(e,t){let i=bX(t,e,!1);if(i<0)return!1;e.block.type!=aX.OrderedList&&e.startContext(aX.OrderedList,t.basePos,t.text.charCodeAt(t.pos+i-1));let r=PX(t,t.pos+i);return e.startContext(aX.ListItem,t.basePos,r-t.baseIndent),e.addNode(aX.ListMark,e.lineStart+t.pos,e.lineStart+t.pos+i),t.moveBaseColumn(r),null},ATXHeading(e,t){let i=xX(t);if(i<0)return!1;let r=t.pos,n=e.lineStart+r,o=fX(t.text,t.text.length,r),s=o;for(;s>r&&t.text.charCodeAt(s-1)==t.next;)s--;s!=o&&s!=r&&uX(t.text.charCodeAt(s-1))||(s=t.text.length);let a=e.buffer.write(aX.HeaderMark,0,i).writeElements(e.parser.parseInline(t.text.slice(r+i+1,s),n+i+1),-n);s<t.text.length&&a.write(aX.HeaderMark,s-r,o-r);let l=a.finish(aX.ATXHeading1-1+i,t.text.length-r);return e.nextLine(),e.addNode(l,n),!0},HTMLBlock(e,t){let i=CX(t,0,!1);if(i<0)return!1;let r=e.lineStart+t.pos,n=TX[i][1],o=[],s=n!=kX;for(;!n.test(t.text)&&e.nextLine();){if(t.depth<e.stack.length){s=!1;break}for(let e of t.markers)o.push(e)}s&&e.nextLine();let a=n==SX?aX.CommentBlock:n==_X?aX.ProcessingInstructionBlock:aX.HTMLBlock,l=e.prevLineEnd();return e.addNode(e.buffer.writeElements(o,-r).finish(a,l-r),r),!0},SetextHeading:void 0};class AX{constructor(e){this.stage=0,this.elts=[],this.pos=0,this.start=e.start,this.advance(e.content)}nextLine(e,t,i){if(-1==this.stage)return!1;let r=i.content+"\n"+t.scrub(),n=this.advance(r);return n>-1&&n<r.length&&this.complete(e,i,n)}finish(e,t){return(2==this.stage||3==this.stage)&&pX(t.content,this.pos)==t.content.length&&this.complete(e,t,t.content.length)}complete(e,t,i){return e.addLeafElement(t,WX(aX.LinkReference,this.start,this.start+i,this.elts)),!0}nextStage(e){return e?(this.pos=e.to-this.start,this.elts.push(e),this.stage++,!0):(!1===e&&(this.stage=-1),!1)}advance(e){for(;;){if(-1==this.stage)return-1;if(0==this.stage){if(!this.nextStage(sZ(e,this.pos,this.start,!0)))return-1;if(58!=e.charCodeAt(this.pos))return this.stage=-1;this.elts.push(WX(aX.LinkMark,this.pos+this.start,this.pos+this.start+1)),this.pos++}else{if(1!=this.stage){if(2==this.stage){let t=pX(e,this.pos),i=0;if(t>this.pos){let r=oZ(e,t,this.start);if(r){let t=IX(e,r.to-this.start);t>0&&(this.nextStage(r),i=t)}}return i||(i=IX(e,this.pos)),i>0&&i<e.length?i:-1}return IX(e,this.pos)}if(!this.nextStage(nZ(e,pX(e,this.pos),this.start)))return-1}}}}function IX(e,t){for(;t<e.length;t++){let i=e.charCodeAt(t);if(10==i)break;if(!uX(i))return-1}return t}class QX{nextLine(e,t,i){let r=t.depth<e.stack.length?-1:wX(t),n=t.next;if(r<0)return!1;let o=WX(aX.HeaderMark,e.lineStart+t.pos,e.lineStart+r);return e.nextLine(),e.addLeafElement(i,WX(61==n?aX.SetextHeading1:aX.SetextHeading2,i.start,e.prevLineEnd(),[...e.parser.parseInline(i.content,i.start),o])),!0}finish(){return!1}}const RX={LinkReference:(e,t)=>91==t.content.charCodeAt(0)?new AX(t):null,SetextHeading:()=>new QX},DX=[(e,t)=>xX(t)>=0,(e,t)=>mX(t)>=0,(e,t)=>gX(t)>=0,(e,t)=>yX(t,e,!0)>=0,(e,t)=>bX(t,e,!0)>=0,(e,t)=>vX(t,e,!0)>=0,(e,t)=>CX(t,0,!0)>=0],MX={text:"",end:0};class NX{constructor(e,t,i,r){this.parser=e,this.input=t,this.ranges=r,this.line=new cX,this.atEnd=!1,this.reusePlaceholders=new Map,this.stoppedAt=null,this.rangeI=0,this.to=r[r.length-1].to,this.lineStart=this.absoluteLineStart=this.absoluteLineEnd=r[0].from,this.block=sX.create(aX.Document,0,this.lineStart,0,0),this.stack=[this.block],this.fragments=i.length?new dZ(i,t):null,this.readLine()}get parsedPos(){return this.absoluteLineStart}advance(){if(null!=this.stoppedAt&&this.absoluteLineStart>this.stoppedAt)return this.finish();let{line:e}=this;for(;;){for(let t=0;;){let i=e.depth<this.stack.length?this.stack[this.stack.length-1]:null;for(;t<e.markers.length&&(!i||e.markers[t].from<i.end);){let i=e.markers[t++];this.addNode(i.type,i.from,i.to)}if(!i)break;this.finishContext()}if(e.pos<e.text.length)break;if(!this.nextLine())return this.finish()}if(this.fragments&&this.reuseFragment(e.basePos))return null;e:for(;;){for(let t of this.parser.blockParsers)if(t){let i=t(this,e);if(0!=i){if(1==i)return null;e.forward();continue e}}break}let t=new lX(this.lineStart+e.pos,e.text.slice(e.pos));for(let e of this.parser.leafBlockParsers)if(e){let i=e(this,t);i&&t.parsers.push(i)}e:for(;this.nextLine()&&e.pos!=e.text.length;){if(e.indent<e.baseIndent+4)for(let i of this.parser.endLeafBlock)if(i(this,e,t))break e;for(let i of t.parsers)if(i.nextLine(this,e,t))return null;t.content+="\n"+e.scrub();for(let i of e.markers)t.marks.push(i)}return this.finishLeaf(t),null}stopAt(e){if(null!=this.stoppedAt&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}reuseFragment(e){if(!this.fragments.moveTo(this.absoluteLineStart+e,this.absoluteLineStart)||!this.fragments.matches(this.block.hash))return!1;let t=this.fragments.takeNodes(this);return!!t&&(this.absoluteLineStart+=t,this.lineStart=hZ(this.absoluteLineStart,this.ranges),this.moveRangeI(),this.absoluteLineStart<this.to?(this.lineStart++,this.absoluteLineStart++,this.readLine()):(this.atEnd=!0,this.readLine()),!0)}get depth(){return this.stack.length}parentType(e=this.depth-1){return this.parser.nodeSet.types[this.stack[e].type]}nextLine(){return this.lineStart+=this.line.text.length,this.absoluteLineEnd>=this.to?(this.absoluteLineStart=this.absoluteLineEnd,this.atEnd=!0,this.readLine(),!1):(this.lineStart++,this.absoluteLineStart=this.absoluteLineEnd+1,this.moveRangeI(),this.readLine(),!0)}peekLine(){return this.scanLine(this.absoluteLineEnd+1).text}moveRangeI(){for(;this.rangeI<this.ranges.length-1&&this.absoluteLineStart>=this.ranges[this.rangeI].to;)this.rangeI++,this.absoluteLineStart=Math.max(this.absoluteLineStart,this.ranges[this.rangeI].from)}scanLine(e){let t=MX;if(t.end=e,e>=this.to)t.text="";else if(t.text=this.lineChunkAt(e),t.end+=t.text.length,this.ranges.length>1){let e=this.absoluteLineStart,i=this.rangeI;for(;this.ranges[i].to<t.end;){i++;let r=this.ranges[i].from,n=this.lineChunkAt(r);t.end=r+n.length,t.text=t.text.slice(0,this.ranges[i-1].to-e)+n,e=t.end-t.text.length}}return t}readLine(){let{line:e}=this,{text:t,end:i}=this.scanLine(this.absoluteLineStart);for(this.absoluteLineEnd=i,e.reset(t);e.depth<this.stack.length;e.depth++){let t=this.stack[e.depth],i=this.parser.skipContextMarkup[t.type];if(!i)throw new Error("Unhandled block context "+aX[t.type]);if(!i(t,this,e))break;e.forward()}}lineChunkAt(e){let t,i=this.input.chunk(e);if(this.input.lineChunks)t="\n"==i?"":i;else{let e=i.indexOf("\n");t=e<0?i:i.slice(0,e)}return e+t.length>this.to?t.slice(0,this.to-e):t}prevLineEnd(){return this.atEnd?this.lineStart:this.lineStart-1}startContext(e,t,i=0){this.block=sX.create(e,i,this.lineStart+t,this.block.hash,this.lineStart+this.line.text.length),this.stack.push(this.block)}startComposite(e,t,i=0){this.startContext(this.parser.getNodeType(e),t,i)}addNode(e,t,i){"number"==typeof e&&(e=new ZD(this.parser.nodeSet.types[e],ZX,ZX,(null!=i?i:this.prevLineEnd())-t)),this.block.addChild(e,t-this.block.from)}addElement(e){this.block.addChild(e.toTree(this.parser.nodeSet),e.from-this.block.from)}addLeafElement(e,t){this.addNode(this.buffer.writeElements(lZ(t.children,e.marks),-t.from).finish(t.type,t.to-t.from),t.from)}finishContext(){let e=this.stack.pop(),t=this.stack[this.stack.length-1];t.addChild(e.toTree(this.parser.nodeSet),e.from-t.from),this.block=t}finish(){for(;this.stack.length>1;)this.finishContext();return this.addGaps(this.block.toTree(this.parser.nodeSet,this.lineStart))}addGaps(e){return this.ranges.length>1?LX(this.ranges,0,e.topNode,this.ranges[0].from,this.reusePlaceholders):e}finishLeaf(e){for(let t of e.parsers)if(t.finish(this,e))return;let t=lZ(this.parser.parseInline(e.content,e.start),e.marks);this.addNode(this.buffer.writeElements(t,-e.start).finish(aX.Paragraph,e.content.length),e.start)}elt(e,t,i,r){return"string"==typeof e?WX(this.parser.getNodeType(e),t,i,r):new FX(e,t)}get buffer(){return new BX(this.parser.nodeSet)}}function LX(e,t,i,r,n){let o=e[t].to,s=[],a=[],l=i.from+r;function c(i,n){for(;n?i>=o:i>o;){let n=e[t+1].from-o;r+=n,i+=n,t++,o=e[t].to}}for(let d=i.firstChild;d;d=d.nextSibling){c(d.from+r,!0);let i,h=d.from+r,u=n.get(d.tree);u?i=u:d.to+r>o?(i=LX(e,t,d,r,n),c(d.to+r,!1)):i=d.toTree(),s.push(i),a.push(h-l)}return c(i.to+r,!1),new ZD(i.type,s,a,i.to+r-l,i.tree?i.tree.propValues:void 0)}class zX extends dM{constructor(e,t,i,r,n,o,s,a,l){super(),this.nodeSet=e,this.blockParsers=t,this.leafBlockParsers=i,this.blockNames=r,this.endLeafBlock=n,this.skipContextMarkup=o,this.inlineParsers=s,this.inlineNames=a,this.wrappers=l,this.nodeTypes=Object.create(null);for(let t of e.types)this.nodeTypes[t.name]=t.id}createParse(e,t,i){let r=new NX(this,e,t,i);for(let n of this.wrappers)r=n(r,e,t,i);return r}configure(e){let t=UX(e);if(!t)return this;let{nodeSet:i,skipContextMarkup:r}=this,n=this.blockParsers.slice(),o=this.leafBlockParsers.slice(),s=this.blockNames.slice(),a=this.inlineParsers.slice(),l=this.inlineNames.slice(),c=this.endLeafBlock.slice(),d=this.wrappers;if(VX(t.defineNodes)){r=Object.assign({},r);let e,n=i.types.slice();for(let i of t.defineNodes){let{name:t,block:o,composite:s,style:a}="string"==typeof i?{name:i}:i;if(n.some(e=>e.name==t))continue;s&&(r[n.length]=(e,t,i)=>s(t,i,e.value));let l=n.length,c=s?["Block","BlockContext"]:o?l>=aX.ATXHeading1&&l<=aX.SetextHeading2?["Block","LeafBlock","Heading"]:["Block","LeafBlock"]:void 0;n.push(zD.define({id:l,name:t,props:c&&[[MD.group,c]]})),a&&(e||(e={}),Array.isArray(a)||a instanceof CM?e[t]=a:Object.assign(e,a))}i=new VD(n),e&&(i=i.extend($M(e)))}if(VX(t.props)&&(i=i.extend(...t.props)),VX(t.remove))for(let e of t.remove){let t=this.blockNames.indexOf(e),i=this.inlineNames.indexOf(e);t>-1&&(n[t]=o[t]=void 0),i>-1&&(a[i]=void 0)}if(VX(t.parseBlock))for(let e of t.parseBlock){let t=s.indexOf(e.name);if(t>-1)n[t]=e.parse,o[t]=e.leaf;else{let t=e.before?qX(s,e.before):e.after?qX(s,e.after)+1:s.length-1;n.splice(t,0,e.parse),o.splice(t,0,e.leaf),s.splice(t,0,e.name)}e.endLeaf&&c.push(e.endLeaf)}if(VX(t.parseInline))for(let e of t.parseInline){let t=l.indexOf(e.name);if(t>-1)a[t]=e.parse;else{let t=e.before?qX(l,e.before):e.after?qX(l,e.after)+1:l.length-1;a.splice(t,0,e.parse),l.splice(t,0,e.name)}}return t.wrap&&(d=d.concat(t.wrap)),new zX(i,n,o,s,c,r,a,l,d)}getNodeType(e){let t=this.nodeTypes[e];if(null==t)throw new RangeError(`Unknown node type '${e}'`);return t}parseInline(e,t){let i=new aZ(this,e,t);e:for(let e=t;e<i.end;){let t=i.char(e);for(let r of this.inlineParsers)if(r){let n=r(i,t,e);if(n>=0){e=n;continue e}}e++}return i.resolveMarkers(0)}}function VX(e){return null!=e&&e.length>0}function UX(e){if(!Array.isArray(e))return e;if(0==e.length)return null;let t=UX(e[0]);if(1==e.length)return t;let i=UX(e.slice(1));if(!i||!t)return t||i;let r=(e,t)=>(e||ZX).concat(t||ZX),n=t.wrap,o=i.wrap;return{props:r(t.props,i.props),defineNodes:r(t.defineNodes,i.defineNodes),parseBlock:r(t.parseBlock,i.parseBlock),parseInline:r(t.parseInline,i.parseInline),remove:r(t.remove,i.remove),wrap:n?o?(e,t,i,r)=>n(o(e,t,i,r),t,i,r):n:o}}function qX(e,t){let i=e.indexOf(t);if(i<0)throw new RangeError(`Position specified relative to unknown parser ${t}`);return i}let XX=[zD.none];for(let e,t=1;e=aX[t];t++)XX[t]=zD.define({id:t,name:e,props:t>=aX.Escape?[]:[[MD.group,t in hX?["Block","BlockContext"]:["Block","LeafBlock"]]],top:"Document"==e});const ZX=[];let BX=class{constructor(e){this.nodeSet=e,this.content=[],this.nodes=[]}write(e,t,i,r=0){return this.content.push(e,t,i,4+4*r),this}writeElements(e,t=0){for(let i of e)i.writeTo(this,t);return this}finish(e,t){return ZD.build({buffer:this.content,nodeSet:this.nodeSet,reused:this.nodes,topID:e,length:t})}},jX=class{constructor(e,t,i,r=ZX){this.type=e,this.from=t,this.to=i,this.children=r}writeTo(e,t){let i=e.content.length;e.writeElements(this.children,t),e.content.push(this.type,this.from+t,this.to+t,e.content.length+4-i)}toTree(e){return new BX(e).writeElements(this.children,-this.from).finish(this.type,this.to-this.from)}};class FX{constructor(e,t){this.tree=e,this.from=t}get to(){return this.from+this.tree.length}get type(){return this.tree.type.id}get children(){return ZX}writeTo(e,t){e.nodes.push(this.tree),e.content.push(e.nodes.length-1,this.from+t,this.to+t,-1)}toTree(){return this.tree}}function WX(e,t,i,r){return new jX(e,t,i,r)}const YX={resolve:"Emphasis",mark:"EmphasisMark"},GX={resolve:"Emphasis",mark:"EmphasisMark"},HX={},KX={};class JX{constructor(e,t,i,r){this.type=e,this.from=t,this.to=i,this.side=r}}const eZ="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~";let tZ=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\u2010-\u2027]/;try{tZ=new RegExp("[\\p{S}|\\p{P}]","u")}catch(F){}const iZ={Escape(e,t,i){if(92!=t||i==e.end-1)return-1;let r=e.char(i+1);for(let t=0;t<32;t++)if(eZ.charCodeAt(t)==r)return e.append(WX(aX.Escape,i,i+2));return-1},Entity(e,t,i){if(38!=t)return-1;let r=/^(?:#\d+|#x[a-f\d]+|\w+);/i.exec(e.slice(i+1,i+31));return r?e.append(WX(aX.Entity,i,i+1+r[0].length)):-1},InlineCode(e,t,i){if(96!=t||i&&96==e.char(i-1))return-1;let r=i+1;for(;r<e.end&&96==e.char(r);)r++;let n=r-i,o=0;for(;r<e.end;r++)if(96==e.char(r)){if(o++,o==n&&96!=e.char(r+1))return e.append(WX(aX.InlineCode,i,r+1,[WX(aX.CodeMark,i,i+n),WX(aX.CodeMark,r+1-n,r+1)]))}else o=0;return-1},HTMLTag(e,t,i){if(60!=t||i==e.end-1)return-1;let r=e.slice(i+1,e.end),n=/^(?:[a-z][-\w+.]+:[^\s>]+|[a-z\d.!#$%&'*+/=?^_`{|}~-]+@[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?(?:\.[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?)*)>/i.exec(r);if(n)return e.append(WX(aX.Autolink,i,i+1+n[0].length,[WX(aX.LinkMark,i,i+1),WX(aX.URL,i+1,i+n[0].length),WX(aX.LinkMark,i+n[0].length,i+1+n[0].length)]));let o=/^!--[^>](?:-[^-]|[^-])*?-->/i.exec(r);if(o)return e.append(WX(aX.Comment,i,i+1+o[0].length));let s=/^\?[^]*?\?>/.exec(r);if(s)return e.append(WX(aX.ProcessingInstruction,i,i+1+s[0].length));let a=/^(?:![A-Z][^]*?>|!\[CDATA\[[^]*?\]\]>|\/\s*[a-zA-Z][\w-]*\s*>|\s*[a-zA-Z][\w-]*(\s+[a-zA-Z:_][\w-.:]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*(\/\s*)?>)/.exec(r);return a?e.append(WX(aX.HTMLTag,i,i+1+a[0].length)):-1},Emphasis(e,t,i){if(95!=t&&42!=t)return-1;let r=i+1;for(;e.char(r)==t;)r++;let n=e.slice(i-1,i),o=e.slice(r,r+1),s=tZ.test(n),a=tZ.test(o),l=/\s|^$/.test(n),c=/\s|^$/.test(o),d=!c&&(!a||l||s),h=!l&&(!s||c||a),u=d&&(42==t||!h||s),p=h&&(42==t||!d||a);return e.append(new JX(95==t?YX:GX,i,r,(u?1:0)|(p?2:0)))},HardBreak(e,t,i){if(92==t&&10==e.char(i+1))return e.append(WX(aX.HardBreak,i,i+2));if(32==t){let t=i+1;for(;32==e.char(t);)t++;if(10==e.char(t)&&t>=i+2)return e.append(WX(aX.HardBreak,i,t+1))}return-1},Link:(e,t,i)=>91==t?e.append(new JX(HX,i,i+1,1)):-1,Image:(e,t,i)=>33==t&&91==e.char(i+1)?e.append(new JX(KX,i,i+2,1)):-1,LinkEnd(e,t,i){if(93!=t)return-1;for(let t=e.parts.length-1;t>=0;t--){let r=e.parts[t];if(r instanceof JX&&(r.type==HX||r.type==KX)){if(!r.side||e.skipSpace(r.to)==i&&!/[(\[]/.test(e.slice(i+1,i+2)))return e.parts[t]=null,-1;let n=e.takeContent(t),o=e.parts[t]=rZ(e,n,r.type==HX?aX.Link:aX.Image,r.from,i+1);if(r.type==HX)for(let i=0;i<t;i++){let t=e.parts[i];t instanceof JX&&t.type==HX&&(t.side=0)}return o.to}}return-1}};function rZ(e,t,i,r,n){let{text:o}=e,s=e.char(n),a=n;if(t.unshift(WX(aX.LinkMark,r,r+(i==aX.Image?2:1))),t.push(WX(aX.LinkMark,n-1,n)),40==s){let i,r=e.skipSpace(n+1),s=nZ(o,r-e.offset,e.offset);s&&(r=e.skipSpace(s.to),r!=s.to&&(i=oZ(o,r-e.offset,e.offset),i&&(r=e.skipSpace(i.to)))),41==e.char(r)&&(t.push(WX(aX.LinkMark,n,n+1)),a=r+1,s&&t.push(s),i&&t.push(i),t.push(WX(aX.LinkMark,r,a)))}else if(91==s){let i=sZ(o,n-e.offset,e.offset,!1);i&&(t.push(i),a=i.to)}return WX(i,r,a,t)}function nZ(e,t,i){if(60==e.charCodeAt(t)){for(let r=t+1;r<e.length;r++){let n=e.charCodeAt(r);if(62==n)return WX(aX.URL,t+i,r+1+i);if(60==n||10==n)return!1}return null}{let r=0,n=t;for(let t=!1;n<e.length;n++){let i=e.charCodeAt(n);if(uX(i))break;if(t)t=!1;else if(40==i)r++;else if(41==i){if(!r)break;r--}else 92==i&&(t=!0)}return n>t?WX(aX.URL,t+i,n+i):n==e.length&&null}}function oZ(e,t,i){let r=e.charCodeAt(t);if(39!=r&&34!=r&&40!=r)return!1;let n=40==r?41:r;for(let r=t+1,o=!1;r<e.length;r++){let s=e.charCodeAt(r);if(o)o=!1;else{if(s==n)return WX(aX.LinkTitle,t+i,r+1+i);92==s&&(o=!0)}}return null}function sZ(e,t,i,r){for(let n=!1,o=t+1,s=Math.min(e.length,o+999);o<s;o++){let s=e.charCodeAt(o);if(n)n=!1;else{if(93==s)return!r&&WX(aX.LinkLabel,t+i,o+1+i);if(r&&!uX(s)&&(r=!1),91==s)return!1;92==s&&(n=!0)}}return null}class aZ{constructor(e,t,i){this.parser=e,this.text=t,this.offset=i,this.parts=[]}char(e){return e>=this.end?-1:this.text.charCodeAt(e-this.offset)}get end(){return this.offset+this.text.length}slice(e,t){return this.text.slice(e-this.offset,t-this.offset)}append(e){return this.parts.push(e),e.to}addDelimiter(e,t,i,r,n){return this.append(new JX(e,t,i,(r?1:0)|(n?2:0)))}get hasOpenLink(){for(let e=this.parts.length-1;e>=0;e--){let t=this.parts[e];if(t instanceof JX&&(t.type==HX||t.type==KX))return!0}return!1}addElement(e){return this.append(e)}resolveMarkers(e){for(let t=e;t<this.parts.length;t++){let i=this.parts[t];if(!(i instanceof JX&&i.type.resolve&&2&i.side))continue;let r,n=i.type==YX||i.type==GX,o=i.to-i.from,s=t-1;for(;s>=e;s--){let e=this.parts[s];if(e instanceof JX&&1&e.side&&e.type==i.type&&!(n&&(1&i.side||2&e.side)&&(e.to-e.from+o)%3==0&&((e.to-e.from)%3||o%3))){r=e;break}}if(!r)continue;let a=i.type.resolve,l=[],c=r.from,d=i.to;if(n){let e=Math.min(2,r.to-r.from,o);c=r.to-e,d=i.from+e,a=1==e?"Emphasis":"StrongEmphasis"}r.type.mark&&l.push(this.elt(r.type.mark,c,r.to));for(let e=s+1;e<t;e++)this.parts[e]instanceof jX&&l.push(this.parts[e]),this.parts[e]=null;i.type.mark&&l.push(this.elt(i.type.mark,i.from,d));let h=this.elt(a,c,d,l);this.parts[s]=n&&r.from!=c?new JX(r.type,r.from,c,r.side):null,(this.parts[t]=n&&i.to!=d?new JX(i.type,d,i.to,i.side):null)?this.parts.splice(t,0,h):this.parts[t]=h}let t=[];for(let i=e;i<this.parts.length;i++){let e=this.parts[i];e instanceof jX&&t.push(e)}return t}findOpeningDelimiter(e){for(let t=this.parts.length-1;t>=0;t--){let i=this.parts[t];if(i instanceof JX&&i.type==e)return t}return null}takeContent(e){let t=this.resolveMarkers(e);return this.parts.length=e,t}skipSpace(e){return pX(this.text,e-this.offset)+this.offset}elt(e,t,i,r){return"string"==typeof e?WX(this.parser.getNodeType(e),t,i,r):new FX(e,t)}}function lZ(e,t){if(!t.length)return e;if(!e.length)return t;let i=e.slice(),r=0;for(let e of t){for(;r<i.length&&i[r].to<e.to;)r++;if(r<i.length&&i[r].from<e.from){let t=i[r];t instanceof jX&&(i[r]=new jX(t.type,t.from,t.to,lZ(t.children,[e])))}else i.splice(r++,0,e)}return i}const cZ=[aX.CodeBlock,aX.ListItem,aX.OrderedList,aX.BulletList];let dZ=class{constructor(e,t){this.fragments=e,this.input=t,this.i=0,this.fragment=null,this.fragmentEnd=-1,this.cursor=null,e.length&&(this.fragment=e[this.i++])}nextFragment(){this.fragment=this.i<this.fragments.length?this.fragments[this.i++]:null,this.cursor=null,this.fragmentEnd=-1}moveTo(e,t){for(;this.fragment&&this.fragment.to<=e;)this.nextFragment();if(!this.fragment||this.fragment.from>(e?e-1:0))return!1;if(this.fragmentEnd<0){let e=this.fragment.to;for(;e>0&&"\n"!=this.input.read(e-1,e);)e--;this.fragmentEnd=e?e-1:0}let i=this.cursor;i||(i=this.cursor=this.fragment.tree.cursor(),i.firstChild());let r=e+this.fragment.offset;for(;i.to<=r;)if(!i.parent())return!1;for(;;){if(i.from>=r)return this.fragment.from<=t;if(!i.childAfter(r))return!1}}matches(e){let t=this.cursor.tree;return t&&t.prop(MD.contextHash)==e}takeNodes(e){let t=this.cursor,i=this.fragment.offset,r=this.fragmentEnd-(this.fragment.openEnd?1:0),n=e.absoluteLineStart,o=n,s=e.block.children.length,a=o,l=s;for(;;){if(t.to-i>r){if(t.type.isAnonymous&&t.firstChild())continue;break}let n=hZ(t.from-i,e.ranges);if(t.to-i<=e.ranges[e.rangeI].to)e.addNode(t.tree,n);else{let i=new ZD(e.parser.nodeSet.types[aX.Paragraph],[],[],0,e.block.hashProp);e.reusePlaceholders.set(i,t.tree),e.addNode(i,n)}if(t.type.is("Block")&&(cZ.indexOf(t.type.id)<0?(o=t.to-i,s=e.block.children.length):(o=a,s=l,a=t.to-i,l=e.block.children.length)),!t.nextSibling())break}for(;e.block.children.length>s;)e.block.children.pop(),e.block.positions.pop();return o-n}};function hZ(e,t){let i=e;for(let r=1;r<t.length;r++){let n=t[r-1].to,o=t[r].from;n<e&&(i-=o-n)}return i}const uZ=$M({"Blockquote/...":HM.quote,HorizontalRule:HM.contentSeparator,"ATXHeading1/... SetextHeading1/...":HM.heading1,"ATXHeading2/... SetextHeading2/...":HM.heading2,"ATXHeading3/...":HM.heading3,"ATXHeading4/...":HM.heading4,"ATXHeading5/...":HM.heading5,"ATXHeading6/...":HM.heading6,"Comment CommentBlock":HM.comment,Escape:HM.escape,Entity:HM.character,"Emphasis/...":HM.emphasis,"StrongEmphasis/...":HM.strong,"Link/... Image/...":HM.link,"OrderedList/... BulletList/...":HM.list,"BlockQuote/...":HM.quote,"InlineCode CodeText":HM.monospace,"URL Autolink":HM.url,"HeaderMark HardBreak QuoteMark ListMark LinkMark EmphasisMark CodeMark":HM.processingInstruction,"CodeInfo LinkLabel":HM.labelName,LinkTitle:HM.string,Paragraph:HM.content}),pZ=new zX(new VD(XX).extend(uZ),Object.keys($X).map(e=>$X[e]),Object.keys($X).map(e=>RX[e]),Object.keys($X),DX,hX,Object.keys(iZ).map(e=>iZ[e]),Object.keys(iZ),[]);function fZ(e,t,i){let r=[];for(let n=e.firstChild,o=t;;n=n.nextSibling){let e=n?n.from:i;if(e>o&&r.push({from:o,to:e}),!n)break;o=n.to}return r}const mZ={resolve:"Strikethrough",mark:"StrikethroughMark"},gZ={defineNodes:[{name:"Strikethrough",style:{"Strikethrough/...":HM.strikethrough}},{name:"StrikethroughMark",style:HM.processingInstruction}],parseInline:[{name:"Strikethrough",parse(e,t,i){if(126!=t||126!=e.char(i+1)||126==e.char(i+2))return-1;let r=e.slice(i-1,i),n=e.slice(i+2,i+3),o=/\s|^$/.test(r),s=/\s|^$/.test(n),a=tZ.test(r),l=tZ.test(n);return e.addDelimiter(mZ,i,i+2,!s&&(!l||o||a),!o&&(!a||s||l))},after:"Emphasis"}]};function vZ(e,t,i=0,r,n=0){let o=0,s=!0,a=-1,l=-1,c=!1,d=()=>{r.push(e.elt("TableCell",n+a,n+l,e.parser.parseInline(t.slice(a,l),n+a)))};for(let h=i;h<t.length;h++){let i=t.charCodeAt(h);124!=i||c?(c||32!=i&&9!=i)&&(a<0&&(a=h),l=h+1):((!s||a>-1)&&o++,s=!1,r&&(a>-1&&d(),r.push(e.elt("TableDelimiter",h+n,h+n+1))),a=l=-1),c=!c&&92==i}return a>-1&&(o++,r&&d()),o}function OZ(e,t){for(let i=t;i<e.length;i++){let t=e.charCodeAt(i);if(124==t)return!0;92==t&&i++}return!1}const yZ=/^\|?(\s*:?-+:?\s*\|)+(\s*:?-+:?\s*)?$/;class bZ{constructor(){this.rows=null}nextLine(e,t,i){if(null==this.rows){let r;if(this.rows=!1,(45==t.next||58==t.next||124==t.next)&&yZ.test(r=t.text.slice(t.pos))){let n=[];vZ(e,i.content,0,n,i.start)==vZ(e,r,t.pos)&&(this.rows=[e.elt("TableHeader",i.start,i.start+i.content.length,n),e.elt("TableDelimiter",e.lineStart+t.pos,e.lineStart+t.text.length)])}}else if(this.rows){let i=[];vZ(e,t.text,t.pos,i,e.lineStart),this.rows.push(e.elt("TableRow",e.lineStart+t.pos,e.lineStart+t.text.length,i))}return!1}finish(e,t){return!!this.rows&&(e.addLeafElement(t,e.elt("Table",t.start,t.start+t.content.length,this.rows)),!0)}}const xZ={defineNodes:[{name:"Table",block:!0},{name:"TableHeader",style:{"TableHeader/...":HM.heading}},"TableRow",{name:"TableCell",style:HM.content},{name:"TableDelimiter",style:HM.processingInstruction}],parseBlock:[{name:"Table",leaf:(e,t)=>OZ(t.content,0)?new bZ:null,endLeaf(e,t,i){if(i.parsers.some(e=>e instanceof bZ)||!OZ(t.text,t.basePos))return!1;let r=e.peekLine();return yZ.test(r)&&vZ(e,t.text,t.basePos)==vZ(e,r,t.basePos)},before:"SetextHeading"}]};class wZ{nextLine(){return!1}finish(e,t){return e.addLeafElement(t,e.elt("Task",t.start,t.start+t.content.length,[e.elt("TaskMarker",t.start,t.start+3),...e.parser.parseInline(t.content.slice(3),t.start+3)])),!0}}const kZ={defineNodes:[{name:"Task",block:!0,style:HM.list},{name:"TaskMarker",style:HM.atom}],parseBlock:[{name:"TaskList",leaf:(e,t)=>/^\[[ xX]\][ \t]/.test(t.content)&&"ListItem"==e.parentType().name?new wZ:null,after:"SetextHeading"}]},SZ=/(www\.)|(https?:\/\/)|([\w.+-]{1,100}@)|(mailto:|xmpp:)/gy,_Z=/[\w-]+(\.[\w-]+)+(\/[^\s<]*)?/gy,TZ=/[\w-]+\.[\w-]+($|\/)/,CZ=/[\w.+-]+@[\w-]+(\.[\w.-]+)+/gy,PZ=/\/[a-zA-Z\d@.]+/gy;function EZ(e,t,i,r){let n=0;for(let o=t;o<i;o++)e[o]==r&&n++;return n}function $Z(e,t){CZ.lastIndex=t;let i=CZ.exec(e);if(!i)return-1;let r=i[0][i[0].length-1];return"_"==r||"-"==r?-1:t+i[0].length-("."==r?1:0)}const AZ={parseInline:[{name:"Autolink",parse(e,t,i){let r=i-e.offset;if(r&&/\w/.test(e.text[r-1]))return-1;SZ.lastIndex=r;let n=SZ.exec(e.text),o=-1;if(!n)return-1;if(n[1]||n[2]){if(o=function(e,t){_Z.lastIndex=t;let i=_Z.exec(e);if(!i||TZ.exec(i[0])[0].indexOf("_")>-1)return-1;let r=t+i[0].length;for(;;){let i,n=e[r-1];if(/[?!.,:*_~]/.test(n)||")"==n&&EZ(e,t,r,")")>EZ(e,t,r,"("))r--;else{if(";"!=n||!(i=/&(?:#\d+|#x[a-f\d]+|\w+);$/.exec(e.slice(t,r))))break;r=t+i.index}}return r}(e.text,r+n[0].length),o>-1&&e.hasOpenLink){o=r+/([^\[\]]|\[[^\]]*\])*/.exec(e.text.slice(r,o))[0].length}}else n[3]?o=$Z(e.text,r):(o=$Z(e.text,r+n[0].length),o>-1&&"xmpp:"==n[0]&&(PZ.lastIndex=o,n=PZ.exec(e.text),n&&(o=n.index+n[0].length)));return o<0?-1:(e.addElement(e.elt("URL",i,o+e.offset)),o+e.offset)}}]},IZ=[xZ,kZ,gZ,AZ];function QZ(e,t,i){return(r,n,o)=>{if(n!=e||r.char(o+1)==e)return-1;let s=[r.elt(i,o,o+1)];for(let n=o+1;n<r.end;n++){let a=r.char(n);if(a==e)return r.addElement(r.elt(t,o,n+1,s.concat(r.elt(i,n,n+1))));if(92==a&&s.push(r.elt("Escape",n,2+n++)),uX(a))break}return-1}}const RZ={defineNodes:[{name:"Superscript",style:HM.special(HM.content)},{name:"SuperscriptMark",style:HM.processingInstruction}],parseInline:[{name:"Superscript",parse:QZ(94,"Superscript","SuperscriptMark")}]},DZ={defineNodes:[{name:"Subscript",style:HM.special(HM.content)},{name:"SubscriptMark",style:HM.processingInstruction}],parseInline:[{name:"Subscript",parse:QZ(126,"Subscript","SubscriptMark")}]},MZ={defineNodes:[{name:"Emoji",style:HM.character}],parseInline:[{name:"Emoji",parse(e,t,i){let r;return 58==t&&(r=/^[a-zA-Z_0-9]+:/.exec(e.slice(i+1,e.end)))?e.addElement(e.elt("Emoji",i,i+1+r[0].length)):-1}}]};class NZ{constructor(e,t,i,r,n,o,s,a,l,c=0,d){this.p=e,this.stack=t,this.state=i,this.reducePos=r,this.pos=n,this.score=o,this.buffer=s,this.bufferBase=a,this.curContext=l,this.lookAhead=c,this.parent=d}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let r=e.parser.context;return new NZ(e,[],t,i,i,0,[],0,r?new LZ(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let i=e>>19,r=65535&e,{parser:n}=this.p,o=this.reducePos<this.pos-25;o&&this.setLookAhead(this.pos);let s=n.dynamicPrecedence(r);if(s&&(this.score+=s),0==i)return this.pushState(n.getGoto(this.state,r,!0),this.reducePos),r<n.minRepeatTerm&&this.storeNode(r,this.reducePos,this.reducePos,o?8:4,!0),void this.reduceContext(r,this.reducePos);let a=this.stack.length-3*(i-1)-(262144&e?6:0),l=a?this.stack[a-2]:this.p.ranges[0].from,c=this.reducePos-l;c>=2e3&&!(null===(t=this.p.parser.nodeSet.types[r])||void 0===t?void 0:t.isAnonymous)&&(l==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=c):this.p.lastBigReductionSize<c&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=l,this.p.lastBigReductionSize=c));let d=a?this.stack[a-1]:0,h=this.bufferBase+this.buffer.length-d;if(r<n.minRepeatTerm||131072&e){let e=n.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(r,l,e,h+4,!0)}if(262144&e)this.state=this.stack[a];else{let e=this.stack[a-3];this.state=n.getGoto(e,r,!0)}for(;this.stack.length>a;)this.stack.pop();this.reduceContext(r,l)}storeNode(e,t,i,r=4,n=!1){if(0==e&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let e=this,r=this.buffer.length;if(0==r&&e.parent&&(r=e.bufferBase-e.parent.bufferBase,e=e.parent),r>0&&0==e.buffer[r-4]&&e.buffer[r-1]>-1){if(t==i)return;if(e.buffer[r-2]>=t)return void(e.buffer[r-2]=i)}}if(n&&this.pos!=i){let n=this.buffer.length;if(n>0&&0!=this.buffer[n-4]){let e=!1;for(let t=n;t>0&&this.buffer[t-2]>i;t-=4)if(this.buffer[t-1]>=0){e=!0;break}if(e)for(;n>0&&this.buffer[n-2]>i;)this.buffer[n]=this.buffer[n-4],this.buffer[n+1]=this.buffer[n-3],this.buffer[n+2]=this.buffer[n-2],this.buffer[n+3]=this.buffer[n-1],n-=4,r>4&&(r-=4)}this.buffer[n]=e,this.buffer[n+1]=t,this.buffer[n+2]=i,this.buffer[n+3]=r}else this.buffer.push(e,t,i,r)}shift(e,t,i,r){if(131072&e)this.pushState(65535&e,this.pos);else if(262144&e)this.pos=r,this.shiftContext(t,i),t<=this.p.parser.maxNode&&this.buffer.push(t,i,r,4);else{let n=e,{parser:o}=this.p;(r>this.pos||t<=o.maxNode)&&(this.pos=r,o.stateFlag(n,1)||(this.reducePos=r)),this.pushState(n,i),this.shiftContext(t,i),t<=o.maxNode&&this.buffer.push(t,i,r,4)}}apply(e,t,i,r){65536&e?this.reduce(e):this.shift(e,t,i,r)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let r=this.pos;this.reducePos=this.pos=r+e.length,this.pushState(t,r),this.buffer.push(i,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),r=e.bufferBase+t;for(;e&&r==e.bufferBase;)e=e.parent;return new NZ(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,r,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new zZ(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(0==i)return!1;if(!(65536&i))return!0;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let i=[];for(let r,n=0;n<t.length;n+=2)(r=t[n+1])!=this.state&&this.p.parser.hasAction(r,e)&&i.push(t[n],r);if(this.stack.length<120)for(let e=0;i.length<8&&e<t.length;e+=2){let r=t[e+1];i.some((e,t)=>1&t&&e==r)||i.push(t[e],r)}t=i}let i=[];for(let e=0;e<t.length&&i.length<4;e+=2){let r=t[e+1];if(r==this.state)continue;let n=this.split();n.pushState(r,this.pos),n.storeNode(0,n.pos,n.pos,4,!0),n.shiftContext(t[e],this.pos),n.reducePos=this.pos,n.score-=200,i.push(n)}return i}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if(!(65536&t))return!1;if(!e.validAction(this.state,t)){let i=t>>19,r=65535&t,n=this.stack.length-3*i;if(n<0||e.getGoto(this.stack[n],r,!1)<0){let e=this.findForcedReduction();if(null==e)return!1;t=e}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],i=(r,n)=>{if(!t.includes(r))return t.push(r),e.allActions(r,t=>{if(393216&t);else if(65536&t){let i=(t>>19)-n;if(i>1){let r=65535&t,n=this.stack.length-3*i;if(n>=0&&e.getGoto(this.stack[n],r,!1)>=0)return i<<19|65536|r}}else{let e=i(t,n+1);if(null!=e)return e}})};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser:e}=this.p;return 65535==e.data[e.stateSlot(this.state,1)]&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||-3!=this.buffer[e])&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||-4!=this.buffer[e])&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new LZ(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class LZ{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class zZ{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=65535&e,i=e>>19;0==i?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(i-1);let r=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=r}}class VZ{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,0==this.index&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new VZ(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;null!=e&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new VZ(this.stack,this.pos,this.index)}}function UZ(e,t=Uint16Array){if("string"!=typeof e)return e;let i=null;for(let r=0,n=0;r<e.length;){let o=0;for(;;){let t=e.charCodeAt(r++),i=!1;if(126==t){o=65535;break}t>=92&&t--,t>=34&&t--;let n=t-32;if(n>=46&&(n-=46,i=!0),o+=n,i)break;o*=46}i?i[n++]=o:i=new t(o)}return i}class qZ{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const XZ=new qZ;class ZZ{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=XZ,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,r=this.rangeIndex,n=this.pos+e;for(;n<i.from;){if(!r)return null;let e=this.ranges[--r];n-=i.from-e.to,i=e}for(;t<0?n>i.to:n>=i.to;){if(r==this.ranges.length-1)return null;let e=this.ranges[++r];n+=e.from-i.to,i=e}return n}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t,i,r=this.chunkOff+e;if(r>=0&&r<this.chunk.length)t=this.pos+e,i=this.chunk.charCodeAt(r);else{let r=this.resolveOffset(e,1);if(null==r)return-1;if(t=r,t>=this.chunk2Pos&&t<this.chunk2Pos+this.chunk2.length)i=this.chunk2.charCodeAt(t-this.chunk2Pos);else{let e=this.rangeIndex,r=this.range;for(;r.to<=t;)r=this.ranges[++e];this.chunk2=this.input.chunk(this.chunk2Pos=t),t+this.chunk2.length>r.to&&(this.chunk2=this.chunk2.slice(0,r.to-t)),i=this.chunk2.charCodeAt(0)}}return t>=this.token.lookAhead&&(this.token.lookAhead=t+1),i}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(null==i||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=XZ,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let r of this.ranges){if(r.from>=t)break;r.to>e&&(i+=this.input.read(Math.max(r.from,e),Math.min(r.to,t)))}return i}}class BZ{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:i}=t.p;WZ(this.data,e,t,this.id,i.data,i.tokenPrecTable)}}BZ.prototype.contextual=BZ.prototype.fallback=BZ.prototype.extend=!1;class jZ{constructor(e,t,i){this.precTable=t,this.elseToken=i,this.data="string"==typeof e?UZ(e):e}token(e,t){let i=e.pos,r=0;for(;;){let i=e.next<0,n=e.resolveOffset(1,1);if(WZ(this.data,e,t,0,this.data,this.precTable),e.token.value>-1)break;if(null==this.elseToken)return;if(i||r++,null==n)break;e.reset(n,e.token)}r&&(e.reset(i,e.token),e.acceptToken(this.elseToken,r))}}jZ.prototype.contextual=BZ.prototype.fallback=BZ.prototype.extend=!1;class FZ{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function WZ(e,t,i,r,n,o){let s=0,a=1<<r,{dialect:l}=i.p.parser;e:for(;0!=(a&e[s]);){let i=e[s+1];for(let r=s+3;r<i;r+=2)if((e[r+1]&a)>0){let i=e[r];if(l.allows(i)&&(-1==t.token.value||t.token.value==i||GZ(i,t.token.value,n,o))){t.acceptToken(i);break}}let r=t.next,c=0,d=e[s+2];if(!(t.next<0&&d>c&&65535==e[i+3*d-3])){for(;c<d;){let n=c+d>>1,o=i+n+(n<<1),a=e[o],l=e[o+1]||65536;if(r<a)d=n;else{if(!(r>=l)){s=e[o+2],t.advance();continue e}c=n+1}}break}s=e[i+3*d-1]}}function YZ(e,t,i){for(let r,n=t;65535!=(r=e[n]);n++)if(r==i)return n-t;return-1}function GZ(e,t,i,r){let n=YZ(i,r,t);return n<0||YZ(i,r,e)<n}const HZ="undefined"!=typeof process&&process.env&&/\bparse\b/.test(process.env.LOG);let KZ=null;function JZ(e,t,i){let r=e.cursor(XD.IncludeAnonymous);for(r.moveTo(t);;)if(!(i<0?r.childBefore(t):r.childAfter(t)))for(;;){if((i<0?r.to<t:r.from>t)&&!r.type.isError)return i<0?Math.max(0,Math.min(r.to-1,t-25)):Math.min(e.length,Math.max(r.from+1,t+25));if(i<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return i<0?0:e.length}}class eB{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?JZ(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?JZ(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],r=this.index[t];if(r==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let n=i.children[r],o=this.start[t]+i.positions[r];if(o>e)return this.nextStart=o,null;if(n instanceof ZD){if(o==e){if(o<this.safeFrom)return null;let e=o+n.length;if(e<=this.safeTo){let t=n.prop(MD.lookAhead);if(!t||e+t<this.fragment.to)return n}}this.index[t]++,o+n.length>=Math.max(this.safeFrom,e)&&(this.trees.push(n),this.start.push(o),this.index.push(0))}else this.index[t]++,this.nextStart=o+n.length}}}class tB{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(e=>new qZ)}getActions(e){let t=0,i=null,{parser:r}=e.p,{tokenizers:n}=r,o=r.stateSlot(e.state,3),s=e.curContext?e.curContext.hash:0,a=0;for(let r=0;r<n.length;r++){if(!(1<<r&o))continue;let l=n[r],c=this.tokens[r];if((!i||l.fallback)&&((l.contextual||c.start!=e.pos||c.mask!=o||c.context!=s)&&(this.updateCachedToken(c,l,e),c.mask=o,c.context=s),c.lookAhead>c.end+25&&(a=Math.max(c.lookAhead,a)),0!=c.value)){let r=t;if(c.extended>-1&&(t=this.addActions(e,c.extended,c.end,t)),t=this.addActions(e,c.value,c.end,t),!l.extend&&(i=c,t>r))break}}for(;this.actions.length>t;)this.actions.pop();return a&&e.setLookAhead(a),i||e.pos!=this.stream.end||(i=new qZ,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new qZ,{pos:i,p:r}=e;return t.start=i,t.end=Math.min(i+1,r.stream.end),t.value=i==r.stream.end?r.parser.eofTerm:0,t}updateCachedToken(e,t,i){let r=this.stream.clipPos(i.pos);if(t.token(this.stream.reset(r,e),i),e.value>-1){let{parser:t}=i.p;for(let r=0;r<t.specialized.length;r++)if(t.specialized[r]==e.value){let n=t.specializers[r](this.stream.read(e.start,e.end),i);if(n>=0&&i.p.parser.dialect.allows(n>>1)){1&n?e.extended=n>>1:e.value=n>>1;break}}}else e.value=0,e.end=this.stream.clipPos(r+1)}putAction(e,t,i,r){for(let t=0;t<r;t+=3)if(this.actions[t]==e)return r;return this.actions[r++]=e,this.actions[r++]=t,this.actions[r++]=i,r}addActions(e,t,i,r){let{state:n}=e,{parser:o}=e.p,{data:s}=o;for(let e=0;e<2;e++)for(let a=o.stateSlot(n,e?2:1);;a+=3){if(65535==s[a]){if(1!=s[a+1]){0==r&&2==s[a+1]&&(r=this.putAction(lB(s,a+2),t,i,r));break}a=lB(s,a+2)}s[a]==t&&(r=this.putAction(lB(s,a+1),t,i,r))}return r}}class iB{constructor(e,t,i,r){this.parser=e,this.input=t,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new ZZ(t,r),this.tokens=new tB(e,this.stream),this.topTerm=e.top[1];let{from:n}=r[0];this.stacks=[NZ.start(this,e.top[0],n)],this.fragments=i.length&&this.stream.end-n>4*e.bufferLength?new eB(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e,t,i=this.stacks,r=this.minStackPos,n=this.stacks=[];if(this.bigReductionCount>300&&1==i.length){let[e]=i;for(;e.forceReduce()&&e.stack.length&&e.stack[e.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<i.length;o++){let s=i[o];for(;;){if(this.tokens.mainToken=null,s.pos>r)n.push(s);else{if(this.advanceStack(s,n,i))continue;{e||(e=[],t=[]),e.push(s);let i=this.tokens.getMainToken(s);t.push(i.value,i.end)}}break}}if(!n.length){let t=e&&function(e){let t=null;for(let i of e){let e=i.p.stoppedAt;(i.pos==i.p.stream.end||null!=e&&i.pos>e)&&i.p.parser.stateFlag(i.state,2)&&(!t||t.score<i.score)&&(t=i)}return t}(e);if(t)return HZ&&console.log("Finish with "+this.stackID(t)),this.stackToTree(t);if(this.parser.strict)throw HZ&&e&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+r);this.recovering||(this.recovering=5)}if(this.recovering&&e){let i=null!=this.stoppedAt&&e[0].pos>this.stoppedAt?e[0]:this.runRecovery(e,t,n);if(i)return HZ&&console.log("Force-finish "+this.stackID(i)),this.stackToTree(i.forceAll())}if(this.recovering){let e=1==this.recovering?1:3*this.recovering;if(n.length>e)for(n.sort((e,t)=>t.score-e.score);n.length>e;)n.pop();n.some(e=>e.reducePos>r)&&this.recovering--}else if(n.length>1){e:for(let e=0;e<n.length-1;e++){let t=n[e];for(let i=e+1;i<n.length;i++){let r=n[i];if(t.sameState(r)||t.buffer.length>500&&r.buffer.length>500){if(!((t.score-r.score||t.buffer.length-r.buffer.length)>0)){n.splice(e--,1);continue e}n.splice(i--,1)}}}n.length>12&&n.splice(12,n.length-12)}this.minStackPos=n[0].pos;for(let e=1;e<n.length;e++)n[e].pos<this.minStackPos&&(this.minStackPos=n[e].pos);return null}stopAt(e){if(null!=this.stoppedAt&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let r=e.pos,{parser:n}=this,o=HZ?this.stackID(e)+" -> ":"";if(null!=this.stoppedAt&&r>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let t=e.curContext&&e.curContext.tracker.strict,i=t?e.curContext.hash:0;for(let s=this.fragments.nodeAt(r);s;){let r=this.parser.nodeSet.types[s.type.id]==s.type?n.getGoto(e.state,s.type.id):-1;if(r>-1&&s.length&&(!t||(s.prop(MD.contextHash)||0)==i))return e.useNode(s,r),HZ&&console.log(o+this.stackID(e)+` (via reuse of ${n.getName(s.type.id)})`),!0;if(!(s instanceof ZD)||0==s.children.length||s.positions[0]>0)break;let a=s.children[0];if(!(a instanceof ZD&&0==s.positions[0]))break;s=a}}let s=n.stateSlot(e.state,4);if(s>0)return e.reduce(s),HZ&&console.log(o+this.stackID(e)+` (via always-reduce ${n.getName(65535&s)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let a=this.tokens.getActions(e);for(let s=0;s<a.length;){let l=a[s++],c=a[s++],d=a[s++],h=s==a.length||!i,u=h?e:e.split(),p=this.tokens.mainToken;if(u.apply(l,c,p?p.start:u.pos,d),HZ&&console.log(o+this.stackID(u)+` (via ${65536&l?`reduce of ${n.getName(65535&l)}`:"shift"} for ${n.getName(c)} @ ${r}${u==e?"":", split"})`),h)return!0;u.pos>r?t.push(u):i.push(u)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return rB(e,t),!0}}runRecovery(e,t,i){let r=null,n=!1;for(let o=0;o<e.length;o++){let s=e[o],a=t[o<<1],l=t[1+(o<<1)],c=HZ?this.stackID(s)+" -> ":"";if(s.deadEnd){if(n)continue;if(n=!0,s.restart(),HZ&&console.log(c+this.stackID(s)+" (restarted)"),this.advanceFully(s,i))continue}let d=s.split(),h=c;for(let e=0;d.forceReduce()&&e<10;e++){if(HZ&&console.log(h+this.stackID(d)+" (via force-reduce)"),this.advanceFully(d,i))break;HZ&&(h=this.stackID(d)+" -> ")}for(let e of s.recoverByInsert(a))HZ&&console.log(c+this.stackID(e)+" (via recover-insert)"),this.advanceFully(e,i);this.stream.end>s.pos?(l==s.pos&&(l++,a=0),s.recoverByDelete(a,l),HZ&&console.log(c+this.stackID(s)+` (via recover-delete ${this.parser.getName(a)})`),rB(s,i)):(!r||r.score<s.score)&&(r=s)}return r}stackToTree(e){return e.close(),ZD.build({buffer:VZ.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(KZ||(KZ=new WeakMap)).get(e);return t||KZ.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function rB(e,t){for(let i=0;i<t.length;i++){let r=t[i];if(r.pos==e.pos&&r.sameState(e))return void(t[i].score<e.score&&(t[i]=e))}t.push(e)}class nB{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||0==this.disabled[e]}}const oB=e=>e;class sB{constructor(e){this.start=e.start,this.shift=e.shift||oB,this.reduce=e.reduce||oB,this.reuse=e.reuse||oB,this.hash=e.hash||(()=>0),this.strict=!1!==e.strict}}class aB extends dM{constructor(e){if(super(),this.wrappers=[],14!=e.version)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let i=0;i<e.repeatNodeCount;i++)t.push("");let i=Object.keys(e.topRules).map(t=>e.topRules[t][1]),r=[];for(let e=0;e<t.length;e++)r.push([]);function n(e,t,i){r[e].push([t,t.deserialize(String(i))])}if(e.nodeProps)for(let t of e.nodeProps){let e=t[0];"string"==typeof e&&(e=MD[e]);for(let i=1;i<t.length;){let r=t[i++];if(r>=0)n(r,e,t[i++]);else{let o=t[i+-r];for(let s=-r;s>0;s--)n(t[i++],e,o);i++}}}this.nodeSet=new VD(t.map((t,n)=>zD.define({name:n>=this.minRepeatTerm?void 0:t,id:n,props:r[n],top:i.indexOf(n)>-1,error:0==n,skipped:e.skippedNodes&&e.skippedNodes.indexOf(n)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=QD;let o=UZ(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let e=0;e<this.specializerSpecs.length;e++)this.specialized[e]=this.specializerSpecs[e].term;this.specializers=this.specializerSpecs.map(cB),this.states=UZ(e.states,Uint32Array),this.data=UZ(e.stateData),this.goto=UZ(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(e=>"number"==typeof e?new BZ(o,e):e),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let r=new iB(this,e,t,i);for(let n of this.wrappers)r=n(r,e,t,i);return r}getGoto(e,t,i=!1){let r=this.goto;if(t>=r[0])return-1;for(let n=r[t+1];;){let t=r[n++],o=1&t,s=r[n++];if(o&&i)return s;for(let i=n+(t>>1);n<i;n++)if(r[n]==e)return s;if(o)return-1}}hasAction(e,t){let i=this.data;for(let r=0;r<2;r++)for(let n,o=this.stateSlot(e,r?2:1);;o+=3){if(65535==(n=i[o])){if(1!=i[o+1]){if(2==i[o+1])return lB(i,o+2);break}n=i[o=lB(i,o+2)]}if(n==t||0==n)return lB(i,o+1)}return 0}stateSlot(e,t){return this.states[6*e+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,e=>e==t||null)}allActions(e,t){let i=this.stateSlot(e,4),r=i?t(i):void 0;for(let i=this.stateSlot(e,1);null==r;i+=3){if(65535==this.data[i]){if(1!=this.data[i+1])break;i=lB(this.data,i+2)}r=t(lB(this.data,i+1))}return r}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(65535==this.data[i]){if(1!=this.data[i+1])break;i=lB(this.data,i+2)}if(!(1&this.data[i+2])){let e=this.data[i+1];t.some((t,i)=>1&i&&t==e)||t.push(this.data[i],e)}}return t}configure(e){let t=Object.assign(Object.create(aB.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(t=>{let i=e.tokenizers.find(e=>e.from==t);return i?i.to:t})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((i,r)=>{let n=e.specializers.find(e=>e.from==i.external);if(!n)return i;let o=Object.assign(Object.assign({},i),{external:n.to});return t.specializers[r]=cB(o),o})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),null!=e.strict&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),null!=e.bufferLength&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return null==t?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map(()=>!1);if(e)for(let r of e.split(" ")){let e=t.indexOf(r);e>=0&&(i[e]=!0)}let r=null;for(let e=0;e<t.length;e++)if(!i[e])for(let i,n=this.dialects[t[e]];65535!=(i=this.data[n++]);)(r||(r=new Uint8Array(this.maxTerm+1)))[i]=1;return new nB(e,i,r)}static deserialize(e){return new aB(e)}}function lB(e,t){return e[t]|e[t+1]<<16}function cB(e){if(e.external){let t=e.extend?1:0;return(i,r)=>e.external(i,r)<<1|t}return e.get}const dB={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},hB={dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},uB={dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}};function pB(e){return 45==e||46==e||58==e||e>=65&&e<=90||95==e||e>=97&&e<=122||e>=161}let fB=null,mB=null,gB=0;function vB(e,t){let i=e.pos+t;if(gB==i&&mB==e)return fB;let r=e.peek(t),n="";for(;pB(r);)n+=String.fromCharCode(r),r=e.peek(++t);return mB=e,gB=i,fB=n?n.toLowerCase():r==OB||r==yB?void 0:null}const OB=63,yB=33;function bB(e,t){this.name=e,this.parent=t}const xB=[6,10,7,8,9],wB=new sB({start:null,shift:(e,t,i,r)=>xB.indexOf(t)>-1?new bB(vB(r,1)||"",e):e,reduce:(e,t)=>21==t&&e?e.parent:e,reuse(e,t,i,r){let n=t.type.id;return 6==n||37==n?new bB(vB(r,1)||"",e):e},strict:!1}),kB=new FZ((e,t)=>{if(60!=e.next)return void(e.next<0&&t.context&&e.acceptToken(58));e.advance();let i=47==e.next;i&&e.advance();let r=vB(e,0);if(void 0===r)return;if(!r)return e.acceptToken(i?15:14);let n=t.context?t.context.name:null;if(i){if(r==n)return e.acceptToken(11);if(n&&hB[n])return e.acceptToken(58,-2);if(t.dialectEnabled(0))return e.acceptToken(12);for(let e=t.context;e;e=e.parent)if(e.name==r)return;e.acceptToken(13)}else{if("script"==r)return e.acceptToken(7);if("style"==r)return e.acceptToken(8);if("textarea"==r)return e.acceptToken(9);if(dB.hasOwnProperty(r))return e.acceptToken(10);n&&uB[n]&&uB[n][r]?e.acceptToken(58,-1):e.acceptToken(6)}},{contextual:!0}),SB=new FZ(e=>{for(let t=0,i=0;;i++){if(e.next<0){i&&e.acceptToken(59);break}if(45==e.next)t++;else{if(62==e.next&&t>=2){i>=3&&e.acceptToken(59,-2);break}t=0}e.advance()}});const _B=new FZ((e,t)=>{if(47==e.next&&62==e.peek(1)){let i=t.dialectEnabled(1)||function(e){for(;e;e=e.parent)if("svg"==e.name||"math"==e.name)return!0;return!1}(t.context);e.acceptToken(i?5:4,2)}else 62==e.next&&e.acceptToken(4,1)});function TB(e,t,i){let r=2+e.length;return new FZ(n=>{for(let o=0,s=0,a=0;;a++){if(n.next<0){a&&n.acceptToken(t);break}if(0==o&&60==n.next||1==o&&47==n.next||o>=2&&o<r&&n.next==e.charCodeAt(o-2))o++,s++;else{if(o==r&&62==n.next){a>s?n.acceptToken(t,-s):n.acceptToken(i,-(s-2));break}if((10==n.next||13==n.next)&&a){n.acceptToken(t,1);break}o=s=0}n.advance()}})}const CB=TB("script",55,1),PB=TB("style",56,2),EB=TB("textarea",57,3),$B=$M({"Text RawText IncompleteTag IncompleteCloseTag":HM.content,"StartTag StartCloseTag SelfClosingEndTag EndTag":HM.angleBracket,TagName:HM.tagName,"MismatchedCloseTag/TagName":[HM.tagName,HM.invalid],AttributeName:HM.attributeName,"AttributeValue UnquotedAttributeValue":HM.attributeValue,Is:HM.definitionOperator,"EntityReference CharacterReference":HM.character,Comment:HM.blockComment,ProcessingInst:HM.processingInstruction,DoctypeDecl:HM.documentMeta}),AB=aB.deserialize({version:14,states:",xOVO!rOOO!ZQ#tO'#CrO!`Q#tO'#C{O!eQ#tO'#DOO!jQ#tO'#DRO!oQ#tO'#DTO!tOaO'#CqO#PObO'#CqO#[OdO'#CqO$kO!rO'#CqOOO`'#Cq'#CqO$rO$fO'#DUO$zQ#tO'#DWO%PQ#tO'#DXOOO`'#Dl'#DlOOO`'#DZ'#DZQVO!rOOO%UQ&rO,59^O%aQ&rO,59gO%lQ&rO,59jO%wQ&rO,59mO&SQ&rO,59oOOOa'#D_'#D_O&_OaO'#CyO&jOaO,59]OOOb'#D`'#D`O&rObO'#C|O&}ObO,59]OOOd'#Da'#DaO'VOdO'#DPO'bOdO,59]OOO`'#Db'#DbO'jO!rO,59]O'qQ#tO'#DSOOO`,59],59]OOOp'#Dc'#DcO'vO$fO,59pOOO`,59p,59pO(OQ#|O,59rO(TQ#|O,59sOOO`-E7X-E7XO(YQ&rO'#CtOOQW'#D['#D[O(hQ&rO1G.xOOOa1G.x1G.xOOO`1G/Z1G/ZO(sQ&rO1G/ROOOb1G/R1G/RO)OQ&rO1G/UOOOd1G/U1G/UO)ZQ&rO1G/XOOO`1G/X1G/XO)fQ&rO1G/ZOOOa-E7]-E7]O)qQ#tO'#CzOOO`1G.w1G.wOOOb-E7^-E7^O)vQ#tO'#C}OOOd-E7_-E7_O){Q#tO'#DQOOO`-E7`-E7`O*QQ#|O,59nOOOp-E7a-E7aOOO`1G/[1G/[OOO`1G/^1G/^OOO`1G/_1G/_O*VQ,UO,59`OOQW-E7Y-E7YOOOa7+$d7+$dOOO`7+$u7+$uOOOb7+$m7+$mOOOd7+$p7+$pOOO`7+$s7+$sO*bQ#|O,59fO*gQ#|O,59iO*lQ#|O,59lOOO`1G/Y1G/YO*qO7[O'#CwO+SOMhO'#CwOOQW1G.z1G.zOOO`1G/Q1G/QOOO`1G/T1G/TOOO`1G/W1G/WOOOO'#D]'#D]O+eO7[O,59cOOQW,59c,59cOOOO'#D^'#D^O+vOMhO,59cOOOO-E7Z-E7ZOOQW1G.}1G.}OOOO-E7[-E7[",stateData:",c~O!_OS~OUSOVPOWQOXROYTO[]O][O^^O_^Oa^Ob^Oc^Od^Oy^O|_O!eZO~OgaO~OgbO~OgcO~OgdO~OgeO~O!XfOPmP![mP~O!YiOQpP![pP~O!ZlORsP![sP~OUSOVPOWQOXROYTOZqO[]O][O^^O_^Oa^Ob^Oc^Od^Oy^O!eZO~O![rO~P#gO!]sO!fuO~OgvO~OgwO~OS|OT}OiyO~OS!POT}OiyO~OS!ROT}OiyO~OS!TOT}OiyO~OS}OT}OiyO~O!XfOPmX![mX~OP!WO![!XO~O!YiOQpX![pX~OQ!ZO![!XO~O!ZlORsX![sX~OR!]O![!XO~O![!XO~P#gOg!_O~O!]sO!f!aO~OS!bO~OS!cO~Oj!dOShXThXihX~OS!fOT!gOiyO~OS!hOT!gOiyO~OS!iOT!gOiyO~OS!jOT!gOiyO~OS!gOT!gOiyO~Og!kO~Og!lO~Og!mO~OS!nO~Ol!qO!a!oO!c!pO~OS!rO~OS!sO~OS!tO~Ob!uOc!uOd!uO!a!wO!b!uO~Ob!xOc!xOd!xO!c!wO!d!xO~Ob!uOc!uOd!uO!a!{O!b!uO~Ob!xOc!xOd!xO!c!{O!d!xO~OT~cbd!ey|!e~",goto:"%q!aPPPPPPPPPPPPPPPPPPPPP!b!hP!nPP!zP!}#Q#T#Z#^#a#g#j#m#s#y!bP!b!bP$P$V$m$s$y%P%V%]%cPPPPPPPP%iX^OX`pXUOX`pezabcde{!O!Q!S!UR!q!dRhUR!XhXVOX`pRkVR!XkXWOX`pRnWR!XnXXOX`pQrXR!XpXYOX`pQ`ORx`Q{aQ!ObQ!QcQ!SdQ!UeZ!e{!O!Q!S!UQ!v!oR!z!vQ!y!pR!|!yQgUR!VgQjVR!YjQmWR![mQpXR!^pQtZR!`tS_O`ToXp",nodeNames:" StartCloseTag StartCloseTag StartCloseTag EndTag SelfClosingEndTag StartTag StartTag StartTag StartTag StartTag StartCloseTag StartCloseTag StartCloseTag IncompleteTag IncompleteCloseTag Document Text EntityReference CharacterReference InvalidEntity Element OpenTag TagName Attribute AttributeName Is AttributeValue UnquotedAttributeValue ScriptText CloseTag OpenTag StyleText CloseTag OpenTag TextareaText CloseTag OpenTag CloseTag SelfClosingTag Comment ProcessingInst MismatchedCloseTag CloseTag DoctypeDecl",maxTerm:68,context:wB,nodeProps:[["closedBy",-10,1,2,3,7,8,9,10,11,12,13,"EndTag",6,"EndTag SelfClosingEndTag",-4,22,31,34,37,"CloseTag"],["openedBy",4,"StartTag StartCloseTag",5,"StartTag",-4,30,33,36,38,"OpenTag"],["group",-10,14,15,18,19,20,21,40,41,42,43,"Entity",17,"Entity TextContent",-3,29,32,35,"TextContent Entity"],["isolate",-11,22,30,31,33,34,36,37,38,39,42,43,"ltr",-3,27,28,40,""]],propSources:[$B],skippedNodes:[0],repeatNodeCount:9,tokenData:"!<p!aR!YOX$qXY,QYZ,QZ[$q[]&X]^,Q^p$qpq,Qqr-_rs3_sv-_vw3}wxHYx}-_}!OH{!O!P-_!P!Q$q!Q![-_![!]Mz!]!^-_!^!_!$S!_!`!;x!`!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4U-_4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!Z$|caPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr$qrs&}sv$qvw+Pwx(tx!^$q!^!_*V!_!a&X!a#S$q#S#T&X#T;'S$q;'S;=`+z<%lO$q!R&bXaP!b`!dpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&Xq'UVaP!dpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}P'pTaPOv'kw!^'k!_;'S'k;'S;=`(P<%lO'kP(SP;=`<%l'kp([S!dpOv(Vx;'S(V;'S;=`(h<%lO(Vp(kP;=`<%l(Vq(qP;=`<%l&}a({WaP!b`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t`)jT!b`Or)esv)ew;'S)e;'S;=`)y<%lO)e`)|P;=`<%l)ea*SP;=`<%l(t!Q*^V!b`!dpOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!Q*vP;=`<%l*V!R*|P;=`<%l&XW+UYlWOX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+PW+wP;=`<%l+P!Z+}P;=`<%l$q!a,]`aP!b`!dp!_^OX&XXY,QYZ,QZ]&X]^,Q^p&Xpq,Qqr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!_-ljiSaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q[/ebiSlWOX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+PS0rXiSqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0mS1bP;=`<%l0m[1hP;=`<%l/^!V1vciSaP!b`!dpOq&Xqr1krs&}sv1kvw0mwx(tx!P1k!P!Q&X!Q!^1k!^!_*V!_!a&X!a#s1k#s$f&X$f;'S1k;'S;=`3R<%l?Ah1k?Ah?BY&X?BY?Mn1k?MnO&X!V3UP;=`<%l1k!_3[P;=`<%l-_!Z3hV!ahaP!dpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}!_4WiiSlWd!ROX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst>]tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^/^!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!Z5zblWOX5uXZ7SZ[5u[^7S^p5uqr5urs7Sst+Ptw5uwx7Sx!]5u!]!^7w!^!a7S!a#S5u#S#T7S#T;'S5u;'S;=`8n<%lO5u!R7VVOp7Sqs7St!]7S!]!^7l!^;'S7S;'S;=`7q<%lO7S!R7qOb!R!R7tP;=`<%l7S!Z8OYlWb!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!Z8qP;=`<%l5u!_8{iiSlWOX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst/^tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^:j!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!_:sbiSlWb!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!V<QciSOp7Sqr;{rs7Sst0mtw;{wx7Sx!P;{!P!Q7S!Q!];{!]!^=]!^!a7S!a#s;{#s$f7S$f;'S;{;'S;=`>P<%l?Ah;{?Ah?BY7S?BY?Mn;{?MnO7S!V=dXiSb!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!V>SP;=`<%l;{!_>YP;=`<%l8t!_>dhiSlWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^/^!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!Z@TalWOX@OXZAYZ[@O[^AY^p@Oqr@OrsAYsw@OwxAYx!]@O!]!^Az!^!aAY!a#S@O#S#TAY#T;'S@O;'S;=`Bq<%lO@O!RA]UOpAYq!]AY!]!^Ao!^;'SAY;'S;=`At<%lOAY!RAtOc!R!RAwP;=`<%lAY!ZBRYlWc!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!ZBtP;=`<%l@O!_COhiSlWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^Dj!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!_DsbiSlWc!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!VFQbiSOpAYqrE{rsAYswE{wxAYx!PE{!P!QAY!Q!]E{!]!^GY!^!aAY!a#sE{#s$fAY$f;'SE{;'S;=`G|<%l?AhE{?Ah?BYAY?BY?MnE{?MnOAY!VGaXiSc!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!VHPP;=`<%lE{!_HVP;=`<%lBw!ZHcW!cxaP!b`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t!aIYliSaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OKQ!O!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!aK_kiSaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!`&X!`!aMS!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!TM_XaP!b`!dp!fQOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!aNZ!ZiSgQaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OMz!O!PMz!P!Q$q!Q![Mz![!]Mz!]!^-_!^!_*V!_!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f$}-_$}%OMz%O%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4UMz4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Je-_$Je$JgMz$Jg$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!a!$PP;=`<%lMz!R!$ZY!b`!dpOq*Vqr!$yrs(Vsv*Vwx)ex!a*V!a!b!4t!b;'S*V;'S;=`*s<%lO*V!R!%Q]!b`!dpOr*Vrs(Vsv*Vwx)ex}*V}!O!%y!O!f*V!f!g!']!g#W*V#W#X!0`#X;'S*V;'S;=`*s<%lO*V!R!&QX!b`!dpOr*Vrs(Vsv*Vwx)ex}*V}!O!&m!O;'S*V;'S;=`*s<%lO*V!R!&vV!b`!dp!ePOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!'dX!b`!dpOr*Vrs(Vsv*Vwx)ex!q*V!q!r!(P!r;'S*V;'S;=`*s<%lO*V!R!(WX!b`!dpOr*Vrs(Vsv*Vwx)ex!e*V!e!f!(s!f;'S*V;'S;=`*s<%lO*V!R!(zX!b`!dpOr*Vrs(Vsv*Vwx)ex!v*V!v!w!)g!w;'S*V;'S;=`*s<%lO*V!R!)nX!b`!dpOr*Vrs(Vsv*Vwx)ex!{*V!{!|!*Z!|;'S*V;'S;=`*s<%lO*V!R!*bX!b`!dpOr*Vrs(Vsv*Vwx)ex!r*V!r!s!*}!s;'S*V;'S;=`*s<%lO*V!R!+UX!b`!dpOr*Vrs(Vsv*Vwx)ex!g*V!g!h!+q!h;'S*V;'S;=`*s<%lO*V!R!+xY!b`!dpOr!+qrs!,hsv!+qvw!-Swx!.[x!`!+q!`!a!/j!a;'S!+q;'S;=`!0Y<%lO!+qq!,mV!dpOv!,hvx!-Sx!`!,h!`!a!-q!a;'S!,h;'S;=`!.U<%lO!,hP!-VTO!`!-S!`!a!-f!a;'S!-S;'S;=`!-k<%lO!-SP!-kO|PP!-nP;=`<%l!-Sq!-xS!dp|POv(Vx;'S(V;'S;=`(h<%lO(Vq!.XP;=`<%l!,ha!.aX!b`Or!.[rs!-Ssv!.[vw!-Sw!`!.[!`!a!.|!a;'S!.[;'S;=`!/d<%lO!.[a!/TT!b`|POr)esv)ew;'S)e;'S;=`)y<%lO)ea!/gP;=`<%l!.[!R!/sV!b`!dp|POr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!0]P;=`<%l!+q!R!0gX!b`!dpOr*Vrs(Vsv*Vwx)ex#c*V#c#d!1S#d;'S*V;'S;=`*s<%lO*V!R!1ZX!b`!dpOr*Vrs(Vsv*Vwx)ex#V*V#V#W!1v#W;'S*V;'S;=`*s<%lO*V!R!1}X!b`!dpOr*Vrs(Vsv*Vwx)ex#h*V#h#i!2j#i;'S*V;'S;=`*s<%lO*V!R!2qX!b`!dpOr*Vrs(Vsv*Vwx)ex#m*V#m#n!3^#n;'S*V;'S;=`*s<%lO*V!R!3eX!b`!dpOr*Vrs(Vsv*Vwx)ex#d*V#d#e!4Q#e;'S*V;'S;=`*s<%lO*V!R!4XX!b`!dpOr*Vrs(Vsv*Vwx)ex#X*V#X#Y!+q#Y;'S*V;'S;=`*s<%lO*V!R!4{Y!b`!dpOr!4trs!5ksv!4tvw!6Vwx!8]x!a!4t!a!b!:]!b;'S!4t;'S;=`!;r<%lO!4tq!5pV!dpOv!5kvx!6Vx!a!5k!a!b!7W!b;'S!5k;'S;=`!8V<%lO!5kP!6YTO!a!6V!a!b!6i!b;'S!6V;'S;=`!7Q<%lO!6VP!6lTO!`!6V!`!a!6{!a;'S!6V;'S;=`!7Q<%lO!6VP!7QOyPP!7TP;=`<%l!6Vq!7]V!dpOv!5kvx!6Vx!`!5k!`!a!7r!a;'S!5k;'S;=`!8V<%lO!5kq!7yS!dpyPOv(Vx;'S(V;'S;=`(h<%lO(Vq!8YP;=`<%l!5ka!8bX!b`Or!8]rs!6Vsv!8]vw!6Vw!a!8]!a!b!8}!b;'S!8];'S;=`!:V<%lO!8]a!9SX!b`Or!8]rs!6Vsv!8]vw!6Vw!`!8]!`!a!9o!a;'S!8];'S;=`!:V<%lO!8]a!9vT!b`yPOr)esv)ew;'S)e;'S;=`)y<%lO)ea!:YP;=`<%l!8]!R!:dY!b`!dpOr!4trs!5ksv!4tvw!6Vwx!8]x!`!4t!`!a!;S!a;'S!4t;'S;=`!;r<%lO!4t!R!;]V!b`!dpyPOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!;uP;=`<%l!4t!V!<TXjSaP!b`!dpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X",tokenizers:[CB,PB,EB,_B,kB,SB,0,1,2,3,4,5],topRules:{Document:[0,16]},dialects:{noMatch:0,selfClosing:515},tokenPrec:517});function IB(e,t){let i=Object.create(null);for(let r of e.getChildren(24)){let e=r.getChild(25),n=r.getChild(27)||r.getChild(28);e&&(i[t.read(e.from,e.to)]=n?27==n.type.id?t.read(n.from+1,n.to-1):t.read(n.from,n.to):"")}return i}function QB(e,t){let i=e.getChild(23);return i?t.read(i.from,i.to):" "}function RB(e,t,i){let r;for(let n of i)if(!n.attrs||n.attrs(r||(r=IB(e.node.parent.firstChild,t))))return{parser:n.parser};return null}function DB(e=[],t=[]){let i=[],r=[],n=[],o=[];for(let t of e){("script"==t.tag?i:"style"==t.tag?r:"textarea"==t.tag?n:o).push(t)}let s=t.length?Object.create(null):null;for(let e of t)(s[e.name]||(s[e.name]=[])).push(e);return uM((e,t)=>{let a=e.type.id;if(29==a)return RB(e,t,i);if(32==a)return RB(e,t,r);if(35==a)return RB(e,t,n);if(21==a&&o.length){let i,r=e.node,n=r.firstChild,s=n&&QB(n,t);if(s)for(let e of o)if(e.tag==s&&(!e.attrs||e.attrs(i||(i=IB(n,t))))){let t=r.lastChild,i=38==t.type.id?t.from:r.to;if(i>n.to)return{parser:e.parser,overlay:[{from:n.to,to:i}]}}}if(s&&24==a){let i,r=e.node;if(i=r.firstChild){let e=s[t.read(i.from,i.to)];if(e)for(let i of e){if(i.tagName&&i.tagName!=QB(r.parent,t))continue;let e=r.lastChild;if(27==e.type.id){let t=e.from+1,r=e.lastChild,n=e.to-(r&&r.isError?0:1);if(n>t)return{parser:i.parser,overlay:[{from:t,to:n}]}}else if(28==e.type.id)return{parser:i.parser,overlay:[{from:e.from,to:e.to}]}}}}return null})}const MB=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288];function NB(e){return e>=65&&e<=90||e>=97&&e<=122||e>=161}function LB(e){return e>=48&&e<=57}function zB(e){return LB(e)||e>=97&&e<=102||e>=65&&e<=70}const VB=(e,t,i)=>(r,n)=>{for(let o=!1,s=0,a=0;;a++){let{next:l}=r;if(NB(l)||45==l||95==l||o&&LB(l))!o&&(45!=l||a>0)&&(o=!0),s===a&&45==l&&s++,r.advance();else{if(92!=l||10==r.peek(1)){o&&r.acceptToken(2==s&&n.canShift(2)?t:40==l?i:e);break}if(r.advance(),zB(r.next)){do{r.advance()}while(zB(r.next));32==r.next&&r.advance()}else r.next>-1&&r.advance();o=!0}}},UB=new FZ(VB(123,2,124)),qB=new FZ(VB(125,3,4)),XB=new FZ(e=>{if(MB.includes(e.peek(-1))){let{next:t}=e;(NB(t)||95==t||35==t||46==t||42==t||91==t||58==t&&NB(e.peek(1))||45==t||38==t)&&e.acceptToken(122)}}),ZB=new FZ(e=>{if(!MB.includes(e.peek(-1))){let{next:t}=e;if(37==t&&(e.advance(),e.acceptToken(1)),NB(t)){do{e.advance()}while(NB(e.next)||LB(e.next));e.acceptToken(1)}}}),BB=$M({"AtKeyword import charset namespace keyframes media supports":HM.definitionKeyword,"from to selector":HM.keyword,NamespaceName:HM.namespace,KeyframeName:HM.labelName,KeyframeRangeName:HM.operatorKeyword,TagName:HM.tagName,ClassName:HM.className,PseudoClassName:HM.constant(HM.className),IdName:HM.labelName,"FeatureName PropertyName":HM.propertyName,AttributeName:HM.attributeName,NumberLiteral:HM.number,KeywordQuery:HM.keyword,UnaryQueryOp:HM.operatorKeyword,"CallTag ValueName":HM.atom,VariableName:HM.variableName,Callee:HM.operatorKeyword,Unit:HM.unit,"UniversalSelector NestingSelector":HM.definitionOperator,"MatchOp CompareOp":HM.compareOperator,"ChildOp SiblingOp, LogicOp":HM.logicOperator,BinOp:HM.arithmeticOperator,Important:HM.modifier,Comment:HM.blockComment,ColorLiteral:HM.color,"ParenthesizedContent StringLiteral":HM.string,":":HM.punctuation,"PseudoOp #":HM.derefOperator,"; ,":HM.separator,"( )":HM.paren,"[ ]":HM.squareBracket,"{ }":HM.brace}),jB={__proto__:null,lang:38,"nth-child":38,"nth-last-child":38,"nth-of-type":38,"nth-last-of-type":38,dir:38,"host-context":38,if:84,url:124,"url-prefix":124,domain:124,regexp:124},FB={__proto__:null,or:98,and:98,not:106,only:106,layer:170},WB={__proto__:null,selector:112,layer:166},YB={__proto__:null,"@import":162,"@media":174,"@charset":178,"@namespace":182,"@keyframes":188,"@supports":200,"@scope":204},GB={__proto__:null,to:207},HB=aB.deserialize({version:14,states:"EbQYQdOOO#qQdOOP#xO`OOOOQP'#Cf'#CfOOQP'#Ce'#CeO#}QdO'#ChO$nQaO'#CcO$xQdO'#CkO%TQdO'#DpO%YQdO'#DrO%_QdO'#DuO%_QdO'#DxOOQP'#FV'#FVO&eQhO'#EhOOQS'#FU'#FUOOQS'#Ek'#EkQYQdOOO&lQdO'#EOO&PQhO'#EUO&lQdO'#EWO'aQdO'#EYO'lQdO'#E]O'tQhO'#EcO(VQdO'#EeO(bQaO'#CfO)VQ`O'#D{O)[Q`O'#F`O)gQdO'#F`QOQ`OOP)qO&jO'#CaPOOO)C@t)C@tOOQP'#Cj'#CjOOQP,59S,59SO#}QdO,59SO)|QdO,59VO%TQdO,5:[O%YQdO,5:^O%_QdO,5:aO%_QdO,5:cO%_QdO,5:dO%_QdO'#ErO*XQ`O,58}O*aQdO'#DzOOQS,58},58}OOQP'#Cn'#CnOOQO'#Dn'#DnOOQP,59V,59VO*hQ`O,59VO*mQ`O,59VOOQP'#Dq'#DqOOQP,5:[,5:[OOQO'#Ds'#DsO*rQpO,5:^O+]QaO,5:aO+sQaO,5:dOOQW'#DZ'#DZO,ZQhO'#DdO,xQhO'#FaO'tQhO'#DbO-WQ`O'#DhOOQW'#F['#F[O-]Q`O,5;SO-eQ`O'#DeOOQS-E8i-E8iOOQ['#Cs'#CsO-jQdO'#CtO.QQdO'#CzO.hQdO'#C}O/OQ!pO'#DPO1RQ!jO,5:jOOQO'#DU'#DUO*mQ`O'#DTO1cQ!nO'#FXO3`Q`O'#DVO3eQ`O'#DkOOQ['#FX'#FXO-`Q`O,5:pO3jQ!bO,5:rOOQS'#E['#E[O3rQ`O,5:tO3wQdO,5:tOOQO'#E_'#E_O4PQ`O,5:wO4UQhO,5:}O%_QdO'#DgOOQS,5;P,5;PO-eQ`O,5;PO4^QdO,5;PO4fQdO,5:gO4vQdO'#EtO5TQ`O,5;zO5TQ`O,5;zPOOO'#Ej'#EjP5`O&jO,58{POOO,58{,58{OOQP1G.n1G.nOOQP1G.q1G.qO*hQ`O1G.qO*mQ`O1G.qOOQP1G/v1G/vO5kQpO1G/xO5sQaO1G/{O6ZQaO1G/}O6qQaO1G0OO7XQaO,5;^OOQO-E8p-E8pOOQS1G.i1G.iO7cQ`O,5:fO7hQdO'#DoO7oQdO'#CrOOQP1G/x1G/xO&lQdO1G/xO7vQ!jO'#DZO8UQ!bO,59vO8^QhO,5:OOOQO'#F]'#F]O8XQ!bO,59zO'tQhO,59xO8fQhO'#EvO8sQ`O,5;{O9OQhO,59|O9uQhO'#DiOOQW,5:S,5:SOOQS1G0n1G0nOOQW,5:P,5:PO9|Q!fO'#FYOOQS'#FY'#FYOOQS'#Em'#EmO;^QdO,59`OOQ[,59`,59`O;tQdO,59fOOQ[,59f,59fO<[QdO,59iOOQ[,59i,59iOOQ[,59k,59kO&lQdO,59mO<rQhO'#EQOOQW'#EQ'#EQO=WQ`O1G0UO1[QhO1G0UOOQ[,59o,59oO'tQhO'#DXOOQ[,59q,59qO=]Q#tO,5:VOOQS1G0[1G0[OOQS1G0^1G0^OOQS1G0`1G0`O=hQ`O1G0`O=mQdO'#E`OOQS1G0c1G0cOOQS1G0i1G0iO=xQaO,5:RO-`Q`O1G0kOOQS1G0k1G0kO-eQ`O1G0kO>PQ!fO1G0ROOQO1G0R1G0ROOQO,5;`,5;`O>gQdO,5;`OOQO-E8r-E8rO>tQ`O1G1fPOOO-E8h-E8hPOOO1G.g1G.gOOQP7+$]7+$]OOQP7+%d7+%dO&lQdO7+%dOOQS1G0Q1G0QO?PQaO'#F_O?ZQ`O,5:ZO?`Q!fO'#ElO@^QdO'#FWO@hQ`O,59^O@mQ!bO7+%dO&lQdO1G/bO@uQhO1G/fOOQW1G/j1G/jOOQW1G/d1G/dOAWQhO,5;bOOQO-E8t-E8tOAfQhO'#DZOAtQhO'#F^OBPQ`O'#F^OBUQ`O,5:TOOQS-E8k-E8kOOQ[1G.z1G.zOOQ[1G/Q1G/QOOQ[1G/T1G/TOOQ[1G/X1G/XOBZQdO,5:lOOQS7+%p7+%pOB`Q`O7+%pOBeQhO'#DYOBmQ`O,59sO'tQhO,59sOOQ[1G/q1G/qOBuQ`O1G/qOOQS7+%z7+%zOBzQbO'#DPOOQO'#Eb'#EbOCYQ`O'#EaOOQO'#Ea'#EaOCeQ`O'#EwOCmQdO,5:zOOQS,5:z,5:zOOQ[1G/m1G/mOOQS7+&V7+&VO-`Q`O7+&VOCxQ!fO'#EsO&lQdO'#EsOEPQdO7+%mOOQO7+%m7+%mOOQO1G0z1G0zOEdQ!bO<<IOOElQdO'#EqOEvQ`O,5;yOOQP1G/u1G/uOOQS-E8j-E8jOFOQdO'#EpOFYQ`O,5;rOOQ]1G.x1G.xOOQP<<IO<<IOOFbQdO7+$|OOQO'#D]'#D]OFiQ!bO7+%QOFqQhO'#EoOF{Q`O,5;xO&lQdO,5;xOOQW1G/o1G/oOOQO'#ES'#ESOGTQ`O1G0WOOQS<<I[<<I[O&lQdO,59tOGnQhO1G/_OOQ[1G/_1G/_OGuQ`O1G/_OOQW-E8l-E8lOOQ[7+%]7+%]OOQO,5:{,5:{O=pQdO'#ExOCeQ`O,5;cOOQS,5;c,5;cOOQS-E8u-E8uOOQS1G0f1G0fOOQS<<Iq<<IqOG}Q!fO,5;_OOQS-E8q-E8qOOQO<<IX<<IXOOQPAN>jAN>jOIUQaO,5;]OOQO-E8o-E8oOI`QdO,5;[OOQO-E8n-E8nOOQW<<Hh<<HhOOQW<<Hl<<HlOIjQhO<<HlOI{QhO,5;ZOJWQ`O,5;ZOOQO-E8m-E8mOJ]QdO1G1dOBZQdO'#EuOJgQ`O7+%rOOQW7+%r7+%rOJoQ!bO1G/`OOQ[7+$y7+$yOJzQhO7+$yPKRQ`O'#EnOOQO,5;d,5;dOOQO-E8v-E8vOOQS1G0}1G0}OKWQ`OAN>WO&lQdO1G0uOK]Q`O7+'OOOQO,5;a,5;aOOQO-E8s-E8sOOQW<<I^<<I^OOQ[<<He<<HePOQW,5;Y,5;YOOQWG23rG23rOKeQdO7+&a",stateData:"Kx~O#sOS#tQQ~OW[OZ[O]TO`VOaVOi]OjWOmXO!jYO!mZO!saO!ybO!{cO!}dO#QeO#WfO#YgO#oRO~OQiOW[OZ[O]TO`VOaVOi]OjWOmXO!jYO!mZO!saO!ybO!{cO!}dO#QeO#WfO#YgO#ohO~O#m$SP~P!dO#tmO~O#ooO~O]qO`rOarOjsOmtO!juO!mwO#nvO~OpzO!^xO~P$SOc!QO#o|O#p}O~O#o!RO~O#o!TO~OW[OZ[O]TO`VOaVOjWOmXO!jYO!mZO#oRO~OS!]Oe!YO!V![O!Y!`O#q!XOp$TP~Ok$TP~P&POQ!jOe!cOm!dOp!eOr!mOt!mOz!kO!`!lO#o!bO#p!hO#}!fO~Ot!qO!`!lO#o!pO~Ot!sO#o!sO~OS!]Oe!YO!V![O!Y!`O#q!XO~Oe!vOpzO#Z!xO~O]YX`YX`!pXaYXjYXmYXpYX!^YX!jYX!mYX#nYX~O`!zO~Ok!{O#m$SXo$SX~O#m$SXo$SX~P!dO#u#OO#v#OO#w#QO~Oc#UO#o|O#p}O~OpzO!^xO~Oo$SP~P!dOe#`O~Oe#aO~Ol#bO!h#cO~O]qO`rOarOjsOmtO~Op!ia!^!ia!j!ia!m!ia#n!iad!ia~P*zOp!la!^!la!j!la!m!la#n!lad!la~P*zOR#gOS!]Oe!YOr#gOt#gO!V![O!Y!`O#q#dO#}!fO~O!R#iO!^#jOk$TXp$TX~Oe#mO~Ok#oOpzO~Oe!vO~O]#rO`#rOd#uOi#rOj#rOk#rO~P&lO]#rO`#rOi#rOj#rOk#rOl#wO~P&lO]#rO`#rOi#rOj#rOk#rOo#yO~P&lOP#zOSsXesXksXvsX!VsX!YsX!usX!wsX#qsX!TsXQsX]sX`sXdsXisXjsXmsXpsXrsXtsXzsX!`sX#osX#psX#}sXlsXosX!^sX!qsX#msX~Ov#{O!u#|O!w#}Ok$TP~P'tOe#aOS#{Xk#{Xv#{X!V#{X!Y#{X!u#{X!w#{X#q#{XQ#{X]#{X`#{Xd#{Xi#{Xj#{Xm#{Xp#{Xr#{Xt#{Xz#{X!`#{X#o#{X#p#{X#}#{Xl#{Xo#{X!^#{X!q#{X#m#{X~Oe$RO~Oe$TO~Ok$VOv#{O~Ok$WO~Ot$XO!`!lO~Op$YO~OpzO!R#iO~OpzO#Z$`O~O!q$bOk!oa#m!oao!oa~P&lOk#hX#m#hXo#hX~P!dOk!{O#m$Sao$Sa~O#u#OO#v#OO#w$hO~Ol$jO!h$kO~Op!ii!^!ii!j!ii!m!ii#n!iid!ii~P*zOp!ki!^!ki!j!ki!m!ki#n!kid!ki~P*zOp!li!^!li!j!li!m!li#n!lid!li~P*zOp#fa!^#fa~P$SOo$lO~Od$RP~P%_Od#zP~P&lO`!PXd}X!R}X!T!PX~O`$sO!T$tO~Od$uO!R#iO~Ok#jXp#jX!^#jX~P'tO!^#jOk$Tap$Ta~O!R#iOk!Uap!Ua!^!Uad!Ua`!Ua~OS!]Oe!YO!V![O!Y!`O#q$yO~Od$QP~P9dOv#{OQ#|X]#|X`#|Xd#|Xe#|Xi#|Xj#|Xk#|Xm#|Xp#|Xr#|Xt#|Xz#|X!`#|X#o#|X#p#|X#}#|Xl#|Xo#|X~O]#rO`#rOd%OOi#rOj#rOk#rO~P&lO]#rO`#rOi#rOj#rOk#rOl%PO~P&lO]#rO`#rOi#rOj#rOk#rOo%QO~P&lOe%SOS!tXk!tX!V!tX!Y!tX#q!tX~Ok%TO~Od%YOt%ZO!a%ZO~Ok%[O~Oo%cO#o%^O#}%]O~Od%dO~P$SOv#{O!^%hO!q%jOk!oi#m!oio!oi~P&lOk#ha#m#hao#ha~P!dOk!{O#m$Sio$Si~O!^%mOd$RX~P$SOd%oO~Ov#{OQ#`Xd#`Xe#`Xm#`Xp#`Xr#`Xt#`Xz#`X!^#`X!`#`X#o#`X#p#`X#}#`X~O!^%qOd#zX~P&lOd%sO~Ol%tOv#{O~OR#gOr#gOt#gO#q%vO#}!fO~O!R#iOk#jap#ja!^#ja~O`!PXd}X!R}X!^}X~O!R#iO!^%xOd$QX~O`%zO~Od%{O~O#o%|O~Ok&OO~O`&PO!R#iO~Od&ROk&QO~Od&UO~OP#zOpsX!^sXdsX~O#}%]Op#TX!^#TX~OpzO!^&WO~Oo&[O#o%^O#}%]O~Ov#{OQ#gXe#gXk#gXm#gXp#gXr#gXt#gXz#gX!^#gX!`#gX!q#gX#m#gX#o#gX#p#gX#}#gXo#gX~O!^%hO!q&`Ok!oq#m!oqo!oq~P&lOl&aOv#{O~Od#eX!^#eX~P%_O!^%mOd$Ra~Od#dX!^#dX~P&lO!^%qOd#za~Od&fO~P&lOd&gO!T&hO~Od#cX!^#cX~P9dO!^%xOd$Qa~O]&mOd&oO~OS#bae#ba!V#ba!Y#ba#q#ba~Od&qO~PG]Od&qOk&rO~Ov#{OQ#gae#gak#gam#gap#gar#gat#gaz#ga!^#ga!`#ga!q#ga#m#ga#o#ga#p#ga#}#gao#ga~Od#ea!^#ea~P$SOd#da!^#da~P&lOR#gOr#gOt#gO#q%vO#}%]O~O!R#iOd#ca!^#ca~O`&xO~O!^%xOd$Qi~P&lO]&mOd&|O~Ov#{Od|ik|i~Od&}O~PG]Ok'OO~Od'PO~O!^%xOd$Qq~Od#cq!^#cq~P&lO#s!a#t#}]#}v!m~",goto:"2h$UPPPPP$VP$YP$c$uP$cP%X$cPP%_PPP%e%o%oPPPPP%oPP%oP&]P%oP%o'W%oP't'w'}'}(^'}P'}P'}P'}'}P(m'}(yP(|PP)p)v$c)|$c*SP$cP$c$cP*Y*{+YP$YP+aP+dP$YP$YP$YP+j$YP+m+p+s+z$YP$YPP$YP,P,V,f,|-[-b-l-r-x.O.U.`.f.l.rPPPPPPPPPPP.x/R/w/z0|P1U1u2O2R2U2[RnQ_^OP`kz!{$dq[OPYZ`kuvwxz!v!{#`$d%mqSOPYZ`kuvwxz!v!{#`$d%mQpTR#RqQ!OVR#SrQ#S!QS$Q!i!jR$i#U!V!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'Q!U!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QU#g!Y$t&hU%`$Y%b&WR&V%_!V!iac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QR$S!kQ%W$RR&S%Xk!^]bf!Y![!g#i#j#m$P$R%X%xQ#e!YQ${#mQ%w$tQ&j%xR&w&hQ!ygQ#p!`Q$^!xR%f$`R#n!]!U!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QQ!qdR$X!rQ!PVR#TrQ#S!PR$i#TQ!SWR#VsQ!UXR#WtQ{UQ!wgQ#^yQ#o!_Q$U!nQ$[!uQ$_!yQ%e$^Q&Y%aQ&]%fR&v&XSjPzQ!}kQ$c!{R%k$dZiPkz!{$dR$P!gQ%}%SR&z&mR!rdR!teR$Z!tS%a$Y%bR&t&WV%_$Y%b&WQ#PmR$g#PQ`OSkPzU!a`k$dR$d!{Q$p#aY%p$p%u&d&l'QQ%u$sQ&d%qQ&l%zR'Q&xQ#t!cQ#v!dQ#x!eV$}#t#v#xQ%X$RR&T%XQ%y$zS&k%y&yR&y&lQ%r$pR&e%rQ%n$mR&c%nQyUR#]yQ%i$aR&_%iQ!|jS$e!|$fR$f!}Q&n%}R&{&nQ#k!ZR$x#kQ%b$YR&Z%bQ&X%aR&u&X__OP`kz!{$d^UOP`kz!{$dQ!VYQ!WZQ#XuQ#YvQ#ZwQ#[xQ$]!vQ$m#`R&b%mR$q#aQ!gaQ!oc[#q!c!d!e#t#v#xQ$a!zd$o#a$p$s%q%u%z&d&l&x'QQ$r#cQ%R#{S%g$a%iQ%l$kQ&^%hR&p&P]#s!c!d!e#t#v#xW!Z]b!g$PQ!ufQ#f!YQ#l![Q$v#iQ$w#jQ$z#mS%V$R%XR&i%xQ#h!YQ%w$tR&w&hR$|#mR$n#`QlPR#_zQ!_]Q!nbQ$O!gR%U$P",nodeNames:" Unit VariableName VariableName QueryCallee Comment StyleSheet RuleSet UniversalSelector TagSelector TagName NestingSelector ClassSelector . ClassName PseudoClassSelector : :: PseudoClassName PseudoClassName ) ( ArgList ValueName ParenthesizedValue AtKeyword # ; ] [ BracketedValue } { BracedValue ColorLiteral NumberLiteral StringLiteral BinaryExpression BinOp CallExpression Callee IfExpression if ArgList IfBranch KeywordQuery FeatureQuery FeatureName BinaryQuery LogicOp ComparisonQuery CompareOp UnaryQuery UnaryQueryOp ParenthesizedQuery SelectorQuery selector ParenthesizedSelector CallQuery ArgList , CallLiteral CallTag ParenthesizedContent PseudoClassName ArgList IdSelector IdName AttributeSelector AttributeName MatchOp ChildSelector ChildOp DescendantSelector SiblingSelector SiblingOp Block Declaration PropertyName Important ImportStatement import Layer layer LayerName layer MediaStatement media CharsetStatement charset NamespaceStatement namespace NamespaceName KeyframesStatement keyframes KeyframeName KeyframeList KeyframeSelector KeyframeRangeName SupportsStatement supports ScopeStatement scope to AtRule Styles",maxTerm:143,nodeProps:[["isolate",-2,5,36,""],["openedBy",20,"(",28,"[",31,"{"],["closedBy",21,")",29,"]",32,"}"]],propSources:[BB],skippedNodes:[0,5,106],repeatNodeCount:15,tokenData:"JQ~R!YOX$qX^%i^p$qpq%iqr({rs-ust/itu6Wuv$qvw7Qwx7cxy9Qyz9cz{9h{|:R|}>t}!O?V!O!P?t!P!Q@]!Q![AU![!]BP!]!^B{!^!_C^!_!`DY!`!aDm!a!b$q!b!cEn!c!}$q!}#OG{#O#P$q#P#QH^#Q#R6W#R#o$q#o#pHo#p#q6W#q#rIQ#r#sIc#s#y$q#y#z%i#z$f$q$f$g%i$g#BY$q#BY#BZ%i#BZ$IS$q$IS$I_%i$I_$I|$q$I|$JO%i$JO$JT$q$JT$JU%i$JU$KV$q$KV$KW%i$KW&FU$q&FU&FV%i&FV;'S$q;'S;=`Iz<%lO$q`$tSOy%Qz;'S%Q;'S;=`%c<%lO%Q`%VS!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Q`%fP;=`<%l%Q~%nh#s~OX%QX^'Y^p%Qpq'Yqy%Qz#y%Q#y#z'Y#z$f%Q$f$g'Y$g#BY%Q#BY#BZ'Y#BZ$IS%Q$IS$I_'Y$I_$I|%Q$I|$JO'Y$JO$JT%Q$JT$JU'Y$JU$KV%Q$KV$KW'Y$KW&FU%Q&FU&FV'Y&FV;'S%Q;'S;=`%c<%lO%Q~'ah#s~!a`OX%QX^'Y^p%Qpq'Yqy%Qz#y%Q#y#z'Y#z$f%Q$f$g'Y$g#BY%Q#BY#BZ'Y#BZ$IS%Q$IS$I_'Y$I_$I|%Q$I|$JO'Y$JO$JT%Q$JT$JU'Y$JU$KV%Q$KV$KW'Y$KW&FU%Q&FU&FV'Y&FV;'S%Q;'S;=`%c<%lO%Qj)OUOy%Qz#]%Q#]#^)b#^;'S%Q;'S;=`%c<%lO%Qj)gU!a`Oy%Qz#a%Q#a#b)y#b;'S%Q;'S;=`%c<%lO%Qj*OU!a`Oy%Qz#d%Q#d#e*b#e;'S%Q;'S;=`%c<%lO%Qj*gU!a`Oy%Qz#c%Q#c#d*y#d;'S%Q;'S;=`%c<%lO%Qj+OU!a`Oy%Qz#f%Q#f#g+b#g;'S%Q;'S;=`%c<%lO%Qj+gU!a`Oy%Qz#h%Q#h#i+y#i;'S%Q;'S;=`%c<%lO%Qj,OU!a`Oy%Qz#T%Q#T#U,b#U;'S%Q;'S;=`%c<%lO%Qj,gU!a`Oy%Qz#b%Q#b#c,y#c;'S%Q;'S;=`%c<%lO%Qj-OU!a`Oy%Qz#h%Q#h#i-b#i;'S%Q;'S;=`%c<%lO%Qj-iS!qY!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Q~-xWOY-uZr-urs.bs#O-u#O#P.g#P;'S-u;'S;=`/c<%lO-u~.gOt~~.jRO;'S-u;'S;=`.s;=`O-u~.vXOY-uZr-urs.bs#O-u#O#P.g#P;'S-u;'S;=`/c;=`<%l-u<%lO-u~/fP;=`<%l-uj/nYjYOy%Qz!Q%Q!Q![0^![!c%Q!c!i0^!i#T%Q#T#Z0^#Z;'S%Q;'S;=`%c<%lO%Qj0cY!a`Oy%Qz!Q%Q!Q![1R![!c%Q!c!i1R!i#T%Q#T#Z1R#Z;'S%Q;'S;=`%c<%lO%Qj1WY!a`Oy%Qz!Q%Q!Q![1v![!c%Q!c!i1v!i#T%Q#T#Z1v#Z;'S%Q;'S;=`%c<%lO%Qj1}YrY!a`Oy%Qz!Q%Q!Q![2m![!c%Q!c!i2m!i#T%Q#T#Z2m#Z;'S%Q;'S;=`%c<%lO%Qj2tYrY!a`Oy%Qz!Q%Q!Q![3d![!c%Q!c!i3d!i#T%Q#T#Z3d#Z;'S%Q;'S;=`%c<%lO%Qj3iY!a`Oy%Qz!Q%Q!Q![4X![!c%Q!c!i4X!i#T%Q#T#Z4X#Z;'S%Q;'S;=`%c<%lO%Qj4`YrY!a`Oy%Qz!Q%Q!Q![5O![!c%Q!c!i5O!i#T%Q#T#Z5O#Z;'S%Q;'S;=`%c<%lO%Qj5TY!a`Oy%Qz!Q%Q!Q![5s![!c%Q!c!i5s!i#T%Q#T#Z5s#Z;'S%Q;'S;=`%c<%lO%Qj5zSrY!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Qd6ZUOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Qd6tS!hS!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Qb7VSZQOy%Qz;'S%Q;'S;=`%c<%lO%Q~7fWOY7cZw7cwx.bx#O7c#O#P8O#P;'S7c;'S;=`8z<%lO7c~8RRO;'S7c;'S;=`8[;=`O7c~8_XOY7cZw7cwx.bx#O7c#O#P8O#P;'S7c;'S;=`8z;=`<%l7c<%lO7c~8}P;=`<%l7cj9VSeYOy%Qz;'S%Q;'S;=`%c<%lO%Q~9hOd~n9oUWQvWOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Qj:YWvW!mQOy%Qz!O%Q!O!P:r!P!Q%Q!Q![=w![;'S%Q;'S;=`%c<%lO%Qj:wU!a`Oy%Qz!Q%Q!Q![;Z![;'S%Q;'S;=`%c<%lO%Qj;bY!a`#}YOy%Qz!Q%Q!Q![;Z![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%Qj<VY!a`Oy%Qz{%Q{|<u|}%Q}!O<u!O!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj<zU!a`Oy%Qz!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj=eU!a`#}YOy%Qz!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj>O[!a`#}YOy%Qz!O%Q!O!P;Z!P!Q%Q!Q![=w![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%Qj>yS!^YOy%Qz;'S%Q;'S;=`%c<%lO%Qj?[WvWOy%Qz!O%Q!O!P:r!P!Q%Q!Q![=w![;'S%Q;'S;=`%c<%lO%Qj?yU]YOy%Qz!Q%Q!Q![;Z![;'S%Q;'S;=`%c<%lO%Q~@bTvWOy%Qz{@q{;'S%Q;'S;=`%c<%lO%Q~@xS!a`#t~Oy%Qz;'S%Q;'S;=`%c<%lO%QjAZ[#}YOy%Qz!O%Q!O!P;Z!P!Q%Q!Q![=w![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%QjBUU`YOy%Qz![%Q![!]Bh!];'S%Q;'S;=`%c<%lO%QbBoSaQ!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QjCQSkYOy%Qz;'S%Q;'S;=`%c<%lO%QhCcU!TWOy%Qz!_%Q!_!`Cu!`;'S%Q;'S;=`%c<%lO%QhC|S!TW!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QlDaS!TW!hSOy%Qz;'S%Q;'S;=`%c<%lO%QjDtV!jQ!TWOy%Qz!_%Q!_!`Cu!`!aEZ!a;'S%Q;'S;=`%c<%lO%QbEbS!jQ!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QjEqYOy%Qz}%Q}!OFa!O!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjFfW!a`Oy%Qz!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjGV[iY!a`Oy%Qz}%Q}!OGO!O!Q%Q!Q![GO![!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjHQSmYOy%Qz;'S%Q;'S;=`%c<%lO%QnHcSl^Oy%Qz;'S%Q;'S;=`%c<%lO%QjHtSpYOy%Qz;'S%Q;'S;=`%c<%lO%QjIVSoYOy%Qz;'S%Q;'S;=`%c<%lO%QfIhU!mQOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Q`I}P;=`<%l$q",tokenizers:[XB,ZB,UB,qB,1,2,3,4,new jZ("m~RRYZ[z{a~~g~aO#v~~dP!P!Qg~lO#w~~",28,129)],topRules:{StyleSheet:[0,6],Styles:[1,105]},specialized:[{term:124,get:e=>jB[e]||-1},{term:125,get:e=>FB[e]||-1},{term:4,get:e=>WB[e]||-1},{term:25,get:e=>YB[e]||-1},{term:123,get:e=>GB[e]||-1}],tokenPrec:1963});let KB=null;function JB(){if(!KB&&"object"==typeof document&&document.body){let{style:e}=document.body,t=[],i=new Set;for(let r in e)"cssText"!=r&&"cssFloat"!=r&&"string"==typeof e[r]&&(/[A-Z]/.test(r)&&(r=r.replace(/[A-Z]/g,e=>"-"+e.toLowerCase())),i.has(r)||(t.push(r),i.add(r)));KB=t.sort().map(e=>({type:"property",label:e,apply:e+": "}))}return KB||[]}const ej=["active","after","any-link","autofill","backdrop","before","checked","cue","default","defined","disabled","empty","enabled","file-selector-button","first","first-child","first-letter","first-line","first-of-type","focus","focus-visible","focus-within","fullscreen","has","host","host-context","hover","in-range","indeterminate","invalid","is","lang","last-child","last-of-type","left","link","marker","modal","not","nth-child","nth-last-child","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","part","placeholder","placeholder-shown","read-only","read-write","required","right","root","scope","selection","slotted","target","target-text","valid","visited","where"].map(e=>({type:"class",label:e})),tj=["above","absolute","activeborder","additive","activecaption","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","antialiased","appworkspace","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic-abegede-gez","ethiopic-halehame-aa-er","ethiopic-halehame-gez","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","graytext","grid","groove","hand","hard-light","help","hidden","hide","higher","highlight","highlighttext","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","justify","keep-all","landscape","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-hexadecimal","lower-latin","lower-norwegian","lowercase","ltr","luminosity","manipulation","match","matrix","matrix3d","medium","menu","menutext","message-box","middle","min-intrinsic","mix","monospace","move","multiple","multiple_mask_images","multiply","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","opacity","open-quote","optimizeLegibility","optimizeSpeed","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","text","text-bottom","text-top","textarea","textfield","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","to","top","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-latin","uppercase","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"].map(e=>({type:"keyword",label:e})).concat(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"].map(e=>({type:"constant",label:e}))),ij=["a","abbr","address","article","aside","b","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dialog","div","dl","dt","em","figcaption","figure","footer","form","header","hgroup","h1","h2","h3","h4","h5","h6","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","main","meter","nav","ol","output","p","pre","ruby","section","select","small","source","span","strong","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","tr","u","ul"].map(e=>({type:"type",label:e})),rj=["@charset","@color-profile","@container","@counter-style","@font-face","@font-feature-values","@font-palette-values","@import","@keyframes","@layer","@media","@namespace","@page","@position-try","@property","@scope","@starting-style","@supports","@view-transition"].map(e=>({type:"keyword",label:e})),nj=/^(\w[\w-]*|-\w[\w-]*|)$/,oj=/^-(-[\w-]*)?$/;const sj=new lM,aj=["Declaration"];function lj(e){for(let t=e;;){if(t.type.isTop)return t;if(!(t=t.parent))return e}}function cj(e,t,i){if(t.to-t.from>4096){let r=sj.get(t);if(r)return r;let n=[],o=new Set,s=t.cursor(XD.IncludeAnonymous);if(s.firstChild())do{for(let t of cj(e,s.node,i))o.has(t.label)||(o.add(t.label),n.push(t))}while(s.nextSibling());return sj.set(t,n),n}{let r=[],n=new Set;return t.cursor().iterate(t=>{var o;if(i(t)&&t.matchContext(aj)&&":"==(null===(o=t.node.nextSibling)||void 0===o?void 0:o.name)){let i=e.sliceString(t.from,t.to);n.has(i)||(n.add(i),r.push({label:i,type:"variable"}))}}),r}}const dj=e=>t=>{let{state:i,pos:r}=t,n=oN(i).resolveInner(r,-1),o=n.type.isError&&n.from==n.to-1&&"-"==i.doc.sliceString(n.from,n.to);if("PropertyName"==n.name||(o||"TagName"==n.name)&&/^(Block|Styles)$/.test(n.resolve(n.to).name))return{from:n.from,options:JB(),validFor:nj};if("ValueName"==n.name)return{from:n.from,options:tj,validFor:nj};if("PseudoClassName"==n.name)return{from:n.from,options:ej,validFor:nj};if(e(n)||(t.explicit||o)&&function(e,t){var i;if(("("==e.name||e.type.isError)&&(e=e.parent||e),"ArgList"!=e.name)return!1;let r=null===(i=e.parent)||void 0===i?void 0:i.firstChild;return"Callee"==(null==r?void 0:r.name)&&"var"==t.sliceString(r.from,r.to)}(n,i.doc))return{from:e(n)||o?n.from:r,options:cj(i.doc,lj(n),e),validFor:oj};if("TagName"==n.name){for(let{parent:e}=n;e;e=e.parent)if("Block"==e.name)return{from:n.from,options:JB(),validFor:nj};return{from:n.from,options:ij,validFor:nj}}if("AtKeyword"==n.name)return{from:n.from,options:rj,validFor:nj};if(!t.explicit)return null;let s=n.resolve(r),a=s.childBefore(r);return a&&":"==a.name&&"PseudoClassSelector"==s.name?{from:r,options:ej,validFor:nj}:a&&":"==a.name&&"Declaration"==s.name||"ArgList"==s.name?{from:r,options:tj,validFor:nj}:"Block"==s.name||"Styles"==s.name?{from:r,options:JB(),validFor:nj}:null},hj=dj(e=>"VariableName"==e.name),uj=nN.define({name:"css",parser:HB.configure({props:[kN.add({Declaration:AN()}),QN.add({"Block KeyframeList":RN})]}),languageData:{commentTokens:{block:{open:"/*",close:"*/"}},indentOnInput:/^\s*\}$/,wordChars:"-"}});const pj=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],fj=new sB({start:!1,shift:(e,t)=>5==t||6==t||320==t?e:321==t,strict:!1}),mj=new FZ((e,t)=>{let{next:i}=e;(125==i||-1==i||t.context)&&e.acceptToken(318)},{contextual:!0,fallback:!0}),gj=new FZ((e,t)=>{let i,{next:r}=e;pj.indexOf(r)>-1||(47!=r||47!=(i=e.peek(1))&&42!=i)&&(125==r||59==r||-1==r||t.context||e.acceptToken(316))},{contextual:!0}),vj=new FZ((e,t)=>{91!=e.next||t.context||e.acceptToken(317)},{contextual:!0}),Oj=new FZ((e,t)=>{let{next:i}=e;if(43==i||45==i){if(e.advance(),i==e.next){e.advance();let i=!t.context&&t.canShift(1);e.acceptToken(i?1:2)}}else 63==i&&46==e.peek(1)&&(e.advance(),e.advance(),(e.next<48||e.next>57)&&e.acceptToken(3))},{contextual:!0});function yj(e,t){return e>=65&&e<=90||e>=97&&e<=122||95==e||e>=192||!t&&e>=48&&e<=57}const bj=new FZ((e,t)=>{if(60!=e.next||!t.dialectEnabled(0))return;if(e.advance(),47==e.next)return;let i=0;for(;pj.indexOf(e.next)>-1;)e.advance(),i++;if(yj(e.next,!0)){for(e.advance(),i++;yj(e.next,!1);)e.advance(),i++;for(;pj.indexOf(e.next)>-1;)e.advance(),i++;if(44==e.next)return;for(let t=0;;t++){if(7==t){if(!yj(e.next,!0))return;break}if(e.next!="extends".charCodeAt(t))break;e.advance(),i++}}e.acceptToken(4,-i)}),xj=$M({"get set async static":HM.modifier,"for while do if else switch try catch finally return throw break continue default case defer":HM.controlKeyword,"in of await yield void typeof delete instanceof as satisfies":HM.operatorKeyword,"let var const using function class extends":HM.definitionKeyword,"import export from":HM.moduleKeyword,"with debugger new":HM.keyword,TemplateString:HM.special(HM.string),super:HM.atom,BooleanLiteral:HM.bool,this:HM.self,null:HM.null,Star:HM.modifier,VariableName:HM.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":HM.function(HM.variableName),VariableDefinition:HM.definition(HM.variableName),Label:HM.labelName,PropertyName:HM.propertyName,PrivatePropertyName:HM.special(HM.propertyName),"CallExpression/MemberExpression/PropertyName":HM.function(HM.propertyName),"FunctionDeclaration/VariableDefinition":HM.function(HM.definition(HM.variableName)),"ClassDeclaration/VariableDefinition":HM.definition(HM.className),"NewExpression/VariableName":HM.className,PropertyDefinition:HM.definition(HM.propertyName),PrivatePropertyDefinition:HM.definition(HM.special(HM.propertyName)),UpdateOp:HM.updateOperator,"LineComment Hashbang":HM.lineComment,BlockComment:HM.blockComment,Number:HM.number,String:HM.string,Escape:HM.escape,ArithOp:HM.arithmeticOperator,LogicOp:HM.logicOperator,BitOp:HM.bitwiseOperator,CompareOp:HM.compareOperator,RegExp:HM.regexp,Equals:HM.definitionOperator,Arrow:HM.function(HM.punctuation),": Spread":HM.punctuation,"( )":HM.paren,"[ ]":HM.squareBracket,"{ }":HM.brace,"InterpolationStart InterpolationEnd":HM.special(HM.brace),".":HM.derefOperator,", ;":HM.separator,"@":HM.meta,TypeName:HM.typeName,TypeDefinition:HM.definition(HM.typeName),"type enum interface implements namespace module declare":HM.definitionKeyword,"abstract global Privacy readonly override":HM.modifier,"is keyof unique infer asserts":HM.operatorKeyword,JSXAttributeValue:HM.attributeValue,JSXText:HM.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":HM.angleBracket,"JSXIdentifier JSXNameSpacedName":HM.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":HM.attributeName,"JSXBuiltin/JSXIdentifier":HM.standard(HM.tagName)}),wj={__proto__:null,export:20,as:25,from:33,default:36,async:41,function:42,in:52,out:55,const:56,extends:60,this:64,true:72,false:72,null:84,void:88,typeof:92,super:108,new:142,delete:154,yield:163,await:167,class:172,public:235,private:235,protected:235,readonly:237,instanceof:256,satisfies:259,import:292,keyof:349,unique:353,infer:359,asserts:395,is:397,abstract:417,implements:419,type:421,let:424,var:426,using:429,interface:435,enum:439,namespace:445,module:447,declare:451,global:455,defer:471,for:476,of:485,while:488,with:492,do:496,if:500,else:502,switch:506,case:512,try:518,catch:522,finally:526,return:530,throw:534,break:538,continue:542,debugger:546},kj={__proto__:null,async:129,get:131,set:133,declare:195,public:197,private:197,protected:197,static:199,abstract:201,override:203,readonly:209,accessor:211,new:401},Sj={__proto__:null,"<":193},_j=aB.deserialize({version:14,states:"$F|Q%TQlOOO%[QlOOO'_QpOOP(lO`OOO*zQ!0MxO'#CiO+RO#tO'#CjO+aO&jO'#CjO+oO#@ItO'#DaO.QQlO'#DgO.bQlO'#DrO%[QlO'#DzO0fQlO'#ESOOQ!0Lf'#E['#E[O1PQ`O'#EXOOQO'#Ep'#EpOOQO'#Il'#IlO1XQ`O'#GsO1dQ`O'#EoO1iQ`O'#EoO3hQ!0MxO'#JrO6[Q!0MxO'#JsO6uQ`O'#F]O6zQ,UO'#FtOOQ!0Lf'#Ff'#FfO7VO7dO'#FfO9XQMhO'#F|O9`Q`O'#F{OOQ!0Lf'#Js'#JsOOQ!0Lb'#Jr'#JrO9eQ`O'#GwOOQ['#K_'#K_O9pQ`O'#IYO9uQ!0LrO'#IZOOQ['#J`'#J`OOQ['#I_'#I_Q`QlOOQ`QlOOO9}Q!L^O'#DvO:UQlO'#EOO:]QlO'#EQO9kQ`O'#GsO:dQMhO'#CoO:rQ`O'#EnO:}Q`O'#EyO;hQMhO'#FeO;xQ`O'#GsOOQO'#K`'#K`O;}Q`O'#K`O<]Q`O'#G{O<]Q`O'#G|O<]Q`O'#HOO9kQ`O'#HRO=SQ`O'#HUO>kQ`O'#CeO>{Q`O'#HcO?TQ`O'#HiO?TQ`O'#HkO`QlO'#HmO?TQ`O'#HoO?TQ`O'#HrO?YQ`O'#HxO?_Q!0LsO'#IOO%[QlO'#IQO?jQ!0LsO'#ISO?uQ!0LsO'#IUO9uQ!0LrO'#IWO@QQ!0MxO'#CiOASQpO'#DlQOQ`OOO%[QlO'#EQOAjQ`O'#ETO:dQMhO'#EnOAuQ`O'#EnOBQQ!bO'#FeOOQ['#Cg'#CgOOQ!0Lb'#Dq'#DqOOQ!0Lb'#Jv'#JvO%[QlO'#JvOOQO'#Jy'#JyOOQO'#Ih'#IhOCQQpO'#EgOOQ!0Lb'#Ef'#EfOOQ!0Lb'#J}'#J}OC|Q!0MSO'#EgODWQpO'#EWOOQO'#Jx'#JxODlQpO'#JyOEyQpO'#EWODWQpO'#EgPFWO&2DjO'#CbPOOO)CD})CD}OOOO'#I`'#I`OFcO#tO,59UOOQ!0Lh,59U,59UOOOO'#Ia'#IaOFqO&jO,59UOGPQ!L^O'#DcOOOO'#Ic'#IcOGWO#@ItO,59{OOQ!0Lf,59{,59{OGfQlO'#IdOGyQ`O'#JtOIxQ!fO'#JtO+}QlO'#JtOJPQ`O,5:ROJgQ`O'#EpOJtQ`O'#KTOKPQ`O'#KSOKPQ`O'#KSOKXQ`O,5;^OK^Q`O'#KROOQ!0Ln,5:^,5:^OKeQlO,5:^OMcQ!0MxO,5:fONSQ`O,5:nONmQ!0LrO'#KQONtQ`O'#KPO9eQ`O'#KPO! YQ`O'#KPO! bQ`O,5;]O! gQ`O'#KPO!#lQ!fO'#JsOOQ!0Lh'#Ci'#CiO%[QlO'#ESO!$[Q!fO,5:sOOQS'#Jz'#JzOOQO-E<j-E<jO9kQ`O,5=_O!$rQ`O,5=_O!$wQlO,5;ZO!&zQMhO'#EkO!(eQ`O,5;ZO!(jQlO'#DyO!(tQpO,5;dO!(|QpO,5;dO%[QlO,5;dOOQ['#FT'#FTOOQ['#FV'#FVO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eOOQ['#FZ'#FZO!)[QlO,5;tOOQ!0Lf,5;y,5;yOOQ!0Lf,5;z,5;zOOQ!0Lf,5;|,5;|O%[QlO'#IpO!+_Q!0LrO,5<iO%[QlO,5;eO!&zQMhO,5;eO!+|QMhO,5;eO!-nQMhO'#E^O%[QlO,5;wOOQ!0Lf,5;{,5;{O!-uQ,UO'#FjO!.rQ,UO'#KXO!.^Q,UO'#KXO!.yQ,UO'#KXOOQO'#KX'#KXO!/_Q,UO,5<SOOOW,5<`,5<`O!/pQlO'#FvOOOW'#Io'#IoO7VO7dO,5<QO!/wQ,UO'#FxOOQ!0Lf,5<Q,5<QO!0hQ$IUO'#CyOOQ!0Lh'#C}'#C}O!0{O#@ItO'#DRO!1iQMjO,5<eO!1pQ`O,5<hO!3YQ(CWO'#GXO!3jQ`O'#GYO!3oQ`O'#GYO!5_Q(CWO'#G^O!6dQpO'#GbOOQO'#Gn'#GnO!,TQMhO'#GmOOQO'#Gp'#GpO!,TQMhO'#GoO!7VQ$IUO'#JlOOQ!0Lh'#Jl'#JlO!7aQ`O'#JkO!7oQ`O'#JjO!7wQ`O'#CuOOQ!0Lh'#C{'#C{O!8YQ`O'#C}OOQ!0Lh'#DV'#DVOOQ!0Lh'#DX'#DXO!8_Q`O,5<eO1SQ`O'#DZO!,TQMhO'#GPO!,TQMhO'#GRO!8gQ`O'#GTO!8lQ`O'#GUO!3oQ`O'#G[O!,TQMhO'#GaO<]Q`O'#JkO!8qQ`O'#EqO!9`Q`O,5<gOOQ!0Lb'#Cr'#CrO!9hQ`O'#ErO!:bQpO'#EsOOQ!0Lb'#KR'#KRO!:iQ!0LrO'#KaO9uQ!0LrO,5=cO`QlO,5>tOOQ['#Jh'#JhOOQ[,5>u,5>uOOQ[-E<]-E<]O!<hQ!0MxO,5:bO!:]QpO,5:`O!?RQ!0MxO,5:jO%[QlO,5:jO!AiQ!0MxO,5:lOOQO,5@z,5@zO!BYQMhO,5=_O!BhQ!0LrO'#JiO9`Q`O'#JiO!ByQ!0LrO,59ZO!CUQpO,59ZO!C^QMhO,59ZO:dQMhO,59ZO!CiQ`O,5;ZO!CqQ`O'#HbO!DVQ`O'#KdO%[QlO,5;}O!:]QpO,5<PO!D_Q`O,5=zO!DdQ`O,5=zO!DiQ`O,5=zO!DwQ`O,5=zO9uQ!0LrO,5=zO<]Q`O,5=jOOQO'#Cy'#CyO!EOQpO,5=gO!EWQMhO,5=hO!EcQ`O,5=jO!EhQ!bO,5=mO!EpQ`O'#K`O?YQ`O'#HWO9kQ`O'#HYO!EuQ`O'#HYO:dQMhO'#H[O!EzQ`O'#H[OOQ[,5=p,5=pO!FPQ`O'#H]O!FbQ`O'#CoO!FgQ`O,59PO!FqQ`O,59PO!HvQlO,59POOQ[,59P,59PO!IWQ!0LrO,59PO%[QlO,59PO!KcQlO'#HeOOQ['#Hf'#HfOOQ['#Hg'#HgO`QlO,5=}O!KyQ`O,5=}O`QlO,5>TO`QlO,5>VO!LOQ`O,5>XO`QlO,5>ZO!LTQ`O,5>^O!LYQlO,5>dOOQ[,5>j,5>jO%[QlO,5>jO9uQ!0LrO,5>lOOQ[,5>n,5>nO#!dQ`O,5>nOOQ[,5>p,5>pO#!dQ`O,5>pOOQ[,5>r,5>rO##QQpO'#D_O%[QlO'#JvO##sQpO'#JvO##}QpO'#DmO#$`QpO'#DmO#&qQlO'#DmO#&xQ`O'#JuO#'QQ`O,5:WO#'VQ`O'#EtO#'eQ`O'#KUO#'mQ`O,5;_O#'rQpO'#DmO#(PQpO'#EVOOQ!0Lf,5:o,5:oO%[QlO,5:oO#(WQ`O,5:oO?YQ`O,5;YO!CUQpO,5;YO!C^QMhO,5;YO:dQMhO,5;YO#(`Q`O,5@bO#(eQ07dO,5:sOOQO-E<f-E<fO#)kQ!0MSO,5;RODWQpO,5:rO#)uQpO,5:rODWQpO,5;RO!ByQ!0LrO,5:rOOQ!0Lb'#Ej'#EjOOQO,5;R,5;RO%[QlO,5;RO#*SQ!0LrO,5;RO#*_Q!0LrO,5;RO!CUQpO,5:rOOQO,5;X,5;XO#*mQ!0LrO,5;RPOOO'#I^'#I^P#+RO&2DjO,58|POOO,58|,58|OOOO-E<^-E<^OOQ!0Lh1G.p1G.pOOOO-E<_-E<_OOOO,59},59}O#+^Q!bO,59}OOOO-E<a-E<aOOQ!0Lf1G/g1G/gO#+cQ!fO,5?OO+}QlO,5?OOOQO,5?U,5?UO#+mQlO'#IdOOQO-E<b-E<bO#+zQ`O,5@`O#,SQ!fO,5@`O#,ZQ`O,5@nOOQ!0Lf1G/m1G/mO%[QlO,5@oO#,cQ`O'#IjOOQO-E<h-E<hO#,ZQ`O,5@nOOQ!0Lb1G0x1G0xOOQ!0Ln1G/x1G/xOOQ!0Ln1G0Y1G0YO%[QlO,5@lO#,wQ!0LrO,5@lO#-YQ!0LrO,5@lO#-aQ`O,5@kO9eQ`O,5@kO#-iQ`O,5@kO#-wQ`O'#ImO#-aQ`O,5@kOOQ!0Lb1G0w1G0wO!(tQpO,5:uO!)PQpO,5:uOOQS,5:w,5:wO#.iQdO,5:wO#.qQMhO1G2yO9kQ`O1G2yOOQ!0Lf1G0u1G0uO#/PQ!0MxO1G0uO#0UQ!0MvO,5;VOOQ!0Lh'#GW'#GWO#0rQ!0MzO'#JlO!$wQlO1G0uO#2}Q!fO'#JwO%[QlO'#JwO#3XQ`O,5:eOOQ!0Lh'#D_'#D_OOQ!0Lf1G1O1G1OO%[QlO1G1OOOQ!0Lf1G1f1G1fO#3^Q`O1G1OO#5rQ!0MxO1G1PO#5yQ!0MxO1G1PO#8aQ!0MxO1G1PO#8hQ!0MxO1G1PO#;OQ!0MxO1G1PO#=fQ!0MxO1G1PO#=mQ!0MxO1G1PO#=tQ!0MxO1G1PO#@[Q!0MxO1G1PO#@cQ!0MxO1G1PO#BpQ?MtO'#CiO#DkQ?MtO1G1`O#DrQ?MtO'#JsO#EVQ!0MxO,5?[OOQ!0Lb-E<n-E<nO#GdQ!0MxO1G1PO#HaQ!0MzO1G1POOQ!0Lf1G1P1G1PO#IdQMjO'#J|O#InQ`O,5:xO#IsQ!0MxO1G1cO#JgQ,UO,5<WO#JoQ,UO,5<XO#JwQ,UO'#FoO#K`Q`O'#FnOOQO'#KY'#KYOOQO'#In'#InO#KeQ,UO1G1nOOQ!0Lf1G1n1G1nOOOW1G1y1G1yO#KvQ?MtO'#JrO#LQQ`O,5<bO!)[QlO,5<bOOOW-E<m-E<mOOQ!0Lf1G1l1G1lO#LVQpO'#KXOOQ!0Lf,5<d,5<dO#L_QpO,5<dO#LdQMhO'#DTOOOO'#Ib'#IbO#LkO#@ItO,59mOOQ!0Lh,59m,59mO%[QlO1G2PO!8lQ`O'#IrO#LvQ`O,5<zOOQ!0Lh,5<w,5<wO!,TQMhO'#IuO#MdQMjO,5=XO!,TQMhO'#IwO#NVQMjO,5=ZO!&zQMhO,5=]OOQO1G2S1G2SO#NaQ!dO'#CrO#NtQ(CWO'#ErO$ |QpO'#GbO$!dQ!dO,5<sO$!kQ`O'#K[O9eQ`O'#K[O$!yQ`O,5<uO$#aQ!dO'#C{O!,TQMhO,5<tO$#kQ`O'#GZO$$PQ`O,5<tO$$UQ!dO'#GWO$$cQ!dO'#K]O$$mQ`O'#K]O!&zQMhO'#K]O$$rQ`O,5<xO$$wQlO'#JvO$%RQpO'#GcO#$`QpO'#GcO$%dQ`O'#GgO!3oQ`O'#GkO$%iQ!0LrO'#ItO$%tQpO,5<|OOQ!0Lp,5<|,5<|O$%{QpO'#GcO$&YQpO'#GdO$&kQpO'#GdO$&pQMjO,5=XO$'QQMjO,5=ZOOQ!0Lh,5=^,5=^O!,TQMhO,5@VO!,TQMhO,5@VO$'bQ`O'#IyO$'vQ`O,5@UO$(OQ`O,59aOOQ!0Lh,59i,59iO$(TQ`O,5@VO$)TQ$IYO,59uOOQ!0Lh'#Jp'#JpO$)vQMjO,5<kO$*iQMjO,5<mO@zQ`O,5<oOOQ!0Lh,5<p,5<pO$*sQ`O,5<vO$*xQMjO,5<{O$+YQ`O'#KPO!$wQlO1G2RO$+_Q`O1G2RO9eQ`O'#KSO9eQ`O'#EtO%[QlO'#EtO9eQ`O'#I{O$+dQ!0LrO,5@{OOQ[1G2}1G2}OOQ[1G4`1G4`OOQ!0Lf1G/|1G/|OOQ!0Lf1G/z1G/zO$-fQ!0MxO1G0UOOQ[1G2y1G2yO!&zQMhO1G2yO%[QlO1G2yO#.tQ`O1G2yO$/jQMhO'#EkOOQ!0Lb,5@T,5@TO$/wQ!0LrO,5@TOOQ[1G.u1G.uO!ByQ!0LrO1G.uO!CUQpO1G.uO!C^QMhO1G.uO$0YQ`O1G0uO$0_Q`O'#CiO$0jQ`O'#KeO$0rQ`O,5=|O$0wQ`O'#KeO$0|Q`O'#KeO$1[Q`O'#JRO$1jQ`O,5AOO$1rQ!fO1G1iOOQ!0Lf1G1k1G1kO9kQ`O1G3fO@zQ`O1G3fO$1yQ`O1G3fO$2OQ`O1G3fO!DiQ`O1G3fO9uQ!0LrO1G3fOOQ[1G3f1G3fO!EcQ`O1G3UO!&zQMhO1G3RO$2TQ`O1G3ROOQ[1G3S1G3SO!&zQMhO1G3SO$2YQ`O1G3SO$2bQpO'#HQOOQ[1G3U1G3UO!6_QpO'#I}O!EhQ!bO1G3XOOQ[1G3X1G3XOOQ[,5=r,5=rO$2jQMhO,5=tO9kQ`O,5=tO$%dQ`O,5=vO9`Q`O,5=vO!CUQpO,5=vO!C^QMhO,5=vO:dQMhO,5=vO$2xQ`O'#KcO$3TQ`O,5=wOOQ[1G.k1G.kO$3YQ!0LrO1G.kO@zQ`O1G.kO$3eQ`O1G.kO9uQ!0LrO1G.kO$5mQ!fO,5AQO$5zQ`O,5AQO9eQ`O,5AQO$6VQlO,5>PO$6^Q`O,5>POOQ[1G3i1G3iO`QlO1G3iOOQ[1G3o1G3oOOQ[1G3q1G3qO?TQ`O1G3sO$6cQlO1G3uO$:gQlO'#HtOOQ[1G3x1G3xO$:tQ`O'#HzO?YQ`O'#H|OOQ[1G4O1G4OO$:|QlO1G4OO9uQ!0LrO1G4UOOQ[1G4W1G4WOOQ!0Lb'#G_'#G_O9uQ!0LrO1G4YO9uQ!0LrO1G4[O$?TQ`O,5@bO!)[QlO,5;`O9eQ`O,5;`O?YQ`O,5:XO!)[QlO,5:XO!CUQpO,5:XO$?YQ?MtO,5:XOOQO,5;`,5;`O$?dQpO'#IeO$?zQ`O,5@aOOQ!0Lf1G/r1G/rO$@SQpO'#IkO$@^Q`O,5@pOOQ!0Lb1G0y1G0yO#$`QpO,5:XOOQO'#Ig'#IgO$@fQpO,5:qOOQ!0Ln,5:q,5:qO#(ZQ`O1G0ZOOQ!0Lf1G0Z1G0ZO%[QlO1G0ZOOQ!0Lf1G0t1G0tO?YQ`O1G0tO!CUQpO1G0tO!C^QMhO1G0tOOQ!0Lb1G5|1G5|O!ByQ!0LrO1G0^OOQO1G0m1G0mO%[QlO1G0mO$@mQ!0LrO1G0mO$@xQ!0LrO1G0mO!CUQpO1G0^ODWQpO1G0^O$AWQ!0LrO1G0mOOQO1G0^1G0^O$AlQ!0MxO1G0mPOOO-E<[-E<[POOO1G.h1G.hOOOO1G/i1G/iO$AvQ!bO,5<iO$BOQ!fO1G4jOOQO1G4p1G4pO%[QlO,5?OO$BYQ`O1G5zO$BbQ`O1G6YO$BjQ!fO1G6ZO9eQ`O,5?UO$BtQ!0MxO1G6WO%[QlO1G6WO$CUQ!0LrO1G6WO$CgQ`O1G6VO$CgQ`O1G6VO9eQ`O1G6VO$CoQ`O,5?XO9eQ`O,5?XOOQO,5?X,5?XO$DTQ`O,5?XO$+YQ`O,5?XOOQO-E<k-E<kOOQS1G0a1G0aOOQS1G0c1G0cO#.lQ`O1G0cOOQ[7+(e7+(eO!&zQMhO7+(eO%[QlO7+(eO$DcQ`O7+(eO$DnQMhO7+(eO$D|Q!0MzO,5=XO$GXQ!0MzO,5=ZO$IdQ!0MzO,5=XO$KuQ!0MzO,5=ZO$NWQ!0MzO,59uO%!]Q!0MzO,5<kO%$hQ!0MzO,5<mO%&sQ!0MzO,5<{OOQ!0Lf7+&a7+&aO%)UQ!0MxO7+&aO%)xQlO'#IfO%*VQ`O,5@cO%*_Q!fO,5@cOOQ!0Lf1G0P1G0PO%*iQ`O7+&jOOQ!0Lf7+&j7+&jO%*nQ?MtO,5:fO%[QlO7+&zO%*xQ?MtO,5:bO%+VQ?MtO,5:jO%+aQ?MtO,5:lO%+kQMhO'#IiO%+uQ`O,5@hOOQ!0Lh1G0d1G0dOOQO1G1r1G1rOOQO1G1s1G1sO%+}Q!jO,5<ZO!)[QlO,5<YOOQO-E<l-E<lOOQ!0Lf7+'Y7+'YOOOW7+'e7+'eOOOW1G1|1G1|O%,YQ`O1G1|OOQ!0Lf1G2O1G2OOOOO,59o,59oO%,_Q!dO,59oOOOO-E<`-E<`OOQ!0Lh1G/X1G/XO%,fQ!0MxO7+'kOOQ!0Lh,5?^,5?^O%-YQMhO1G2fP%-aQ`O'#IrPOQ!0Lh-E<p-E<pO%-}QMjO,5?aOOQ!0Lh-E<s-E<sO%.pQMjO,5?cOOQ!0Lh-E<u-E<uO%.zQ!dO1G2wO%/RQ!dO'#CrO%/iQMhO'#KSO$$wQlO'#JvOOQ!0Lh1G2_1G2_O%/sQ`O'#IqO%0[Q`O,5@vO%0[Q`O,5@vO%0dQ`O,5@vO%0oQ`O,5@vOOQO1G2a1G2aO%0}QMjO1G2`O$+YQ`O'#K[O!,TQMhO1G2`O%1_Q(CWO'#IsO%1lQ`O,5@wO!&zQMhO,5@wO%1tQ!dO,5@wOOQ!0Lh1G2d1G2dO%4UQ!fO'#CiO%4`Q`O,5=POOQ!0Lb,5<},5<}O%4hQpO,5<}OOQ!0Lb,5=O,5=OOCwQ`O,5<}O%4sQpO,5<}OOQ!0Lb,5=R,5=RO$+YQ`O,5=VOOQO,5?`,5?`OOQO-E<r-E<rOOQ!0Lp1G2h1G2hO#$`QpO,5<}O$$wQlO,5=PO%5RQ`O,5=OO%5^QpO,5=OO!,TQMhO'#IuO%6WQMjO1G2sO!,TQMhO'#IwO%6yQMjO1G2uO%7TQMjO1G5qO%7_QMjO1G5qOOQO,5?e,5?eOOQO-E<w-E<wOOQO1G.{1G.{O!,TQMhO1G5qO!,TQMhO1G5qO!:]QpO,59wO%[QlO,59wOOQ!0Lh,5<j,5<jO%7lQ`O1G2ZO!,TQMhO1G2bO%7qQ!0MxO7+'mOOQ!0Lf7+'m7+'mO!$wQlO7+'mO%8eQ`O,5;`OOQ!0Lb,5?g,5?gOOQ!0Lb-E<y-E<yO%8jQ!dO'#K^O#(ZQ`O7+(eO4UQ!fO7+(eO$DfQ`O7+(eO%8tQ!0MvO'#CiO%9XQ!0MvO,5=SO%9lQ`O,5=SO%9tQ`O,5=SOOQ!0Lb1G5o1G5oOOQ[7+$a7+$aO!ByQ!0LrO7+$aO!CUQpO7+$aO!$wQlO7+&aO%9yQ`O'#JQO%:bQ`O,5APOOQO1G3h1G3hO9kQ`O,5APO%:bQ`O,5APO%:jQ`O,5APOOQO,5?m,5?mOOQO-E=P-E=POOQ!0Lf7+'T7+'TO%:oQ`O7+)QO9uQ!0LrO7+)QO9kQ`O7+)QO@zQ`O7+)QO%:tQ`O7+)QOOQ[7+)Q7+)QOOQ[7+(p7+(pO%:yQ!0MvO7+(mO!&zQMhO7+(mO!E^Q`O7+(nOOQ[7+(n7+(nO!&zQMhO7+(nO%;TQ`O'#KbO%;`Q`O,5=lOOQO,5?i,5?iOOQO-E<{-E<{OOQ[7+(s7+(sO%<rQpO'#HZOOQ[1G3`1G3`O!&zQMhO1G3`O%[QlO1G3`O%<yQ`O1G3`O%=UQMhO1G3`O9uQ!0LrO1G3bO$%dQ`O1G3bO9`Q`O1G3bO!CUQpO1G3bO!C^QMhO1G3bO%=dQ`O'#JPO%=xQ`O,5@}O%>QQpO,5@}OOQ!0Lb1G3c1G3cOOQ[7+$V7+$VO@zQ`O7+$VO9uQ!0LrO7+$VO%>]Q`O7+$VO%[QlO1G6lO%[QlO1G6mO%>bQ!0LrO1G6lO%>lQlO1G3kO%>sQ`O1G3kO%>xQlO1G3kOOQ[7+)T7+)TO9uQ!0LrO7+)_O`QlO7+)aOOQ['#Kh'#KhOOQ['#JS'#JSO%?PQlO,5>`OOQ[,5>`,5>`O%[QlO'#HuO%?^Q`O'#HwOOQ[,5>f,5>fO9eQ`O,5>fOOQ[,5>h,5>hOOQ[7+)j7+)jOOQ[7+)p7+)pOOQ[7+)t7+)tOOQ[7+)v7+)vO%?cQpO1G5|O%?}Q?MtO1G0zO%@XQ`O1G0zOOQO1G/s1G/sO%@dQ?MtO1G/sO?YQ`O1G/sO!)[QlO'#DmOOQO,5?P,5?POOQO-E<c-E<cOOQO,5?V,5?VOOQO-E<i-E<iO!CUQpO1G/sOOQO-E<e-E<eOOQ!0Ln1G0]1G0]OOQ!0Lf7+%u7+%uO#(ZQ`O7+%uOOQ!0Lf7+&`7+&`O?YQ`O7+&`O!CUQpO7+&`OOQO7+%x7+%xO$AlQ!0MxO7+&XOOQO7+&X7+&XO%[QlO7+&XO%@nQ!0LrO7+&XO!ByQ!0LrO7+%xO!CUQpO7+%xO%@yQ!0LrO7+&XO%AXQ!0MxO7++rO%[QlO7++rO%AiQ`O7++qO%AiQ`O7++qOOQO1G4s1G4sO9eQ`O1G4sO%AqQ`O1G4sOOQS7+%}7+%}O#(ZQ`O<<LPO4UQ!fO<<LPO%BPQ`O<<LPOOQ[<<LP<<LPO!&zQMhO<<LPO%[QlO<<LPO%BXQ`O<<LPO%BdQ!0MzO,5?aO%DoQ!0MzO,5?cO%FzQ!0MzO1G2`O%I]Q!0MzO1G2sO%KhQ!0MzO1G2uO%MsQ!fO,5?QO%[QlO,5?QOOQO-E<d-E<dO%M}Q`O1G5}OOQ!0Lf<<JU<<JUO%NVQ?MtO1G0uO&!^Q?MtO1G1PO&!eQ?MtO1G1PO&$fQ?MtO1G1PO&$mQ?MtO1G1PO&&nQ?MtO1G1PO&(oQ?MtO1G1PO&(vQ?MtO1G1PO&(}Q?MtO1G1PO&+OQ?MtO1G1PO&+VQ?MtO1G1PO&+^Q!0MxO<<JfO&-UQ?MtO1G1PO&.RQ?MvO1G1PO&/UQ?MvO'#JlO&1[Q?MtO1G1cO&1iQ?MtO1G0UO&1sQMjO,5?TOOQO-E<g-E<gO!)[QlO'#FqOOQO'#KZ'#KZOOQO1G1u1G1uO&1}Q`O1G1tO&2SQ?MtO,5?[OOOW7+'h7+'hOOOO1G/Z1G/ZO&2^Q!dO1G4xOOQ!0Lh7+(Q7+(QP!&zQMhO,5?^O!,TQMhO7+(cO&2eQ`O,5?]O9eQ`O,5?]O$+YQ`O,5?]OOQO-E<o-E<oO&2sQ`O1G6bO&2sQ`O1G6bO&2{Q`O1G6bO&3WQMjO7+'zO&3hQ!dO,5?_O&3rQ`O,5?_O!&zQMhO,5?_OOQO-E<q-E<qO&3wQ!dO1G6cO&4RQ`O1G6cO&4ZQ`O1G2kO!&zQMhO1G2kOOQ!0Lb1G2i1G2iOOQ!0Lb1G2j1G2jO%4hQpO1G2iO!CUQpO1G2iOCwQ`O1G2iOOQ!0Lb1G2q1G2qO&4`QpO1G2iO&4nQ`O1G2kO$+YQ`O1G2jOCwQ`O1G2jO$$wQlO1G2kO&4vQ`O1G2jO&5jQMjO,5?aOOQ!0Lh-E<t-E<tO&6]QMjO,5?cOOQ!0Lh-E<v-E<vO!,TQMhO7++]O&6gQMjO7++]O&6qQMjO7++]OOQ!0Lh1G/c1G/cO&7OQ`O1G/cOOQ!0Lh7+'u7+'uO&7TQMjO7+'|O&7eQ!0MxO<<KXOOQ!0Lf<<KX<<KXO&8XQ`O1G0zO!&zQMhO'#IzO&8^Q`O,5@xO&:`Q!fO<<LPO!&zQMhO1G2nO&:gQ!0LrO1G2nOOQ[<<G{<<G{O!ByQ!0LrO<<G{O&:xQ!0MxO<<I{OOQ!0Lf<<I{<<I{OOQO,5?l,5?lO&;lQ`O,5?lO&;qQ`O,5?lOOQO-E=O-E=OO&<PQ`O1G6kO&<PQ`O1G6kO9kQ`O1G6kO@zQ`O<<LlOOQ[<<Ll<<LlO&<XQ`O<<LlO9uQ!0LrO<<LlO9kQ`O<<LlOOQ[<<LX<<LXO%:yQ!0MvO<<LXOOQ[<<LY<<LYO!E^Q`O<<LYO&<^QpO'#I|O&<iQ`O,5@|O!)[QlO,5@|OOQ[1G3W1G3WOOQO'#JO'#JOO9uQ!0LrO'#JOO&<qQpO,5=uOOQ[,5=u,5=uO&<xQpO'#EgO&=PQpO'#GeO&=UQ`O7+(zO&=ZQ`O7+(zOOQ[7+(z7+(zO!&zQMhO7+(zO%[QlO7+(zO&=cQ`O7+(zOOQ[7+(|7+(|O9uQ!0LrO7+(|O$%dQ`O7+(|O9`Q`O7+(|O!CUQpO7+(|O&=nQ`O,5?kOOQO-E<}-E<}OOQO'#H^'#H^O&=yQ`O1G6iO9uQ!0LrO<<GqOOQ[<<Gq<<GqO@zQ`O<<GqO&>RQ`O7+,WO&>WQ`O7+,XO%[QlO7+,WO%[QlO7+,XOOQ[7+)V7+)VO&>]Q`O7+)VO&>bQlO7+)VO&>iQ`O7+)VOOQ[<<Ly<<LyOOQ[<<L{<<L{OOQ[-E=Q-E=QOOQ[1G3z1G3zO&>nQ`O,5>aOOQ[,5>c,5>cO&>sQ`O1G4QO9eQ`O7+&fO!)[QlO7+&fOOQO7+%_7+%_O&>xQ?MtO1G6ZO?YQ`O7+%_OOQ!0Lf<<Ia<<IaOOQ!0Lf<<Iz<<IzO?YQ`O<<IzOOQO<<Is<<IsO$AlQ!0MxO<<IsO%[QlO<<IsOOQO<<Id<<IdO!ByQ!0LrO<<IdO&?SQ!0LrO<<IsO&?_Q!0MxO<= ^O&?oQ`O<= ]OOQO7+*_7+*_O9eQ`O7+*_OOQ[ANAkANAkO&?wQ!fOANAkO!&zQMhOANAkO#(ZQ`OANAkO4UQ!fOANAkO&@OQ`OANAkO%[QlOANAkO&@WQ!0MzO7+'zO&BiQ!0MzO,5?aO&DtQ!0MzO,5?cO&GPQ!0MzO7+'|O&IbQ!fO1G4lO&IlQ?MtO7+&aO&KpQ?MvO,5=XO&MwQ?MvO,5=ZO&NXQ?MvO,5=XO&NiQ?MvO,5=ZO&NyQ?MvO,59uO'#PQ?MvO,5<kO'%SQ?MvO,5<mO''hQ?MvO,5<{O')^Q?MtO7+'kO')kQ?MtO7+'mO')xQ`O,5<]OOQO7+'`7+'`OOQ!0Lh7+*d7+*dO')}QMjO<<K}OOQO1G4w1G4wO'*UQ`O1G4wO'*aQ`O1G4wO'*oQ`O7++|O'*oQ`O7++|O!&zQMhO1G4yO'*wQ!dO1G4yO'+RQ`O7++}O'+ZQ`O7+(VO'+fQ!dO7+(VOOQ!0Lb7+(T7+(TOOQ!0Lb7+(U7+(UO!CUQpO7+(TOCwQ`O7+(TO'+pQ`O7+(VO!&zQMhO7+(VO$+YQ`O7+(UO'+uQ`O7+(VOCwQ`O7+(UO'+}QMjO<<NwO!,TQMhO<<NwOOQ!0Lh7+$}7+$}O',XQ!dO,5?fOOQO-E<x-E<xO',cQ!0MvO7+(YO!&zQMhO7+(YOOQ[AN=gAN=gO9kQ`O1G5WOOQO1G5W1G5WO',sQ`O1G5WO',xQ`O7+,VO',xQ`O7+,VO9uQ!0LrOANBWO@zQ`OANBWOOQ[ANBWANBWO'-QQ`OANBWOOQ[ANAsANAsOOQ[ANAtANAtO'-VQ`O,5?hOOQO-E<z-E<zO'-bQ?MtO1G6hOOQO,5?j,5?jOOQO-E<|-E<|OOQ[1G3a1G3aO'-lQ`O,5=POOQ[<<Lf<<LfO!&zQMhO<<LfO&=UQ`O<<LfO'-qQ`O<<LfO%[QlO<<LfOOQ[<<Lh<<LhO9uQ!0LrO<<LhO$%dQ`O<<LhO9`Q`O<<LhO'-yQpO1G5VO'.UQ`O7+,TOOQ[AN=]AN=]O9uQ!0LrOAN=]OOQ[<= r<= rOOQ[<= s<= sO'.^Q`O<= rO'.cQ`O<= sOOQ[<<Lq<<LqO'.hQ`O<<LqO'.mQlO<<LqOOQ[1G3{1G3{O?YQ`O7+)lO'.tQ`O<<JQO'/PQ?MtO<<JQOOQO<<Hy<<HyOOQ!0LfAN?fAN?fOOQOAN?_AN?_O$AlQ!0MxOAN?_OOQOAN?OAN?OO%[QlOAN?_OOQO<<My<<MyOOQ[G27VG27VO!&zQMhOG27VO#(ZQ`OG27VO'/ZQ!fOG27VO4UQ!fOG27VO'/bQ`OG27VO'/jQ?MtO<<JfO'/wQ?MvO1G2`O'1mQ?MvO,5?aO'3pQ?MvO,5?cO'5sQ?MvO1G2sO'7vQ?MvO1G2uO'9yQ?MtO<<KXO':WQ?MtO<<I{OOQO1G1w1G1wO!,TQMhOANAiOOQO7+*c7+*cO':eQ`O7+*cO':pQ`O<= hO':xQ!dO7+*eOOQ!0Lb<<Kq<<KqO$+YQ`O<<KqOCwQ`O<<KqO';SQ`O<<KqO!&zQMhO<<KqOOQ!0Lb<<Ko<<KoO!CUQpO<<KoO';_Q!dO<<KqOOQ!0Lb<<Kp<<KpO';iQ`O<<KqO!&zQMhO<<KqO$+YQ`O<<KpO';nQMjOANDcO';xQ!0MvO<<KtOOQO7+*r7+*rO9kQ`O7+*rO'<YQ`O<= qOOQ[G27rG27rO9uQ!0LrOG27rO@zQ`OG27rO!)[QlO1G5SO'<bQ`O7+,SO'<jQ`O1G2kO&=UQ`OANBQOOQ[ANBQANBQO!&zQMhOANBQO'<oQ`OANBQOOQ[ANBSANBSO9uQ!0LrOANBSO$%dQ`OANBSOOQO'#H_'#H_OOQO7+*q7+*qOOQ[G22wG22wOOQ[ANE^ANE^OOQ[ANE_ANE_OOQ[ANB]ANB]O'<wQ`OANB]OOQ[<<MW<<MWO!)[QlOAN?lOOQOG24yG24yO$AlQ!0MxOG24yO#(ZQ`OLD,qOOQ[LD,qLD,qO!&zQMhOLD,qO'<|Q!fOLD,qO'=TQ?MvO7+'zO'>yQ?MvO,5?aO'@|Q?MvO,5?cO'CPQ?MvO7+'|O'DuQMjOG27TOOQO<<M}<<M}OOQ!0LbANA]ANA]O$+YQ`OANA]OCwQ`OANA]O'EVQ!dOANA]OOQ!0LbANAZANAZO'E^Q`OANA]O!&zQMhOANA]O'EiQ!dOANA]OOQ!0LbANA[ANA[OOQO<<N^<<N^OOQ[LD-^LD-^O9uQ!0LrOLD-^O'EsQ?MtO7+*nOOQO'#Gf'#GfOOQ[G27lG27lO&=UQ`OG27lO!&zQMhOG27lOOQ[G27nG27nO9uQ!0LrOG27nOOQ[G27wG27wO'E}Q?MtOG25WOOQOLD*eLD*eOOQ[!$(!]!$(!]O#(ZQ`O!$(!]O!&zQMhO!$(!]O'FXQ!0MzOG27TOOQ!0LbG26wG26wO$+YQ`OG26wO'HjQ`OG26wOCwQ`OG26wO'HuQ!dOG26wO!&zQMhOG26wOOQ[!$(!x!$(!xOOQ[LD-WLD-WO&=UQ`OLD-WOOQ[LD-YLD-YOOQ[!)9Ew!)9EwO#(ZQ`O!)9EwOOQ!0LbLD,cLD,cO$+YQ`OLD,cOCwQ`OLD,cO'H|Q`OLD,cO'IXQ!dOLD,cOOQ[!$(!r!$(!rOOQ[!.K;c!.K;cO'I`Q?MvOG27TOOQ!0Lb!$( }!$( }O$+YQ`O!$( }OCwQ`O!$( }O'KUQ`O!$( }OOQ!0Lb!)9Ei!)9EiO$+YQ`O!)9EiOCwQ`O!)9EiOOQ!0Lb!.K;T!.K;TO$+YQ`O!.K;TOOQ!0Lb!4/0o!4/0oO!)[QlO'#DzO1PQ`O'#EXO'KaQ!fO'#JrO'KhQ!L^O'#DvO'KoQlO'#EOO'KvQ!fO'#CiO'N^Q!fO'#CiO!)[QlO'#EQO'NnQlO,5;ZO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO'#IpO(!qQ`O,5<iO!)[QlO,5;eO(!yQMhO,5;eO($dQMhO,5;eO!)[QlO,5;wO!&zQMhO'#GmO(!yQMhO'#GmO!&zQMhO'#GoO(!yQMhO'#GoO1SQ`O'#DZO1SQ`O'#DZO!&zQMhO'#GPO(!yQMhO'#GPO!&zQMhO'#GRO(!yQMhO'#GRO!&zQMhO'#GaO(!yQMhO'#GaO!)[QlO,5:jO($kQpO'#D_O($uQpO'#JvO!)[QlO,5@oO'NnQlO1G0uO(%PQ?MtO'#CiO!)[QlO1G2PO!&zQMhO'#IuO(!yQMhO'#IuO!&zQMhO'#IwO(!yQMhO'#IwO(%ZQ!dO'#CrO!&zQMhO,5<tO(!yQMhO,5<tO'NnQlO1G2RO!)[QlO7+&zO!&zQMhO1G2`O(!yQMhO1G2`O!&zQMhO'#IuO(!yQMhO'#IuO!&zQMhO'#IwO(!yQMhO'#IwO!&zQMhO1G2bO(!yQMhO1G2bO'NnQlO7+'mO'NnQlO7+&aO!&zQMhOANAiO(!yQMhOANAiO(%nQ`O'#EoO(%sQ`O'#EoO(%{Q`O'#F]O(&QQ`O'#EyO(&VQ`O'#KTO(&bQ`O'#KRO(&mQ`O,5;ZO(&rQMjO,5<eO(&yQ`O'#GYO('OQ`O'#GYO('TQ`O,5<eO(']Q`O,5<gO('eQ`O,5;ZO('mQ?MtO1G1`O('tQ`O,5<tO('yQ`O,5<tO((OQ`O,5<vO((TQ`O,5<vO((YQ`O1G2RO((_Q`O1G0uO((dQMjO<<K}O((kQMjO<<K}O((rQMhO'#F|O9`Q`O'#F{OAuQ`O'#EnO!)[QlO,5;tO!3oQ`O'#GYO!3oQ`O'#GYO!3oQ`O'#G[O!3oQ`O'#G[O!,TQMhO7+(cO!,TQMhO7+(cO%.zQ!dO1G2wO%.zQ!dO1G2wO!&zQMhO,5=]O!&zQMhO,5=]",stateData:"()x~O'|OS'}OSTOS(ORQ~OPYOQYOSfOY!VOaqOdzOeyOl!POpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!uwO!xxO!|]O$W|O$niO%h}O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO&W!WO&^!XO&`!YO&b!ZO&d![O&g!]O&m!^O&s!_O&u!`O&w!aO&y!bO&{!cO(TSO(VTO(YUO(aVO(o[O~OWtO~P`OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oa!wOs!nO!S!oO!b!yO!c!vO!d!vO!|<VO#T!pO#U!pO#V!xO#W!pO#X!pO#[!zO#]!zO(U!lO(VTO(YUO(e!mO(o!sO~O(O!{O~OP]XR]X[]Xa]Xj]Xr]X!Q]X!S]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X'z]X(a]X(r]X(y]X(z]X~O!g%RX~P(qO_!}O(V#PO(W!}O(X#PO~O_#QO(X#PO(Y#PO(Z#QO~Ox#SO!U#TO(b#TO(c#VO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T<ZO(VTO(YUO(aVO(o[O~O![#ZO!]#WO!Y(hP!Y(vP~P+}O!^#cO~P`OPYOQYOSfOd!jOe!iOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(VTO(YUO(aVO(o[O~Op#mO![#iO!|]O#i#lO#j#iO(T<[O!k(sP~P.iO!l#oO(T#nO~O!x#sO!|]O%h#tO~O#k#uO~O!g#vO#k#uO~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!]$_O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~Oa(fX'z(fX'w(fX!k(fX!Y(fX!_(fX%i(fX!g(fX~P1qO#S$dO#`$eO$Q$eOP(gXR(gX[(gXj(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX!_(gX%i(gX~Oa(gX'z(gX'w(gX!Y(gX!k(gXv(gX!g(gX~P4UO#`$eO~O$]$hO$_$gO$f$mO~OSfO!_$nO$i$oO$k$qO~Oh%VOj%dOk%dOp%WOr%XOs$tOt$tOz%YO|%ZO!O%]O!S${O!_$|O!i%bO!l$xO#j%cO$W%`O$t%^O$v%_O$y%aO(T$sO(VTO(YUO(a$uO(y$}O(z%POg(^P~Ol%[O~P7eO!l%eO~O!S%hO!_%iO(T%gO~O!g%mO~Oa%nO'z%nO~O!Q%rO~P%[O(U!lO~P%[O%n%vO~P%[Oh%VO!l%eO(T%gO(U!lO~Oe%}O!l%eO(T%gO~Oj$RO~O!_&PO(T%gO(U!lO(VTO(YUO`)WP~O!Q&SO!l&RO%j&VO&T&WO~P;SO!x#sO~O%s&YO!S)SX!_)SX(T)SX~O(T&ZO~Ol!PO!u&`O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO~Od&eOe&dO!x&bO%h&cO%{&aO~P<bOd&hOeyOl!PO!_&gO!u&`O!xxO!|]O%h}O%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO~Ob&kO#`&nO%j&iO(U!lO~P=gO!l&oO!u&sO~O!l#oO~O!_XO~Oa%nO'x&{O'z%nO~Oa%nO'x'OO'z%nO~Oa%nO'x'QO'z%nO~O'w]X!Y]Xv]X!k]X&[]X!_]X%i]X!g]X~P(qO!b'_O!c'WO!d'WO(U!lO(VTO(YUO~Os'UO!S'TO!['XO(e'SO!^(iP!^(xP~P@nOn'bO!_'`O(T%gO~Oe'gO!l%eO(T%gO~O!Q&SO!l&RO~Os!nO!S!oO!|<VO#T!pO#U!pO#W!pO#X!pO(U!lO(VTO(YUO(e!mO(o!sO~O!b'mO!c'lO!d'lO#V!pO#['nO#]'nO~PBYOa%nOh%VO!g#vO!l%eO'z%nO(r'pO~O!p'tO#`'rO~PChOs!nO!S!oO(VTO(YUO(e!mO(o!sO~O!_XOs(mX!S(mX!b(mX!c(mX!d(mX!|(mX#T(mX#U(mX#V(mX#W(mX#X(mX#[(mX#](mX(U(mX(V(mX(Y(mX(e(mX(o(mX~O!c'lO!d'lO(U!lO~PDWO(P'xO(Q'xO(R'zO~O_!}O(V'|O(W!}O(X'|O~O_#QO(X'|O(Y'|O(Z#QO~Ov(OO~P%[Ox#SO!U#TO(b#TO(c(RO~O![(TO!Y'WX!Y'^X!]'WX!]'^X~P+}O!](VO!Y(hX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!](VO!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~O!Y(hX~PHRO!Y([O~O!Y(uX!](uX!g(uX!k(uX(r(uX~O#`(uX#k#dX!^(uX~PJUO#`(]O!Y(wX!](wX~O!](^O!Y(vX~O!Y(aO~O#`$eO~PJUO!^(bO~P`OR#zO!Q#yO!S#{O!l#xO(aVOP!na[!naj!nar!na!]!na!p!na#R!na#n!na#o!na#p!na#q!na#r!na#s!na#t!na#u!na#v!na#x!na#z!na#{!na(r!na(y!na(z!na~Oa!na'z!na'w!na!Y!na!k!nav!na!_!na%i!na!g!na~PKlO!k(cO~O!g#vO#`(dO(r'pO!](tXa(tX'z(tX~O!k(tX~PNXO!S%hO!_%iO!|]O#i(iO#j(hO(T%gO~O!](jO!k(sX~O!k(lO~O!S%hO!_%iO#j(hO(T%gO~OP(gXR(gX[(gXj(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX~O!g#vO!k(gX~P! uOR(nO!Q(mO!l#xO#S$dO!|!{a!S!{a~O!x!{a%h!{a!_!{a#i!{a#j!{a(T!{a~P!#vO!x(rO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~O#k(xO~O![(zO!k(kP~P%[O(e(|O(o[O~O!S)OO!l#xO(e(|O(o[O~OP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_!eO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(T)]O(VTO(YUO(aVO(o[O~O!]$_Oa$qa'z$qa'w$qa!k$qa!Y$qa!_$qa%i$qa!g$qa~Ol)dO~P!&zOh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O%]O!S${O!_$|O!i%bO!l$xO#j%cO$W%`O$t%^O$v%_O$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~Og(pP~P!,TO!Q)iO!g)hO!_$^X$Z$^X$]$^X$_$^X$f$^X~O!g)hO!_({X$Z({X$]({X$_({X$f({X~O!Q)iO~P!.^O!Q)iO!_({X$Z({X$]({X$_({X$f({X~O!_)kO$Z)oO$])jO$_)jO$f)pO~O![)sO~P!)[O$]$hO$_$gO$f)wO~On$zX!Q$zX#S$zX'y$zX(y$zX(z$zX~OgmXg$zXnmX!]mX#`mX~P!0SOx)yO(b)zO(c)|O~On*VO!Q*OO'y*PO(y$}O(z%PO~Og)}O~P!1WOg*WO~Oh%VOr%XOs$tOt$tOz%YO|%ZO!O<sO!S*YO!_*ZO!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(VTO(YUO(a$uO(y$}O(z%PO~Op*`O![*^O(T*XO!k)OP~P!1uO#k*aO~O!l*bO~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(T*dO(VTO(YUO(a$uO(y$}O(z%PO~O![*gO!Y)PP~P!3tOr*sOs!nO!S*iO!b*qO!c*kO!d*kO!l*bO#[*rO%`*mO(U!lO(VTO(YUO(e!mO~O!^*pO~P!5iO#S$dOn(`X!Q(`X'y(`X(y(`X(z(`X!](`X#`(`X~Og(`X$O(`X~P!6kOn*xO#`*wOg(_X!](_X~O!]*yOg(^X~Oj%dOk%dOl%dO(T&ZOg(^P~Os*|O~Og)}O(T&ZO~O!l+SO~O(T(vO~Op+WO!S%hO![#iO!_%iO!|]O#i#lO#j#iO(T%gO!k(sP~O!g#vO#k+XO~O!S%hO![+ZO!](^O!_%iO(T%gO!Y(vP~Os'[O!S+]O![+[O(VTO(YUO(e(|O~O!^(xP~P!9|O!]+^Oa)TX'z)TX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~Oa!ja!]!ja'z!ja'w!ja!Y!ja!k!jav!ja!_!ja%i!ja!g!ja~P!:tOR#zO!Q#yO!S#{O!l#xO(aVOP!ra[!raj!rar!ra!]!ra!p!ra#R!ra#n!ra#o!ra#p!ra#q!ra#r!ra#s!ra#t!ra#u!ra#v!ra#x!ra#z!ra#{!ra(r!ra(y!ra(z!ra~Oa!ra'z!ra'w!ra!Y!ra!k!rav!ra!_!ra%i!ra!g!ra~P!=[OR#zO!Q#yO!S#{O!l#xO(aVOP!ta[!taj!tar!ta!]!ta!p!ta#R!ta#n!ta#o!ta#p!ta#q!ta#r!ta#s!ta#t!ta#u!ta#v!ta#x!ta#z!ta#{!ta(r!ta(y!ta(z!ta~Oa!ta'z!ta'w!ta!Y!ta!k!tav!ta!_!ta%i!ta!g!ta~P!?rOh%VOn+gO!_'`O%i+fO~O!g+iOa(]X!_(]X'z(]X!](]X~Oa%nO!_XO'z%nO~Oh%VO!l%eO~Oh%VO!l%eO(T%gO~O!g#vO#k(xO~Ob+tO%j+uO(T+qO(VTO(YUO!^)XP~O!]+vO`)WX~O[+zO~O`+{O~O!_&PO(T%gO(U!lO`)WP~O%j,OO~P;SOh%VO#`,SO~Oh%VOn,VO!_$|O~O!_,XO~O!Q,ZO!_XO~O%n%vO~O!x,`O~Oe,eO~Ob,fO(T#nO(VTO(YUO!^)VP~Oe%}O~O%j!QO(T&ZO~P=gO[,kO`,jO~OPYOQYOSfOdzOeyOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!iuO!lZO!oYO!pYO!qYO!svO!xxO!|]O$niO%h}O(VTO(YUO(aVO(o[O~O!_!eO!u!gO$W!kO(T!dO~P!FyO`,jOa%nO'z%nO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oa,pOl!OO!uwO%l!OO%m!OO%n!OO~P!IcO!l&oO~O&^,vO~O!_,xO~O&o,zO&q,{OP&laQ&laS&laY&laa&lad&lae&lal&lap&lar&las&lat&laz&la|&la!O&la!S&la!W&la!X&la!_&la!i&la!l&la!o&la!p&la!q&la!s&la!u&la!x&la!|&la$W&la$n&la%h&la%j&la%l&la%m&la%n&la%q&la%s&la%v&la%w&la%y&la&W&la&^&la&`&la&b&la&d&la&g&la&m&la&s&la&u&la&w&la&y&la&{&la'w&la(T&la(V&la(Y&la(a&la(o&la!^&la&e&lab&la&j&la~O(T-QO~Oh!eX!]!RX!^!RX!g!RX!g!eX!l!eX#`!RX~O!]!eX!^!eX~P#!iO!g-VO#`-UOh(jX!]#hX!^#hX!g(jX!l(jX~O!](jX!^(jX~P##[Oh%VO!g-XO!l%eO!]!aX!^!aX~Os!nO!S!oO(VTO(YUO(e!mO~OP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_!eO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(VTO(YUO(aVO(o[O~O(T=QO~P#$qO!]-]O!^(iX~O!^-_O~O!g-VO#`-UO!]#hX!^#hX~O!]-`O!^(xX~O!^-bO~O!c-cO!d-cO(U!lO~P#$`O!^-fO~P'_On-iO!_'`O~O!Y-nO~Os!{a!b!{a!c!{a!d!{a#T!{a#U!{a#V!{a#W!{a#X!{a#[!{a#]!{a(U!{a(V!{a(Y!{a(e!{a(o!{a~P!#vO!p-sO#`-qO~PChO!c-uO!d-uO(U!lO~PDWOa%nO#`-qO'z%nO~Oa%nO!g#vO#`-qO'z%nO~Oa%nO!g#vO!p-sO#`-qO'z%nO(r'pO~O(P'xO(Q'xO(R-zO~Ov-{O~O!Y'Wa!]'Wa~P!:tO![.PO!Y'WX!]'WX~P%[O!](VO!Y(ha~O!Y(ha~PHRO!](^O!Y(va~O!S%hO![.TO!_%iO(T%gO!Y'^X!]'^X~O#`.VO!](ta!k(taa(ta'z(ta~O!g#vO~P#,wO!](jO!k(sa~O!S%hO!_%iO#j.ZO(T%gO~Op.`O!S%hO![.]O!_%iO!|]O#i._O#j.]O(T%gO!]'aX!k'aX~OR.dO!l#xO~Oh%VOn.gO!_'`O%i.fO~Oa#ci!]#ci'z#ci'w#ci!Y#ci!k#civ#ci!_#ci%i#ci!g#ci~P!:tOn>]O!Q*OO'y*PO(y$}O(z%PO~O#k#_aa#_a#`#_a'z#_a!]#_a!k#_a!_#_a!Y#_a~P#/sO#k(`XP(`XR(`X[(`Xa(`Xj(`Xr(`X!S(`X!l(`X!p(`X#R(`X#n(`X#o(`X#p(`X#q(`X#r(`X#s(`X#t(`X#u(`X#v(`X#x(`X#z(`X#{(`X'z(`X(a(`X(r(`X!k(`X!Y(`X'w(`Xv(`X!_(`X%i(`X!g(`X~P!6kO!].tO!k(kX~P!:tO!k.wO~O!Y.yO~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(aVO[#mia#mij#mir#mi!]#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#n#mi~P#3cO#n$OO~P#3cOP$[OR#zOr$aO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(aVO[#mia#mij#mi!]#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#r#mi~P#6QO#r$QO~P#6QOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO(aVOa#mi!]#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#v#mi~P#8oOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO(aVO(z#}Oa#mi!]#mi#z#mi#{#mi'z#mi(r#mi(y#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#x$UO~P#;VO#x#mi~P#;VO#v$SO~P#8oOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO(aVO(y#|O(z#}Oa#mi!]#mi#{#mi'z#mi(r#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#z#mi~P#={O#z$WO~P#={OP]XR]X[]Xj]Xr]X!Q]X!S]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X!]]X!^]X~O$O]X~P#@jOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO#x<eO#z<gO#{<hO(aVO(r$YO(y#|O(z#}O~O$O.{O~P#BwO#S$dO#`<nO$Q<nO$O(gX!^(gX~P! uOa'da!]'da'z'da'w'da!k'da!Y'dav'da!_'da%i'da!g'da~P!:tO[#mia#mij#mir#mi!]#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(aVO(y#mi(z#mi~P#EyOn>]O!Q*OO'y*PO(y$}O(z%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(a#mi~P#EyO!]/POg(pX~P!1WOg/RO~Oa$Pi!]$Pi'z$Pi'w$Pi!Y$Pi!k$Piv$Pi!_$Pi%i$Pi!g$Pi~P!:tO$]/SO$_/SO~O$]/TO$_/TO~O!g)hO#`/UO!_$cX$Z$cX$]$cX$_$cX$f$cX~O![/VO~O!_)kO$Z/XO$])jO$_)jO$f/YO~O!]<iO!^(fX~P#BwO!^/ZO~O!g)hO$f({X~O$f/]O~Ov/^O~P!&zOx)yO(b)zO(c/aO~O!S/dO~O(y$}On%aa!Q%aa'y%aa(z%aa!]%aa#`%aa~Og%aa$O%aa~P#L{O(z%POn%ca!Q%ca'y%ca(y%ca!]%ca#`%ca~Og%ca$O%ca~P#MnO!]fX!gfX!kfX!k$zX(rfX~P!0SOp%WO![/mO!](^O(T/lO!Y(vP!Y)PP~P!1uOr*sO!b*qO!c*kO!d*kO!l*bO#[*rO%`*mO(U!lO(VTO(YUO~Os<}O!S/nO![+[O!^*pO(e<|O!^(xP~P$ [O!k/oO~P#/sO!]/pO!g#vO(r'pO!k)OX~O!k/uO~OnoX!QoX'yoX(yoX(zoX~O!g#vO!koX~P$#OOp/wO!S%hO![*^O!_%iO(T%gO!k)OP~O#k/xO~O!Y$zX!]$zX!g%RX~P!0SO!]/yO!Y)PX~P#/sO!g/{O~O!Y/}O~OpkO(T0OO~P.iOh%VOr0TO!g#vO!l%eO(r'pO~O!g+iO~Oa%nO!]0XO'z%nO~O!^0ZO~P!5iO!c0[O!d0[O(U!lO~P#$`Os!nO!S0]O(VTO(YUO(e!mO~O#[0_O~Og%aa!]%aa#`%aa$O%aa~P!1WOg%ca!]%ca#`%ca$O%ca~P!1WOj%dOk%dOl%dO(T&ZOg'mX!]'mX~O!]*yOg(^a~Og0hO~On0jO#`0iOg(_a!](_a~OR0kO!Q0kO!S0lO#S$dOn}a'y}a(y}a(z}a!]}a#`}a~Og}a$O}a~P$(cO!Q*OO'y*POn$sa(y$sa(z$sa!]$sa#`$sa~Og$sa$O$sa~P$)_O!Q*OO'y*POn$ua(y$ua(z$ua!]$ua#`$ua~Og$ua$O$ua~P$*QO#k0oO~Og%Ta!]%Ta#`%Ta$O%Ta~P!1WO!g#vO~O#k0rO~O!]+^Oa)Ta'z)Ta~OR#zO!Q#yO!S#{O!l#xO(aVOP!ri[!rij!rir!ri!]!ri!p!ri#R!ri#n!ri#o!ri#p!ri#q!ri#r!ri#s!ri#t!ri#u!ri#v!ri#x!ri#z!ri#{!ri(r!ri(y!ri(z!ri~Oa!ri'z!ri'w!ri!Y!ri!k!riv!ri!_!ri%i!ri!g!ri~P$+oOh%VOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(VTO(YUO(a$uO(y$}O(z%PO~Op0{O%]0|O(T0zO~P$.VO!g+iOa(]a!_(]a'z(]a!](]a~O#k1SO~O[]X!]fX!^fX~O!]1TO!^)XX~O!^1VO~O[1WO~Ob1YO(T+qO(VTO(YUO~O!_&PO(T%gO`'uX!]'uX~O!]+vO`)Wa~O!k1]O~P!:tO[1`O~O`1aO~O#`1fO~On1iO!_$|O~O(e(|O!^)UP~Oh%VOn1rO!_1oO%i1qO~O[1|O!]1zO!^)VX~O!^1}O~O`2POa%nO'z%nO~O(T#nO(VTO(YUO~O#S$dO#`$eO$Q$eOP(gXR(gX[(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX~Oj2SO&[2TOa(gX~P$3pOj2SO#`$eO&[2TO~Oa2VO~P%[Oa2XO~O&e2[OP&ciQ&ciS&ciY&cia&cid&cie&cil&cip&cir&cis&cit&ciz&ci|&ci!O&ci!S&ci!W&ci!X&ci!_&ci!i&ci!l&ci!o&ci!p&ci!q&ci!s&ci!u&ci!x&ci!|&ci$W&ci$n&ci%h&ci%j&ci%l&ci%m&ci%n&ci%q&ci%s&ci%v&ci%w&ci%y&ci&W&ci&^&ci&`&ci&b&ci&d&ci&g&ci&m&ci&s&ci&u&ci&w&ci&y&ci&{&ci'w&ci(T&ci(V&ci(Y&ci(a&ci(o&ci!^&cib&ci&j&ci~Ob2bO!^2`O&j2aO~P`O!_XO!l2dO~O&q,{OP&liQ&liS&liY&lia&lid&lie&lil&lip&lir&lis&lit&liz&li|&li!O&li!S&li!W&li!X&li!_&li!i&li!l&li!o&li!p&li!q&li!s&li!u&li!x&li!|&li$W&li$n&li%h&li%j&li%l&li%m&li%n&li%q&li%s&li%v&li%w&li%y&li&W&li&^&li&`&li&b&li&d&li&g&li&m&li&s&li&u&li&w&li&y&li&{&li'w&li(T&li(V&li(Y&li(a&li(o&li!^&li&e&lib&li&j&li~O!Y2jO~O!]!aa!^!aa~P#BwOs!nO!S!oO![2pO(e!mO!]'XX!^'XX~P@nO!]-]O!^(ia~O!]'_X!^'_X~P!9|O!]-`O!^(xa~O!^2wO~P'_Oa%nO#`3QO'z%nO~Oa%nO!g#vO#`3QO'z%nO~Oa%nO!g#vO!p3UO#`3QO'z%nO(r'pO~Oa%nO'z%nO~P!:tO!]$_Ov$qa~O!Y'Wi!]'Wi~P!:tO!](VO!Y(hi~O!](^O!Y(vi~O!Y(wi!](wi~P!:tO!](ti!k(tia(ti'z(ti~P!:tO#`3WO!](ti!k(tia(ti'z(ti~O!](jO!k(si~O!S%hO!_%iO!|]O#i3]O#j3[O(T%gO~O!S%hO!_%iO#j3[O(T%gO~On3dO!_'`O%i3cO~Oh%VOn3dO!_'`O%i3cO~O#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'z%aa(a%aa(r%aa!k%aa!Y%aa'w%aav%aa!_%aa%i%aa!g%aa~P#L{O#k%caP%caR%ca[%caa%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'z%ca(a%ca(r%ca!k%ca!Y%ca'w%cav%ca!_%ca%i%ca!g%ca~P#MnO#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!]%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'z%aa(a%aa(r%aa!k%aa!Y%aa'w%aa#`%aav%aa!_%aa%i%aa!g%aa~P#/sO#k%caP%caR%ca[%caa%caj%car%ca!S%ca!]%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'z%ca(a%ca(r%ca!k%ca!Y%ca'w%ca#`%cav%ca!_%ca%i%ca!g%ca~P#/sO#k}aP}a[}aa}aj}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a'z}a(a}a(r}a!k}a!Y}a'w}av}a!_}a%i}a!g}a~P$(cO#k$saP$saR$sa[$saa$saj$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa'z$sa(a$sa(r$sa!k$sa!Y$sa'w$sav$sa!_$sa%i$sa!g$sa~P$)_O#k$uaP$uaR$ua[$uaa$uaj$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua'z$ua(a$ua(r$ua!k$ua!Y$ua'w$uav$ua!_$ua%i$ua!g$ua~P$*QO#k%TaP%TaR%Ta[%Taa%Taj%Tar%Ta!S%Ta!]%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta'z%Ta(a%Ta(r%Ta!k%Ta!Y%Ta'w%Ta#`%Tav%Ta!_%Ta%i%Ta!g%Ta~P#/sOa#cq!]#cq'z#cq'w#cq!Y#cq!k#cqv#cq!_#cq%i#cq!g#cq~P!:tO![3lO!]'YX!k'YX~P%[O!].tO!k(ka~O!].tO!k(ka~P!:tO!Y3oO~O$O!na!^!na~PKlO$O!ja!]!ja!^!ja~P#BwO$O!ra!^!ra~P!=[O$O!ta!^!ta~P!?rOg']X!]']X~P!,TO!]/POg(pa~OSfO!_4TO$d4UO~O!^4YO~Ov4ZO~P#/sOa$mq!]$mq'z$mq'w$mq!Y$mq!k$mqv$mq!_$mq%i$mq!g$mq~P!:tO!Y4]O~P!&zO!S4^O~O!Q*OO'y*PO(z%POn'ia(y'ia!]'ia#`'ia~Og'ia$O'ia~P%-fO!Q*OO'y*POn'ka(y'ka(z'ka!]'ka#`'ka~Og'ka$O'ka~P%.XO(r$YO~P#/sO!YfX!Y$zX!]fX!]$zX!g%RX#`fX~P!0SOp%WO(T=WO~P!1uOp4bO!S%hO![4aO!_%iO(T%gO!]'eX!k'eX~O!]/pO!k)Oa~O!]/pO!g#vO!k)Oa~O!]/pO!g#vO(r'pO!k)Oa~Og$|i!]$|i#`$|i$O$|i~P!1WO![4jO!Y'gX!]'gX~P!3tO!]/yO!Y)Pa~O!]/yO!Y)Pa~P#/sOP]XR]X[]Xj]Xr]X!Q]X!S]X!Y]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X~Oj%YX!g%YX~P%2OOj4oO!g#vO~Oh%VO!g#vO!l%eO~Oh%VOr4tO!l%eO(r'pO~Or4yO!g#vO(r'pO~Os!nO!S4zO(VTO(YUO(e!mO~O(y$}On%ai!Q%ai'y%ai(z%ai!]%ai#`%ai~Og%ai$O%ai~P%5oO(z%POn%ci!Q%ci'y%ci(y%ci!]%ci#`%ci~Og%ci$O%ci~P%6bOg(_i!](_i~P!1WO#`5QOg(_i!](_i~P!1WO!k5VO~Oa$oq!]$oq'z$oq'w$oq!Y$oq!k$oqv$oq!_$oq%i$oq!g$oq~P!:tO!Y5ZO~O!]5[O!_)QX~P#/sOa$zX!_$zX%^]X'z$zX!]$zX~P!0SO%^5_OaoX!_oX'zoX!]oX~P$#OOp5`O(T#nO~O%^5_O~Ob5fO%j5gO(T+qO(VTO(YUO!]'tX!^'tX~O!]1TO!^)Xa~O[5kO~O`5lO~O[5pO~Oa%nO'z%nO~P#/sO!]5uO#`5wO!^)UX~O!^5xO~Or6OOs!nO!S*iO!b!yO!c!vO!d!vO!|<VO#T!pO#U!pO#V!pO#W!pO#X!pO#[5}O#]!zO(U!lO(VTO(YUO(e!mO(o!sO~O!^5|O~P%;eOn6TO!_1oO%i6SO~Oh%VOn6TO!_1oO%i6SO~Ob6[O(T#nO(VTO(YUO!]'sX!^'sX~O!]1zO!^)Va~O(VTO(YUO(e6^O~O`6bO~Oj6eO&[6fO~PNXO!k6gO~P%[Oa6iO~Oa6iO~P%[Ob2bO!^6nO&j2aO~P`O!g6pO~O!g6rOh(ji!](ji!^(ji!g(ji!l(jir(ji(r(ji~O!]#hi!^#hi~P#BwO#`6sO!]#hi!^#hi~O!]!ai!^!ai~P#BwOa%nO#`6|O'z%nO~Oa%nO!g#vO#`6|O'z%nO~O!](tq!k(tqa(tq'z(tq~P!:tO!](jO!k(sq~O!S%hO!_%iO#j7TO(T%gO~O!_'`O%i7WO~On7[O!_'`O%i7WO~O#k'iaP'iaR'ia['iaa'iaj'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia'z'ia(a'ia(r'ia!k'ia!Y'ia'w'iav'ia!_'ia%i'ia!g'ia~P%-fO#k'kaP'kaR'ka['kaa'kaj'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka'z'ka(a'ka(r'ka!k'ka!Y'ka'w'kav'ka!_'ka%i'ka!g'ka~P%.XO#k$|iP$|iR$|i[$|ia$|ij$|ir$|i!S$|i!]$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i'z$|i(a$|i(r$|i!k$|i!Y$|i'w$|i#`$|iv$|i!_$|i%i$|i!g$|i~P#/sO#k%aiP%aiR%ai[%aia%aij%air%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai'z%ai(a%ai(r%ai!k%ai!Y%ai'w%aiv%ai!_%ai%i%ai!g%ai~P%5oO#k%ciP%ciR%ci[%cia%cij%cir%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci'z%ci(a%ci(r%ci!k%ci!Y%ci'w%civ%ci!_%ci%i%ci!g%ci~P%6bO!]'Ya!k'Ya~P!:tO!].tO!k(ki~O$O#ci!]#ci!^#ci~P#BwOP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(aVO[#mij#mir#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#n#mi~P%NdO#n<_O~P%NdOP$[OR#zOr<kO!Q#yO!S#{O!l#xO!p$[O#n<_O#o<`O#p<`O#q<`O(aVO[#mij#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#r#mi~P&!lO#r<aO~P&!lOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO(aVO#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#v#mi~P&$tOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO(aVO(z#}O#z#mi#{#mi$O#mi(r#mi(y#mi!]#mi!^#mi~O#x<eO~P&&uO#x#mi~P&&uO#v<cO~P&$tOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO#x<eO(aVO(y#|O(z#}O#{#mi$O#mi(r#mi!]#mi!^#mi~O#z#mi~P&)UO#z<gO~P&)UOa#|y!]#|y'z#|y'w#|y!Y#|y!k#|yv#|y!_#|y%i#|y!g#|y~P!:tO[#mij#mir#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi!]#mi!^#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n<_O#o<`O#p<`O#q<`O(aVO(y#mi(z#mi~P&,QOn>^O!Q*OO'y*PO(y$}O(z%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(a#mi~P&,QO#S$dOP(`XR(`X[(`Xj(`Xn(`Xr(`X!Q(`X!S(`X!l(`X!p(`X#R(`X#n(`X#o(`X#p(`X#q(`X#r(`X#s(`X#t(`X#u(`X#v(`X#x(`X#z(`X#{(`X$O(`X'y(`X(a(`X(r(`X(y(`X(z(`X!](`X!^(`X~O$O$Pi!]$Pi!^$Pi~P#BwO$O!ri!^!ri~P$+oOg']a!]']a~P!1WO!^7nO~O!]'da!^'da~P#BwO!Y7oO~P#/sO!g#vO(r'pO!]'ea!k'ea~O!]/pO!k)Oi~O!]/pO!g#vO!k)Oi~Og$|q!]$|q#`$|q$O$|q~P!1WO!Y'ga!]'ga~P#/sO!g7vO~O!]/yO!Y)Pi~P#/sO!]/yO!Y)Pi~O!Y7yO~Oh%VOr8OO!l%eO(r'pO~Oj8QO!g#vO~Or8TO!g#vO(r'pO~O!Q*OO'y*PO(z%POn'ja(y'ja!]'ja#`'ja~Og'ja$O'ja~P&5RO!Q*OO'y*POn'la(y'la(z'la!]'la#`'la~Og'la$O'la~P&5tOg(_q!](_q~P!1WO#`8VOg(_q!](_q~P!1WO!Y8WO~Og%Oq!]%Oq#`%Oq$O%Oq~P!1WOa$oy!]$oy'z$oy'w$oy!Y$oy!k$oyv$oy!_$oy%i$oy!g$oy~P!:tO!g6rO~O!]5[O!_)Qa~O!_'`OP$TaR$Ta[$Taj$Tar$Ta!Q$Ta!S$Ta!]$Ta!l$Ta!p$Ta#R$Ta#n$Ta#o$Ta#p$Ta#q$Ta#r$Ta#s$Ta#t$Ta#u$Ta#v$Ta#x$Ta#z$Ta#{$Ta(a$Ta(r$Ta(y$Ta(z$Ta~O%i7WO~P&8fO%^8[Oa%[i!_%[i'z%[i!]%[i~Oa#cy!]#cy'z#cy'w#cy!Y#cy!k#cyv#cy!_#cy%i#cy!g#cy~P!:tO[8^O~Ob8`O(T+qO(VTO(YUO~O!]1TO!^)Xi~O`8dO~O(e(|O!]'pX!^'pX~O!]5uO!^)Ua~O!^8nO~P%;eO(o!sO~P$&YO#[8oO~O!_1oO~O!_1oO%i8qO~On8tO!_1oO%i8qO~O[8yO!]'sa!^'sa~O!]1zO!^)Vi~O!k8}O~O!k9OO~O!k9RO~O!k9RO~P%[Oa9TO~O!g9UO~O!k9VO~O!](wi!^(wi~P#BwOa%nO#`9_O'z%nO~O!](ty!k(tya(ty'z(ty~P!:tO!](jO!k(sy~O%i9bO~P&8fO!_'`O%i9bO~O#k$|qP$|qR$|q[$|qa$|qj$|qr$|q!S$|q!]$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q'z$|q(a$|q(r$|q!k$|q!Y$|q'w$|q#`$|qv$|q!_$|q%i$|q!g$|q~P#/sO#k'jaP'jaR'ja['jaa'jaj'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja'z'ja(a'ja(r'ja!k'ja!Y'ja'w'jav'ja!_'ja%i'ja!g'ja~P&5RO#k'laP'laR'la['laa'laj'lar'la!S'la!l'la!p'la#R'la#n'la#o'la#p'la#q'la#r'la#s'la#t'la#u'la#v'la#x'la#z'la#{'la'z'la(a'la(r'la!k'la!Y'la'w'lav'la!_'la%i'la!g'la~P&5tO#k%OqP%OqR%Oq[%Oqa%Oqj%Oqr%Oq!S%Oq!]%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq'z%Oq(a%Oq(r%Oq!k%Oq!Y%Oq'w%Oq#`%Oqv%Oq!_%Oq%i%Oq!g%Oq~P#/sO!]'Yi!k'Yi~P!:tO$O#cq!]#cq!^#cq~P#BwO(y$}OP%aaR%aa[%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa$O%aa(a%aa(r%aa!]%aa!^%aa~On%aa!Q%aa'y%aa(z%aa~P&IyO(z%POP%caR%ca[%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca$O%ca(a%ca(r%ca!]%ca!^%ca~On%ca!Q%ca'y%ca(y%ca~P&LQOn>^O!Q*OO'y*PO(z%PO~P&IyOn>^O!Q*OO'y*PO(y$}O~P&LQOR0kO!Q0kO!S0lO#S$dOP}a[}aj}an}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a$O}a'y}a(a}a(r}a(y}a(z}a!]}a!^}a~O!Q*OO'y*POP$saR$sa[$saj$san$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa$O$sa(a$sa(r$sa(y$sa(z$sa!]$sa!^$sa~O!Q*OO'y*POP$uaR$ua[$uaj$uan$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua$O$ua(a$ua(r$ua(y$ua(z$ua!]$ua!^$ua~On>^O!Q*OO'y*PO(y$}O(z%PO~OP%TaR%Ta[%Taj%Tar%Ta!S%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta$O%Ta(a%Ta(r%Ta!]%Ta!^%Ta~P''VO$O$mq!]$mq!^$mq~P#BwO$O$oq!]$oq!^$oq~P#BwO!^9oO~O$O9pO~P!1WO!g#vO!]'ei!k'ei~O!g#vO(r'pO!]'ei!k'ei~O!]/pO!k)Oq~O!Y'gi!]'gi~P#/sO!]/yO!Y)Pq~Or9wO!g#vO(r'pO~O[9yO!Y9xO~P#/sO!Y9xO~Oj:PO!g#vO~Og(_y!](_y~P!1WO!]'na!_'na~P#/sOa%[q!_%[q'z%[q!]%[q~P#/sO[:UO~O!]1TO!^)Xq~O`:YO~O#`:ZO!]'pa!^'pa~O!]5uO!^)Ui~P#BwO!S:]O~O!_1oO%i:`O~O(VTO(YUO(e:eO~O!]1zO!^)Vq~O!k:hO~O!k:iO~O!k:jO~O!k:jO~P%[O#`:mO!]#hy!^#hy~O!]#hy!^#hy~P#BwO%i:rO~P&8fO!_'`O%i:rO~O$O#|y!]#|y!^#|y~P#BwOP$|iR$|i[$|ij$|ir$|i!S$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i$O$|i(a$|i(r$|i!]$|i!^$|i~P''VO!Q*OO'y*PO(z%POP'iaR'ia['iaj'ian'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia$O'ia(a'ia(r'ia(y'ia!]'ia!^'ia~O!Q*OO'y*POP'kaR'ka['kaj'kan'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka$O'ka(a'ka(r'ka(y'ka(z'ka!]'ka!^'ka~O(y$}OP%aiR%ai[%aij%ain%air%ai!Q%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai$O%ai'y%ai(a%ai(r%ai(z%ai!]%ai!^%ai~O(z%POP%ciR%ci[%cij%cin%cir%ci!Q%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci$O%ci'y%ci(a%ci(r%ci(y%ci!]%ci!^%ci~O$O$oy!]$oy!^$oy~P#BwO$O#cy!]#cy!^#cy~P#BwO!g#vO!]'eq!k'eq~O!]/pO!k)Oy~O!Y'gq!]'gq~P#/sOr:|O!g#vO(r'pO~O[;QO!Y;PO~P#/sO!Y;PO~Og(_!R!](_!R~P!1WOa%[y!_%[y'z%[y!]%[y~P#/sO!]1TO!^)Xy~O!]5uO!^)Uq~O(T;XO~O!_1oO%i;[O~O!k;_O~O%i;dO~P&8fOP$|qR$|q[$|qj$|qr$|q!S$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q$O$|q(a$|q(r$|q!]$|q!^$|q~P''VO!Q*OO'y*PO(z%POP'jaR'ja['jaj'jan'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja$O'ja(a'ja(r'ja(y'ja!]'ja!^'ja~O!Q*OO'y*POP'laR'la['laj'lan'lar'la!S'la!l'la!p'la#R'la#n'la#o'la#p'la#q'la#r'la#s'la#t'la#u'la#v'la#x'la#z'la#{'la$O'la(a'la(r'la(y'la(z'la!]'la!^'la~OP%OqR%Oq[%Oqj%Oqr%Oq!S%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq$O%Oq(a%Oq(r%Oq!]%Oq!^%Oq~P''VOg%e!Z!]%e!Z#`%e!Z$O%e!Z~P!1WO!Y;hO~P#/sOr;iO!g#vO(r'pO~O[;kO!Y;hO~P#/sO!]'pq!^'pq~P#BwO!]#h!Z!^#h!Z~P#BwO#k%e!ZP%e!ZR%e!Z[%e!Za%e!Zj%e!Zr%e!Z!S%e!Z!]%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z'z%e!Z(a%e!Z(r%e!Z!k%e!Z!Y%e!Z'w%e!Z#`%e!Zv%e!Z!_%e!Z%i%e!Z!g%e!Z~P#/sOr;tO!g#vO(r'pO~O!Y;uO~P#/sOr;|O!g#vO(r'pO~O!Y;}O~P#/sOP%e!ZR%e!Z[%e!Zj%e!Zr%e!Z!S%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z$O%e!Z(a%e!Z(r%e!Z!]%e!Z!^%e!Z~P''VOr<QO!g#vO(r'pO~Ov(fX~P1qO!Q%rO~P!)[O(U!lO~P!)[O!YfX!]fX#`fX~P%2OOP]XR]X[]Xj]Xr]X!Q]X!S]X!]]X!]fX!l]X!p]X#R]X#S]X#`]X#`fX#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X~O!gfX!k]X!kfX(rfX~P'LTOP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_XO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(T)]O(VTO(YUO(aVO(o[O~O!]<iO!^$qa~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<tO!S${O!_$|O!i>WO!l$xO#j<zO$W%`O$t<vO$v<xO$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~Ol)dO~P(!yOr!eX(r!eX~P#!iOr(jX(r(jX~P##[O!^]X!^fX~P'LTO!YfX!Y$zX!]fX!]$zX#`fX~P!0SO#k<^O~O!g#vO#k<^O~O#`<nO~Oj<bO~O#`=OO!](wX!^(wX~O#`<nO!](uX!^(uX~O#k=PO~Og=RO~P!1WO#k=XO~O#k=YO~Og=RO(T&ZO~O!g#vO#k=ZO~O!g#vO#k=PO~O$O=[O~P#BwO#k=]O~O#k=^O~O#k=cO~O#k=dO~O#k=eO~O#k=fO~O$O=gO~P!1WO$O=hO~P!1WOl=sO~P7eOk#S#T#U#W#X#[#i#j#u$n$t$v$y%]%^%h%i%j%q%s%v%w%y%{~(OT#o!X'|(U#ps#n#qr!Q'}$]'}(T$_(e~",goto:"$9Y)]PPPPPP)^PP)aP)rP+W/]PPPP6mPP7TPP=QPPP@tPA^PA^PPPA^PCfPA^PA^PA^PCjPCoPD^PIWPPPI[PPPPI[L_PPPLeMVPI[PI[PP! eI[PPPI[PI[P!#lI[P!'S!(X!(bP!)U!)Y!)U!,gPPPPPPP!-W!(XPP!-h!/YP!2iI[I[!2n!5z!:h!:h!>gPPP!>oI[PPPPPPPPP!BOP!C]PPI[!DnPI[PI[I[I[I[I[PI[!FQP!I[P!LbP!Lf!Lp!Lt!LtP!IXP!Lx!LxP#!OP#!SI[PI[#!Y#%_CjA^PA^PA^A^P#&lA^A^#)OA^#+vA^#.SA^A^#.r#1W#1W#1]#1f#1W#1qPP#1WPA^#2ZA^#6YA^A^6mPPP#:_PPP#:x#:xP#:xP#;`#:xPP#;fP#;]P#;]#;y#;]#<e#<k#<n)aP#<q)aP#<z#<z#<zP)aP)aP)aP)aPP)aP#=Q#=TP#=T)aP#=XP#=[P)aP)aP)aP)aP)aP)a)aPP#=b#=h#=s#=y#>P#>V#>]#>k#>q#>{#?R#?]#?c#?s#?y#@k#@}#AT#AZ#Ai#BO#Cs#DR#DY#Et#FS#Gt#HS#HY#H`#Hf#Hp#Hv#H|#IW#Ij#IpPPPPPPPPPPP#IvPPPPPPP#Jk#Mx$ b$ i$ qPPP$']P$'f$*_$0x$0{$1O$1}$2Q$2X$2aP$2g$2jP$3W$3[$4S$5b$5g$5}PP$6S$6Y$6^$6a$6e$6i$7e$7|$8e$8i$8l$8o$8y$8|$9Q$9UR!|RoqOXst!Z#d%m&r&t&u&w,s,x2[2_Y!vQ'`-e1o5{Q%tvQ%|yQ&T|Q&j!VS'W!e-]Q'f!iS'l!r!yU*k$|*Z*oQ+o%}S+|&V&WQ,d&dQ-c'_Q-m'gQ-u'mQ0[*qQ1b,OQ1y,eR<{<Y%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+],p,s,x-i-q.P.V.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3l4z6T6e6f6i6|8t9T9_S#q]<V!r)_$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SU+P%]<s<tQ+t&PQ,f&gQ,m&oQ0x+gQ0}+iQ1Y+uQ2R,kQ3`.gQ5`0|Q5f1TQ6[1zQ7Y3dQ8`5gR9e7['QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S!S!nQ!r!v!y!z$|'W'_'`'l'm'n*k*o*q*r-]-c-e-u0[0_1o5{5}%[$ti#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^Q&X|Q'U!eS'[%i-`Q+t&PQ,P&WQ,f&gQ0n+SQ1Y+uQ1_+{Q2Q,jQ2R,kQ5f1TQ5o1aQ6[1zQ6_1|Q6`2PQ8`5gQ8c5lQ8|6bQ:X8dQ:f8yQ;V:YR<}*ZrnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_R,h&k&z^OPXYstuvwz!Z!`!g!j!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'b'r(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>R>S[#]WZ#W#Z'X(T!b%jm#h#i#l$x%e%h(^(h(i(j*Y*^*b+Z+[+^,o-V.T.Z.[.]._/m/p2d3[3]4a6r7TQ%wxQ%{yW&Q|&V&W,OQ&_!TQ'c!hQ'e!iQ(q#sS+n%|%}Q+r&PQ,_&bQ,c&dS-l'f'gQ.i(rQ1R+oQ1X+uQ1Z+vQ1^+zQ1t,`S1x,d,eQ2|-mQ5e1TQ5i1WQ5n1`Q6Z1yQ8_5gQ8b5kQ8f5pQ:T8^R;T:U!U$zi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y!^%yy!i!u%{%|%}'V'e'f'g'k'u*j+n+o-Y-l-m-t0R0U1R2u2|3T4r4s4v7}9{Q+h%wQ,T&[Q,W&]Q,b&dQ.h(qQ1s,_U1w,c,d,eQ3e.iQ6U1tS6Y1x1yQ8x6Z#f>T#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^o>U<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hW%Ti%V*y>PS&[!Q&iQ&]!RQ&^!SU*}%[%d=sR,R&Y%]%Si#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^T)z$u){V+P%]<s<tW'[!e%i*Z-`S(}#y#zQ+c%rQ+y&SS.b(m(nQ1j,XQ5T0kR8i5u'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S$i$^c#Y#e%q%s%u(S(Y(t(y)R)S)T)U)V)W)X)Y)Z)[)^)`)b)g)q+d+x-Z-x-}.S.U.s.v.z.|.}/O/b0p2k2n3O3V3k3p3q3r3s3t3u3v3w3x3y3z3{3|4P4Q4X5X5c6u6{7Q7a7b7k7l8k9X9]9g9m9n:o;W;`<W=vT#TV#U'RkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ'Y!eR2q-]!W!nQ!e!r!v!y!z$|'W'_'`'l'm'n*Z*k*o*q*r-]-c-e-u0[0_1o5{5}R1l,ZnqOXst!Z#d%m&r&t&u&w,s,x2[2_Q&y!^Q'v!xS(s#u<^Q+l%zQ,]&_Q,^&aQ-j'dQ-w'oS.r(x=PS0q+X=ZQ1P+mQ1n,[Q2c,zQ2e,{Q2m-WQ2z-kQ2}-oS5Y0r=eQ5a1QS5d1S=fQ6t2oQ6x2{Q6}3SQ8]5bQ9Y6vQ9Z6yQ9^7OR:l9V$d$]c#Y#e%s%u(S(Y(t(y)R)S)T)U)V)W)X)Y)Z)[)^)`)b)g)q+d+x-Z-x-}.S.U.s.v.z.}/O/b0p2k2n3O3V3k3p3q3r3s3t3u3v3w3x3y3z3{3|4P4Q4X5X5c6u6{7Q7a7b7k7l8k9X9]9g9m9n:o;W;`<W=vS(o#p'iQ)P#zS+b%q.|S.c(n(pR3^.d'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SS#q]<VQ&t!XQ&u!YQ&w![Q&x!]R2Z,vQ'a!hQ+e%wQ-h'cS.e(q+hQ2x-gW3b.h.i0w0yQ6w2yW7U3_3a3e5^U9a7V7X7ZU:q9c9d9fS;b:p:sQ;p;cR;x;qU!wQ'`-eT5y1o5{!Q_OXZ`st!V!Z#d#h%e%m&i&k&r&t&u&w(j,s,x.[2[2_]!pQ!r'`-e1o5{T#q]<V%^{OPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_S(}#y#zS.b(m(n!s=l$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SU$fd)_,mS(p#p'iU*v%R(w4OU0m+O.n7gQ5^0xQ7V3`Q9d7YR:s9em!tQ!r!v!y!z'`'l'm'n-e-u1o5{5}Q't!uS(f#g2US-s'k'wQ/s*]Q0R*jQ3U-vQ4f/tQ4r0TQ4s0UQ4x0^Q7r4`S7}4t4vS8R4y4{Q9r7sQ9v7yQ9{8OQ:Q8TS:{9w9xS;g:|;PS;s;h;iS;{;t;uS<P;|;}R<S<QQ#wbQ's!uS(e#g2US(g#m+WQ+Y%fQ+j%xQ+p&OU-r'k't'wQ.W(fU/r*]*`/wQ0S*jQ0V*lQ1O+kQ1u,aS3R-s-vQ3Z.`S4e/s/tQ4n0PS4q0R0^Q4u0WQ6W1vQ7P3US7q4`4bQ7u4fU7|4r4x4{Q8P4wQ8v6XS9q7r7sQ9u7yQ9}8RQ:O8SQ:c8wQ:y9rS:z9v9xQ;S:QQ;^:dS;f:{;PS;r;g;hS;z;s;uS<O;{;}Q<R<PQ<T<SQ=o=jQ={=tR=|=uV!wQ'`-e%^aOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_S#wz!j!r=i$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SR=o>R%^bOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_Q%fj!^%xy!i!u%{%|%}'V'e'f'g'k'u*j+n+o-Y-l-m-t0R0U1R2u2|3T4r4s4v7}9{S&Oz!jQ+k%yQ,a&dW1v,b,c,d,eU6X1w1x1yS8w6Y6ZQ:d8x!r=j$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ=t>QR=u>R%QeOPXYstuvw!Z!`!g!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_Y#bWZ#W#Z(T!b%jm#h#i#l$x%e%h(^(h(i(j*Y*^*b+Z+[+^,o-V.T.Z.[.]._/m/p2d3[3]4a6r7TQ,n&o!p=k$Z$n)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SR=n'XU']!e%i*ZR2s-`%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+],p,s,x-i-q.P.V.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3l4z6T6e6f6i6|8t9T9_!r)_$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ,m&oQ0x+gQ3`.gQ7Y3dR9e7[!b$Tc#Y%q(S(Y(t(y)Z)[)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<W!P<d)^)q-Z.|2k2n3p3y3z4P4X6u7b7k7l8k9X9g9m9n;W;`=v!f$Vc#Y%q(S(Y(t(y)W)X)Z)[)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<W!T<f)^)q-Z.|2k2n3p3v3w3y3z4P4X6u7b7k7l8k9X9g9m9n;W;`=v!^$Zc#Y%q(S(Y(t(y)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<WQ4_/kz>S)^)q-Z.|2k2n3p4P4X6u7b7k7l8k9X9g9m9n;W;`=vQ>X>ZR>Y>['QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SS$oh$pR4U/U'XgOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/U/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>ST$kf$qQ$ifS)j$l)nR)v$qT$jf$qT)l$l)n'XhOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/U/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>ST$oh$pQ$rhR)u$p%^jOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_!s>Q$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S#glOPXZst!Z!`!o#S#d#o#{$n%m&k&n&o&r&t&u&w&{'T'b)O)s*i+]+g,p,s,x-i.g/V/n0]0l1r2S2T2V2X2[2_2a3d4T4z6T6e6f6i7[8t9T!U%Ri$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y#f(w#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^Q+T%aQ/c*Oo4O<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!U$yi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>YQ*c$zU*l$|*Z*oQ+U%bQ0W*m#f=q#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n=r<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hQ=w>TQ=x>UQ=y>VR=z>W!U%Ri$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y#f(w#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^o4O<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hnoOXst!Z#d%m&r&t&u&w,s,x2[2_S*f${*YQ-R'OQ-S'QR4i/y%[%Si#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^Q,U&]Q1h,WQ5s1gR8h5tV*n$|*Z*oU*n$|*Z*oT5z1o5{S0P*i/nQ4w0]T8S4z:]Q+j%xQ0V*lQ1O+kQ1u,aQ6W1vQ8v6XQ:c8wR;^:d!U%Oi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Yx*R$v)e*S*u+V/v0d0e4R4g5R5S5W7p8U:R:x=p=}>OS0`*t0a#f<o#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n<p<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!d=S(u)c*[*e.j.m.q/_/k/|0v1e3h4[4h4l5r7]7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[`=T3}7c7f7j9h:t:w;yS=_.l3iT=`7e9k!U%Qi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y|*T$v)e*U*t+V/g/v0d0e4R4g4|5R5S5W7p8U:R:x=p=}>OS0b*u0c#f<q#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n<r<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!h=U(u)c*[*e.k.l.q/_/k/|0v1e3f3h4[4h4l5r7]7^7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[d=V3}7d7e7j9h9i:t:u:w;yS=a.m3jT=b7f9lrnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_Q&f!UR,p&ornOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_R&f!UQ,Y&^R1d,RsnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_Q1p,_S6R1s1tU8p6P6Q6US:_8r8sS;Y:^:aQ;m;ZR;w;nQ&m!VR,i&iR6_1|R:f8yW&Q|&V&W,OR1Z+vQ&r!WR,s&sR,y&xT2],x2_R,}&yQ,|&yR2f,}Q'y!{R-y'ySsOtQ#dXT%ps#dQ#OTR'{#OQ#RUR'}#RQ){$uR/`){Q#UVR(Q#UQ#XWU(W#X(X.QQ(X#YR.Q(YQ-^'YR2r-^Q.u(yS3m.u3nR3n.vQ-e'`R2v-eY!rQ'`-e1o5{R'j!rQ/Q)eR4S/QU#_W%h*YU(_#_(`.RQ(`#`R.R(ZQ-a']R2t-at`OXst!V!Z#d%m&i&k&r&t&u&w,s,x2[2_S#hZ%eU#r`#h.[R.[(jQ(k#jQ.X(gW.a(k.X3X7RQ3X.YR7R3YQ)n$lR/W)nQ$phR)t$pQ$`cU)a$`-|<jQ-|<WR<j)qQ/q*]W4c/q4d7t9sU4d/r/s/tS7t4e4fR9s7u$e*Q$v(u)c)e*[*e*t*u+Q+R+V.l.m.o.p.q/_/g/i/k/v/|0d0e0v1e3f3g3h3}4R4[4g4h4l4|5O5R5S5W5r7]7^7_7`7e7f7h7i7j7p7w7z8U8X8Z9h9i9j9t9|:R:S:t:u:v:w:x:};R;e;j;v;y=p=}>O>Z>[Q/z*eU4k/z4m7xQ4m/|R7x4lS*o$|*ZR0Y*ox*S$v)e*t*u+V/v0d0e4R4g5R5S5W7p8U:R:x=p=}>O!d.j(u)c*[*e.l.m.q/_/k/|0v1e3h4[4h4l5r7]7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[U/h*S.j7ca7c3}7e7f7j9h:t:w;yQ0a*tQ3i.lU4}0a3i9kR9k7e|*U$v)e*t*u+V/g/v0d0e4R4g4|5R5S5W7p8U:R:x=p=}>O!h.k(u)c*[*e.l.m.q/_/k/|0v1e3f3h4[4h4l5r7]7^7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[U/j*U.k7de7d3}7e7f7j9h9i:t:u:w;yQ0c*uQ3j.mU5P0c3j9lR9l7fQ*z%UR0g*zQ5]0vR8Y5]Q+_%kR0u+_Q5v1jS8j5v:[R:[8kQ,[&_R1m,[Q5{1oR8m5{Q1{,fS6]1{8zR8z6_Q1U+rW5h1U5j8a:VQ5j1XQ8a5iR:V8bQ+w&QR1[+wQ2_,xR6m2_YrOXst#dQ&v!ZQ+a%mQ,r&rQ,t&tQ,u&uQ,w&wQ2Y,sS2],x2_R6l2[Q%opQ&z!_Q&}!aQ'P!bQ'R!cQ'q!uQ+`%lQ+l%zQ,Q&XQ,h&mQ-P&|W-p'k's't'wQ-w'oQ0X*nQ1P+mQ1c,PS2O,i,lQ2g-OQ2h-RQ2i-SQ2}-oW3P-r-s-v-xQ5a1QQ5m1_Q5q1eQ6V1uQ6a2QQ6k2ZU6z3O3R3UQ6}3SQ8]5bQ8e5oQ8g5rQ8l5zQ8u6WQ8{6`S9[6{7PQ9^7OQ:W8cQ:b8vQ:g8|Q:n9]Q;U:XQ;]:cQ;a:oQ;l;VR;o;^Q%zyQ'd!iQ'o!uU+m%{%|%}Q-W'VU-k'e'f'gS-o'k'uQ0Q*jS1Q+n+oQ2o-YS2{-l-mQ3S-tS4p0R0UQ5b1RQ6v2uQ6y2|Q7O3TU7{4r4s4vQ9z7}R;O9{S$wi>PR*{%VU%Ui%V>PR0f*yQ$viS(u#v+iS)c$b$cQ)e$dQ*[$xS*e${*YQ*t%OQ*u%QQ+Q%^Q+R%_Q+V%cQ.l<oQ.m<qQ.o<uQ.p<wQ.q<yQ/_)yQ/g*RQ/i*TQ/k*VQ/v*aS/|*g/mQ0d*wQ0e*xl0v+f,V.f1i1q3c6S7W8q9b:`:r;[;dQ1e,SQ3f=SQ3g=UQ3h=XS3}<l<mQ4R/PS4[/d4^Q4g/xQ4h/yQ4l/{Q4|0`Q5O0bQ5R0iQ5S0jQ5W0oQ5r1fQ7]=]Q7^=_Q7_=aQ7`=cQ7e<pQ7f<rQ7h<vQ7i<xQ7j<zQ7p4_Q7w4jQ7z4oQ8U5QQ8X5[Q8Z5_Q9h=YQ9i=TQ9j=VQ9t7vQ9|8QQ:R8VQ:S8[Q:t=^Q:u=`Q:v=bQ:w=dQ:x9pQ:}9yQ;R:PQ;e=gQ;j;QQ;v;kQ;y=hQ=p>PQ=}>XQ>O>YQ>Z>]R>[>^Q+O%]Q.n<sR7g<tnpOXst!Z#d%m&r&t&u&w,s,x2[2_Q!fPS#fZ#oQ&|!`W'h!o*i0]4zQ(P#SQ)Q#{Q)r$nS,l&k&nQ,q&oQ-O&{S-T'T/nQ-g'bQ.x)OQ/[)sQ0s+]Q0y+gQ2W,pQ2y-iQ3a.gQ4W/VQ5U0lQ6Q1rQ6c2SQ6d2TQ6h2VQ6j2XQ6o2aQ7Z3dQ7m4TQ8s6TQ9P6eQ9Q6fQ9S6iQ9f7[Q:a8tR:k9T#[cOPXZst!Z!`!o#d#o#{%m&k&n&o&r&t&u&w&{'T'b)O*i+]+g,p,s,x-i.g/n0]0l1r2S2T2V2X2[2_2a3d4z6T6e6f6i7[8t9TQ#YWQ#eYQ%quQ%svS%uw!gS(S#W(VQ(Y#ZQ(t#uQ(y#xQ)R$OQ)S$PQ)T$QQ)U$RQ)V$SQ)W$TQ)X$UQ)Y$VQ)Z$WQ)[$XQ)^$ZQ)`$_Q)b$aQ)g$eW)q$n)s/V4TQ+d%tQ+x&RS-Z'X2pQ-x'rS-}(T.PQ.S(]Q.U(dQ.s(xQ.v(zQ.z<UQ.|<XQ.}<YQ/O<]Q/b)}Q0p+XQ2k-UQ2n-XQ3O-qQ3V.VQ3k.tQ3p<^Q3q<_Q3r<`Q3s<aQ3t<bQ3u<cQ3v<dQ3w<eQ3x<fQ3y<gQ3z<hQ3{.{Q3|<kQ4P<nQ4Q<{Q4X<iQ5X0rQ5c1SQ6u=OQ6{3QQ7Q3WQ7a3lQ7b=PQ7k=RQ7l=ZQ8k5wQ9X6sQ9]6|Q9g=[Q9m=eQ9n=fQ:o9_Q;W:ZQ;`:mQ<W#SR=v>SR#[WR'Z!el!tQ!r!v!y!z'`'l'm'n-e-u1o5{5}S'V!e-]U*j$|*Z*oS-Y'W'_S0U*k*qQ0^*rQ2u-cQ4v0[R4{0_R({#xQ!fQT-d'`-e]!qQ!r'`-e1o5{Q#p]R'i<VR)f$dY!uQ'`-e1o5{Q'k!rS'u!v!yS'w!z5}S-t'l'mQ-v'nR3T-uT#kZ%eS#jZ%eS%km,oU(g#h#i#lS.Y(h(iQ.^(jQ0t+^Q3Y.ZU3Z.[.]._S7S3[3]R9`7Td#^W#W#Z%h(T(^*Y+Z.T/mr#gZm#h#i#l%e(h(i(j+^.Z.[.]._3[3]7TS*]$x*bQ/t*^Q2U,oQ2l-VQ4`/pQ6q2dQ7s4aQ9W6rT=m'X+[V#aW%h*YU#`W%h*YS(U#W(^U(Z#Z+Z/mS-['X+[T.O(T.TV'^!e%i*ZQ$lfR)x$qT)m$l)nR4V/UT*_$x*bT*h${*YQ0w+fQ1g,VQ3_.fQ5t1iQ6P1qQ7X3cQ8r6SQ9c7WQ:^8qQ:p9bQ;Z:`Q;c:rQ;n;[R;q;dnqOXst!Z#d%m&r&t&u&w,s,x2[2_Q&l!VR,h&itmOXst!U!V!Z#d%m&i&r&t&u&w,s,x2[2_R,o&oT%lm,oR1k,XR,g&gQ&U|S+}&V&WR1^,OR+s&PT&p!W&sT&q!W&sT2^,x2_",nodeNames:" ArithOp ArithOp ?. JSXStartTag LineComment BlockComment Script Hashbang ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > < TypeParamList in out const TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . PropertyName [ TemplateString Escape Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewTarget new NewExpression ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression TypeArgList CompareOp < declare Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression InstantiationExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast < ArrowFunction TypeParamList SequenceExpression InstantiationExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate asserts is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var using TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration defer ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem",maxTerm:380,context:fj,nodeProps:[["isolate",-8,5,6,14,37,39,51,53,55,""],["group",-26,9,17,19,68,207,211,215,216,218,221,224,234,237,243,245,247,249,252,258,264,266,268,270,272,274,275,"Statement",-34,13,14,32,35,36,42,51,54,55,57,62,70,72,76,80,82,84,85,110,111,120,121,136,139,141,142,143,144,145,147,148,167,169,171,"Expression",-23,31,33,37,41,43,45,173,175,177,178,180,181,182,184,185,186,188,189,190,201,203,205,206,"Type",-3,88,103,109,"ClassItem"],["openedBy",23,"<",38,"InterpolationStart",56,"[",60,"{",73,"(",160,"JSXStartCloseTag"],["closedBy",-2,24,168,">",40,"InterpolationEnd",50,"]",61,"}",74,")",165,"JSXEndTag"]],propSources:[xj],skippedNodes:[0,5,6,278],repeatNodeCount:37,tokenData:"$Fq07[R!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tuEruvJSvwLkwx! Yxy!'iyz!(sz{!)}{|!,q|}!.O}!O!,q!O!P!/Y!P!Q!9j!Q!R#:O!R![#<_![!]#I_!]!^#Jk!^!_#Ku!_!`$![!`!a$$v!a!b$*T!b!c$,r!c!}Er!}#O$-|#O#P$/W#P#Q$4o#Q#R$5y#R#SEr#S#T$7W#T#o$8b#o#p$<r#p#q$=h#q#r$>x#r#s$@U#s$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$I|Er$I|$I}$Dk$I}$JO$Dk$JO$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr(n%d_$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$i&j(Z!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU(Z!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$i&j(WpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU(WpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z07[+rq$i&j(Wp(Z!b'|0/lOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z07[.ST(X#S$i&j'}0/lO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c07[.n_$i&j(Wp(Z!b'}0/lOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)3p/x`$i&j!p),Q(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW1V`#v(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW2d_#v(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At3l_(V':f$i&j(Z!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k(^4r_$i&j(Z!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k&z5vX$i&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q&z6jT$d`$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c`6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y`7bO$d``7eP;=`<%l6y&z7kP;=`<%l5q(^7w]$d`$i&j(Z!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!r8uZ(Z!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p!r9oU$d`(Z!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!r:UP;=`<%l8p(^:[P;=`<%l4k%9[:hh$i&j(Wp(Z!bOY%ZYZ&cZq%Zqr<Srs&}st%ZtuCruw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr(r<__WS$i&j(Wp(Z!bOY<SYZ&cZr<Srs=^sw<Swx@nx!^<S!^!_Bm!_#O<S#O#P>`#P#o<S#o#pBm#p;'S<S;'S;=`Cl<%lO<S(Q=g]WS$i&j(Z!bOY=^YZ&cZw=^wx>`x!^=^!^!_?q!_#O=^#O#P>`#P#o=^#o#p?q#p;'S=^;'S;=`@h<%lO=^&n>gXWS$i&jOY>`YZ&cZ!^>`!^!_?S!_#o>`#o#p?S#p;'S>`;'S;=`?k<%lO>`S?XSWSOY?SZ;'S?S;'S;=`?e<%lO?SS?hP;=`<%l?S&n?nP;=`<%l>`!f?xWWS(Z!bOY?qZw?qwx?Sx#O?q#O#P?S#P;'S?q;'S;=`@b<%lO?q!f@eP;=`<%l?q(Q@kP;=`<%l=^'`@w]WS$i&j(WpOY@nYZ&cZr@nrs>`s!^@n!^!_Ap!_#O@n#O#P>`#P#o@n#o#pAp#p;'S@n;'S;=`Bg<%lO@ntAwWWS(WpOYApZrAprs?Ss#OAp#O#P?S#P;'SAp;'S;=`Ba<%lOAptBdP;=`<%lAp'`BjP;=`<%l@n#WBvYWS(Wp(Z!bOYBmZrBmrs?qswBmwxApx#OBm#O#P?S#P;'SBm;'S;=`Cf<%lOBm#WCiP;=`<%lBm(rCoP;=`<%l<S%9[C}i$i&j(o%1l(Wp(Z!bOY%ZYZ&cZr%Zrs&}st%ZtuCruw%Zwx(rx!Q%Z!Q![Cr![!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr%9[EoP;=`<%lCr07[FRk$i&j(Wp(Z!b$]#t(T,2j(e$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr+dHRk$i&j(Wp(Z!b$]#tOY%ZYZ&cZr%Zrs&}st%ZtuGvuw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Gv![!^%Z!^!_*g!_!c%Z!c!}Gv!}#O%Z#O#P&c#P#R%Z#R#SGv#S#T%Z#T#oGv#o#p*g#p$g%Z$g;'SGv;'S;=`Iv<%lOGv+dIyP;=`<%lGv07[JPP;=`<%lEr(KWJ_`$i&j(Wp(Z!b#p(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWKl_$i&j$Q(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,#xLva(z+JY$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sv%ZvwM{wx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWNW`$i&j#z(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At! c_(Y';W$i&j(WpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b'l!!i_$i&j(WpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b&z!#mX$i&jOw!#hwx6cx!^!#h!^!_!$Y!_#o!#h#o#p!$Y#p;'S!#h;'S;=`!$r<%lO!#h`!$]TOw!$Ywx7]x;'S!$Y;'S;=`!$l<%lO!$Y`!$oP;=`<%l!$Y&z!$uP;=`<%l!#h'l!%R]$d`$i&j(WpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r!Q!&PZ(WpOY!%zYZ!$YZr!%zrs!$Ysw!%zwx!&rx#O!%z#O#P!$Y#P;'S!%z;'S;=`!']<%lO!%z!Q!&yU$d`(WpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r!Q!'`P;=`<%l!%z'l!'fP;=`<%l!!b/5|!'t_!l/.^$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&U!)O_!k!Lf$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z-!n!*[b$i&j(Wp(Z!b(U%&f#q(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!+d{!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW!+o`$i&j(Wp(Z!b#n(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;x!,|`$i&j(Wp(Z!br+4YOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,$U!.Z_!]+Jf$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!/ec$i&j(Wp(Z!b!Q.2^OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!0p!P!Q%Z!Q![!3Y![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!0ya$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!2O!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!2Z_![!L^$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!3eg$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!3Y![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S!3Y#S#X%Z#X#Y!4|#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!5Vg$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!6n|}%Z}!O!6n!O!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!6wc$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!8_c$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!9uf$i&j(Wp(Z!b#o(ChOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcxz!;Zz{#-}{!P!;Z!P!Q#/d!Q!^!;Z!^!_#(i!_!`#7S!`!a#8i!a!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z?O!;fb$i&j(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z>^!<w`$i&j(Z!b!X7`OY!<nYZ&cZw!<nwx!=yx!P!<n!P!Q!Eq!Q!^!<n!^!_!Gr!_!}!<n!}#O!KS#O#P!Dy#P#o!<n#o#p!Gr#p;'S!<n;'S;=`!L]<%lO!<n<z!>Q^$i&j!X7`OY!=yYZ&cZ!P!=y!P!Q!>|!Q!^!=y!^!_!@c!_!}!=y!}#O!CW#O#P!Dy#P#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!?Td$i&j!X7`O!^&c!_#W&c#W#X!>|#X#Z&c#Z#[!>|#[#]&c#]#^!>|#^#a&c#a#b!>|#b#g&c#g#h!>|#h#i&c#i#j!>|#j#k!>|#k#m&c#m#n!>|#n#o&c#p;'S&c;'S;=`&w<%lO&c7`!@hX!X7`OY!@cZ!P!@c!P!Q!AT!Q!}!@c!}#O!Ar#O#P!Bq#P;'S!@c;'S;=`!CQ<%lO!@c7`!AYW!X7`#W#X!AT#Z#[!AT#]#^!AT#a#b!AT#g#h!AT#i#j!AT#j#k!AT#m#n!AT7`!AuVOY!ArZ#O!Ar#O#P!B[#P#Q!@c#Q;'S!Ar;'S;=`!Bk<%lO!Ar7`!B_SOY!ArZ;'S!Ar;'S;=`!Bk<%lO!Ar7`!BnP;=`<%l!Ar7`!BtSOY!@cZ;'S!@c;'S;=`!CQ<%lO!@c7`!CTP;=`<%l!@c<z!C][$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#O!CW#O#P!DR#P#Q!=y#Q#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DWX$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DvP;=`<%l!CW<z!EOX$i&jOY!=yYZ&cZ!^!=y!^!_!@c!_#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!EnP;=`<%l!=y>^!Ezl$i&j(Z!b!X7`OY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#W&}#W#X!Eq#X#Z&}#Z#[!Eq#[#]&}#]#^!Eq#^#a&}#a#b!Eq#b#g&}#g#h!Eq#h#i&}#i#j!Eq#j#k!Eq#k#m&}#m#n!Eq#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}8r!GyZ(Z!b!X7`OY!GrZw!Grwx!@cx!P!Gr!P!Q!Hl!Q!}!Gr!}#O!JU#O#P!Bq#P;'S!Gr;'S;=`!J|<%lO!Gr8r!Hse(Z!b!X7`OY'}Zw'}x#O'}#P#W'}#W#X!Hl#X#Z'}#Z#[!Hl#[#]'}#]#^!Hl#^#a'}#a#b!Hl#b#g'}#g#h!Hl#h#i'}#i#j!Hl#j#k!Hl#k#m'}#m#n!Hl#n;'S'};'S;=`(f<%lO'}8r!JZX(Z!bOY!JUZw!JUwx!Arx#O!JU#O#P!B[#P#Q!Gr#Q;'S!JU;'S;=`!Jv<%lO!JU8r!JyP;=`<%l!JU8r!KPP;=`<%l!Gr>^!KZ^$i&j(Z!bOY!KSYZ&cZw!KSwx!CWx!^!KS!^!_!JU!_#O!KS#O#P!DR#P#Q!<n#Q#o!KS#o#p!JU#p;'S!KS;'S;=`!LV<%lO!KS>^!LYP;=`<%l!KS>^!L`P;=`<%l!<n=l!Ll`$i&j(Wp!X7`OY!LcYZ&cZr!Lcrs!=ys!P!Lc!P!Q!Mn!Q!^!Lc!^!_# o!_!}!Lc!}#O#%P#O#P!Dy#P#o!Lc#o#p# o#p;'S!Lc;'S;=`#&Y<%lO!Lc=l!Mwl$i&j(Wp!X7`OY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#W(r#W#X!Mn#X#Z(r#Z#[!Mn#[#](r#]#^!Mn#^#a(r#a#b!Mn#b#g(r#g#h!Mn#h#i(r#i#j!Mn#j#k!Mn#k#m(r#m#n!Mn#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r8Q# vZ(Wp!X7`OY# oZr# ors!@cs!P# o!P!Q#!i!Q!}# o!}#O#$R#O#P!Bq#P;'S# o;'S;=`#$y<%lO# o8Q#!pe(Wp!X7`OY)rZr)rs#O)r#P#W)r#W#X#!i#X#Z)r#Z#[#!i#[#])r#]#^#!i#^#a)r#a#b#!i#b#g)r#g#h#!i#h#i)r#i#j#!i#j#k#!i#k#m)r#m#n#!i#n;'S)r;'S;=`*Z<%lO)r8Q#$WX(WpOY#$RZr#$Rrs!Ars#O#$R#O#P!B[#P#Q# o#Q;'S#$R;'S;=`#$s<%lO#$R8Q#$vP;=`<%l#$R8Q#$|P;=`<%l# o=l#%W^$i&j(WpOY#%PYZ&cZr#%Prs!CWs!^#%P!^!_#$R!_#O#%P#O#P!DR#P#Q!Lc#Q#o#%P#o#p#$R#p;'S#%P;'S;=`#&S<%lO#%P=l#&VP;=`<%l#%P=l#&]P;=`<%l!Lc?O#&kn$i&j(Wp(Z!b!X7`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#W%Z#W#X#&`#X#Z%Z#Z#[#&`#[#]%Z#]#^#&`#^#a%Z#a#b#&`#b#g%Z#g#h#&`#h#i%Z#i#j#&`#j#k#&`#k#m%Z#m#n#&`#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z9d#(r](Wp(Z!b!X7`OY#(iZr#(irs!Grsw#(iwx# ox!P#(i!P!Q#)k!Q!}#(i!}#O#+`#O#P!Bq#P;'S#(i;'S;=`#,`<%lO#(i9d#)th(Wp(Z!b!X7`OY*gZr*grs'}sw*gwx)rx#O*g#P#W*g#W#X#)k#X#Z*g#Z#[#)k#[#]*g#]#^#)k#^#a*g#a#b#)k#b#g*g#g#h#)k#h#i*g#i#j#)k#j#k#)k#k#m*g#m#n#)k#n;'S*g;'S;=`+Z<%lO*g9d#+gZ(Wp(Z!bOY#+`Zr#+`rs!JUsw#+`wx#$Rx#O#+`#O#P!B[#P#Q#(i#Q;'S#+`;'S;=`#,Y<%lO#+`9d#,]P;=`<%l#+`9d#,cP;=`<%l#(i?O#,o`$i&j(Wp(Z!bOY#,fYZ&cZr#,frs!KSsw#,fwx#%Px!^#,f!^!_#+`!_#O#,f#O#P!DR#P#Q!;Z#Q#o#,f#o#p#+`#p;'S#,f;'S;=`#-q<%lO#,f?O#-tP;=`<%l#,f?O#-zP;=`<%l!;Z07[#.[b$i&j(Wp(Z!b(O0/l!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z07[#/o_$i&j(Wp(Z!bT0/lOY#/dYZ&cZr#/drs#0nsw#/dwx#4Ox!^#/d!^!_#5}!_#O#/d#O#P#1p#P#o#/d#o#p#5}#p;'S#/d;'S;=`#6|<%lO#/d06j#0w]$i&j(Z!bT0/lOY#0nYZ&cZw#0nwx#1px!^#0n!^!_#3R!_#O#0n#O#P#1p#P#o#0n#o#p#3R#p;'S#0n;'S;=`#3x<%lO#0n05W#1wX$i&jT0/lOY#1pYZ&cZ!^#1p!^!_#2d!_#o#1p#o#p#2d#p;'S#1p;'S;=`#2{<%lO#1p0/l#2iST0/lOY#2dZ;'S#2d;'S;=`#2u<%lO#2d0/l#2xP;=`<%l#2d05W#3OP;=`<%l#1p01O#3YW(Z!bT0/lOY#3RZw#3Rwx#2dx#O#3R#O#P#2d#P;'S#3R;'S;=`#3r<%lO#3R01O#3uP;=`<%l#3R06j#3{P;=`<%l#0n05x#4X]$i&j(WpT0/lOY#4OYZ&cZr#4Ors#1ps!^#4O!^!_#5Q!_#O#4O#O#P#1p#P#o#4O#o#p#5Q#p;'S#4O;'S;=`#5w<%lO#4O00^#5XW(WpT0/lOY#5QZr#5Qrs#2ds#O#5Q#O#P#2d#P;'S#5Q;'S;=`#5q<%lO#5Q00^#5tP;=`<%l#5Q05x#5zP;=`<%l#4O01p#6WY(Wp(Z!bT0/lOY#5}Zr#5}rs#3Rsw#5}wx#5Qx#O#5}#O#P#2d#P;'S#5};'S;=`#6v<%lO#5}01p#6yP;=`<%l#5}07[#7PP;=`<%l#/d)3h#7ab$i&j$Q(Ch(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;ZAt#8vb$Z#t$i&j(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z'Ad#:Zp$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#U%Z#U#V#?i#V#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#d#Bq#d#l%Z#l#m#Es#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#<jk$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#>j_$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#?rd$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#A]f$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Bzc$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Dbe$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#E|g$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Gpi$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x#Il_!g$b$i&j$O)Lv(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#Jv_al$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f#LS^h#)`#R-<U(Wp(Z!b$n7`OY*gZr*grs'}sw*gwx)rx!P*g!P!Q#MO!Q!^*g!^!_#Mt!_!`$ f!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#MXX$k&j(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El#M}Z#r(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#Np!`#O*g#P;'S*g;'S;=`+Z<%lO*g(El#NyX$Q(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El$ oX#s(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g*)x$!ga#`*!Y$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a$#l!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(K[$#w_#k(Cl$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x$%Vag!*r#s(Ch$f#|$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`$&[!`!a$'f!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$&g_#s(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$'qa#r(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`!a$(v!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$)R`#r(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(Kd$*`a(r(Ct$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!a%Z!a!b$+e!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$+p`$i&j#{(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`$,}_!|$Ip$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f$.X_!S0,v$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$/]Z$i&jO!^$0O!^!_$0f!_#i$0O#i#j$0k#j#l$0O#l#m$2^#m#o$0O#o#p$0f#p;'S$0O;'S;=`$4i<%lO$0O(n$0VT_#S$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$0kO_#S(n$0p[$i&jO!Q&c!Q![$1f![!^&c!_!c&c!c!i$1f!i#T&c#T#Z$1f#Z#o&c#o#p$3|#p;'S&c;'S;=`&w<%lO&c(n$1kZ$i&jO!Q&c!Q![$2^![!^&c!_!c&c!c!i$2^!i#T&c#T#Z$2^#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$2cZ$i&jO!Q&c!Q![$3U![!^&c!_!c&c!c!i$3U!i#T&c#T#Z$3U#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$3ZZ$i&jO!Q&c!Q![$0O![!^&c!_!c&c!c!i$0O!i#T&c#T#Z$0O#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$4PR!Q![$4Y!c!i$4Y#T#Z$4Y#S$4]S!Q![$4Y!c!i$4Y#T#Z$4Y#q#r$0f(n$4lP;=`<%l$0O#1[$4z_!Y#)l$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$6U`#x(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;p$7c_$i&j(Wp(Z!b(a+4QOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$8qk$i&j(Wp(Z!b(T,2j$_#t(e$I[OY%ZYZ&cZr%Zrs&}st%Ztu$8buw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$8b![!^%Z!^!_*g!_!c%Z!c!}$8b!}#O%Z#O#P&c#P#R%Z#R#S$8b#S#T%Z#T#o$8b#o#p*g#p$g%Z$g;'S$8b;'S;=`$<l<%lO$8b+d$:qk$i&j(Wp(Z!b$_#tOY%ZYZ&cZr%Zrs&}st%Ztu$:fuw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$:f![!^%Z!^!_*g!_!c%Z!c!}$:f!}#O%Z#O#P&c#P#R%Z#R#S$:f#S#T%Z#T#o$:f#o#p*g#p$g%Z$g;'S$:f;'S;=`$<f<%lO$:f+d$<iP;=`<%l$:f07[$<oP;=`<%l$8b#Jf$<{X!_#Hb(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g,#x$=sa(y+JY$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$+e#q;'S%Z;'S;=`+a<%lO%Z)>v$?V_!^(CdvBr$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z?O$@a_!q7`$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$Aq|$i&j(Wp(Z!b'|0/l$]#t(T,2j(e$I[OX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr07[$D|k$i&j(Wp(Z!b'}0/l$]#t(T,2j(e$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr",tokenizers:[gj,vj,Oj,bj,2,3,4,5,6,7,8,9,10,11,12,13,14,mj,new jZ("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOx~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!U~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(c~~",141,340),new jZ("j~RQYZXz{^~^O(Q~~aP!P!Qd~iO(R~~",25,323)],topRules:{Script:[0,7],SingleExpression:[1,276],SingleClassItem:[2,277]},dialects:{jsx:0,ts:15175},dynamicPrecedences:{80:1,82:1,94:1,169:1,199:1},specialized:[{term:327,get:e=>wj[e]||-1},{term:343,get:e=>kj[e]||-1},{term:95,get:e=>Sj[e]||-1}],tokenPrec:15201}),Tj=[pq("function ${name}(${params}) {\n\t${}\n}",{label:"function",detail:"definition",type:"keyword"}),pq("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n\t${}\n}",{label:"for",detail:"loop",type:"keyword"}),pq("for (let ${name} of ${collection}) {\n\t${}\n}",{label:"for",detail:"of loop",type:"keyword"}),pq("do {\n\t${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),pq("while (${}) {\n\t${}\n}",{label:"while",detail:"loop",type:"keyword"}),pq("try {\n\t${}\n} catch (${error}) {\n\t${}\n}",{label:"try",detail:"/ catch block",type:"keyword"}),pq("if (${}) {\n\t${}\n}",{label:"if",detail:"block",type:"keyword"}),pq("if (${}) {\n\t${}\n} else {\n\t${}\n}",{label:"if",detail:"/ else block",type:"keyword"}),pq("class ${name} {\n\tconstructor(${params}) {\n\t\t${}\n\t}\n}",{label:"class",detail:"definition",type:"keyword"}),pq('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),pq('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],Cj=Tj.concat([pq("interface ${name} {\n\t${}\n}",{label:"interface",detail:"definition",type:"keyword"}),pq("type ${name} = ${type}",{label:"type",detail:"definition",type:"keyword"}),pq("enum ${name} {\n\t${}\n}",{label:"enum",detail:"definition",type:"keyword"})]),Pj=new lM,Ej=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function $j(e){return(t,i)=>{let r=t.node.getChild("VariableDefinition");return r&&i(r,e),!0}}const Aj=["FunctionDeclaration"],Ij={FunctionDeclaration:$j("function"),ClassDeclaration:$j("class"),ClassExpression:()=>!0,EnumDeclaration:$j("constant"),TypeAliasDeclaration:$j("type"),NamespaceDeclaration:$j("namespace"),VariableDefinition(e,t){e.matchContext(Aj)||t(e,"variable")},TypeDefinition(e,t){t(e,"type")},__proto__:null};function Qj(e,t){let i=Pj.get(t);if(i)return i;let r=[],n=!0;function o(t,i){let n=e.sliceString(t.from,t.to);r.push({label:n,type:i})}return t.cursor(XD.IncludeAnonymous).iterate(t=>{if(n)n=!1;else if(t.name){let e=Ij[t.name];if(e&&e(t,o)||Ej.has(t.name))return!1}else if(t.to-t.from>8192){for(let i of Qj(e,t.node))r.push(i);return!1}}),Pj.set(t,r),r}const Rj=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,Dj=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName","JSXText","JSXAttributeValue","JSXOpenTag","JSXCloseTag","JSXSelfClosingTag",".","?."];function Mj(e){let t=oN(e.state).resolveInner(e.pos,-1);if(Dj.indexOf(t.name)>-1)return null;let i="VariableName"==t.name||t.to-t.from<20&&Rj.test(e.state.sliceDoc(t.from,t.to));if(!i&&!e.explicit)return null;let r=[];for(let i=t;i;i=i.parent)Ej.has(i.name)&&(r=r.concat(Qj(e.state.doc,i)));return{options:r,from:i?t.from:e.pos,validFor:Rj}}const Nj=nN.define({name:"javascript",parser:_j.configure({props:[kN.add({IfStatement:AN({except:/^\s*({|else\b)/}),TryStatement:AN({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:e=>e.baseIndent,SwitchBody:e=>{let t=e.textAfter,i=/^\s*\}/.test(t),r=/^\s*(case|default)\b/.test(t);return e.baseIndent+(i?0:r?1:2)*e.unit},Block:EN({closing:"}"}),ArrowFunction:e=>e.baseIndent+e.unit,"TemplateString BlockComment":()=>null,"Statement Property":AN({except:/^\s*{/}),JSXElement(e){let t=/^\s*<\//.test(e.textAfter);return e.lineIndent(e.node.from)+(t?0:e.unit)},JSXEscape(e){let t=/\s*\}/.test(e.textAfter);return e.lineIndent(e.node.from)+(t?0:e.unit)},"JSXOpenTag JSXSelfClosingTag":e=>e.column(e.node.from)+e.unit}),QN.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":RN,BlockComment:e=>({from:e.from+2,to:e.to-2})})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),Lj={test:e=>/^JSX/.test(e.name),facet:eN({commentTokens:{block:{open:"{/*",close:"*/}"}}})},zj=Nj.configure({dialect:"ts"},"typescript"),Vj=Nj.configure({dialect:"jsx",props:[tN.add(e=>e.isTop?[Lj]:void 0)]}),Uj=Nj.configure({dialect:"jsx ts",props:[tN.add(e=>e.isTop?[Lj]:void 0)]},"typescript");let qj=e=>({label:e,type:"keyword"});const Xj="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(qj),Zj=Xj.concat(["declare","implements","private","protected","public"].map(qj));function Bj(e={}){let t=e.jsx?e.typescript?Uj:Vj:e.typescript?zj:Nj,i=e.typescript?Cj.concat(Zj):Tj.concat(Xj);return new mN(t,[Nj.data.of({autocomplete:(r=Dj,n=uU(i),e=>{for(let t=oN(e.state).resolveInner(e.pos,-1);t;t=t.parent){if(r.indexOf(t.name)>-1)return null;if(t.type.isTop)break}return n(e)})}),Nj.data.of({autocomplete:Mj}),e.jsx?Wj:[]]);var r,n}function jj(e,t,i=e.length){for(let r=null==t?void 0:t.firstChild;r;r=r.nextSibling)if("JSXIdentifier"==r.name||"JSXBuiltin"==r.name||"JSXNamespacedName"==r.name||"JSXMemberExpression"==r.name)return e.sliceString(r.from,Math.min(r.to,i));return""}const Fj="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),Wj=XQ.inputHandler.of((e,t,i,r,n)=>{if((Fj?e.composing:e.compositionStarted)||e.state.readOnly||t!=i||">"!=r&&"/"!=r||!Nj.isActiveAt(e.state,t,-1))return!1;let o=n(),{state:s}=o,a=s.changeByRange(e=>{var t;let i,{head:n}=e,o=oN(s).resolveInner(n-1,-1);if("JSXStartTag"==o.name&&(o=o.parent),s.doc.sliceString(n-1,n)!=r||"JSXAttributeValue"==o.name&&o.to>n);else{if(">"==r&&"JSXFragmentTag"==o.name)return{range:e,changes:{from:n,insert:"</>"}};if("/"==r&&"JSXStartCloseTag"==o.name){let e=o.parent,r=e.parent;if(r&&e.from==n-2&&((i=jj(s.doc,r.firstChild,n))||"JSXFragmentTag"==(null===(t=r.firstChild)||void 0===t?void 0:t.name))){let e=`${i}>`;return{range:vP.cursor(n+e.length,-1),changes:{from:n,insert:e}}}}else if(">"==r){let t=function(e){for(;;){if("JSXOpenTag"==e.name||"JSXSelfClosingTag"==e.name||"JSXFragmentTag"==e.name)return e;if("JSXEscape"==e.name||!e.parent)return null;e=e.parent}}(o);if(t&&"JSXOpenTag"==t.name&&!/^\/?>|^<\//.test(s.doc.sliceString(n,n+2))&&(i=jj(s.doc,t,n)))return{range:e,changes:{from:n,insert:`</${i}>`}}}}return{range:e}});return!a.changes.empty&&(e.dispatch([o,s.update(a,{userEvent:"input.complete",scrollIntoView:!0})]),!0)}),Yj=["_blank","_self","_top","_parent"],Gj=["ascii","utf-8","utf-16","latin1","latin1"],Hj=["get","post","put","delete"],Kj=["application/x-www-form-urlencoded","multipart/form-data","text/plain"],Jj=["true","false"],eF={},tF={a:{attrs:{href:null,ping:null,type:null,media:null,target:Yj,hreflang:null}},abbr:eF,address:eF,area:{attrs:{alt:null,coords:null,href:null,target:null,ping:null,media:null,hreflang:null,type:null,shape:["default","rect","circle","poly"]}},article:eF,aside:eF,audio:{attrs:{src:null,mediagroup:null,crossorigin:["anonymous","use-credentials"],preload:["none","metadata","auto"],autoplay:["autoplay"],loop:["loop"],controls:["controls"]}},b:eF,base:{attrs:{href:null,target:Yj}},bdi:eF,bdo:eF,blockquote:{attrs:{cite:null}},body:eF,br:eF,button:{attrs:{form:null,formaction:null,name:null,value:null,autofocus:["autofocus"],disabled:["autofocus"],formenctype:Kj,formmethod:Hj,formnovalidate:["novalidate"],formtarget:Yj,type:["submit","reset","button"]}},canvas:{attrs:{width:null,height:null}},caption:eF,center:eF,cite:eF,code:eF,col:{attrs:{span:null}},colgroup:{attrs:{span:null}},command:{attrs:{type:["command","checkbox","radio"],label:null,icon:null,radiogroup:null,command:null,title:null,disabled:["disabled"],checked:["checked"]}},data:{attrs:{value:null}},datagrid:{attrs:{disabled:["disabled"],multiple:["multiple"]}},datalist:{attrs:{data:null}},dd:eF,del:{attrs:{cite:null,datetime:null}},details:{attrs:{open:["open"]}},dfn:eF,div:eF,dl:eF,dt:eF,em:eF,embed:{attrs:{src:null,type:null,width:null,height:null}},eventsource:{attrs:{src:null}},fieldset:{attrs:{disabled:["disabled"],form:null,name:null}},figcaption:eF,figure:eF,footer:eF,form:{attrs:{action:null,name:null,"accept-charset":Gj,autocomplete:["on","off"],enctype:Kj,method:Hj,novalidate:["novalidate"],target:Yj}},h1:eF,h2:eF,h3:eF,h4:eF,h5:eF,h6:eF,head:{children:["title","base","link","style","meta","script","noscript","command"]},header:eF,hgroup:eF,hr:eF,html:{attrs:{manifest:null}},i:eF,iframe:{attrs:{src:null,srcdoc:null,name:null,width:null,height:null,sandbox:["allow-top-navigation","allow-same-origin","allow-forms","allow-scripts"],seamless:["seamless"]}},img:{attrs:{alt:null,src:null,ismap:null,usemap:null,width:null,height:null,crossorigin:["anonymous","use-credentials"]}},input:{attrs:{alt:null,dirname:null,form:null,formaction:null,height:null,list:null,max:null,maxlength:null,min:null,name:null,pattern:null,placeholder:null,size:null,src:null,step:null,value:null,width:null,accept:["audio/*","video/*","image/*"],autocomplete:["on","off"],autofocus:["autofocus"],checked:["checked"],disabled:["disabled"],formenctype:Kj,formmethod:Hj,formnovalidate:["novalidate"],formtarget:Yj,multiple:["multiple"],readonly:["readonly"],required:["required"],type:["hidden","text","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","range","color","checkbox","radio","file","submit","image","reset","button"]}},ins:{attrs:{cite:null,datetime:null}},kbd:eF,keygen:{attrs:{challenge:null,form:null,name:null,autofocus:["autofocus"],disabled:["disabled"],keytype:["RSA"]}},label:{attrs:{for:null,form:null}},legend:eF,li:{attrs:{value:null}},link:{attrs:{href:null,type:null,hreflang:null,media:null,sizes:["all","16x16","16x16 32x32","16x16 32x32 64x64"]}},map:{attrs:{name:null}},mark:eF,menu:{attrs:{label:null,type:["list","context","toolbar"]}},meta:{attrs:{content:null,charset:Gj,name:["viewport","application-name","author","description","generator","keywords"],"http-equiv":["content-language","content-type","default-style","refresh"]}},meter:{attrs:{value:null,min:null,low:null,high:null,max:null,optimum:null}},nav:eF,noscript:eF,object:{attrs:{data:null,type:null,name:null,usemap:null,form:null,width:null,height:null,typemustmatch:["typemustmatch"]}},ol:{attrs:{reversed:["reversed"],start:null,type:["1","a","A","i","I"]},children:["li","script","template","ul","ol"]},optgroup:{attrs:{disabled:["disabled"],label:null}},option:{attrs:{disabled:["disabled"],label:null,selected:["selected"],value:null}},output:{attrs:{for:null,form:null,name:null}},p:eF,param:{attrs:{name:null,value:null}},pre:eF,progress:{attrs:{value:null,max:null}},q:{attrs:{cite:null}},rp:eF,rt:eF,ruby:eF,samp:eF,script:{attrs:{type:["text/javascript"],src:null,async:["async"],defer:["defer"],charset:Gj}},section:eF,select:{attrs:{form:null,name:null,size:null,autofocus:["autofocus"],disabled:["disabled"],multiple:["multiple"]}},slot:{attrs:{name:null}},small:eF,source:{attrs:{src:null,type:null,media:null}},span:eF,strong:eF,style:{attrs:{type:["text/css"],media:null,scoped:null}},sub:eF,summary:eF,sup:eF,table:eF,tbody:eF,td:{attrs:{colspan:null,rowspan:null,headers:null}},template:eF,textarea:{attrs:{dirname:null,form:null,maxlength:null,name:null,placeholder:null,rows:null,cols:null,autofocus:["autofocus"],disabled:["disabled"],readonly:["readonly"],required:["required"],wrap:["soft","hard"]}},tfoot:eF,th:{attrs:{colspan:null,rowspan:null,headers:null,scope:["row","col","rowgroup","colgroup"]}},thead:eF,time:{attrs:{datetime:null}},title:eF,tr:eF,track:{attrs:{src:null,label:null,default:null,kind:["subtitles","captions","descriptions","chapters","metadata"],srclang:null}},ul:{children:["li","script","template","ul","ol"]},var:eF,video:{attrs:{src:null,poster:null,width:null,height:null,crossorigin:["anonymous","use-credentials"],preload:["auto","metadata","none"],autoplay:["autoplay"],mediagroup:["movie"],muted:["muted"],controls:["controls"]}},wbr:eF},iF={accesskey:null,class:null,contenteditable:Jj,contextmenu:null,dir:["ltr","rtl","auto"],draggable:["true","false","auto"],dropzone:["copy","move","link","string:","file:"],hidden:["hidden"],id:null,inert:["inert"],itemid:null,itemprop:null,itemref:null,itemscope:["itemscope"],itemtype:null,lang:["ar","bn","de","en-GB","en-US","es","fr","hi","id","ja","pa","pt","ru","tr","zh"],spellcheck:Jj,autocorrect:Jj,autocapitalize:Jj,style:null,tabindex:null,title:null,translate:["yes","no"],rel:["stylesheet","alternate","author","bookmark","help","license","next","nofollow","noreferrer","prefetch","prev","search","tag"],role:"alert application article banner button cell checkbox complementary contentinfo dialog document feed figure form grid gridcell heading img list listbox listitem main navigation region row rowgroup search switch tab table tabpanel textbox timer".split(" "),"aria-activedescendant":null,"aria-atomic":Jj,"aria-autocomplete":["inline","list","both","none"],"aria-busy":Jj,"aria-checked":["true","false","mixed","undefined"],"aria-controls":null,"aria-describedby":null,"aria-disabled":Jj,"aria-dropeffect":null,"aria-expanded":["true","false","undefined"],"aria-flowto":null,"aria-grabbed":["true","false","undefined"],"aria-haspopup":Jj,"aria-hidden":Jj,"aria-invalid":["true","false","grammar","spelling"],"aria-label":null,"aria-labelledby":null,"aria-level":null,"aria-live":["off","polite","assertive"],"aria-multiline":Jj,"aria-multiselectable":Jj,"aria-owns":null,"aria-posinset":null,"aria-pressed":["true","false","mixed","undefined"],"aria-readonly":Jj,"aria-relevant":null,"aria-required":Jj,"aria-selected":["true","false","undefined"],"aria-setsize":null,"aria-sort":["ascending","descending","none","other"],"aria-valuemax":null,"aria-valuemin":null,"aria-valuenow":null,"aria-valuetext":null},rF="beforeunload copy cut dragstart dragover dragleave dragenter dragend drag paste focus blur change click load mousedown mouseenter mouseleave mouseup keydown keyup resize scroll unload".split(" ").map(e=>"on"+e);for(let e of rF)iF[e]=null;class nF{constructor(e,t){this.tags={...tF,...e},this.globalAttrs={...iF,...t},this.allTags=Object.keys(this.tags),this.globalAttrNames=Object.keys(this.globalAttrs)}}function oF(e,t,i=e.length){if(!t)return"";let r=t.firstChild,n=r&&r.getChild("TagName");return n?e.sliceString(n.from,Math.min(n.to,i)):""}function sF(e,t=!1){for(;e;e=e.parent)if("Element"==e.name){if(!t)return e;t=!1}return null}function aF(e,t,i){let r=i.tags[oF(e,sF(t))];return(null==r?void 0:r.children)||i.allTags}function lF(e,t){let i=[];for(let r=sF(t);r&&!r.type.isTop;r=sF(r.parent)){let n=oF(e,r);if(n&&"CloseTag"==r.lastChild.name)break;n&&i.indexOf(n)<0&&("EndTag"==t.name||t.from>=r.firstChild.to)&&i.push(n)}return i}nF.default=new nF;const cF=/^[:\-\.\w\u00b7-\uffff]*$/;function dF(e,t,i,r,n){let o=/\s*>/.test(e.sliceDoc(n,n+5))?"":">",s=sF(i,"StartTag"==i.name||"TagName"==i.name);return{from:r,to:n,options:aF(e.doc,s,t).map(e=>({label:e,type:"type"})).concat(lF(e.doc,i).map((e,t)=>({label:"/"+e,apply:"/"+e+o,type:"type",boost:99-t}))),validFor:/^\/?[:\-\.\w\u00b7-\uffff]*$/}}function hF(e,t,i,r){let n=/\s*>/.test(e.sliceDoc(r,r+5))?"":">";return{from:i,to:r,options:lF(e.doc,t).map((e,t)=>({label:e,apply:e+n,type:"type",boost:99-t})),validFor:cF}}function uF(e,t){let{state:i,pos:r}=t,n=oN(i).resolveInner(r,-1),o=n.resolve(r);for(let e,t=r;o==n&&(e=n.childBefore(t));){let i=e.lastChild;if(!i||!i.type.isError||i.from<i.to)break;o=n=e,t=i.from}return"TagName"==n.name?n.parent&&/CloseTag$/.test(n.parent.name)?hF(i,n,n.from,r):dF(i,e,n,n.from,r):"StartTag"==n.name||"IncompleteTag"==n.name?dF(i,e,n,r,r):"StartCloseTag"==n.name||"IncompleteCloseTag"==n.name?hF(i,n,r,r):"OpenTag"==n.name||"SelfClosingTag"==n.name||"AttributeName"==n.name?function(e,t,i,r,n){let o=sF(i),s=o?t.tags[oF(e.doc,o)]:null,a=s&&s.attrs?Object.keys(s.attrs):[];return{from:r,to:n,options:(s&&!1===s.globalAttrs?a:a.length?a.concat(t.globalAttrNames):t.globalAttrNames).map(e=>({label:e,type:"property"})),validFor:cF}}(i,e,n,"AttributeName"==n.name?n.from:r,r):"Is"==n.name||"AttributeValue"==n.name||"UnquotedAttributeValue"==n.name?function(e,t,i,r,n){var o;let s,a=null===(o=i.parent)||void 0===o?void 0:o.getChild("AttributeName"),l=[];if(a){let o=e.sliceDoc(a.from,a.to),c=t.globalAttrs[o];if(!c){let r=sF(i),n=r?t.tags[oF(e.doc,r)]:null;c=(null==n?void 0:n.attrs)&&n.attrs[o]}if(c){let t=e.sliceDoc(r,n).toLowerCase(),i='"',o='"';/^['"]/.test(t)?(s='"'==t[0]?/^[^"]*$/:/^[^']*$/,i="",o=e.sliceDoc(n,n+1)==t[0]?"":t[0],t=t.slice(1),r++):s=/^[^\s<>='"]*$/;for(let e of c)l.push({label:e,apply:i+e+o,type:"constant"})}}return{from:r,to:n,options:l,validFor:s}}(i,e,n,"Is"==n.name?r:n.from,r):!t.explicit||"Element"!=o.name&&"Text"!=o.name&&"Document"!=o.name?null:function(e,t,i,r){let n=[],o=0;for(let r of aF(e.doc,i,t))n.push({label:"<"+r,type:"type"});for(let t of lF(e.doc,i))n.push({label:"</"+t+">",type:"type",boost:99-o++});return{from:r,to:r,options:n,validFor:/^<\/?[:\-\.\w\u00b7-\uffff]*$/}}(i,e,n,r)}function pF(e){let{extraTags:t,extraGlobalAttributes:i}=e,r=i||t?new nF(t,i):nF.default;return e=>uF(r,e)}const fF=Nj.parser.configure({top:"SingleExpression"}),mF=[{tag:"script",attrs:e=>"text/typescript"==e.type||"ts"==e.lang,parser:zj.parser},{tag:"script",attrs:e=>"text/babel"==e.type||"text/jsx"==e.type,parser:Vj.parser},{tag:"script",attrs:e=>"text/typescript-jsx"==e.type,parser:Uj.parser},{tag:"script",attrs:e=>/^(importmap|speculationrules|application\/(.+\+)?json)$/i.test(e.type),parser:fF},{tag:"script",attrs:e=>!e.type||/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i.test(e.type),parser:Nj.parser},{tag:"style",attrs:e=>(!e.lang||"css"==e.lang)&&(!e.type||/^(text\/)?(x-)?(stylesheet|css)$/i.test(e.type)),parser:uj.parser}],gF=[{name:"style",parser:uj.parser.configure({top:"Styles"})}].concat(rF.map(e=>({name:e,parser:Nj.parser}))),vF=nN.define({name:"html",parser:AB.configure({props:[kN.add({Element(e){let t=/^(\s*)(<\/)?/.exec(e.textAfter);return e.node.to<=e.pos+t[0].length?e.continue():e.lineIndent(e.node.from)+(t[2]?0:e.unit)},"OpenTag CloseTag SelfClosingTag":e=>e.column(e.node.from)+e.unit,Document(e){if(e.pos+/\s*/.exec(e.textAfter)[0].length<e.node.to)return e.continue();let t,i=null;for(let t=e.node;;){let e=t.lastChild;if(!e||"Element"!=e.name||e.to!=t.to)break;i=t=e}return i&&(!(t=i.lastChild)||"CloseTag"!=t.name&&"SelfClosingTag"!=t.name)?e.lineIndent(i.from)+e.unit:null}}),QN.add({Element(e){let t=e.firstChild,i=e.lastChild;return t&&"OpenTag"==t.name?{from:t.to,to:"CloseTag"==i.name?i.from:e.to}:null}}),xL.add({"OpenTag CloseTag":e=>e.getChild("TagName")})]}),languageData:{commentTokens:{block:{open:"\x3c!--",close:"--\x3e"}},indentOnInput:/^\s*<\/\w+\W$/,wordChars:"-_"}}),OF=vF.configure({wrap:DB(mF,gF)});function yF(e={}){let t,i="";!1===e.matchClosingTags&&(i="noMatch"),!0===e.selfClosingTags&&(i=(i?i+" ":"")+"selfClosing"),(e.nestedLanguages&&e.nestedLanguages.length||e.nestedAttributes&&e.nestedAttributes.length)&&(t=DB((e.nestedLanguages||[]).concat(mF),(e.nestedAttributes||[]).concat(gF)));let r=t?vF.configure({wrap:t,dialect:i}):i?OF.configure({dialect:i}):OF;return new mN(r,[OF.data.of({autocomplete:pF(e)}),!1!==e.autoCloseTags?xF:[],Bj().support,new mN(uj,uj.data.of({autocomplete:hj})).support])}const bF=new Set("area base br col command embed frame hr img input keygen link meta param source track wbr menuitem".split(" ")),xF=XQ.inputHandler.of((e,t,i,r,n)=>{if(e.composing||e.state.readOnly||t!=i||">"!=r&&"/"!=r||!OF.isActiveAt(e.state,t,-1))return!1;let o=n(),{state:s}=o,a=s.changeByRange(e=>{var t,i,n;let o,a=s.doc.sliceString(e.from-1,e.to)==r,{head:l}=e,c=oN(s).resolveInner(l,-1);if(a&&">"==r&&"EndTag"==c.name){let r=c.parent;if("CloseTag"!=(null===(i=null===(t=r.parent)||void 0===t?void 0:t.lastChild)||void 0===i?void 0:i.name)&&(o=oF(s.doc,r.parent,l))&&!bF.has(o)){return{range:e,changes:{from:l,to:l+(">"===s.doc.sliceString(l,l+1)?1:0),insert:`</${o}>`}}}}else if(a&&"/"==r&&"IncompleteCloseTag"==c.name){let e=c.parent;if(c.from==l-2&&"CloseTag"!=(null===(n=e.lastChild)||void 0===n?void 0:n.name)&&(o=oF(s.doc,e,l))&&!bF.has(o)){let e=l+(">"===s.doc.sliceString(l,l+1)?1:0),t=`${o}>`;return{range:vP.cursor(l+t.length,-1),changes:{from:l,to:e,insert:t}}}}return{range:e}});return!a.changes.empty&&(e.dispatch([o,s.update(a,{userEvent:"input.complete",scrollIntoView:!0})]),!0)}),wF=eN({commentTokens:{block:{open:"\x3c!--",close:"--\x3e"}}}),kF=new MD,SF=pZ.configure({props:[QN.add(e=>!e.is("Block")||e.is("Document")||null!=_F(e)||function(e){return"OrderedList"==e.name||"BulletList"==e.name}(e)?void 0:(e,t)=>({from:t.doc.lineAt(e.from).to,to:e.to})),kF.add(_F),kN.add({Document:()=>null}),JM.add({Document:wF})]});function _F(e){let t=/^(?:ATX|Setext)Heading(\d)$/.exec(e.name);return t?+t[1]:void 0}function TF(e,t){let i=e;for(;;){let e,r=i.nextSibling;if(!r||null!=(e=_F(r.type))&&e<=t)break;i=r}return i.to}const CF=IN.of((e,t,i)=>{for(let r=oN(e).resolveInner(i,-1);r&&!(r.from<t);r=r.parent){let e=r.type.prop(kF);if(null==e)continue;let t=TF(r,e);if(t>i)return{from:i,to:t}}return null});function PF(e){return new iN(wF,e,[],"markdown")}const EF=PF(SF),$F=PF(SF.configure([IZ,DZ,RZ,MZ,{props:[QN.add({Table:(e,t)=>({from:t.doc.lineAt(e.from).to,to:e.to})})]}]));class AF{constructor(e,t,i,r,n,o,s){this.node=e,this.from=t,this.to=i,this.spaceBefore=r,this.spaceAfter=n,this.type=o,this.item=s}blank(e,t=!0){let i=this.spaceBefore+("Blockquote"==this.node.name?">":"");if(null!=e){for(;i.length<e;)i+=" ";return i}for(let e=this.to-this.from-i.length-this.spaceAfter.length;e>0;e--)i+=" ";return i+(t?this.spaceAfter:"")}marker(e,t){let i="OrderedList"==this.node.name?String(+QF(this.item,e)[2]+t):"";return this.spaceBefore+i+this.type+this.spaceAfter}}function IF(e,t){let i=[],r=[];for(let t=e;t;t=t.parent){if("FencedCode"==t.name)return r;"ListItem"!=t.name&&"Blockquote"!=t.name||i.push(t)}for(let e=i.length-1;e>=0;e--){let n,o=i[e],s=t.lineAt(o.from),a=o.from-s.from;if("Blockquote"==o.name&&(n=/^ *>( ?)/.exec(s.text.slice(a))))r.push(new AF(o,a,a+n[0].length,"",n[1],">",null));else if("ListItem"==o.name&&"OrderedList"==o.parent.name&&(n=/^( *)\d+([.)])( *)/.exec(s.text.slice(a)))){let e=n[3],t=n[0].length;e.length>=4&&(e=e.slice(0,e.length-4),t-=4),r.push(new AF(o.parent,a,a+t,n[1],e,n[2],o))}else if("ListItem"==o.name&&"BulletList"==o.parent.name&&(n=/^( *)([-+*])( {1,4}\[[ xX]\])?( +)/.exec(s.text.slice(a)))){let e=n[4],t=n[0].length;e.length>4&&(e=e.slice(0,e.length-4),t-=4);let i=n[2];n[3]&&(i+=n[3].replace(/[xX]/," ")),r.push(new AF(o.parent,a,a+t,n[1],e,i,o))}}return r}function QF(e,t){return/^(\s*)(\d+)(?=[.)])/.exec(t.sliceString(e.from,e.from+10))}function RF(e,t,i,r=0){for(let n=-1,o=e;;){if("ListItem"==o.name){let e=QF(o,t),s=+e[2];if(n>=0){if(s!=n+1)return;i.push({from:o.from+e[1].length,to:o.from+e[0].length,insert:String(n+2+r)})}n=s}let e=o.nextSibling;if(!e)break;o=e}}function DF(e,t){let i=/^[ \t]*/.exec(e)[0].length;if(!i||"\t"!=t.facet(ON))return e;let r="";for(let t=TE(e,4,i);t>0;)t>=4?(r+="\t",t-=4):(r+=" ",t--);return r+e.slice(i)}function MF(e){return"QuoteMark"==e.name||"ListMark"==e.name}function NF(e,t,i){let r="";for(let t=0,n=e.length-2;t<=n;t++)r+=e[t].blank(t<n?TE(i.text,4,e[t+1].from)-r.length:null,t<n);return DF(r,t)}const LF=[{key:"Enter",run:({state:e,dispatch:t})=>{let i=oN(e),{doc:r}=e,n=null,o=e.changeByRange(t=>{if(!t.empty||!$F.isActiveAt(e,t.from,-1)&&!$F.isActiveAt(e,t.from,1))return n={range:t};let o=t.from,s=r.lineAt(o),a=IF(i.resolveInner(o,-1),r);for(;a.length&&a[a.length-1].from>o-s.from;)a.pop();if(!a.length)return n={range:t};let l=a[a.length-1];if(l.to-l.spaceAfter.length>o-s.from)return n={range:t};let c=o>=l.to-l.spaceAfter.length&&!/\S/.test(s.text.slice(l.to));if(l.item&&c){let t=l.node.firstChild,i=l.node.getChild("ListItem","ListItem");if(t.to>=o||i&&i.to<o||s.from>0&&!/[^\s>]/.test(r.lineAt(s.from-1).text)){let e,t=a.length>1?a[a.length-2]:null,i="";t&&t.item?(e=s.from+t.from,i=t.marker(r,1)):e=s.from+(t?t.to:0);let n=[{from:e,to:o,insert:i}];return"OrderedList"==l.node.name&&RF(l.item,r,n,-2),t&&"OrderedList"==t.node.name&&RF(t.item,r,n),{range:vP.cursor(e+i.length),changes:n}}{let t=NF(a,e,s);return{range:vP.cursor(o+t.length+1),changes:{from:s.from,insert:t+e.lineBreak}}}}if("Blockquote"==l.node.name&&c&&s.from){let i=r.lineAt(s.from-1),n=/>\s*$/.exec(i.text);if(n&&n.index==l.from){let r=e.changes([{from:i.from+n.index,to:i.to},{from:s.from+l.from,to:s.to}]);return{range:t.map(r),changes:r}}}let d=[];"OrderedList"==l.node.name&&RF(l.item,r,d);let h=l.item&&l.item.from<s.from,u="";if(!h||/^[\s\d.)\-+*>]*/.exec(s.text)[0].length>=l.to)for(let e=0,t=a.length-1;e<=t;e++)u+=e!=t||h?a[e].blank(e<t?TE(s.text,4,a[e+1].from)-u.length:null):a[e].marker(r,1);let p=o;for(;p>s.from&&/\s/.test(s.text.charAt(p-s.from-1));)p--;return u=DF(u,e),function(e,t){if("OrderedList"!=e.name&&"BulletList"!=e.name)return!1;let i=e.firstChild,r=e.getChild("ListItem","ListItem");if(!r)return!1;let n=t.lineAt(i.to),o=t.lineAt(r.from),s=/^[\s>]*$/.test(n.text);return n.number+(s?0:1)<o.number}(l.node,e.doc)&&(u=NF(a,e,s)+e.lineBreak+u),d.push({from:p,to:o,insert:e.lineBreak+u}),{range:vP.cursor(p+u.length+1),changes:d}});return!n&&(t(e.update(o,{scrollIntoView:!0,userEvent:"input"})),!0)}},{key:"Backspace",run:({state:e,dispatch:t})=>{let i=oN(e),r=null,n=e.changeByRange(t=>{let n=t.from,{doc:o}=e;if(t.empty&&$F.isActiveAt(e,t.from)){let t=o.lineAt(n),r=IF(function(e,t){let i=e.resolveInner(t,-1),r=t;MF(i)&&(r=i.from,i=i.parent);for(let e;e=i.childBefore(r);)if(MF(e))r=e.from;else{if("OrderedList"!=e.name&&"BulletList"!=e.name)break;i=e.lastChild,r=i.to}return i}(i,n),o);if(r.length){let i=r[r.length-1],o=i.to-i.spaceAfter.length+(i.spaceAfter?1:0);if(n-t.from>o&&!/\S/.test(t.text.slice(o,n-t.from)))return{range:vP.cursor(t.from+o),changes:{from:t.from+o,to:n}};if(n-t.from==o&&(!i.item||t.from<=i.item.from||!/\S/.test(t.text.slice(0,i.to)))){let r=t.from+i.from;if(i.item&&i.node.from<i.item.from&&/\S/.test(t.text.slice(i.from,i.to))){let n=i.blank(TE(t.text,4,i.to)-TE(t.text,4,i.from));return r==t.from&&(n=DF(n,e)),{range:vP.cursor(r+n.length),changes:{from:r,to:t.from+i.to,insert:n}}}if(r<n)return{range:vP.cursor(r),changes:{from:r,to:n}}}}}return r={range:t}});return!r&&(t(e.update(n,{scrollIntoView:!0,userEvent:"delete"})),!0)}}],zF=yF({matchClosingTags:!1});function VF(e={}){let{codeLanguages:t,defaultCodeLanguage:i,addKeymap:r=!0,base:{parser:n}=EF,completeHTMLTags:o=!0,pasteURLAsLink:s=!0,htmlTagLanguage:a=zF}=e;if(!(n instanceof zX))throw new RangeError("Base parser provided to `markdown` should be a Markdown parser");let l,c=e.extensions?[e.extensions]:[],d=[a.support,CF];s&&d.push(BF),i instanceof mN?(d.push(i.support),l=i.language):i&&(l=i);let h=t||l?(u=t,p=l,e=>{if(e&&u){let t=null;if(e=/\S*/.exec(e)[0],t="function"==typeof u?u(e):gN.matchLanguageName(u,e,!0),t instanceof gN)return t.support?t.support.language.parser:lN.getSkippingParser(t.load());if(t)return t.parser}return p?p.parser:null}):void 0;var u,p;c.push(function(e){let{codeParser:t,htmlParser:i}=e,r=uM((e,r)=>{let n=e.type.id;if(!t||n!=aX.CodeBlock&&n!=aX.FencedCode){if(i&&(n==aX.HTMLBlock||n==aX.HTMLTag||n==aX.CommentBlock))return{parser:i,overlay:fZ(e.node,e.from,e.to)}}else{let i="";if(n==aX.FencedCode){let t=e.node.getChild(aX.CodeInfo);t&&(i=r.read(t.from,t.to))}let o=t(i);if(o)return{parser:o,overlay:e=>e.type.id==aX.CodeText}}return null});return{wrap:r}}({codeParser:h,htmlParser:a.language.parser})),r&&d.push(QP.high(HQ.of(LF)));let f=PF(n.configure(c));return o&&d.push(f.data.of({autocomplete:UF})),new mN(f,d)}function UF(e){let{state:t,pos:i}=e,r=/<[:\-\.\w\u00b7-\uffff]*$/.exec(t.sliceDoc(i-25,i));if(!r)return null;let n=oN(t).resolveInner(i,-1);for(;n&&!n.type.isTop;){if("CodeBlock"==n.name||"FencedCode"==n.name||"ProcessingInstructionBlock"==n.name||"CommentBlock"==n.name||"Link"==n.name||"Image"==n.name)return null;n=n.parent}return{from:i-r[0].length,to:i,options:XF(),validFor:/^<[:\-\.\w\u00b7-\uffff]*$/}}let qF=null;function XF(){if(qF)return qF;let e=(t=new dU(lE.create({extensions:zF}),0,!0),uF(nF.default,t));var t;return qF=e?e.options:[]}const ZF=/code|horizontalrule|html|link|comment|processing|escape|entity|image|mark|url/i,BF=XQ.domEventHandlers({paste:(e,t)=>{var i;let{main:r}=t.state.selection;if(r.empty)return!1;let n=null===(i=e.clipboardData)||void 0===i?void 0:i.getData("text/plain");if(!n||!/^(https?:\/\/|mailto:|xmpp:|www\.)/.test(n))return!1;if(/^www\./.test(n)&&(n="https://"+n),!$F.isActiveAt(t.state,r.from,1))return!1;let o=oN(t.state),s=!1;return o.iterate({from:r.from,to:r.to,enter:e=>{(e.from>r.from||ZF.test(e.name))&&(s=!0)},leave:e=>{e.to<r.to&&(s=!0)}}),!s&&(t.dispatch({changes:[{from:r.from,insert:"["},{from:r.to,insert:`](${n})`}],userEvent:"input.paste",scrollIntoView:!0}),!0)}});function jF(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var FF={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function WF(e){FF=e}var YF={exec:()=>null};function GF(e,t=""){let i="string"==typeof e?e:e.source;const r={replace:(e,t)=>{let n="string"==typeof t?t:t.source;return n=n.replace(HF.caret,"$1"),i=i.replace(e,n),r},getRegex:()=>new RegExp(i,t)};return r}var HF={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[\t ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},KF=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,JF=/(?:[*+-]|\d{1,9}[.)])/,eW=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,tW=GF(eW).replace(/bull/g,JF).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),iW=GF(eW).replace(/bull/g,JF).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),rW=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,nW=/(?!\s*\])(?:\\.|[^\[\]\\])+/,oW=GF(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",nW).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),sW=GF(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,JF).getRegex(),aW="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",lW=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,cW=GF("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$))","i").replace("comment",lW).replace("tag",aW).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),dW=GF(rW).replace("hr",KF).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",aW).getRegex(),hW={blockquote:GF(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",dW).getRegex(),code:/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,def:oW,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:KF,html:cW,lheading:tW,list:sW,newline:/^(?:[ \t]*(?:\n|$))+/,paragraph:dW,table:YF,text:/^[^\n]+/},uW=GF("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",KF).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}\t)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",aW).getRegex(),pW={...hW,lheading:iW,table:uW,paragraph:GF(rW).replace("hr",KF).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",uW).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",aW).getRegex()},fW={...hW,html:GF("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",lW).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:YF,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:GF(rW).replace("hr",KF).replace("heading"," *#{1,6} *[^\n]").replace("lheading",tW).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},mW=/^( {2,}|\\)\n(?!\s*$)/,gW=/[\p{P}\p{S}]/u,vW=/[\s\p{P}\p{S}]/u,OW=/[^\s\p{P}\p{S}]/u,yW=GF(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,vW).getRegex(),bW=/(?!~)[\p{P}\p{S}]/u,xW=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,wW=GF(xW,"u").replace(/punct/g,gW).getRegex(),kW=GF(xW,"u").replace(/punct/g,bW).getRegex(),SW="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",_W=GF(SW,"gu").replace(/notPunctSpace/g,OW).replace(/punctSpace/g,vW).replace(/punct/g,gW).getRegex(),TW=GF(SW,"gu").replace(/notPunctSpace/g,/(?:[^\s\p{P}\p{S}]|~)/u).replace(/punctSpace/g,/(?!~)[\s\p{P}\p{S}]/u).replace(/punct/g,bW).getRegex(),CW=GF("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,OW).replace(/punctSpace/g,vW).replace(/punct/g,gW).getRegex(),PW=GF(/\\(punct)/,"gu").replace(/punct/g,gW).getRegex(),EW=GF(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),$W=GF(lW).replace("(?:--\x3e|$)","--\x3e").getRegex(),AW=GF("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",$W).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),IW=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,QW=GF(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",IW).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),RW=GF(/^!?\[(label)\]\[(ref)\]/).replace("label",IW).replace("ref",nW).getRegex(),DW=GF(/^!?\[(ref)\](?:\[\])?/).replace("ref",nW).getRegex(),MW={_backpedal:YF,anyPunctuation:PW,autolink:EW,blockSkip:/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,br:mW,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:YF,emStrongLDelim:wW,emStrongRDelimAst:_W,emStrongRDelimUnd:CW,escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,link:QW,nolink:DW,punctuation:yW,reflink:RW,reflinkSearch:GF("reflink|nolink(?!\\()","g").replace("reflink",RW).replace("nolink",DW).getRegex(),tag:AW,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:YF},NW={...MW,link:GF(/^!?\[(label)\]\((.*?)\)/).replace("label",IW).getRegex(),reflink:GF(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",IW).getRegex()},LW={...MW,emStrongRDelimAst:TW,emStrongLDelim:kW,url:GF(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},zW={...LW,br:GF(mW).replace("{2,}","*").getRegex(),text:GF(LW.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},VW={normal:hW,gfm:pW,pedantic:fW},UW={normal:MW,gfm:LW,breaks:zW,pedantic:NW},qW={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},XW=e=>qW[e];function ZW(e,t){if(t){if(HF.escapeTest.test(e))return e.replace(HF.escapeReplace,XW)}else if(HF.escapeTestNoEncode.test(e))return e.replace(HF.escapeReplaceNoEncode,XW);return e}function BW(e){try{e=encodeURI(e).replace(HF.percentDecode,"%")}catch{return null}return e}function jW(e,t){const i=e.replace(HF.findPipe,(e,t,i)=>{let r=!1,n=t;for(;--n>=0&&"\\"===i[n];)r=!r;return r?"|":" |"}).split(HF.splitPipe);let r=0;if(i[0].trim()||i.shift(),i.length>0&&!i.at(-1)?.trim()&&i.pop(),t)if(i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;r<i.length;r++)i[r]=i[r].trim().replace(HF.slashPipe,"|");return i}function FW(e,t,i){const r=e.length;if(0===r)return"";let n=0;for(;n<r;){if(e.charAt(r-n-1)!==t)break;n++}return e.slice(0,r-n)}function WW(e,t,i,r,n){const o=t.href,s=t.title||null,a=e[1].replace(n.other.outputLinkReplace,"$1");r.state.inLink=!0;const l={type:"!"===e[0].charAt(0)?"image":"link",raw:i,href:o,title:s,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,l}var YW=class{options;rules;lexer;constructor(e){this.options=e||FF}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const e=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:FW(e,"\n")}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const e=t[0],i=function(e,t,i){const r=e.match(i.other.indentCodeCompensation);if(null===r)return t;const n=r[1];return t.split("\n").map(e=>{const t=e.match(i.other.beginningSpace);if(null===t)return e;const[r]=t;return r.length>=n.length?e.slice(n.length):e}).join("\n")}(e,t[3]||"",this.rules);return{type:"code",raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:i}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(this.rules.other.endingHash.test(e)){const t=FW(e,"#");this.options.pedantic?e=t.trim():t&&!this.rules.other.endingSpaceChar.test(t)||(e=t.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:FW(t[0],"\n")}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let e=FW(t[0],"\n").split("\n"),i="",r="";const n=[];for(;e.length>0;){let t=!1;const o=[];let s;for(s=0;s<e.length;s++)if(this.rules.other.blockquoteStart.test(e[s]))o.push(e[s]),t=!0;else{if(t)break;o.push(e[s])}e=e.slice(s);const a=o.join("\n"),l=a.replace(this.rules.other.blockquoteSetextReplace,"\n    $1").replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}\n${a}`:a,r=r?`${r}\n${l}`:l;const c=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(l,n,!0),this.lexer.state.top=c,0===e.length)break;const d=n.at(-1);if("code"===d?.type)break;if("blockquote"===d?.type){const t=d,o=t.raw+"\n"+e.join("\n"),s=this.blockquote(o);n[n.length-1]=s,i=i.substring(0,i.length-t.raw.length)+s.raw,r=r.substring(0,r.length-t.text.length)+s.text;break}if("list"===d?.type){const t=d,o=t.raw+"\n"+e.join("\n"),s=this.list(o);n[n.length-1]=s,i=i.substring(0,i.length-d.raw.length)+s.raw,r=r.substring(0,r.length-t.raw.length)+s.raw,e=o.substring(n.at(-1).raw.length).split("\n");continue}}return{type:"blockquote",raw:i,tokens:n,text:r}}}list(e){let t=this.rules.block.list.exec(e);if(t){let i=t[1].trim();const r=i.length>1,n={type:"list",raw:"",ordered:r,start:r?+i.slice(0,-1):"",loose:!1,items:[]};i=r?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=r?i:"[*+-]");const o=this.rules.other.listItemRegex(i);let s=!1;for(;e;){let i=!1,r="",a="";if(!(t=o.exec(e)))break;if(this.rules.block.hr.test(e))break;r=t[0],e=e.substring(r.length);let l=t[2].split("\n",1)[0].replace(this.rules.other.listReplaceTabs,e=>" ".repeat(3*e.length)),c=e.split("\n",1)[0],d=!l.trim(),h=0;if(this.options.pedantic?(h=2,a=l.trimStart()):d?h=t[1].length+1:(h=t[2].search(this.rules.other.nonSpaceChar),h=h>4?1:h,a=l.slice(h),h+=t[1].length),d&&this.rules.other.blankLine.test(c)&&(r+=c+"\n",e=e.substring(c.length+1),i=!0),!i){const t=this.rules.other.nextBulletRegex(h),i=this.rules.other.hrRegex(h),n=this.rules.other.fencesBeginRegex(h),o=this.rules.other.headingBeginRegex(h),s=this.rules.other.htmlBeginRegex(h);for(;e;){const u=e.split("\n",1)[0];let p;if(c=u,this.options.pedantic?(c=c.replace(this.rules.other.listReplaceNesting,"  "),p=c):p=c.replace(this.rules.other.tabCharGlobal,"    "),n.test(c))break;if(o.test(c))break;if(s.test(c))break;if(t.test(c))break;if(i.test(c))break;if(p.search(this.rules.other.nonSpaceChar)>=h||!c.trim())a+="\n"+p.slice(h);else{if(d)break;if(l.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4)break;if(n.test(l))break;if(o.test(l))break;if(i.test(l))break;a+="\n"+c}d||c.trim()||(d=!0),r+=u+"\n",e=e.substring(u.length+1),l=p.slice(h)}}n.loose||(s?n.loose=!0:this.rules.other.doubleBlankLine.test(r)&&(s=!0));let u,p=null;this.options.gfm&&(p=this.rules.other.listIsTask.exec(a),p&&(u="[ ] "!==p[0],a=a.replace(this.rules.other.listReplaceTask,""))),n.items.push({type:"list_item",raw:r,task:!!p,checked:u,loose:!1,text:a,tokens:[]}),n.raw+=r}const a=n.items.at(-1);if(!a)return;a.raw=a.raw.trimEnd(),a.text=a.text.trimEnd(),n.raw=n.raw.trimEnd();for(let e=0;e<n.items.length;e++)if(this.lexer.state.top=!1,n.items[e].tokens=this.lexer.blockTokens(n.items[e].text,[]),!n.loose){const t=n.items[e].tokens.filter(e=>"space"===e.type),i=t.length>0&&t.some(e=>this.rules.other.anyLine.test(e.raw));n.loose=i}if(n.loose)for(let e=0;e<n.items.length;e++)n.items[e].loose=!0;return n}}html(e){const t=this.rules.block.html.exec(e);if(t){return{type:"html",block:!0,raw:t[0],pre:"pre"===t[1]||"script"===t[1]||"style"===t[1],text:t[0]}}}def(e){const t=this.rules.block.def.exec(e);if(t){const e=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:e,raw:t[0],href:i,title:r}}}table(e){const t=this.rules.block.table.exec(e);if(!t)return;if(!this.rules.other.tableDelimiter.test(t[2]))return;const i=jW(t[1]),r=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),n=t[3]?.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split("\n"):[],o={type:"table",raw:t[0],header:[],align:[],rows:[]};if(i.length===r.length){for(const e of r)this.rules.other.tableAlignRight.test(e)?o.align.push("right"):this.rules.other.tableAlignCenter.test(e)?o.align.push("center"):this.rules.other.tableAlignLeft.test(e)?o.align.push("left"):o.align.push(null);for(let e=0;e<i.length;e++)o.header.push({text:i[e],tokens:this.lexer.inline(i[e]),header:!0,align:o.align[e]});for(const e of n)o.rows.push(jW(e,o.header.length).map((e,t)=>({text:e,tokens:this.lexer.inline(e),header:!1,align:o.align[t]})));return o}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const e="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const e=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(e)){if(!this.rules.other.endAngleBracket.test(e))return;const t=FW(e.slice(0,-1),"\\");if((e.length-t.length)%2==0)return}else{const e=function(e,t){if(-1===e.indexOf(t[1]))return-1;let i=0;for(let r=0;r<e.length;r++)if("\\"===e[r])r++;else if(e[r]===t[0])i++;else if(e[r]===t[1]&&(i--,i<0))return r;return i>0?-2:-1}(t[2],"()");if(-2===e)return;if(e>-1){const i=(0===t[0].indexOf("!")?5:4)+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,i).trim(),t[3]=""}}let i=t[2],r="";if(this.options.pedantic){const e=this.rules.other.pedanticHrefTitle.exec(i);e&&(i=e[1],r=e[3])}else r=t[3]?t[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(i=this.options.pedantic&&!this.rules.other.endAngleBracket.test(e)?i.slice(1):i.slice(1,-1)),WW(t,{href:i?i.replace(this.rules.inline.anyPunctuation,"$1"):i,title:r?r.replace(this.rules.inline.anyPunctuation,"$1"):r},t[0],this.lexer,this.rules)}}reflink(e,t){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){const e=t[(i[2]||i[1]).replace(this.rules.other.multipleSpaceGlobal," ").toLowerCase()];if(!e){const e=i[0].charAt(0);return{type:"text",raw:e,text:e}}return WW(i,e,i[0],this.lexer,this.rules)}}emStrong(e,t,i=""){let r=this.rules.inline.emStrongLDelim.exec(e);if(!r)return;if(r[3]&&i.match(this.rules.other.unicodeAlphaNumeric))return;if(!(r[1]||r[2]||"")||!i||this.rules.inline.punctuation.exec(i)){const i=[...r[0]].length-1;let n,o,s=i,a=0;const l="*"===r[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(l.lastIndex=0,t=t.slice(-1*e.length+i);null!=(r=l.exec(t));){if(n=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!n)continue;if(o=[...n].length,r[3]||r[4]){s+=o;continue}if((r[5]||r[6])&&i%3&&!((i+o)%3)){a+=o;continue}if(s-=o,s>0)continue;o=Math.min(o,o+s+a);const t=[...r[0]][0].length,l=e.slice(0,i+r.index+t+o);if(Math.min(i,o)%2){const e=l.slice(1,-1);return{type:"em",raw:l,text:e,tokens:this.lexer.inlineTokens(e)}}const c=l.slice(2,-2);return{type:"strong",raw:l,text:c,tokens:this.lexer.inlineTokens(c)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(this.rules.other.newLineCharGlobal," ");const i=this.rules.other.nonSpaceChar.test(e),r=this.rules.other.startingSpaceChar.test(e)&&this.rules.other.endingSpaceChar.test(e);return i&&r&&(e=e.substring(1,e.length-1)),{type:"codespan",raw:t[0],text:e}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let e,i;return"@"===t[2]?(e=t[1],i="mailto:"+e):(e=t[1],i=e),{type:"link",raw:t[0],text:e,href:i,tokens:[{type:"text",raw:e,text:e}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let e,i;if("@"===t[2])e=t[0],i="mailto:"+e;else{let r;do{r=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??""}while(r!==t[0]);e=t[0],i="www."===t[1]?"http://"+t[0]:t[0]}return{type:"link",raw:t[0],text:e,href:i,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){const e=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:e}}}},GW=class e{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||FF,this.options.tokenizer=this.options.tokenizer||new YW,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={other:HF,block:VW.normal,inline:UW.normal};this.options.pedantic?(t.block=VW.pedantic,t.inline=UW.pedantic):this.options.gfm&&(t.block=VW.gfm,this.options.breaks?t.inline=UW.breaks:t.inline=UW.gfm),this.tokenizer.rules=t}static get rules(){return{block:VW,inline:UW}}static lex(t,i){return new e(i).lex(t)}static lexInline(t,i){return new e(i).inlineTokens(t)}lex(e){e=e.replace(HF.carriageReturn,"\n"),this.blockTokens(e,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){const t=this.inlineQueue[e];this.inlineTokens(t.src,t.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],i=!1){for(this.options.pedantic&&(e=e.replace(HF.tabCharGlobal,"    ").replace(HF.spaceLine,""));e;){let r;if(this.options.extensions?.block?.some(i=>!!(r=i.call({lexer:this},e,t))&&(e=e.substring(r.raw.length),t.push(r),!0)))continue;if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length);const i=t.at(-1);1===r.raw.length&&void 0!==i?i.raw+="\n":t.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length);const i=t.at(-1);"paragraph"===i?.type||"text"===i?.type?(i.raw+="\n"+r.raw,i.text+="\n"+r.text,this.inlineQueue.at(-1).src=i.text):t.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length);const i=t.at(-1);"paragraph"===i?.type||"text"===i?.type?(i.raw+="\n"+r.raw,i.text+="\n"+r.raw,this.inlineQueue.at(-1).src=i.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),t.push(r);continue}let n=e;if(this.options.extensions?.startBlock){let t=1/0;const i=e.slice(1);let r;this.options.extensions.startBlock.forEach(e=>{r=e.call({lexer:this},i),"number"==typeof r&&r>=0&&(t=Math.min(t,r))}),t<1/0&&t>=0&&(n=e.substring(0,t+1))}if(this.state.top&&(r=this.tokenizer.paragraph(n))){const o=t.at(-1);i&&"paragraph"===o?.type?(o.raw+="\n"+r.raw,o.text+="\n"+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):t.push(r),i=n.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length);const i=t.at(-1);"text"===i?.type?(i.raw+="\n"+r.raw,i.text+="\n"+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=i.text):t.push(r);continue}if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let i=e,r=null;if(this.tokens.links){const e=Object.keys(this.tokens.links);if(e.length>0)for(;null!=(r=this.tokenizer.rules.inline.reflinkSearch.exec(i));)e.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(i=i.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(r=this.tokenizer.rules.inline.anyPunctuation.exec(i));)i=i.slice(0,r.index)+"++"+i.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;null!=(r=this.tokenizer.rules.inline.blockSkip.exec(i));)i=i.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let n=!1,o="";for(;e;){let r;if(n||(o=""),n=!1,this.options.extensions?.inline?.some(i=>!!(r=i.call({lexer:this},e,t))&&(e=e.substring(r.raw.length),t.push(r),!0)))continue;if(r=this.tokenizer.escape(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.tag(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.link(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(r.raw.length);const i=t.at(-1);"text"===r.type&&"text"===i?.type?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(r=this.tokenizer.emStrong(e,i,o)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.codespan(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.br(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.del(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.autolink(e)){e=e.substring(r.raw.length),t.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(e))){e=e.substring(r.raw.length),t.push(r);continue}let s=e;if(this.options.extensions?.startInline){let t=1/0;const i=e.slice(1);let r;this.options.extensions.startInline.forEach(e=>{r=e.call({lexer:this},i),"number"==typeof r&&r>=0&&(t=Math.min(t,r))}),t<1/0&&t>=0&&(s=e.substring(0,t+1))}if(r=this.tokenizer.inlineText(s)){e=e.substring(r.raw.length),"_"!==r.raw.slice(-1)&&(o=r.raw.slice(-1)),n=!0;const i=t.at(-1);"text"===i?.type?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return t}},HW=class{options;parser;constructor(e){this.options=e||FF}space(e){return""}code({text:e,lang:t,escaped:i}){const r=(t||"").match(HF.notSpaceStart)?.[0],n=e.replace(HF.endingNewline,"")+"\n";return r?'<pre><code class="language-'+ZW(r)+'">'+(i?n:ZW(n,!0))+"</code></pre>\n":"<pre><code>"+(i?n:ZW(n,!0))+"</code></pre>\n"}blockquote({tokens:e}){return`<blockquote>\n${this.parser.parse(e)}</blockquote>\n`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>\n`}hr(e){return"<hr>\n"}list(e){const t=e.ordered,i=e.start;let r="";for(let t=0;t<e.items.length;t++){const i=e.items[t];r+=this.listitem(i)}const n=t?"ol":"ul";return"<"+n+(t&&1!==i?' start="'+i+'"':"")+">\n"+r+"</"+n+">\n"}listitem(e){let t="";if(e.task){const i=this.checkbox({checked:!!e.checked});e.loose?"paragraph"===e.tokens[0]?.type?(e.tokens[0].text=i+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&"text"===e.tokens[0].tokens[0].type&&(e.tokens[0].tokens[0].text=i+" "+ZW(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:i+" ",text:i+" ",escaped:!0}):t+=i+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>\n`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>\n`}table(e){let t="",i="";for(let t=0;t<e.header.length;t++)i+=this.tablecell(e.header[t]);t+=this.tablerow({text:i});let r="";for(let t=0;t<e.rows.length;t++){const n=e.rows[t];i="";for(let e=0;e<n.length;e++)i+=this.tablecell(n[e]);r+=this.tablerow({text:i})}return r&&(r=`<tbody>${r}</tbody>`),"<table>\n<thead>\n"+t+"</thead>\n"+r+"</table>\n"}tablerow({text:e}){return`<tr>\n${e}</tr>\n`}tablecell(e){const t=this.parser.parseInline(e.tokens),i=e.header?"th":"td";return(e.align?`<${i} align="${e.align}">`:`<${i}>`)+t+`</${i}>\n`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${ZW(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:i}){const r=this.parser.parseInline(i),n=BW(e);if(null===n)return r;let o='<a href="'+(e=n)+'"';return t&&(o+=' title="'+ZW(t)+'"'),o+=">"+r+"</a>",o}image({href:e,title:t,text:i,tokens:r}){r&&(i=this.parser.parseInline(r,this.parser.textRenderer));const n=BW(e);if(null===n)return ZW(i);let o=`<img src="${e=n}" alt="${i}"`;return t&&(o+=` title="${ZW(t)}"`),o+=">",o}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:ZW(e.text)}},KW=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},JW=class e{options;renderer;textRenderer;constructor(e){this.options=e||FF,this.options.renderer=this.options.renderer||new HW,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new KW}static parse(t,i){return new e(i).parse(t)}static parseInline(t,i){return new e(i).parseInline(t)}parse(e,t=!0){let i="";for(let r=0;r<e.length;r++){const n=e[r];if(this.options.extensions?.renderers?.[n.type]){const e=n,t=this.options.extensions.renderers[e.type].call({parser:this},e);if(!1!==t||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(e.type)){i+=t||"";continue}}const o=n;switch(o.type){case"space":i+=this.renderer.space(o);continue;case"hr":i+=this.renderer.hr(o);continue;case"heading":i+=this.renderer.heading(o);continue;case"code":i+=this.renderer.code(o);continue;case"table":i+=this.renderer.table(o);continue;case"blockquote":i+=this.renderer.blockquote(o);continue;case"list":i+=this.renderer.list(o);continue;case"html":i+=this.renderer.html(o);continue;case"paragraph":i+=this.renderer.paragraph(o);continue;case"text":{let n=o,s=this.renderer.text(n);for(;r+1<e.length&&"text"===e[r+1].type;)n=e[++r],s+="\n"+this.renderer.text(n);i+=t?this.renderer.paragraph({type:"paragraph",raw:s,text:s,tokens:[{type:"text",raw:s,text:s,escaped:!0}]}):s;continue}default:{const e='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return i}parseInline(e,t=this.renderer){let i="";for(let r=0;r<e.length;r++){const n=e[r];if(this.options.extensions?.renderers?.[n.type]){const e=this.options.extensions.renderers[n.type].call({parser:this},n);if(!1!==e||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(n.type)){i+=e||"";continue}}const o=n;switch(o.type){case"escape":case"text":i+=t.text(o);break;case"html":i+=t.html(o);break;case"link":i+=t.link(o);break;case"image":i+=t.image(o);break;case"strong":i+=t.strong(o);break;case"em":i+=t.em(o);break;case"codespan":i+=t.codespan(o);break;case"br":i+=t.br(o);break;case"del":i+=t.del(o);break;default:{const e='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return i}},eY=class{options;block;constructor(e){this.options=e||FF}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?GW.lex:GW.lexInline}provideParser(){return this.block?JW.parse:JW.parseInline}},tY=new class{defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=JW;Renderer=HW;TextRenderer=KW;Lexer=GW;Tokenizer=YW;Hooks=eY;constructor(...e){this.use(...e)}walkTokens(e,t){let i=[];for(const r of e)switch(i=i.concat(t.call(this,r)),r.type){case"table":{const e=r;for(const r of e.header)i=i.concat(this.walkTokens(r.tokens,t));for(const r of e.rows)for(const e of r)i=i.concat(this.walkTokens(e.tokens,t));break}case"list":{const e=r;i=i.concat(this.walkTokens(e.items,t));break}default:{const e=r;this.defaults.extensions?.childTokens?.[e.type]?this.defaults.extensions.childTokens[e.type].forEach(r=>{const n=e[r].flat(1/0);i=i.concat(this.walkTokens(n,t))}):e.tokens&&(i=i.concat(this.walkTokens(e.tokens,t)))}}return i}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(e=>{const i={...e};if(i.async=this.defaults.async||i.async||!1,e.extensions&&(e.extensions.forEach(e=>{if(!e.name)throw new Error("extension name required");if("renderer"in e){const i=t.renderers[e.name];t.renderers[e.name]=i?function(...t){let r=e.renderer.apply(this,t);return!1===r&&(r=i.apply(this,t)),r}:e.renderer}if("tokenizer"in e){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");const i=t[e.level];i?i.unshift(e.tokenizer):t[e.level]=[e.tokenizer],e.start&&("block"===e.level?t.startBlock?t.startBlock.push(e.start):t.startBlock=[e.start]:"inline"===e.level&&(t.startInline?t.startInline.push(e.start):t.startInline=[e.start]))}"childTokens"in e&&e.childTokens&&(t.childTokens[e.name]=e.childTokens)}),i.extensions=t),e.renderer){const t=this.defaults.renderer||new HW(this.defaults);for(const i in e.renderer){if(!(i in t))throw new Error(`renderer '${i}' does not exist`);if(["options","parser"].includes(i))continue;const r=i,n=e.renderer[r],o=t[r];t[r]=(...e)=>{let i=n.apply(t,e);return!1===i&&(i=o.apply(t,e)),i||""}}i.renderer=t}if(e.tokenizer){const t=this.defaults.tokenizer||new YW(this.defaults);for(const i in e.tokenizer){if(!(i in t))throw new Error(`tokenizer '${i}' does not exist`);if(["options","rules","lexer"].includes(i))continue;const r=i,n=e.tokenizer[r],o=t[r];t[r]=(...e)=>{let i=n.apply(t,e);return!1===i&&(i=o.apply(t,e)),i}}i.tokenizer=t}if(e.hooks){const t=this.defaults.hooks||new eY;for(const i in e.hooks){if(!(i in t))throw new Error(`hook '${i}' does not exist`);if(["options","block"].includes(i))continue;const r=i,n=e.hooks[r],o=t[r];eY.passThroughHooks.has(i)?t[r]=e=>{if(this.defaults.async)return Promise.resolve(n.call(t,e)).then(e=>o.call(t,e));const i=n.call(t,e);return o.call(t,i)}:t[r]=(...e)=>{let i=n.apply(t,e);return!1===i&&(i=o.apply(t,e)),i}}i.hooks=t}if(e.walkTokens){const t=this.defaults.walkTokens,r=e.walkTokens;i.walkTokens=function(e){let i=[];return i.push(r.call(this,e)),t&&(i=i.concat(t.call(this,e))),i}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return GW.lex(e,t??this.defaults)}parser(e,t){return JW.parse(e,t??this.defaults)}parseMarkdown(e){return(t,i)=>{const r={...i},n={...this.defaults,...r},o=this.onError(!!n.silent,!!n.async);if(!0===this.defaults.async&&!1===r.async)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(null==t)return o(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof t)return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));n.hooks&&(n.hooks.options=n,n.hooks.block=e);const s=n.hooks?n.hooks.provideLexer():e?GW.lex:GW.lexInline,a=n.hooks?n.hooks.provideParser():e?JW.parse:JW.parseInline;if(n.async)return Promise.resolve(n.hooks?n.hooks.preprocess(t):t).then(e=>s(e,n)).then(e=>n.hooks?n.hooks.processAllTokens(e):e).then(e=>n.walkTokens?Promise.all(this.walkTokens(e,n.walkTokens)).then(()=>e):e).then(e=>a(e,n)).then(e=>n.hooks?n.hooks.postprocess(e):e).catch(o);try{n.hooks&&(t=n.hooks.preprocess(t));let e=s(t,n);n.hooks&&(e=n.hooks.processAllTokens(e)),n.walkTokens&&this.walkTokens(e,n.walkTokens);let i=a(e,n);return n.hooks&&(i=n.hooks.postprocess(i)),i}catch(e){return o(e)}}}onError(e,t){return i=>{if(i.message+="\nPlease report this to https://github.com/markedjs/marked.",e){const e="<p>An error occurred:</p><pre>"+ZW(i.message+"",!0)+"</pre>";return t?Promise.resolve(e):e}if(t)return Promise.reject(i);throw i}}};function iY(e,t){return tY.parse(e,t)}iY.options=iY.setOptions=function(e){return tY.setOptions(e),iY.defaults=tY.defaults,WF(iY.defaults),iY},iY.getDefaults=jF,iY.defaults=FF,iY.use=function(...e){return tY.use(...e),iY.defaults=tY.defaults,WF(iY.defaults),iY},iY.walkTokens=function(e,t){return tY.walkTokens(e,t)},iY.parseInline=tY.parseInline,iY.Parser=JW,iY.parser=JW.parse,iY.Renderer=HW,iY.TextRenderer=KW,iY.Lexer=GW,iY.lexer=GW.lex,iY.Tokenizer=YW,iY.Hooks=eY,iY.parse=iY,iY.options,iY.setOptions,iY.use,iY.walkTokens,iY.parseInline,JW.parse,GW.lex;var rY=function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let nY=class extends ve{constructor(){super(),this.listener=XQ.updateListener.of(e=>{e.docChanged&&(this.markdownContent=e.state.doc.toString(),this.isContentChanged=this.markdownContent!==this.lastCalculatedContent)}),this.editorView=null,this.markdownContent="",this.tokenCount=0,this.lastCalculatedContent="",this.isContentChanged=!1}static{this.styles=l`
    :host {
      display: block;
      font-family: 'Roboto', sans-serif;
    }

    .editor-container {
      box-shadow: 0 0 0 0.5px black;
      border-radius: 5px;
      border: solid 0.5px lightgrey;
      background-color: #f9f9f9;
      padding: 5px;
    }

    #editor {
      border: 1px solid #ccc;
      margin-bottom: 5px;
      width: 100%;
    }

    .markdown-title {
      font-size: small;
      margin-left: 2px;
    }

    #output {
      margin-top: 20px;
      padding: 24px;
      background-color: var(--md-sys-color-primary-container, #eaddff);
      border: 1px solid var(--md-sys-color-primary, #6750a4);
      border-radius: 16px;
      border-left: 4px solid var(--md-sys-color-primary, #6750a4);
      color: var(--md-sys-color-on-primary-container, #21005d);
      font-family: var(--md-sys-typescale-body-medium-font, 'Roboto', sans-serif);
      line-height: var(--md-sys-typescale-body-medium-line-height, 20px);
      box-shadow: var(--md-sys-elevation-level1, 0px 1px 2px 0px rgba(0, 0, 0, 0.3), 0px 1px 3px 1px rgba(0, 0, 0, 0.15));
    }

    #output h1, #output h2, #output h3, #output h4, #output h5, #output h6 {
      margin-top: 24px;
      margin-bottom: 16px;
      font-weight: var(--md-sys-typescale-title-medium-weight, 500);
      color: var(--md-sys-color-on-primary-container, #21005d);
    }

    #output p {
      margin-bottom: 16px;
      color: var(--md-sys-color-on-primary-container, #21005d);
    }

    #output pre {
      background-color: var(--md-sys-color-surface-container-highest, #e6e0e9);
      border: 1px solid var(--md-sys-color-outline-variant, #c7c5d0);
      border-radius: 8px;
      padding: 16px;
      overflow-x: auto;
      font-family: 'Courier New', monospace;
    }

    #output code {
      background-color: var(--md-sys-color-surface-container-high, #ece6f0);
      padding: 2px 4px;
      border-radius: 4px;
      font-family: 'Courier New', monospace;
      font-size: 0.9em;
    }

    #output blockquote {
      border-left: 4px solid var(--md-sys-color-primary, #6750a4);
      margin: 16px 0;
      padding: 8px 16px;
      background-color: var(--md-sys-color-surface-container-low, #f7f2fa);
      font-style: italic;
    }

    .token-display {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 8px;
    }

    .token-count {
      font-family: 'Courier New', monospace;
      font-weight: bold;
      font-size: 16px;
      padding: 4px 12px;
      border-radius: 8px;
      min-width: 60px;
      text-align: center;
    }

    .token-good {
      background-color: var(--md-sys-color-tertiary-container, #d8e5d8);
      color: var(--md-sys-color-on-tertiary-container, #0d3818);
      border: 1px solid var(--md-sys-color-tertiary, #5e795f);
    }

    .token-approaching {
      background-color: var(--md-sys-color-secondary-container, #e6e1ff);
      color: var(--md-sys-color-on-secondary-container, #1d1b20);
      border: 1px solid var(--md-sys-color-secondary, #9a91c4);
    }

    .token-warning {
      background-color: #ffeaa7;
      color: #d63031;
      border: 1px solid #fdcb6e;
    }

    .token-over-limit {
      background-color: #ff7675;
      color: #ffffff;
      border: 1px solid #d63031;
      animation: pulse 1.5s infinite;
    }

    .token-changed {
      background-color: #a29bfe;
      color: #ffffff;
      border: 1px solid #6c5ce7;
      animation: blink 1s infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }

    @keyframes blink {
      0%, 50% { opacity: 1; }
      51%, 100% { opacity: 0.5; }
    }

    .token-label {
      font-size: 14px;
      color: var(--md-sys-color-on-surface-variant, #49454f);
    }

    .button-container {
      display: flex;
      align-items: center;
      gap: 16px;
    }
  `}firstUpdated(){const e=this.shadowRoot?.getElementById("editor");e&&(this.editorView=new XQ({state:lE.create({doc:this.markdownContent,extensions:[oX,VF(),HQ.of(aV),XQ.updateListener.of(e=>{e.docChanged&&(this.markdownContent=e.state.doc.toString(),this.isContentChanged=this.markdownContent!==this.lastCalculatedContent,this.dispatchEvent(new CustomEvent("markdown-updated",{detail:{markdown:this.markdownContent}})),this.dispatchEvent(new CustomEvent("token-status-changed",{detail:{stale:this.isContentChanged}})))})]}),parent:e})),this.markdownContent&&this.markdownContent.trim()&&this.calculateTokenCount()}handleMarkdownBlur(){this.dispatchEvent(new CustomEvent("markdown-update",{detail:{markdown:this.markdownContent}}))}calculateTokenCount(){try{const t=this.editorView?.state.doc.toString()||"",i=this.markdownContent||"",r=t||i,n=function(e){return{content:e,metadata:{}}}(r);this.tokenCount=(e=n.content||"",Math.ceil(e.length/4)),this.lastCalculatedContent=r,this.isContentChanged=!1,this.dispatchEvent(new CustomEvent("token-calculated",{detail:{tokenCount:this.tokenCount,isContentChanged:!1}}))}catch(e){console.error("Error calculating token count:",e),this.tokenCount=0}var e}renderMarkdown(){this.calculateTokenCount();const e=this.shadowRoot?.getElementById("output");if(e){const t=this.markdownContent||"";e.innerHTML=""+iY.parse(t)}}getTokenCountStatus(){if(this.isContentChanged)return{count:"???",colorClass:"token-changed",label:"changed"};const e=this.tokenCount.toString();let t="token-good",i="tokens";return this.tokenCount>500?(t="token-over-limit",i="tokens (way over limit!)"):this.tokenCount>300?(t="token-warning",i="tokens (over 300 target)"):this.tokenCount>250&&(t="token-approaching",i="tokens (approaching 300)"),{count:e,colorClass:t,label:i}}render(){const e=this.getTokenCountStatus();return K`
      <div class="editor-container" @focusout=${this.handleMarkdownBlur}>
        <div class="markdown-title">Markdown Editor:</div>
        <div id="editor"></div>

        <div class="button-container">
          <md-filled-tonal-button @click="${this.renderMarkdown}">
            Preview & Count Tokens
          </md-filled-tonal-button>

          <div class="token-display">
            <span class="token-count ${e.colorClass}">
              ${e.count}
            </span>
            <span class="token-label">${e.label}</span>
          </div>
        </div>

        <div id="output"></div>
      </div>
    `}};rY([C({type:String})],nY.prototype,"markdownContent",void 0),rY([P()],nY.prototype,"tokenCount",void 0),rY([P()],nY.prototype,"lastCalculatedContent",void 0),rY([P()],nY.prototype,"isContentChanged",void 0),nY=rY([i("df-markdown-codemirror")],nY);var oY=function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let sY=class extends(Nn(ve)){constructor(){super(...arguments),this.buttonText="Sign in with Google",this.scopes=[],this.showIcon=!0,this.loading=!1,this.errorMessage=null}static{this.styles=l`
    :host {
      display: inline-block;
    }

    .google-signin-container {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    md-filled-button {
      --md-filled-button-container-color: #4285f4;
      --md-filled-button-label-text-color: #ffffff;
      --md-filled-button-hover-container-color: #357ae8;
      --md-filled-button-pressed-container-color: #2a66c7;
    }

    md-filled-button::part(button) {
      padding: 8px 24px;
      border-radius: 4px;
      font-family: 'Roboto', sans-serif;
      font-weight: 500;
      font-size: 14px;
      letter-spacing: 0.25px;
    }

    .google-icon {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 18px;
      height: 18px;
      margin-right: 8px;
      background: white;
      border-radius: 2px;
      padding: 2px;
    }

    .loading-container {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    md-circular-progress {
      --md-circular-progress-size: 24px;
      --md-circular-progress-active-indicator-color: #ffffff;
    }

    .error-message {
      color: var(--md-sys-color-error, #b3261e);
      font-size: 12px;
      margin-top: 8px;
    }
  `}async handleSignIn(){this.loading=!0,this.errorMessage=null;try{await uT(this.scopes),this.dispatchEvent(new CustomEvent("google-signin-success",{detail:{timestamp:Date.now()},bubbles:!0,composed:!0}))}catch(e){let t="Failed to sign in with Google";if(e&&"object"==typeof e&&"code"in e){const i=e.code;"auth/popup-blocked"===i?t="Popup blocked. Please allow popups for this site.":"auth/popup-closed-by-user"===i?t="Sign-in cancelled.":"auth/unauthorized-domain"===i&&(t="This domain is not authorized. Add it in Firebase Console.")}this.errorMessage=t,this.dispatchEvent(new CustomEvent("google-signin-error",{detail:{error:e instanceof Error?e:new Error(t),message:t},bubbles:!0,composed:!0})),console.error("Google sign-in error:",e)}finally{this.loading=!1}}render(){return K`
      <div class="google-signin-container">
        ${this.loading?K`
              <div class="loading-container">
                <md-circular-progress indeterminate></md-circular-progress>
                <span>Signing in...</span>
              </div>
            `:K`
              <md-filled-button @click=${this.handleSignIn}>
                ${this.showIcon?K`
                      <span class="google-icon" slot="icon">
                        <svg viewBox="0 0 18 18" width="18" height="18">
                          <path
                            fill="#4285F4"
                            d="M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.875 2.684-6.615z"
                          />
                          <path
                            fill="#34A853"
                            d="M9 18c2.43 0 4.467-.806 5.956-2.184l-2.908-2.258c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332C2.438 15.983 5.482 18 9 18z"
                          />
                          <path
                            fill="#FBBC05"
                            d="M3.964 10.707c-.18-.54-.282-1.117-.282-1.707s.102-1.167.282-1.707V4.961H.957C.347 6.175 0 7.55 0 9s.348 2.825.957 4.039l3.007-2.332z"
                          />
                          <path
                            fill="#EA4335"
                            d="M9 3.582c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0 5.482 0 2.438 2.017.957 4.961L3.964 7.29C4.672 5.163 6.656 3.582 9 3.582z"
                          />
                        </svg>
                      </span>
                    `:""}
                ${this.buttonText}
              </md-filled-button>
            `}
      </div>
      ${this.errorMessage?K` <div class="error-message">${this.errorMessage}</div> `:""}
    `}};oY([C({type:String,attribute:"button-text"})],sY.prototype,"buttonText",void 0),oY([C({type:Array})],sY.prototype,"scopes",void 0),oY([C({type:Boolean,attribute:"show-icon"})],sY.prototype,"showIcon",void 0),oY([P()],sY.prototype,"loading",void 0),oY([P()],sY.prototype,"errorMessage",void 0),sY=oY([i("df-google-signin")],sY);var aY=function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let lY=class extends(Nn(ve)){constructor(){super(),this.email="",this.password=""}static{this.styles=l`
    :host {
      display: block;
      font-family: var(--df-font-family, 'Roboto', sans-serif);
    }

    .surface {
      max-width: 420px;
      padding: 24px;
      border-radius: 16px;
      background: var(--md-sys-color-surface, #ffffff);
      border: 1px solid var(--md-sys-color-outline-variant, rgba(15, 23, 42, 0.12));
      box-shadow: 0 14px 32px rgba(15, 23, 42, 0.08);
    }

    h2 {
      margin: 0 0 20px;
      font-size: 1.6rem;
      font-weight: 600;
      color: var(--md-sys-color-on-surface, #0f172a);
    }

    form {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    md-circular-progress {
      display: block;
      margin: 16px auto 0;
    }

    .error {
      padding: 12px;
      border-radius: 12px;
      background: var(--md-sys-color-error-container, rgba(186, 26, 26, 0.12));
      color: var(--md-sys-color-on-error-container, #410e0b);
      font-size: 0.9rem;
    }
  `}render(){const e=lT.get(),t="loading"===e.authState,i=e.error;return K`
      <div class="surface">
        <h2>Sign In</h2>
        ${i?K`<div class="error" role="alert">${i}</div>`:ee}

        <form @submit=${this._handleSubmit}>
          <md-outlined-text-field
            type="email"
            label="Email"
            .value=${this.email}
            autocomplete="email"
            ?disabled=${t}
            required
            @input=${this._handleEmailInput}
          ></md-outlined-text-field>

          <md-outlined-text-field
            type="password"
            label="Password"
            .value=${this.password}
            autocomplete="current-password"
            ?disabled=${t}
            required
            @input=${this._handlePasswordInput}
          ></md-outlined-text-field>

          <md-filled-button type="submit" ?disabled=${t}>
            ${t?"Signing In":"Sign In"}
          </md-filled-button>

          ${t?K`<md-circular-progress indeterminate></md-circular-progress>`:ee}
        </form>
      </div>
    `}_handleEmailInput(e){this.email=e.target.value??""}_handlePasswordInput(e){this.password=e.target.value??""}async _handleSubmit(e){e.preventDefault();const t={email:this.email,password:this.password};try{await cT(t),this.dispatchEvent(new CustomEvent("df-sign-in-success",{detail:{email:this.email},bubbles:!0,composed:!0})),this.email="",this.password=""}catch(e){this.dispatchEvent(new CustomEvent("df-sign-in-error",{detail:{error:e instanceof Error?e.message:"Sign in failed"},bubbles:!0,composed:!0}))}}};aY([P()],lY.prototype,"email",void 0),aY([P()],lY.prototype,"password",void 0),lY=aY([i("df-sign-in")],lY);var cY=function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let dY=class extends(Nn(ve)){constructor(){super(),this.email="",this.password="",this.confirmPassword="",this.displayName="",this.validationError="",this.isSubmitting=!1}static{this.styles=l`
    :host {
      display: block;
      font-family: var(--df-font-family, 'Roboto', sans-serif);
    }

    .surface {
      max-width: 480px;
      padding: 28px;
      border-radius: 18px;
      background: var(--md-sys-color-surface, #ffffff);
      border: 1px solid var(--md-sys-color-outline-variant, rgba(15, 23, 42, 0.12));
      box-shadow: 0 16px 36px rgba(15, 23, 42, 0.1);
    }

    h2 {
      margin: 0;
      font-size: 1.7rem;
      font-weight: 600;
      color: var(--md-sys-color-on-surface, #0f172a);
    }

    p.description {
      margin: 12px 0 24px;
      font-size: 0.95rem;
      color: var(--md-sys-color-on-surface-variant, #4b5563);
      line-height: 1.6;
    }

    form {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .feedback {
      padding: 12px;
      border-radius: 12px;
      font-size: 0.9rem;
    }

    .feedback.error {
      background: var(--md-sys-color-error-container, rgba(186, 26, 26, 0.12));
      color: var(--md-sys-color-on-error-container, #410e0b);
    }

    md-circular-progress {
      display: block;
      margin: 16px auto 0;
    }
  `}render(){const e=lT.get().error;return K`
      <div class="surface">
        <h2>Create an account</h2>
        <p class="description">
          Provide your email address and a strong password. You can optionally add a display name now or update it later.
        </p>

        ${e?K`<div class="feedback error" role="alert">${e}</div>`:ee}
        ${this.validationError?K`<div class="feedback error" role="alert">${this.validationError}</div>`:ee}

        <form @submit=${this._handleSubmit}>
          <md-outlined-text-field
            label="Display name"
            supporting-text="Optional"
            .value=${this.displayName}
            ?disabled=${this.isSubmitting}
            @input=${this._handleDisplayNameInput}
          ></md-outlined-text-field>

          <md-divider></md-divider>

          <md-outlined-text-field
            type="email"
            label="Email"
            .value=${this.email}
            autocomplete="email"
            ?disabled=${this.isSubmitting}
            required
            @input=${this._handleEmailInput}
          ></md-outlined-text-field>

          <md-outlined-text-field
            type="password"
            label="Password"
            supporting-text="Minimum 6 characters"
            .value=${this.password}
            autocomplete="new-password"
            ?disabled=${this.isSubmitting}
            required
            minlength="6"
            @input=${this._handlePasswordInput}
          ></md-outlined-text-field>

          <md-outlined-text-field
            type="password"
            label="Confirm password"
            .value=${this.confirmPassword}
            autocomplete="new-password"
            ?disabled=${this.isSubmitting}
            required
            minlength="6"
            @input=${this._handleConfirmPasswordInput}
          ></md-outlined-text-field>

          <md-filled-button type="submit" ?disabled=${this.isSubmitting}>
            ${this.isSubmitting?"Creating account":"Sign Up"}
          </md-filled-button>

          ${this.isSubmitting?K`<md-circular-progress indeterminate></md-circular-progress>`:ee}
        </form>
      </div>
    `}_handleDisplayNameInput(e){this.displayName=e.target.value??""}_handleEmailInput(e){this.email=e.target.value??"",this._clearValidationError()}_handlePasswordInput(e){this.password=e.target.value??"",this._clearValidationError()}_handleConfirmPasswordInput(e){this.confirmPassword=e.target.value??"",this._clearValidationError()}_clearValidationError(){this.validationError=""}async _handleSubmit(e){if(e.preventDefault(),this.password!==this.confirmPassword)return void(this.validationError="Passwords do not match");const t={email:this.email,password:this.password,displayName:this.displayName||void 0};this.isSubmitting=!0;try{await dT(t),this.dispatchEvent(new CustomEvent("df-sign-up-success",{detail:{email:this.email,displayName:this.displayName},bubbles:!0,composed:!0})),this.email="",this.password="",this.confirmPassword="",this.displayName="",this.validationError=""}catch(e){this.dispatchEvent(new CustomEvent("df-sign-up-error",{detail:{error:e instanceof Error?e.message:"Sign up failed"},bubbles:!0,composed:!0}))}finally{this.isSubmitting=!1}}};cY([P()],dY.prototype,"email",void 0),cY([P()],dY.prototype,"password",void 0),cY([P()],dY.prototype,"confirmPassword",void 0),cY([P()],dY.prototype,"displayName",void 0),cY([P()],dY.prototype,"validationError",void 0),cY([P()],dY.prototype,"isSubmitting",void 0),dY=cY([i("df-sign-up")],dY);var hY=function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let uY=class extends(Nn(ve)){constructor(){super(),this.email="",this.isSubmitting=!1,this.successMessage=""}static{this.styles=l`
    :host {
      display: block;
      font-family: var(--df-font-family, 'Roboto', sans-serif);
    }

    .surface {
      max-width: 440px;
      padding: 24px;
      border-radius: 16px;
      background: var(--md-sys-color-surface, #ffffff);
      border: 1px solid var(--md-sys-color-outline-variant, rgba(15, 23, 42, 0.12));
      box-shadow: 0 12px 32px rgba(15, 23, 42, 0.09);
    }

    h2 {
      margin: 0;
      font-size: 1.6rem;
      font-weight: 600;
      color: var(--md-sys-color-on-surface, #0f172a);
    }

    p.description {
      margin: 12px 0 24px;
      font-size: 0.95rem;
      line-height: 1.6;
      color: var(--md-sys-color-on-surface-variant, #475569);
    }

    form {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    md-circular-progress {
      display: block;
      margin: 16px auto 0;
    }

    .feedback {
      padding: 12px;
      border-radius: 12px;
      font-size: 0.9rem;
    }

    .feedback.error {
      background: var(--md-sys-color-error-container, rgba(186, 26, 26, 0.12));
      color: var(--md-sys-color-on-error-container, #410e0b);
    }

    .feedback.success {
      background: var(--md-sys-color-secondary-container, rgba(63, 81, 181, 0.12));
      color: var(--md-sys-color-on-secondary-container, #1e1b4b);
    }
  `}render(){const e=lT.get().error;return K`
      <div class="surface">
        <h2>Reset Password</h2>
        <p class="description">
          Enter your email address and we'll send you a secure link to reset your password.
        </p>

        ${e?K`<div class="feedback error" role="alert">${e}</div>`:ee}
        ${this.successMessage?K`<div class="feedback success">${this.successMessage}</div>`:ee}

        <form @submit=${this._handleSubmit}>
          <md-outlined-text-field
            type="email"
            label="Email"
            .value=${this.email}
            autocomplete="email"
            ?disabled=${this.isSubmitting}
            required
            @input=${this._handleEmailInput}
          ></md-outlined-text-field>

          <md-filled-button type="submit" ?disabled=${this.isSubmitting}>
            ${this.isSubmitting?"Sending":"Send Reset Link"}
          </md-filled-button>

          ${this.isSubmitting?K`<md-circular-progress indeterminate></md-circular-progress>`:ee}
        </form>
      </div>
    `}_handleEmailInput(e){this.email=e.target.value??"",this.successMessage=""}async _handleSubmit(e){e.preventDefault(),this.isSubmitting=!0,this.successMessage="";const t={email:this.email};try{await async function(e){if(aT(),!rT)throw new Error("Auth initialization failed");J_.set(null);try{await P_(rT,e.email)}catch(e){const t=e instanceof Error?e.message:"Password reset failed";throw J_.set(t),e}}(t),this.successMessage=`Password reset email sent to ${this.email}. Check your inbox.`,this.dispatchEvent(new CustomEvent("df-password-reset-success",{detail:{email:this.email},bubbles:!0,composed:!0})),this.email=""}catch(e){this.dispatchEvent(new CustomEvent("df-password-reset-error",{detail:{error:e instanceof Error?e.message:"Password reset failed"},bubbles:!0,composed:!0}))}finally{this.isSubmitting=!1}}};hY([P()],uY.prototype,"email",void 0),hY([P()],uY.prototype,"isSubmitting",void 0),hY([P()],uY.prototype,"successMessage",void 0),uY=hY([i("df-password-reset")],uY);var pY=function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let fY=class extends(Nn(ve)){constructor(){super(),this.headless=!1,this.showHideUser=!1,this.emailPw=!1,this.bkgrd=null,this.emailPwView="sign-in",this.initError=null}connectedCallback(){super.connectedCallback();try{vC();!function(e){iT===e&&nT||(nT&&nT(),iT=e,rT=k_(e),G_("auth")&&S_(rT,{host:"127.0.0.1",port:9155}),K_.set("loading"),nT=__(e,async e=>{H_.set(e),K_.set(e?"authenticated":"unauthenticated"),eT.set(!0),J_.set(null),e?await oT(e):sT()}))}(Y_())}catch(e){console.error("DfAuthWrapper: Firebase initialization failed",e),this.initError=e.message}}static{this.styles=l`
    :host {
      display: block;
      font-family: var(--df-font-family, 'Roboto', sans-serif);
    }

    .full-screen {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      width: 100%;
      background-position: center;
      background-size: cover;
      background-repeat: no-repeat;
      background-color: var(--md-sys-color-surface, #fff);
    }

    .login-button {
      padding: 16px 32px;
      font-size: 16px;
    }

    .full-width-div {
      width: 100%;
      display: flex;
      justify-content: space-between;
      align-items: center;
      min-height: 50px;
      padding: 8px 16px;
      border-bottom: 1px solid var(--md-sys-color-outline-variant, #ccc);
      background: var(--md-sys-color-surface, #fff);
    }

    .full-width-div > div {
      text-align: center;
      flex-grow: 1;
    }

    .user-photo {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      object-fit: cover;
    }

    .user-name {
      margin: 0;
      font-size: 1.25rem;
      font-weight: 500;
      color: var(--md-sys-color-on-surface, #000);
    }

    .user-json {
      padding: 16px;
      background: var(--md-sys-color-surface-container, #f0f0f0);
      border-radius: 8px;
      margin: 16px;
      overflow-x: auto;
    }

    .user-json pre {
      margin: 0;
      font-family: 'Courier New', monospace;
      font-size: 0.875rem;
    }

    .dev-login {
      width: min(1200px, 100%);
      padding: 32px;
      border-radius: 24px;
      border: 1px solid var(--md-sys-color-outline-variant, rgba(15, 23, 42, 0.12));
      background: var(--md-sys-color-surface, #fff);
      box-shadow: 0 32px 80px rgba(15, 23, 42, 0.18);
    }

    .dev-grid {
      display: flex;
      flex-direction: column;
      gap: 24px;
    }

    @media (min-width: 1024px) {
      .dev-grid {
        flex-direction: row;
      }
    }

    .dev-card {
      flex: 1;
      border-radius: 20px;
      border: 1px solid var(--md-sys-color-outline-variant, rgba(15, 23, 42, 0.08));
      background: var(--md-sys-color-surface-container-high, #f8f9ff);
      padding: 24px;
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .google-panel {
      background: linear-gradient(145deg, rgba(59, 130, 246, 0.08), rgba(99, 102, 241, 0.08));
    }

    .google-panel h2,
    .email-pw-panel h2 {
      margin: 0;
      font-size: 1.4rem;
      color: var(--md-sys-color-on-surface, #0f172a);
    }

    .google-panel p,
    .email-pw-panel p {
      margin: 0;
      color: var(--md-sys-color-on-surface-variant, #475569);
      line-height: 1.5;
    }

    .email-pw-panel {
      background: var(--md-sys-color-surface, #fff);
    }

    .email-pw-nav {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .email-pw-tab[data-active='true'] {
      --md-filled-tonal-button-container-color: var(--md-sys-color-primary-container, #e0e7ff);
      --md-filled-tonal-button-label-text-color: var(--md-sys-color-on-primary-container, #1e3a8a);
    }

    .email-pw-content {
      margin-top: 8px;
    }

    .email-pw-note {
      font-size: 0.85rem;
      color: var(--md-sys-color-on-surface-variant, #5f6b7c);
      background: var(--md-sys-color-surface-container-low, #eef2ff);
      border-radius: 12px;
      padding: 12px;
    }

    .credential-callout {
      margin-top: 12px;
      padding: 12px;
      border-radius: 12px;
      background: var(--md-sys-color-surface-container, #f6f7fb);
      font-size: 0.9rem;
      border: 1px dashed var(--md-sys-color-outline-variant, rgba(15, 23, 42, 0.2));
    }

    .credential-callout code {
      background: rgba(15, 23, 42, 0.08);
      padding: 2px 6px;
      border-radius: 6px;
      font-size: 0.85rem;
    }

    .info-pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 12px;
      border-radius: 999px;
      font-size: 0.72rem;
      font-weight: 600;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      background: var(--md-sys-color-primary-container, rgba(59, 130, 246, 0.12));
      color: var(--md-sys-color-on-primary-container, #102a83);
    }
  `}render(){const{authUser:e,authState:t}=lT.get();return this.initError?K`
        <div class="full-screen" style="color: var(--md-sys-color-error, red); padding: 20px; text-align: center;">
          <p><strong>Authentication Error</strong></p>
          <p>${this.initError}</p>
          <p style="font-size: 0.8em">Check console for details.</p>
        </div>
      `:"loading"===t||"idle"===t?K`
        <div class="full-screen">
          <md-circular-progress indeterminate></md-circular-progress>
        </div>
      `:"authenticated"===t&&e?this.headless?K`<slot></slot>`:K`
      ${this._renderHeader(e)}
      ${this.showHideUser?this._renderUserJson(e):ee}
      <slot></slot>
    `:this._renderLoginScreen()}_renderLoginScreen(){return this.emailPw?K`
      <div class="full-screen" style=${Nt(this._loginBackgroundStyles())}>
        <div class="dev-login" aria-live="polite">
          <div class="dev-grid">
            <section class="dev-card google-panel">
              <h2>Google Sign-In (Production)</h2>
              <p>
                Use this flow when testing against a production Firebase project. The popup requires
                real OAuth credentials and will not work with the Auth Emulator.
              </p>
              <md-filled-button
                class="login-button"
                @click=${this._handleLoginClick}
              >
                Sign in with Google
              </md-filled-button>
              <p class="email-pw-note">
                Need Auth emulator triggers instead? Use the developer email/password panel to create
                throwaway accounts. This UI is intentionally hidden unless 
                <code>emailPw</code> is enabled.
              </p>
            </section>
            ${this._renderEmailPwPanel()}
          </div>
        </div>
      </div>
    `:K`
        <div class="full-screen" style=${Nt(this._loginBackgroundStyles())}>
          <md-filled-button
            class="login-button"
            @click=${this._handleLoginClick}
          >
            Sign in with Google
          </md-filled-button>
        </div>
      `}_renderEmailPwPanel(){return K`
      <section class="dev-card email-pw-panel" aria-labelledby="emailPwHeading">
        <div>
          <p class="info-pill">Developer Workflow</p>
          <h2 id="emailPwHeading">Email/Password (Emulator Only)</h2>
          <p>
            Copy-only UI for writing Firebase Functions that react to 
            <code>functions.auth.user()</code> events. Never expose this panel to real users.
          </p>
          <div class="credential-callout">
            <strong>Seeded credentials</strong>
            <div>Email: <code>alice.anderson@example.com</code></div>
            <div>Password: <code>password123</code></div>
          </div>
        </div>
        <div class="email-pw-nav" role="tablist" aria-label="Email/password auth flows">
          ${this._renderEmailPwTab("sign-in","Sign In","Use emulator accounts")}
          ${this._renderEmailPwTab("sign-up","Create User","Trigger auth.onCreate")}
          ${this._renderEmailPwTab("reset","Reset Password","Send emulator reset email")}
        </div>
        <div class="email-pw-content">
          ${this._renderEmailPwView()}
        </div>
      </section>
    `}_renderEmailPwTab(e,t,i){const r=this.emailPwView===e;return K`
      <md-filled-tonal-button
        class="email-pw-tab"
        data-active=${r}
        aria-pressed=${r}
        title=${i}
        @click=${()=>this._setEmailPwView(e)}
      >
        ${t}
      </md-filled-tonal-button>
    `}_renderEmailPwView(){switch(this.emailPwView){case"sign-up":return K`
          <df-sign-up @df-sign-up-success=${this._handleEmailPwSuccess}></df-sign-up>
        `;case"reset":return K`
          <df-password-reset
            @df-password-reset-success=${this._handleEmailPwSuccess}
          ></df-password-reset>
        `;default:return K`
          <df-sign-in @df-sign-in-success=${this._handleEmailPwSuccess}></df-sign-in>
        `}}_setEmailPwView(e){this.emailPwView=e}_handleEmailPwSuccess(){this.emailPwView="sign-in"}_renderHeader(e){return K`
      <div class="full-width-div">
        ${e.photoURL?K`<img class="user-photo" src="${e.photoURL}" alt="User photo" />`:ee}
        <h2 class="user-name">${e.displayName||"User"}</h2>
        <md-text-button
          @click=${this._handleLogoutClick}
          aria-label="Sign out"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="60"
            height="12"
            viewBox="0 0 60 12"
          >
            <text
              x="3"
              y="10"
              style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:extra-condensed;font-size:12.7px;font-family:'Arial';stroke-width:0"
              fill="black"
            >
              LOGOUT
            </text>
          </svg>
        </md-text-button>
      </div>
    `}_renderUserJson(e){return K`
      <div class="user-json">
        <pre>${JSON.stringify(e,null,2)}</pre>
      </div>
    `}async _handleLoginClick(){try{await uT();const{authUser:e}=lT.get();this._dispatchUserChanged(e)}catch(e){console.error("Login failed:",e),alert(e instanceof Error?e.message:"Login failed")}}async _handleLogoutClick(e){if(e.altKey)this.showHideUser=!this.showHideUser;else try{await hT(),this._dispatchUserChanged(null)}catch(e){console.error("Logout failed:",e),alert(e instanceof Error?e.message:"Logout failed")}}_dispatchUserChanged(e){this.dispatchEvent(new CustomEvent("df-auth-wrapper-user-changed",{detail:{newValue:e},bubbles:!0,composed:!0}))}_loginBackgroundStyles(){return this.bkgrd?{backgroundImage:`url(${this.bkgrd})`}:{}}};pY([C({type:Boolean})],fY.prototype,"headless",void 0),pY([C({type:Boolean})],fY.prototype,"showHideUser",void 0),pY([C({type:Boolean})],fY.prototype,"emailPw",void 0),pY([C({type:String,attribute:"bkgrd"})],fY.prototype,"bkgrd",void 0),pY([P()],fY.prototype,"emailPwView",void 0),pY([P()],fY.prototype,"initError",void 0),fY=pY([i("df-auth-wrapper")],fY);var mY=function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let gY=class extends ve{constructor(){super(...arguments),this.defaultConfig=B_()}get resolvedEnvironment(){return this.environment&&this.environment in Z_?this.environment:this.defaultConfig.firestore||this.defaultConfig.storage||this.defaultConfig.functions?"fb-emulator":"fb-cloud"}get resolvedConfig(){const e=this.resolvedEnvironment;return e===this.environment?Z_[e]:this.defaultConfig}static{this.styles=l`
    :host {
      display: block;
      position: sticky;
      top: 0;
      z-index: 1000;
      font-family: var(--md-ref-typeface-plain, 'Roboto', 'Helvetica Neue', sans-serif);
    }

    .banner {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 0.85rem 1.2rem;
      border-left: 6px solid transparent;
      border-radius: 0 0 0.75rem 0.75rem;
      font-size: 0.95rem;
      line-height: 1.35;
      box-shadow: 0 4px 12px rgba(15, 23, 42, 0.18);
    }

    .mode {
      display: flex;
      flex-direction: column;
      gap: 0.1rem;
    }

    .label {
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.04em;
    }

    .description {
      margin: 0;
      color: rgba(0, 0, 0, 0.8);
      font-size: 0.9rem;
    }

    .banner.emulator {
      background: var(--df-env-banner-emulator-bg, #fff8e1);
      border-left-color: var(--df-env-banner-emulator-border, #f7b500);
      color: var(--df-env-banner-emulator-text, #4a3b00);
    }

    .banner.cloud {
      background: var(--df-env-banner-cloud-bg, #ffe5e5);
      border-left-color: var(--df-env-banner-cloud-border, #d32f2f);
      color: var(--df-env-banner-cloud-text, #5d0c0c);
    }

    .pill {
      padding: 0.15rem 0.5rem;
      border-radius: 999px;
      font-size: 0.8rem;
      font-weight: 600;
      letter-spacing: 0.05em;
    }

    .emulator .pill {
      background: rgba(255, 193, 7, 0.2);
      color: inherit;
    }

    .cloud .pill {
      background: rgba(244, 67, 54, 0.2);
      color: inherit;
    }
  `}render(){const e=this.resolvedEnvironment,t=this.resolvedConfig;return K`
      <section class="banner ${"fb-emulator"===e?"emulator":"cloud"}" role="status" aria-live="polite">
        <div class="pill">${e}</div>
        <div class="mode">
          <span class="label">${t.label}</span>
          <p class="description">${t.description}</p>
        </div>
      </section>
    `}};mY([C({type:String})],gY.prototype,"environment",void 0),gY=mY([i("df-environment-banner")],gY);var vY=function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let OY=class extends(Nn(ve)){constructor(){super(),this.isSeeding=!1}get shouldRender(){if("undefined"==typeof window)return!1;const e=window.location.hostname,t="localhost"===e||"127.0.0.1"===e||"::1"===e;return t||console.debug(`[df-seed-data] Not rendering on host: ${e}`),t}static{this.styles=l`
    :host {
      display: block;
    }

    .seed-panel {
      padding: 16px;
      border-radius: 12px;
      background: var(--md-sys-color-inverse-surface, #313033);
      color: var(--md-sys-color-inverse-on-surface, #f4eff4);
      border: 1px solid var(--md-sys-color-outline-variant, rgba(0, 0, 0, 0.12));
      margin-bottom: 16px;
    }

    .seed-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 12px;
      font-weight: 600;
      font-size: 0.95rem;
    }

    .seed-badge {
      background: var(--md-sys-color-primary, #6750a4);
      color: white;
      padding: 4px 12px;
      border-radius: 999px;
      font-size: 0.75rem;
      font-weight: 600;
      letter-spacing: 0.05em;
    }

    .seed-description {
      font-size: 0.9rem;
      margin-bottom: 12px;
      line-height: 1.5;
      opacity: 0.9;
    }

    .seed-controls {
      display: flex;
      gap: 12px;
      align-items: center;
      flex-wrap: wrap;
    }

    .seed-progress {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-top: 12px;
    }

    .progress-bar {
      flex: 1;
      height: 6px;
      border-radius: 3px;
      background: rgba(255, 255, 255, 0.2);
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background: var(--md-sys-color-primary, #6750a4);
      transition: width 0.3s ease;
    }

    .progress-text {
      font-size: 0.85rem;
      min-width: 40px;
      text-align: right;
    }

    .seed-status {
      font-size: 0.9rem;
      margin-top: 12px;
      padding: 8px 12px;
      border-radius: 8px;
      background: rgba(255, 255, 255, 0.1);
    }

    .seed-status.error {
      background: rgba(255, 82, 82, 0.2);
      color: #ff5252;
    }

    .seed-status.success {
      background: rgba(76, 175, 80, 0.2);
      color: #4caf50;
    }

    md-circular-progress {
      --md-circular-progress-size: 20px;
    }
  `}render(){if(!this.shouldRender)return ee;const e=pC.state.get(),t="loading"===e.status;return K`
      <div class="seed-panel">
        <div class="seed-header">
          <span class="seed-badge">DEV ONLY</span>
          <span>Firestore Seed Data</span>
        </div>

        <p class="seed-description">
          Populate Firestore with reference data (flowers, continents, elements, instruments, todos).
          This is a development-only tool.
        </p>

        <div class="seed-controls">
          <md-filled-button
            ?disabled=${t}
            @click=${this._handleSeed}
          >
            ${t?"Seeding...":"Seed Firestore"}
          </md-filled-button>
        </div>

        ${"loading"===e.status?K`
          <div class="seed-progress">
            <div class="progress-bar">
              <div class="progress-fill" style="width: ${e.progress}%"></div>
            </div>
            <div class="progress-text">${e.progress}%</div>
          </div>
          <div class="seed-status">
            ${e.currentStep}
          </div>
        `:ee}

        ${"ready"===e.status&&e.isComplete?K`
          <div class="seed-status success">
             ${e.currentStep}
          </div>
        `:ee}

        ${"error"===e.status?K`
          <div class="seed-status error">
             Error: ${e.error}
          </div>
        `:ee}
      </div>
    `}async _handleSeed(){this.isSeeding=!0;try{await pC.seedFirestoreCollections()}finally{this.isSeeding=!1}}};vY([P()],OY.prototype,"isSeeding",void 0),OY=vY([i("df-seed-data")],OY);var yY=function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let bY=class extends(Nn(ve)){constructor(){super(),this.variant="button"}static{this.styles=l`
    :host {
      display: inline-flex;
      font-family: var(--df-font-family, 'Roboto', sans-serif);
    }
  `}render(){const e=lT.get(),t="authenticated"===e.authState,i="loading"===e.authState;if(!t&&!i)return ee;const r=i?"Signing Out":"Sign Out";return"link"===this.variant?K`
        <md-text-button @click=${this._handleClick} ?disabled=${i}>
          ${r}
        </md-text-button>
      `:K`
      <md-filled-button @click=${this._handleClick} ?disabled=${i}>
        ${r}
      </md-filled-button>
    `}async _handleClick(){try{await hT(),this.dispatchEvent(new CustomEvent("df-sign-out-success",{bubbles:!0,composed:!0}))}catch(e){this.dispatchEvent(new CustomEvent("df-sign-out-error",{detail:{error:e instanceof Error?e.message:"Sign out failed"},bubbles:!0,composed:!0}))}}};yY([C({type:String})],bY.prototype,"variant",void 0),bY=yY([i("df-sign-out")],bY);var xY=function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let wY=class extends(Nn(ve)){constructor(){super(),this.compact=!1}static{this.styles=l`
    :host {
      display: block;
      font-family: var(--df-font-family, system-ui, sans-serif);
    }

    .profile-container {
      display: flex;
      align-items: center;
      gap: var(--df-spacing-3, 1rem);
      padding: var(--df-spacing-3, 1rem);
      border: 1px solid var(--df-border-color, #e0e0e0);
      border-radius: var(--df-border-radius, 8px);
      background: var(--df-surface-color, #fff);
    }

    .profile-container.compact {
      padding: var(--df-spacing-2, 0.5rem);
      border: none;
    }

    .avatar {
      width: var(--df-avatar-size, 48px);
      height: var(--df-avatar-size, 48px);
      border-radius: 50%;
      background: var(--df-avatar-bg, #e0e0e0);
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }

    .avatar.compact {
      width: var(--df-avatar-size-compact, 32px);
      height: var(--df-avatar-size-compact, 32px);
    }

    .avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .avatar-fallback {
      font-size: var(--df-avatar-fallback-size, 1.5rem);
      font-weight: var(--df-avatar-fallback-weight, 600);
      color: var(--df-avatar-fallback-color, #666);
    }

    .avatar-fallback.compact {
      font-size: var(--df-avatar-fallback-size-compact, 1rem);
    }

    .profile-info {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: var(--df-spacing-1, 0.25rem);
    }

    .display-name {
      font-size: var(--df-display-name-size, 1rem);
      font-weight: var(--df-display-name-weight, 600);
      color: var(--df-text-primary, #000);
    }

    .email {
      font-size: var(--df-email-size, 0.875rem);
      color: var(--df-text-secondary, #666);
    }

    .badge {
      display: inline-block;
      padding: var(--df-badge-padding, 0.125rem 0.5rem);
      border-radius: var(--df-badge-radius, 12px);
      background: var(--df-badge-bg, #e3f2fd);
      color: var(--df-badge-color, #1976d2);
      font-size: var(--df-badge-size, 0.75rem);
      font-weight: var(--df-badge-weight, 500);
    }

    .not-authenticated {
      padding: var(--df-spacing-3, 1rem);
      text-align: center;
      color: var(--df-text-secondary, #666);
      font-size: var(--df-not-auth-size, 0.875rem);
    }
  `}render(){const e=lT.get(),t=e.authUser;if(!("authenticated"===e.authState)||!t)return K`<div class="not-authenticated">Not signed in</div>`;const i=t.displayName||"Anonymous",r=t.email||"",n=t.photoURL,o=t.emailVerified,s=i.charAt(0).toUpperCase(),a=this.compact?"profile-container compact":"profile-container",l=this.compact?"avatar compact":"avatar",c=this.compact?"avatar-fallback compact":"avatar-fallback";return K`
      <div class=${a}>
        <div class=${l}>
          ${n?K`<img src=${n} alt=${i} />`:K`<span class=${c}>${s}</span>`}
        </div>

        ${this.compact?K`
          <div class="profile-info">
            <div class="display-name">${i}</div>
          </div>
        `:K`
          <div class="profile-info">
            <div class="display-name">
              ${i}
              ${o?K`<span class="badge">Verified</span>`:""}
            </div>
            <div class="email">${r}</div>
          </div>
        `}
      </div>
    `}};xY([C({type:Boolean})],wY.prototype,"compact",void 0),wY=xY([i("df-user-profile")],wY);var kY=function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let SY=class extends ve{static{this.styles=l`
    :host {
      display: block;
      border: 1px solid var(--df-border-color, rgba(15, 23, 42, 0.12));
      border-radius: 12px;
      padding: var(--df-spacing-4, 1.25rem);
      background: var(--df-surface-color, #fff);
      box-shadow: var(--df-shadow-md, 0 10px 30px rgba(15, 23, 42, 0.08));
    }

    header {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 1rem;
    }

    h3 {
      margin: 0;
      font-size: 1.125rem;
      color: var(--df-text-primary, #0f172a);
    }

    .meta {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin: 0.75rem 0;
      color: var(--df-text-secondary, #475569);
      font-size: 0.9rem;
    }

    .tag {
      padding: 0.25rem 0.6rem;
      border-radius: 999px;
      background: rgba(99, 102, 241, 0.12);
      color: #4338ca;
      font-size: 0.75rem;
      font-weight: 600;
    }

    .priority[data-priority='high'] {
      color: #b91c1c;
    }

    .priority[data-priority='medium'] {
      color: #b45309;
    }

    .priority[data-priority='low'] {
      color: #0f766e;
    }

    .body {
      margin: 0;
      color: var(--df-text-secondary, #475569);
      line-height: 1.55;
    }

    footer {
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
      margin-top: 1rem;
      align-items: center;
    }

    /* MD3 buttons handle their own styling */

    .status-pill {
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      padding: 0.35rem 0.75rem;
      border-radius: 999px;
      background: rgba(16, 185, 129, 0.14);
      color: #047857;
      font-size: 0.78rem;
      font-weight: 600;
    }

    .status-pill[data-state='completed'] {
      background: rgba(16, 185, 129, 0.14);
      color: #047857;
    }

    .status-pill[data-state='active'] {
      background: rgba(59, 130, 246, 0.14);
      color: #1d4ed8;
    }

    .status-pill[data-state='overdue'] {
      background: rgba(185, 28, 28, 0.14);
      color: #b91c1c;
    }
  `}constructor(){super(),this.todo=null,this.actions=!0}render(){if(!this.todo)return K`<p>Todo data unavailable.</p>`;const e=this.getDueState();return K`
      <header>
        <div>
          <h3>${this.todo.title}</h3>
          <div class="meta">
            <span class="priority" data-priority=${this.todo.priority}>Priority: ${this.todo.priority}</span>
            ${this.todo.dueDate?K`<span class="status-pill" data-state=${e}>Due ${this.formatDate(this.todo.dueDate)}</span>`:K``}
            <span>Created ${this.formatDate(this.todo.createdAt)}</span>
            ${this.todo.updatedAt?K`<span>Updated ${this.formatDate(this.todo.updatedAt)}</span>`:K``}
          </div>
        </div>
        <span class="status-pill" data-state=${this.todo.completed?"completed":"active"}>
          ${this.todo.completed?"Completed":"In progress"}
        </span>
      </header>

      <p class="body">${this.todo.description}</p>

      ${this.todo.tags.length?K`<div class="meta">${this.todo.tags.map(e=>K`<span class="tag">${e}</span>`)}</div>`:K``}

      ${this.actions?K`
            <footer>
              <md-outlined-button @click=${this.handleToggle}>
                ${this.todo.completed?"Mark incomplete":"Mark complete"}
              </md-outlined-button>
              <md-outlined-button @click=${this.handleEdit}>Edit</md-outlined-button>
              <md-outlined-button @click=${this.handleDelete}>Delete</md-outlined-button>
            </footer>
          `:K``}
    `}handleToggle(){this.todo&&this.dispatchEvent(new CustomEvent("df-firestore-item-toggle",{detail:{id:this.todo.id,completed:!this.todo.completed},bubbles:!0,composed:!0}))}handleEdit(){this.todo&&this.dispatchEvent(new CustomEvent("df-firestore-item-edit",{detail:this.todo,bubbles:!0,composed:!0}))}handleDelete(){this.todo&&this.dispatchEvent(new CustomEvent("df-firestore-item-delete",{detail:{id:this.todo.id,title:this.todo.title},bubbles:!0,composed:!0}))}formatDate(e){return e?new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(e):"N/A"}getDueState(){return this.todo?this.todo.completed?"completed":this.todo.dueDate&&this.todo.dueDate.getTime()<Date.now()?"overdue":"active":"active"}};kY([C({attribute:!1})],SY.prototype,"todo",void 0),kY([C({type:Boolean})],SY.prototype,"actions",void 0),SY=kY([i("df-firestore-item")],SY);var _Y=function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let TY=class extends ve{static{this.styles=l`
    :host {
      display: block;
      padding: var(--df-spacing-5, 1.5rem);
      background: var(--md-sys-color-surface, #fff);
      border-radius: 16px;
      border: 1px solid var(--md-sys-color-outline-variant, rgba(15, 23, 42, 0.1));
      box-shadow: 0 15px 45px rgba(15, 23, 42, 0.12);
      max-width: 520px;
    }

    h2 {
      margin: 0 0 1.5rem;
      font-size: 1.4rem;
      color: var(--md-sys-color-on-surface, #0f172a);
    }

    form {
      display: flex;
      flex-direction: column;
      gap: 1.25rem;
    }

    .form-field {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    md-outlined-text-field {
      width: 100%;
    }

    md-filled-select {
      width: 100%;
    }

    .actions {
      display: flex;
      justify-content: flex-end;
      gap: 0.75rem;
      margin-top: 0.5rem;
    }

    .error {
      padding: 0.75rem 1rem;
      border-radius: 12px;
      background: var(--md-sys-color-error-container, rgba(220, 38, 38, 0.14));
      color: var(--md-sys-color-on-error-container, #b91c1c);
      font-size: 0.9rem;
      margin-bottom: 1rem;
    }
  `}constructor(){super(),this._title="",this._description="",this._priority="medium",this._tagsInput="",this._dueDateValue="",this._error=null,this.mode="create",this.todo=null}updated(e){e.has("todo")&&this.syncFromTodo(),e.has("mode")&&"create"===this.mode&&"create"!==e.get("mode")&&this.reset()}firstUpdated(){this.syncFromTodo()}render(){return K`
      <h2>${"create"===this.mode?"Create todo":"Edit todo"}</h2>
      ${this._error?K`<div class="error">${this._error}</div>`:ee}
      <form @submit=${this.handleSubmit}>
        <md-outlined-text-field
          label="Title"
          required
          name="title"
          .value=${this._title}
          @input=${e=>this._title=e.target.value}
          supporting-text="Describe the task succinctly">
        </md-outlined-text-field>

        <md-outlined-text-field
          label="Description"
          type="textarea"
          rows="4"
          required
          name="description"
          .value=${this._description}
          @input=${e=>this._description=e.target.value}
          supporting-text="Explain the purpose or teaching prompt">
        </md-outlined-text-field>

        <md-filled-select
          label="Priority"
          name="priority"
          .value=${this._priority}
          @change=${e=>this._priority=e.target.value}>
          <md-select-option value="low">
            <div slot="headline">Low</div>
          </md-select-option>
          <md-select-option value="medium" selected>
            <div slot="headline">Medium</div>
          </md-select-option>
          <md-select-option value="high">
            <div slot="headline">High</div>
          </md-select-option>
        </md-filled-select>

        <md-outlined-text-field
          label="Tags"
          name="tags"
          .value=${this._tagsInput}
          @input=${e=>this._tagsInput=e.target.value}
          supporting-text="Comma separated, e.g. teaching, realtime">
        </md-outlined-text-field>

        <md-outlined-text-field
          label="Due date"
          type="date"
          name="due"
          .value=${this._dueDateValue}
          @input=${e=>this._dueDateValue=e.target.value}
          supporting-text="Optional">
        </md-outlined-text-field>

        <div class="actions">
          <md-outlined-button type="button" @click=${this.handleCancel}>
            Cancel
          </md-outlined-button>
          <md-filled-button type="submit">
            ${"create"===this.mode?"Create todo":"Save changes"}
          </md-filled-button>
        </div>
      </form>
    `}handleSubmit(e){if(e.preventDefault(),this._error=null,!this._title.trim())return void(this._error="Title is required.");if(!this._description.trim())return void(this._error="Description is required.");const t=this._tagsInput.split(",").map(e=>e.trim()).filter(Boolean),i={mode:this.mode,todoId:this.todo?.id,draft:{title:this._title.trim(),description:this._description.trim(),priority:this._priority,tags:t,dueDate:this._dueDateValue?new Date(this._dueDateValue):null}};this.dispatchEvent(new CustomEvent("df-firestore-form-submit",{bubbles:!0,composed:!0,detail:i})),"create"===this.mode&&this.reset()}handleCancel(){this.dispatchEvent(new CustomEvent("df-firestore-form-cancel",{bubbles:!0,composed:!0})),"create"===this.mode&&this.reset()}reset(){this._title="",this._description="",this._priority="medium",this._tagsInput="",this._dueDateValue="",this._error=null}syncFromTodo(){this.todo&&"edit"===this.mode&&(this._title=this.todo.title,this._description=this.todo.description,this._priority=this.todo.priority,this._tagsInput=this.todo.tags.join(", "),this._dueDateValue=this.todo.dueDate?this.formatDateInput(this.todo.dueDate):"")}formatDateInput(e){return`${e.getFullYear()}-${`${e.getMonth()+1}`.padStart(2,"0")}-${`${e.getDate()}`.padStart(2,"0")}`}};_Y([C({type:String})],TY.prototype,"mode",void 0),_Y([C({attribute:!1})],TY.prototype,"todo",void 0),_Y([P()],TY.prototype,"_title",void 0),_Y([P()],TY.prototype,"_description",void 0),_Y([P()],TY.prototype,"_priority",void 0),_Y([P()],TY.prototype,"_tagsInput",void 0),_Y([P()],TY.prototype,"_dueDateValue",void 0),_Y([P()],TY.prototype,"_error",void 0),TY=_Y([i("df-firestore-form")],TY);var CY=function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let PY=class extends ve{static{this.styles=l`
    :host {
      display: block;
      background: var(--md-sys-color-surface, #fff);
      border-radius: 16px;
      border: 1px solid var(--md-sys-color-error, rgba(185, 28, 28, 0.3));
      padding: 1.25rem;
      max-width: 420px;
      box-shadow: 0 16px 40px rgba(185, 28, 28, 0.15);
    }

    h3 {
      margin: 0 0 0.6rem;
      color: var(--md-sys-color-error, #991b1b);
    }

    p {
      margin: 0 0 1rem;
      color: var(--md-sys-color-on-surface-variant, #475569);
      line-height: 1.5;
    }

    footer {
      display: flex;
      justify-content: flex-end;
      gap: 0.75rem;
    }

    /* MD3 buttons handle their own styling */
  `}constructor(){super(),this.todoId="",this.todoTitle=""}render(){return K`
      <h3>Delete todo</h3>
      <p>
        Are you sure you want to delete <strong>${this.todoTitle||"this todo"}</strong>? This action cannot be
        undone.
      </p>
      <footer>
        <md-outlined-button @click=${this.handleCancel}>Cancel</md-outlined-button>
        <md-filled-button @click=${this.handleConfirm}>Delete</md-filled-button>
      </footer>
    `}handleConfirm(){this.dispatchEvent(new CustomEvent("df-firestore-delete-confirm",{detail:{id:this.todoId},bubbles:!0,composed:!0}))}handleCancel(){this.dispatchEvent(new CustomEvent("df-firestore-delete-cancel",{bubbles:!0,composed:!0}))}};CY([C({type:String})],PY.prototype,"todoId",void 0),CY([C({type:String})],PY.prototype,"todoTitle",void 0),PY=CY([i("df-firestore-delete")],PY);var EY=function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let $Y=class extends(Nn(ve)){constructor(){super(...arguments),this.searchTerm="",this.isFormOpen=!1,this.formMode="create",this.editingTodo=null,this.deleteTarget=null,this.realtimeEnabled=!1,this.isOnline="undefined"==typeof navigator||navigator.onLine,this.localError=null,this.isLoadingMore=!1,this.onlineListener=()=>this.isOnline=!0,this.offlineListener=()=>this.isOnline=!1}static{this.styles=l`
    :host {
      display: block;
      width: 100%;
      box-sizing: border-box;
      border-radius: 24px;
      padding: 2rem;
      background: var(--md-sys-color-surface-container-low, linear-gradient(160deg, rgba(241, 245, 249, 0.92), rgba(226, 232, 240, 0.82)));
      border: 1px solid var(--md-sys-color-outline-variant, rgba(148, 163, 184, 0.35));
    }

    header {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      align-items: center;
      gap: 1.5rem;
    }

    h2 {
      margin: 0;
      font-size: 1.85rem;
      color: var(--md-sys-color-on-surface, #0f172a);
    }

    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      align-items: center;
    }

    .filters {
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
      margin: 1.5rem 0 2rem;
    }

    .filters label {
      display: flex;
      flex-direction: column;
      gap: 0.4rem;
      font-size: 0.85rem;
      color: var(--md-sys-color-on-surface-variant, #475569);
      font-weight: 600;
    }

    /* MD3 components handle their own styling */
    md-filled-select,
    md-outlined-text-field {
      min-width: 160px;
    }

    .list {
      display: grid;
      gap: 1.25rem;
    }

    .empty-state {
      padding: 2.5rem;
      border: 2px dashed var(--md-sys-color-primary, rgba(59, 130, 246, 0.35));
      border-radius: 18px;
      text-align: center;
      color: var(--md-sys-color-on-surface-variant, #475569);
      background: var(--md-sys-color-primary-container, rgba(191, 219, 254, 0.18));
    }

    .error-state {
      padding: 1rem 1.25rem;
      border-radius: 14px;
      background: var(--md-sys-color-error-container, rgba(220, 38, 38, 0.16));
      color: var(--md-sys-color-on-error-container, #b91c1c);
      margin-bottom: 1.5rem;
    }

    .toolbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 1rem;
      margin: 2rem 0 1.5rem;
      flex-wrap: wrap;
    }

    /* MD3 buttons handle their own styling - removed custom button CSS */

    .toolbar-controls {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      flex-wrap: wrap;
    }

    .toolbar-select {
      display: flex;
      flex-direction: column;
      gap: 0.35rem;
      font-size: 0.85rem;
      color: var(--md-sys-color-on-surface-variant, #475569);
      font-weight: 600;
    }

    .pagination {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      flex-wrap: wrap;
    }

    .status-indicator {
      display: inline-flex;
      align-items: center;
      gap: 0.45rem;
      font-size: 0.85rem;
      padding: 0.4rem 0.75rem;
      border-radius: 999px;
      background: rgba(16, 185, 129, 0.14);
      color: #047857;
    }

    .status-indicator[data-offline='true'] {
      background: rgba(220, 38, 38, 0.14);
      color: #b91c1c;
    }

    .load-more-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.75rem;
      margin-top: 2rem;
      padding: 1.5rem;
      border-radius: 16px;
      background: linear-gradient(135deg, rgba(99, 102, 241, 0.05), rgba(139, 92, 246, 0.05));
      border: 1px dashed var(--md-sys-color-primary, rgba(99, 102, 241, 0.3));
    }

    .load-more-button {
      min-width: 200px;
    }

    .load-more-hint {
      margin: 0;
      font-size: 0.85rem;
      color: var(--md-sys-color-on-surface-variant, #64748b);
      text-align: center;
    }

    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(15, 23, 42, 0.45);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 2rem;
      z-index: 99;
    }

    .modal-content {
      position: relative;
      max-width: min(95vw, 640px);
      width: 100%;
    }

    /* MD3 icon button handles its own styling */
    md-icon-button.modal-close {
      position: absolute;
      top: -3.5rem;
      right: 0;
      --md-icon-button-icon-color: #fff;
    }

    @media (max-width: 900px) {
      :host {
        padding: 1.25rem;
      }

      header {
        flex-direction: column;
        align-items: flex-start;
      }
    }
  `}connectedCallback(){super.connectedCallback(),this.updateRealtimeFromState(),window.addEventListener("online",this.onlineListener),window.addEventListener("offline",this.offlineListener)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("online",this.onlineListener),window.removeEventListener("offline",this.offlineListener)}render(){const e=yT.get(),t=bT.get(),i=this.collectTags(e),r=this.applySearch(e.documents,this.searchTerm);return K`
      <header>
        <div>
          <h2>Firestore Todos</h2>
          <div class="controls">
            <span class="status-indicator" data-offline=${!this.isOnline}>${this.isOnline?"Online":"Offline"}</span>
            <span class="status-indicator" data-offline=${!this.realtimeEnabled}
              >${this.realtimeEnabled?"Real-time: ON":"Real-time: OFF"}</span
            >
          </div>
        </div>
        <div class="controls">
          <md-outlined-button @click=${this.handleToggleRealtime}>
            ${this.realtimeEnabled?"Disable real-time":"Enable real-time"}
          </md-outlined-button>
          <md-filled-button @click=${this.openCreateForm}>Create todo</md-filled-button>
        </div>
      </header>

      ${e.error?K`<div class="error-state">${e.error}</div>`:ee}

      <section class="filters">
        <label>
          Priority
          <md-filled-select .value=${t.priority} @change=${this.handlePriorityChange}>
            <md-select-option value="all">
              <div slot="headline">All priorities</div>
            </md-select-option>
            <md-select-option value="low">
              <div slot="headline">Low</div>
            </md-select-option>
            <md-select-option value="medium">
              <div slot="headline">Medium</div>
            </md-select-option>
            <md-select-option value="high">
              <div slot="headline">High</div>
            </md-select-option>
          </md-filled-select>
        </label>

        <label>
          Tag
          <md-filled-select .value=${t.tag} @change=${this.handleTagChange}>
            <md-select-option value="all">
              <div slot="headline">All tags</div>
            </md-select-option>
            ${i.map(e=>K`
              <md-select-option value=${e}>
                <div slot="headline">${e}</div>
              </md-select-option>
            `)}
          </md-filled-select>
        </label>

        <label>
          Show completed
          <md-filled-select .value=${t.showCompleted?"yes":"no"} @change=${this.handleCompletedChange}>
            <md-select-option value="yes">
              <div slot="headline">Yes</div>
            </md-select-option>
            <md-select-option value="no">
              <div slot="headline">No</div>
            </md-select-option>
          </md-filled-select>
        </label>

        <label>
          Search title
          <md-outlined-text-field
            type="search"
            .value=${this.searchTerm}
            placeholder="Search displayed results"
            @input=${e=>this.searchTerm=e.target.value}
          ></md-outlined-text-field>
        </label>

        <md-outlined-button type="button" @click=${this.handleResetFilters}>Reset filters</md-outlined-button>
      </section>

      <section class="toolbar">
        <div class="toolbar-controls">
          <span>Page ${e.currentPage}</span>
          <label class="toolbar-select">
            Page size
            <md-filled-select .value=${String(e.pageSize)} @change=${this.handlePageSizeChange}>
              <md-select-option value="5">
                <div slot="headline">5 per page</div>
              </md-select-option>
              <md-select-option value="10">
                <div slot="headline">10 per page</div>
              </md-select-option>
              <md-select-option value="15">
                <div slot="headline">15 per page</div>
              </md-select-option>
            </md-filled-select>
          </label>
        </div>

        <div class="pagination">
          <md-outlined-button type="button" ?disabled=${!e.hasPreviousPage} @click=${this.loadPrevious}>
            Previous page
          </md-outlined-button>
          <md-outlined-button type="button" ?disabled=${!e.hasNextPage} @click=${this.loadNext}>
            Next page
          </md-outlined-button>
        </div>
      </section>

      ${"loading"===e.status?K`<div class="empty-state">Loading todos...</div>`:r.length?K`
              <section class="list">
                ${r.map(e=>K`
                    <df-firestore-item
                      .todo=${e}
                      @df-firestore-item-toggle=${this.handleToggleTodo}
                      @df-firestore-item-edit=${this.handleEditTodo}
                      @df-firestore-item-delete=${this.handleDeleteRequest}
                    ></df-firestore-item>
                  `)}
              </section>
              
              ${e.hasNextPage?K`
                <div class="load-more-container">
                  <md-outlined-button 
                    class="load-more-button"
                    @click=${this.handleLoadMore}
                    ?disabled=${this.isLoadingMore}
                  >
                    ${this.isLoadingMore?"Loading...":"Load more todos"}
                  </md-outlined-button>
                  <p class="load-more-hint">
                    Progressive loading: Click to append ${e.pageSize} more items
                  </p>
                </div>
              `:ee}
            `:K`<div class="empty-state">No todos match the current filters.</div>`}

      ${this.isFormOpen?this.renderFormModal():ee}
      ${this.deleteTarget?this.renderDeleteModal():ee}

      ${this.localError?K`<div class="error-state">${this.localError}</div>`:ee}
    `}renderFormModal(){return K`
      <div class="modal-backdrop" role="dialog" aria-modal="true">
        <div class="modal-content">
          <md-icon-button class="modal-close" @click=${this.closeForm} aria-label="Close">
            <md-icon>close</md-icon>
          </md-icon-button>
          <df-firestore-form
            .mode=${this.formMode}
            .todo=${this.editingTodo}
            @df-firestore-form-submit=${this.handleFormSubmit}
            @df-firestore-form-cancel=${this.closeForm}
          ></df-firestore-form>
        </div>
      </div>
    `}renderDeleteModal(){return this.deleteTarget?K`
      <div class="modal-backdrop" role="dialog" aria-modal="true">
        <div class="modal-content">
          <md-icon-button class="modal-close" @click=${this.closeDeleteModal} aria-label="Close">
            <md-icon>close</md-icon>
          </md-icon-button>
          <df-firestore-delete
            .todoId=${this.deleteTarget.id}
            .todoTitle=${this.deleteTarget.title}
            @df-firestore-delete-confirm=${this.confirmDelete}
            @df-firestore-delete-cancel=${this.closeDeleteModal}
          ></df-firestore-delete>
        </div>
      </div>
    `:ee}handlePriorityChange(e){kT({priority:e.target.value})}handleTagChange(e){kT({tag:e.target.value})}handleCompletedChange(e){kT({showCompleted:"yes"===e.target.value})}handleResetFilters(){!async function(){mT.set({...fT}),await ST()}(),this.searchTerm=""}async handlePageSizeChange(e){const t=Number(e.target.value);await async function(e){const t=_T();await t.setPageSize(e)}(t)}async loadNext(){try{await wT()}catch(e){this.showLocalError(e)}}async loadPrevious(){try{await async function(){const e=_T();await e.loadPreviousPage()}()}catch(e){this.showLocalError(e)}}async handleLoadMore(){this.isLoadingMore=!0;try{await wT()}catch(e){this.showLocalError(e)}finally{this.isLoadingMore=!1}}showLocalError(e){this.localError=e instanceof Error?e.message:"Unexpected error occurred.",setTimeout(()=>{this.localError=null},4e3)}handleToggleRealtime(){this.realtimeEnabled=!this.realtimeEnabled,this.realtimeEnabled?_T().startRealtime():_T().stopRealtime()}updateRealtimeFromState(){const{isListening:e}=yT.get();this.realtimeEnabled=e}openCreateForm(){this.formMode="create",this.editingTodo=null,this.isFormOpen=!0}handleEditTodo(e){this.formMode="edit",this.editingTodo=e.detail,this.isFormOpen=!0}closeForm(){this.isFormOpen=!1,this.editingTodo=null}async handleFormSubmit(e){const{mode:t,draft:i,todoId:r}=e.detail;try{"create"===t?await async function(e){const t=_T(),i=new Date,r={title:e.title,description:e.description,completed:!1,priority:e.priority,tags:e.tags,createdAt:i,updatedAt:i,dueDate:e.dueDate,titleLower:e.title.toLowerCase()},n=await t.create(r);return await t.refresh(),n}(i):r&&await xT(r,i),this.isFormOpen=!1,this.editingTodo=null}catch(e){this.showLocalError(e)}}handleDeleteRequest(e){const{id:t,title:i}=e.detail,r=yT.get().documents.find(e=>e.id===t)??{id:t,title:i,description:"",priority:"medium",tags:[],createdAt:null,updatedAt:null,completed:!1,dueDate:null};this.deleteTarget=r}closeDeleteModal(){this.deleteTarget=null}async confirmDelete(e){try{await async function(e){const t=_T();await t.delete(e),await t.refresh()}(e.detail.id),this.closeDeleteModal()}catch(e){this.showLocalError(e)}}async handleToggleTodo(e){try{await async function(e,t){await xT(e,{completed:t})}(e.detail.id,e.detail.completed)}catch(e){this.showLocalError(e)}}applySearch(e,t){const i=t.trim().toLowerCase();return i?e.filter(e=>e.title.toLowerCase().includes(i)):e}collectTags(e){const t=new Set;for(const i of e.documents)for(const e of i.tags)t.add(e);return Array.from(t).sort((e,t)=>e.localeCompare(t))}};EY([P()],$Y.prototype,"searchTerm",void 0),EY([P()],$Y.prototype,"isFormOpen",void 0),EY([P()],$Y.prototype,"formMode",void 0),EY([P()],$Y.prototype,"editingTodo",void 0),EY([P()],$Y.prototype,"deleteTarget",void 0),EY([P()],$Y.prototype,"realtimeEnabled",void 0),EY([P()],$Y.prototype,"isOnline",void 0),EY([P()],$Y.prototype,"localError",void 0),EY([P()],$Y.prototype,"isLoadingMore",void 0),$Y=EY([i("df-firestore-list")],$Y);var AY=function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let IY=class extends(Nn(ve)){static{this.styles=l`
    :host {
      display: block;
      width: min(1200px, 90vw);
      margin: 0 auto;
      box-sizing: border-box;
      border-radius: 24px;
      padding: 2rem;
      background: var(--md-sys-color-surface, #ffffff);
      color: var(--md-sys-color-on-surface, #0f172a);
      border: 1px solid var(--md-sys-color-outline-variant, rgba(148, 163, 184, 0.35));
      box-shadow: 0 22px 45px rgba(15, 23, 42, 0.08);
    }

    .container {
      display: grid;
      gap: 1.5rem;
    }

    header {
      background: var(
        --md-sys-color-surface-container-high,
        linear-gradient(130deg, rgba(99, 102, 241, 0.08), rgba(79, 70, 229, 0.06))
      );
      border-radius: 24px;
      padding: 2rem;
      border: 1px solid var(--md-sys-color-outline-variant, rgba(99, 102, 241, 0.2));
    }

    h2 {
      margin: 0 0 0.75rem;
      font-size: 1.85rem;
      color: var(--md-sys-color-on-surface, #1e293b);
      font-weight: 600;
    }

    p {
      margin: 0;
      color: var(--md-sys-color-on-surface-variant, #475569);
      line-height: 1.6;
    }

    .callouts {
      display: grid;
      gap: 1rem;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    }

    .callout {
      border-radius: 16px;
      padding: 1rem 1.25rem;
      background: var(--md-sys-color-surface-container-low, rgba(241, 245, 249, 0.92));
      border: 1px solid var(--md-sys-color-outline-variant, rgba(148, 163, 184, 0.28));
      color: var(--md-sys-color-on-surface, #0f172a);
      font-weight: 600;
      text-align: center;
    }

    .callout--info {
      background: var(--md-sys-color-secondary-container, rgba(59, 130, 246, 0.12));
      color: var(--md-sys-color-on-secondary-container, #1d4ed8);
    }

    .callout--error {
      background: var(--md-sys-color-error-container, rgba(220, 38, 38, 0.16));
      color: var(--md-sys-color-on-error-container, #b91c1c);
    }
  `}constructor(){super(),this.initialized=!1,this.initError=null,this.useDemoData=!1}connectedCallback(){super.connectedCallback(),this.initializeStore()}render(){const e=yT.get(),t=null!==lT.get().authUser;return t&&!this.initialized&&this.initializeStore(),t||this.initialized?K`
      <div class="container">
        <header>
          <h2>Firestore CRUD Pattern</h2>
          <p>
            This teaching demo initialises the shared Firestore store, enables IndexedDB persistence, and connects to
            the emulator so you can explore create, read, update, delete flows in real-time.
          </p>
        </header>

        <div class="callouts">
          <div class="callout">Status: ${e.status}</div>
          <div class="callout">Query: ${e.queryDescription??"Default"}</div>
          <div class="callout">Docs in view: ${e.documents.length}</div>
        </div>

        ${this.initError?K`<div class="callout callout--error">
              ${this.initError}
            </div>`:K`<df-firestore-list></df-firestore-list>`}
      </div>
    `:K`
        <div class="container">
          <header>
            <h2>Firestore CRUD Pattern</h2>
            <p>
              This teaching demo initialises the shared Firestore store, enables IndexedDB persistence, and connects to
              the emulator so you can explore create, read, update, delete flows in real-time.
            </p>
          </header>

          <div class="callout callout--info">
             Please sign in using the Authentication widget above to access Firestore todos.
          </div>
        </div>
      `}async initializeStore(){if(!this.initialized)try{if(this.shouldUseDemoState())return void this.applyDemoState();if(!lT.get().authUser)return;await async function(e,t){if(OT.get())return;const i=D_(e);t&&M_(i,{host:"127.0.0.1",port:8280}),await L_(i),vT=Xk(i,"todos");const r=new pT(vT,{defaultConstraints:[RS("createdAt","desc")],defaultQueryDescription:"All todos (newest first)",pageSize:5,mapDocument:TT});OT.set(r),await ST()}(Y_(),G_("firestore")),this.initialized=!0}catch(e){console.error("[df-firestore-demo] Failed to initialise Firestore demo:",e),this.initError="Unable to initialise Firestore demo. Ensure the emulators are running and reload the page."}}shouldUseDemoState(){return this.useDemoData}applyDemoState(){const e={status:"ready",documents:[{id:"demo-todo-1",title:"Plan Firestore walkthrough",description:"Outline create, read, update, delete flows for the workshop.",completed:!1,priority:"high",tags:["teaching","planning"],createdAt:new Date("2025-09-18T14:30:00Z"),updatedAt:new Date("2025-09-18T14:30:00Z"),dueDate:new Date("2025-09-20T17:00:00Z")},{id:"demo-todo-2",title:"Draft CRUD copy",description:"Write helpful placeholder text for the todo form.",completed:!0,priority:"medium",tags:["content","ux"],createdAt:new Date("2025-09-15T09:00:00Z"),updatedAt:new Date("2025-09-19T10:15:00Z"),dueDate:null},{id:"demo-todo-3",title:"Record real-time GIF",description:"Capture a short clip demonstrating Firestore listener updates.",completed:!1,priority:"medium",tags:["media","realtime"],createdAt:new Date("2025-09-21T11:45:00Z"),updatedAt:new Date("2025-09-21T11:45:00Z"),dueDate:new Date("2025-09-25T22:00:00Z")}],error:null,isListening:!1,lastUpdated:Date.now(),currentPage:1,pageSize:5,hasNextPage:!1,hasPreviousPage:!1,queryDescription:this.useDemoData?"Storybook demo data":"Demo data (tests)"};PT({showCompleted:!0,priority:"all",tag:"all",search:""}),CT(e),this.initialized=!0}};AY([C({type:Boolean,attribute:"use-demo-data"})],IY.prototype,"useDemoData",void 0),AY([P()],IY.prototype,"initialized",void 0),AY([P()],IY.prototype,"initError",void 0),IY=AY([i("df-firestore-demo")],IY);var QY=function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let RY=class extends ve{constructor(){super(),this.directory="uploads",this.showDelete=!0,this.showPreviews=!0,this.files=[],this.loading=!1,this.error=null}static{this.styles=l`
    :host {
      display: block;
      --md-sys-color-primary: #5f9ea0;
    }

    .file-list-container {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .loading-container,
    .error-container,
    .empty-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 32px;
      gap: 12px;
      color: var(--md-sys-color-on-surface-variant, #666);
    }

    .error-container {
      color: var(--md-sys-color-error, #b00020);
      background-color: var(--md-sys-color-error-container, #fdecea);
      border-radius: 8px;
    }

    .file-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px;
      border: 1px solid var(--md-sys-color-outline, #ccc);
      border-radius: 8px;
      background-color: var(--md-sys-color-surface, #fff);
      transition: all 0.2s ease;
      cursor: pointer;
    }

    .file-item:hover {
      background-color: var(--md-sys-color-surface-variant, #f5f5f5);
      border-color: var(--md-sys-color-primary, #5f9ea0);
    }

    .file-preview {
      width: 48px;
      height: 48px;
      border-radius: 6px;
      object-fit: cover;
      background-color: var(--md-sys-color-surface-variant, #f5f5f5);
    }

    .file-icon {
      width: 48px;
      height: 48px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 6px;
      background-color: var(--md-sys-color-primary-container, #e0f2f1);
    }

    .file-icon md-icon {
      color: var(--md-sys-color-primary, #5f9ea0);
      font-size: 32px;
    }

    .file-info {
      flex: 1;
      min-width: 0;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .file-name {
      font-weight: 500;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .file-meta {
      display: flex;
      gap: 12px;
      font-size: 0.875rem;
      color: var(--md-sys-color-on-surface-variant, #666);
    }

    .file-actions {
      display: flex;
      gap: 4px;
    }

    md-text-button {
      --md-text-button-label-text-color: var(--md-sys-color-error, #b00020);
    }
  `}connectedCallback(){super.connectedCallback(),setTimeout(()=>{this.loadFiles()},500)}updated(e){super.updated(e),e.has("directory")&&this.loadFiles()}async loadFiles(){this.loading=!0,this.error=null;try{this.files=await BT(this.directory)}catch(e){e instanceof co&&"storage/unauthorized"===e.code?this.error="Sign in is required to view files in this directory.":e instanceof Error?this.error=e.message:this.error="Failed to load files"}finally{this.loading=!1}}async refresh(){await this.loadFiles()}handleFileClick(e){this.dispatchEvent(new CustomEvent("file-select",{detail:{file:e},bubbles:!0,composed:!0}))}handleDeleteClick(e,t){e.stopPropagation(),this.dispatchEvent(new CustomEvent("file-delete",{detail:{file:t},bubbles:!0,composed:!0}))}formatFileSize(e){return e<1024?`${e} B`:e<1048576?`${(e/1024).toFixed(1)} KB`:`${(e/1048576).toFixed(1)} MB`}formatDate(e){return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(e)}isImage(e){return e.startsWith("image/")}getFileIcon(e){return e.startsWith("image/")?"image":e.startsWith("video/")?"movie":e.startsWith("audio/")?"audio_file":e.includes("pdf")?"picture_as_pdf":e.includes("zip")||e.includes("archive")?"folder_zip":"insert_drive_file"}render(){return this.loading?K`
        <div class="loading-container">
          <md-circular-progress indeterminate></md-circular-progress>
          <span>Loading files...</span>
        </div>
      `:this.error?K`
        <div class="error-container">
          <md-icon>error</md-icon>
          <strong>Error loading files</strong>
          <span>${this.error}</span>
        </div>
      `:0===this.files.length?K`
        <div class="empty-container">
          <md-icon>folder_open</md-icon>
          <span>No files found in ${this.directory}</span>
        </div>
      `:K`
      <div class="file-list-container">
        ${this.files.map(e=>K`
            <div class="file-item" @click=${()=>this.handleFileClick(e)}>
              ${this.showPreviews&&this.isImage(e.contentType)?K`<img src="${e.downloadUrl}" alt="${e.name}" class="file-preview" />`:K`
                    <div class="file-icon">
                      <md-icon>${this.getFileIcon(e.contentType)}</md-icon>
                    </div>
                  `}

              <div class="file-info">
                <div class="file-name">${e.name}</div>
                <div class="file-meta">
                  <span>${this.formatFileSize(e.size)}</span>
                  <span></span>
                  <span>${this.formatDate(e.uploadedAt)}</span>
                </div>
              </div>

              ${this.showDelete?K`
                    <div class="file-actions">
                      <md-text-button @click=${t=>this.handleDeleteClick(t,e)}>
                        <md-icon slot="icon">delete</md-icon>
                        Delete
                      </md-text-button>
                    </div>
                  `:""}
            </div>
          `)}
      </div>
    `}};QY([C({type:String})],RY.prototype,"directory",void 0),QY([C({type:Boolean})],RY.prototype,"showDelete",void 0),QY([C({type:Boolean})],RY.prototype,"showPreviews",void 0),QY([P()],RY.prototype,"files",void 0),QY([P()],RY.prototype,"loading",void 0),QY([P()],RY.prototype,"error",void 0),RY=QY([i("df-file-list")],RY);var DY=function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let MY=class extends ve{constructor(){super(),this.file=null,this.showButton=!0,this.buttonLabel="Delete",this.dialogOpen=!1,this.deleting=!1,this.error=null}static{this.styles=l`
    :host {
      display: inline-block;
      --md-sys-color-primary: #5f9ea0;
    }

    .delete-button {
      --md-text-button-label-text-color: var(--md-sys-color-error, #b00020);
    }

    .dialog-content {
      display: flex;
      flex-direction: column;
      gap: 16px;
      padding: 24px;
      min-width: 300px;
    }

    .dialog-header {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .dialog-header md-icon {
      font-size: 32px;
      color: var(--md-sys-color-error, #b00020);
    }

    .dialog-title {
      font-size: 1.25rem;
      font-weight: 500;
    }

    .file-info {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px;
      background-color: var(--md-sys-color-surface-variant, #f5f5f5);
      border-radius: 8px;
    }

    .file-icon {
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 6px;
      background-color: var(--md-sys-color-error-container, #fdecea);
    }

    .file-icon md-icon {
      color: var(--md-sys-color-error, #b00020);
    }

    .file-details {
      flex: 1;
      min-width: 0;
    }

    .file-name {
      font-weight: 500;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .file-path {
      font-size: 0.875rem;
      color: var(--md-sys-color-on-surface-variant, #666);
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .warning-message {
      color: var(--md-sys-color-error, #b00020);
      font-size: 0.875rem;
      padding: 12px;
      background-color: var(--md-sys-color-error-container, #fdecea);
      border-radius: 8px;
    }

    .error-message {
      color: var(--md-sys-color-error, #b00020);
      padding: 12px;
      background-color: var(--md-sys-color-error-container, #fdecea);
      border-radius: 8px;
      font-size: 0.875rem;
    }

    .dialog-actions {
      display: flex;
      gap: 8px;
      justify-content: flex-end;
      padding-top: 8px;
    }

    md-filled-button.delete-action {
      --md-filled-button-container-color: var(--md-sys-color-error, #b00020);
    }
  `}open(){this.dialogOpen=!0,this.error=null}close(){this.dialogOpen=!1,this.error=null}handleButtonClick(){this.open()}handleCancel(){this.close(),this.dispatchEvent(new CustomEvent("delete-cancel",{bubbles:!0,composed:!0}))}async handleConfirm(){if(this.file){this.dispatchEvent(new CustomEvent("delete-confirm",{detail:{file:this.file},bubbles:!0,composed:!0})),this.deleting=!0,this.error=null;try{await ZT(this.file.path),this.dispatchEvent(new CustomEvent("delete-complete",{detail:{file:this.file},bubbles:!0,composed:!0})),this.close()}catch(e){this.error=e instanceof Error?e.message:"Failed to delete file",this.dispatchEvent(new CustomEvent("delete-error",{detail:{file:this.file,error:this.error},bubbles:!0,composed:!0}))}finally{this.deleting=!1}}}getFileIcon(e){return e.startsWith("image/")?"image":e.startsWith("video/")?"movie":e.startsWith("audio/")?"audio_file":e.includes("pdf")?"picture_as_pdf":e.includes("zip")||e.includes("archive")?"folder_zip":"insert_drive_file"}render(){return K`
      ${this.showButton?K`
            <md-text-button class="delete-button" @click=${this.handleButtonClick}>
              <md-icon slot="icon">delete</md-icon>
              ${this.buttonLabel}
            </md-text-button>
          `:""}
      ${this.dialogOpen?this.renderDialog():""}
    `}renderDialog(){return this.file?K`
      <div class="dialog-content">
        <div class="dialog-header">
          <md-icon>warning</md-icon>
          <div class="dialog-title">Delete File?</div>
        </div>

        <div class="file-info">
          <div class="file-icon">
            <md-icon>${this.getFileIcon(this.file.contentType)}</md-icon>
          </div>
          <div class="file-details">
            <div class="file-name">${this.file.name}</div>
            <div class="file-path">${this.file.path}</div>
          </div>
        </div>

        <div class="warning-message">
          <strong>Warning:</strong> This action cannot be undone. The file will be permanently
          deleted from storage.
        </div>

        ${this.error?K` <div class="error-message"><strong>Error:</strong> ${this.error}</div> `:""}

        <div class="dialog-actions">
          <md-text-button @click=${this.handleCancel} ?disabled=${this.deleting}>
            Cancel
          </md-text-button>
          <md-filled-button
            class="delete-action"
            @click=${this.handleConfirm}
            ?disabled=${this.deleting}
          >
            <md-icon slot="icon">${this.deleting?"hourglass_empty":"delete"}</md-icon>
            ${this.deleting?"Deleting...":"Delete"}
          </md-filled-button>
        </div>
      </div>
    `:K`
        <div class="dialog-content">
          <div class="error-message">No file selected for deletion</div>
          <div class="dialog-actions">
            <md-text-button @click=${this.handleCancel}>Close</md-text-button>
          </div>
        </div>
      `}};DY([C({type:Object})],MY.prototype,"file",void 0),DY([C({type:Boolean})],MY.prototype,"showButton",void 0),DY([C({type:String})],MY.prototype,"buttonLabel",void 0),DY([P()],MY.prototype,"dialogOpen",void 0),DY([P()],MY.prototype,"deleting",void 0),DY([P()],MY.prototype,"error",void 0),MY=DY([i("df-file-delete")],MY);var NY=function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let LY=class extends(Nn(ve)){constructor(){super(...arguments),this.initialized=!1,this.initError=null,this.todoTitle="",this.todoDescription="",this.todoPriority="medium",this.cleanupDays=30,this.exportFormat="csv"}static{this.styles=l`
    :host {
      display: block;
      font-family: var(--df-font-family, system-ui, sans-serif);
      width: min(1200px, 90vw);
      margin: 0 auto;
      background: white;
      border-radius: 16px;
      padding: 2rem;
    }

    .container {
      display: grid;
      gap: 1.5rem;
    }

    header {
      background: linear-gradient(130deg, rgba(99, 102, 241, 0.08), rgba(79, 70, 229, 0.06));
      border-radius: 24px;
      padding: 2rem;
      border: 1px solid rgba(99, 102, 241, 0.2);
    }

    h2 {
      margin: 0 0 0.75rem;
      font-size: 1.85rem;
      color: #1e293b;
      font-weight: 600;
    }

    h3 {
      margin: 0 0 1rem;
      font-size: 1.35rem;
      color: #334155;
      font-weight: 600;
    }

    p {
      margin: 0;
      color: #475569;
      line-height: 1.6;
    }

    .function-section {
      border-radius: 16px;
      padding: 1.5rem;
      background: rgba(241, 245, 249, 0.92);
      border: 1px solid rgba(148, 163, 184, 0.28);
    }

    .function-description {
      margin: 0 0 1.25rem;
      color: #64748b;
      font-size: 0.95rem;
      line-height: 1.5;
    }

    .form-row {
      display: grid;
      gap: 1rem;
      margin-bottom: 1rem;
    }

    .form-group {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    label {
      font-size: 0.9rem;
      font-weight: 600;
      color: #475569;
    }

    md-outlined-text-field,
    md-filled-select {
      width: 100%;
    }

    .button-group {
      display: flex;
      gap: 0.75rem;
      align-items: center;
      margin-top: 1rem;
    }

    .status {
      padding: 0.75rem 1rem;
      border-radius: 12px;
      font-size: 0.9rem;
      margin-top: 1rem;
    }

    .status.loading {
      background: rgba(59, 130, 246, 0.1);
      color: #1e40af;
      border: 1px solid rgba(59, 130, 246, 0.3);
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .status.success {
      background: rgba(34, 197, 94, 0.1);
      color: #15803d;
      border: 1px solid rgba(34, 197, 94, 0.3);
    }

    .status.error {
      background: rgba(239, 68, 68, 0.1);
      color: #b91c1c;
      border: 1px solid rgba(239, 68, 68, 0.3);
    }

    .result {
      margin-top: 1rem;
      padding: 1rem;
      background: white;
      border-radius: 12px;
      border: 1px solid rgba(148, 163, 184, 0.28);
      font-family: 'Monaco', 'Courier New', monospace;
      font-size: 0.85rem;
      white-space: pre-wrap;
      word-break: break-word;
      max-height: 300px;
      overflow-y: auto;
    }

    .callouts {
      display: grid;
      gap: 1rem;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    }

    .callout {
      border-radius: 16px;
      padding: 1rem 1.25rem;
      background: rgba(241, 245, 249, 0.92);
      border: 1px solid rgba(148, 163, 184, 0.28);
      color: #0f172a;
      font-weight: 600;
      text-align: center;
    }

    .init-error {
      background: rgba(220, 38, 38, 0.16);
      color: #b91c1c;
      padding: 1rem;
      border-radius: 12px;
    }
  `}connectedCallback(){super.connectedCallback(),this.initializeStore()}render(){return this.initError?K`
        <div class="container">
          <header>
            <h2>Cloud Functions Pattern</h2>
            <p>Unable to initialize Cloud Functions demo.</p>
          </header>
          <div class="init-error">${this.initError}</div>
        </div>
      `:this.initialized?K`
      <div class="container">
        <header>
          <h2>Cloud Functions Pattern</h2>
          <p>
            This teaching demo demonstrates calling Cloud Functions from the client using signals-based state
            management. All functions run in the emulator for 100% offline development.
          </p>
        </header>

        <div class="callouts">
          <div class="callout">Callable Functions: 2</div>
          <div class="callout">HTTP Functions: 1</div>
          <div class="callout">Triggers: 3 (background)</div>
          <div class="callout">Scheduled: 1 (cron)</div>
        </div>

        ${this.renderCreateTodoFunction()} ${this.renderCleanupFunction()} ${this.renderExportFunction()}
      </div>
    `:K`
        <div class="container">
          <header>
            <h2>Cloud Functions Pattern</h2>
            <p>Initializing...</p>
          </header>
        </div>
      `}renderCreateTodoFunction(){const e=GT.get();return K`
      <div class="function-section">
        <h3>1. Callable Function: createTodoAdvanced</h3>
        <p class="function-description">
          Demonstrates a callable function with server-side business logic. The function calculates estimated effort
          and urgency score based on the todo details.
        </p>

        <div class="form-row">
          <div class="form-group">
            <label>Title *</label>
            <md-outlined-text-field
              type="text"
              .value=${this.todoTitle}
              @input=${e=>{this.todoTitle=e.target.value}}
              placeholder="Enter todo title"
            ></md-outlined-text-field>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Description</label>
            <md-outlined-text-field
              type="textarea"
              rows="3"
              .value=${this.todoDescription}
              @input=${e=>{this.todoDescription=e.target.value}}
              placeholder="Enter todo description"
            ></md-outlined-text-field>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Priority</label>
            <md-filled-select
              .value=${this.todoPriority}
              @change=${e=>{this.todoPriority=e.target.value}}
            >
              <md-select-option value="low">
                <div slot="headline">Low</div>
              </md-select-option>
              <md-select-option value="medium" selected>
                <div slot="headline">Medium</div>
              </md-select-option>
              <md-select-option value="high">
                <div slot="headline">High</div>
              </md-select-option>
            </md-filled-select>
          </div>
        </div>

        <div class="button-group">
          <md-filled-button @click=${this.handleCreateTodo} ?disabled=${"loading"===e.status}>
            Call Function
          </md-filled-button>
          <md-outlined-button @click=${this.handleResetCreateTodo} ?disabled=${"loading"===e.status}>
            Reset
          </md-outlined-button>
        </div>

        ${"loading"===e.status?K`<div class="status loading">
              <md-circular-progress indeterminate></md-circular-progress>
              <span>Calling function...</span>
            </div>`:""}
        ${"success"===e.status&&e.data?K`<div class="status success">
                Success! Todo created with ID: ${e.data.todoId}
              </div>
              <div class="result">${JSON.stringify(e.data,null,2)}</div>`:""}
        ${"error"===e.status?K`<div class="status error">Error: ${e.error}</div>`:""}
      </div>
    `}renderCleanupFunction(){const e=HT.get();return K`
      <div class="function-section">
        <h3>2. Callable Function: manualCleanupExpiredTodos</h3>
        <p class="function-description">
          Demonstrates an administrative callable function. Deletes completed todos older than the specified number of
          days. Requires authentication.
        </p>

        <div class="form-row">
          <div class="form-group">
            <label>Days Old (1-365)</label>
            <md-outlined-text-field
              type="number"
              .value=${String(this.cleanupDays)}
              @input=${e=>{this.cleanupDays=parseInt(e.target.value)||30}}
              min="1"
              max="365"
            ></md-outlined-text-field>
          </div>
        </div>

        <div class="button-group">
          <md-filled-button @click=${this.handleCleanup} ?disabled=${"loading"===e.status}>
            Trigger Cleanup
          </md-filled-button>
          <md-outlined-button @click=${this.handleResetCleanup} ?disabled=${"loading"===e.status}>
            Reset
          </md-outlined-button>
        </div>

        ${"loading"===e.status?K`<div class="status loading">
              <md-circular-progress indeterminate></md-circular-progress>
              <span>Running cleanup...</span>
            </div>`:""}
        ${"success"===e.status&&e.data?K`<div class="status success">${e.data.message}</div>
              <div class="result">${JSON.stringify(e.data,null,2)}</div>`:""}
        ${"error"===e.status?K`<div class="status error">Error: ${e.error}</div>`:""}
      </div>
    `}renderExportFunction(){const e=KT.get();return K`
      <div class="function-section">
        <h3>3. HTTP Function: todosExportAPI</h3>
        <p class="function-description">
          Demonstrates an HTTP function accessed via standard fetch. Exports todos in CSV or JSON format. Uses query
          parameters for configuration.
        </p>

        <div class="form-row">
          <div class="form-group">
            <label>Export Format</label>
            <md-filled-select
              .value=${this.exportFormat}
              @change=${e=>{this.exportFormat=e.target.value}}
            >
              <md-select-option value="csv" selected>
                <div slot="headline">CSV</div>
              </md-select-option>
              <md-select-option value="json">
                <div slot="headline">JSON</div>
              </md-select-option>
            </md-filled-select>
          </div>
        </div>

        <div class="button-group">
          <md-filled-button @click=${this.handleExport} ?disabled=${"loading"===e.status}>
            Export Todos
          </md-filled-button>
          <md-outlined-button @click=${this.handleResetExport} ?disabled=${"loading"===e.status}>
            Reset
          </md-outlined-button>
        </div>

        ${"loading"===e.status?K`<div class="status loading">
              <md-circular-progress indeterminate></md-circular-progress>
              <span>Exporting...</span>
            </div>`:""}
        ${"success"===e.status&&e.data?K`<div class="status success">Export complete! ${e.data.split("\n").length} lines returned</div>
              <div class="result">${e.data}</div>`:""}
        ${"error"===e.status?K`<div class="status error">Error: ${e.error}</div>`:""}
      </div>
    `}async initializeStore(){this.initialized||(this.initialized=!0)}async handleCreateTodo(){if(!this.todoTitle.trim())return;const e={title:this.todoTitle,description:this.todoDescription||void 0,priority:this.todoPriority,tags:["demo","functions"]};try{await async function(e){const t=JT();FT.set({status:"loading",data:null,error:null,lastCalled:new Date});try{const i=U_(t,"createTodoAdvanced"),r=await i(e);return FT.set({status:"success",data:r.data,error:null,lastCalled:new Date}),r.data}catch(e){const t=e instanceof Error?e.message:"Unknown error occurred";throw FT.set({status:"error",data:null,error:t,lastCalled:new Date}),e}}(e)}catch(e){console.error("Failed to create todo:",e)}}handleResetCreateTodo(){this.todoTitle="",this.todoDescription="",this.todoPriority="medium",FT.set({status:"idle",data:null,error:null,lastCalled:null})}async handleCleanup(){try{await async function(e={}){const t=JT();WT.set({status:"loading",data:null,error:null,lastCalled:new Date});try{const i=U_(t,"manualCleanupExpiredTodos"),r=await i(e);return WT.set({status:"success",data:r.data,error:null,lastCalled:new Date}),r.data}catch(e){const t=e instanceof Error?e.message:"Unknown error occurred";throw WT.set({status:"error",data:null,error:t,lastCalled:new Date}),e}}({daysOld:this.cleanupDays})}catch(e){console.error("Failed to run cleanup:",e)}}handleResetCleanup(){this.cleanupDays=30,WT.set({status:"idle",data:null,error:null,lastCalled:null})}async handleExport(){try{await async function(e="csv"){YT.set({status:"loading",data:null,error:null,lastCalled:new Date});try{const t=Y_().options.projectId||"peg-2035",i=`${G_("functions")?`http://127.0.0.1:5501/${t}/us-central1`:`https://us-central1-${t}.cloudfunctions.net`}/todosExportAPI?format=${e}`,r=await fetch(i);if(!r.ok)throw new Error(`HTTP ${r.status}: ${r.statusText}`);const n=await r.text();return YT.set({status:"success",data:n,error:null,lastCalled:new Date}),n}catch(e){const t=e instanceof Error?e.message:"Unknown error occurred";throw YT.set({status:"error",data:null,error:t,lastCalled:new Date}),e}}(this.exportFormat)}catch(e){console.error("Failed to export todos:",e)}}handleResetExport(){this.exportFormat="csv",YT.set({status:"idle",data:null,error:null,lastCalled:null})}};NY([P()],LY.prototype,"initialized",void 0),NY([P()],LY.prototype,"initError",void 0),NY([P()],LY.prototype,"todoTitle",void 0),NY([P()],LY.prototype,"todoDescription",void 0),NY([P()],LY.prototype,"todoPriority",void 0),NY([P()],LY.prototype,"cleanupDays",void 0),NY([P()],LY.prototype,"exportFormat",void 0),LY=NY([i("df-functions-demo")],LY);var zY=function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let VY=class extends ve{constructor(){super(...arguments),this.users=[],this.loading=!1,this.searchQuery=""}static{this.styles=l`
    :host {
      display: block;
      font-family: inherit;
    }

    .container {
      padding: 1rem;
    }

    .search-bar {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 1.5rem;
    }

    md-outlined-text-field {
      flex: 1;
    }

    .list {
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      overflow: hidden;
    }

    .list-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 1rem;
      border-bottom: 1px solid #e5e7eb;
      cursor: pointer;
      transition: background-color 0.2s;
    }

    .list-item:hover {
      background-color: #f9fafb;
    }

    .list-item:last-child {
      border-bottom: none;
    }

    .user-info {
      flex: 1;
      min-width: 0;
    }

    .user-email {
      font-weight: 500;
      color: #1f2937;
      word-break: break-word;
    }

    .user-display-name {
      font-size: 0.875rem;
      color: #6b7280;
      margin-top: 0.25rem;
    }

    .user-meta {
      font-size: 0.75rem;
      color: #9ca3af;
      margin-top: 0.25rem;
    }

    .roles-container {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
      margin-left: auto;
      align-items: center;
    }

    .role-badge {
      padding: 0.375rem 0.75rem;
      border-radius: 9999px;
      font-size: 0.875rem;
      font-weight: 500;
      white-space: nowrap;
    }

    .role-admin {
      background-color: #fecaca;
      color: #991b1b;
    }

    .role-player {
      background-color: #bfdbfe;
      color: #1e40af;
    }

    .role-coder-fomo {
      background-color: #dbeafe;
      color: #0c4a6e;
    }

    .role-viewer {
      background-color: #e5e7eb;
      color: #374151;
    }

    .empty-state {
      text-align: center;
      padding: 2rem;
      color: #6b7280;
    }

    .loading {
      text-align: center;
      padding: 2rem;
      color: #9ca3af;
    }

    .pagination {
      display: flex;
      justify-content: center;
      gap: 0.5rem;
      padding: 1rem;
      border-top: 1px solid #e5e7eb;
    }
  `}render(){return K`
      <div class="container">
        <div class="search-bar">
          <md-outlined-text-field
            label="Search by email or name..."
            .value=${this.searchQuery}
            @input=${e=>{this.searchQuery=e.target.value}}
          ></md-outlined-text-field>
        </div>

        ${this.loading?K`<div class="loading">Loading users...</div>`:0===this.filteredUsers.length?K`<div class="empty-state">No users found</div>`:K`
                <div class="list">
                  ${this.filteredUsers.map(e=>K`
                      <div
                        class="list-item"
                        @click=${()=>this.selectUser(e)}
                      >
                        <div class="user-info">
                          <div class="user-email">${e.email}</div>
                          ${e.displayName?K`<div class="user-display-name">
                                ${e.displayName}
                              </div>`:""}
                          <div class="user-meta">
                            Created ${this.formatDate(e.createdAt)}
                          </div>
                        </div>
                        <div class="roles-container">
                          ${e.roles.map(e=>K`
                              <div class="role-badge ${this.getRoleBadgeClass(e)}">
                                ${this.formatRole(e)}
                              </div>
                            `)}
                        </div>
                      </div>
                    `)}
                </div>
              `}
      </div>
    `}get filteredUsers(){if(!this.searchQuery)return this.users;const e=this.searchQuery.toLowerCase();return this.users.filter(t=>t.email.toLowerCase().includes(e)||(t.displayName?.toLowerCase().includes(e)??!1))}selectUser(e){this.dispatchEvent(new CustomEvent("user-selected",{detail:{uid:e.uid,email:e.email,currentRoles:e.roles},bubbles:!0,composed:!0}))}formatRole(e){return{admin:"Admin",player:"Player",coderFomo:"Coder Fomo",viewer:"Viewer"}[e]||e}getRoleBadgeClass(e){return{admin:"role-admin",player:"role-player",coderFomo:"role-coder-fomo",viewer:"role-viewer"}[e]||""}formatDate(e){try{const t=new Date(e),i=(new Date).getTime()-t.getTime(),r=Math.floor(i/864e5);return 0===r?"today":1===r?"yesterday":r<7?`${r} days ago`:r<30?`${Math.floor(r/7)} weeks ago`:r<365?`${Math.floor(r/30)} months ago`:t.toLocaleDateString()}catch{return e}}};zY([C()],VY.prototype,"users",void 0),zY([C({type:Boolean})],VY.prototype,"loading",void 0),zY([P()],VY.prototype,"searchQuery",void 0),VY=zY([i("df-user-admin-list")],VY);var UY=function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let qY=class extends ve{static{this.styles=l`
    :host {
      display: none;
    }

    :host([open]) {
      display: block;
    }

    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }

    .dialog {
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
      max-width: 500px;
      width: 90%;
      padding: 2rem;
    }

    .dialog-header {
      margin-bottom: 1.5rem;
    }

    .dialog-title {
      font-size: 1.5rem;
      font-weight: 600;
      color: #1f2937;
      margin: 0 0 0.5rem 0;
    }

    .dialog-description {
      font-size: 0.875rem;
      color: #6b7280;
      margin: 0;
    }

    .user-email {
      font-weight: 500;
      color: #374151;
      margin-top: 0.5rem;
    }

    .role-options {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
      margin-bottom: 2rem;
    }

    .role-option {
      display: flex;
      align-items: flex-start;
      gap: 0.75rem;
      padding: 1rem;
      border: 2px solid #e5e7eb;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .role-option:hover {
      border-color: #1f2937;
      background-color: #f9fafb;
    }

    .role-option[selected] {
      border-color: #1f2937;
      background-color: #f3f4f6;
    }

    .role-option md-checkbox {
      margin-top: 0.25rem;
      cursor: pointer;
    }

    .role-info {
      flex: 1;
    }

    .role-name {
      font-weight: 500;
      color: #1f2937;
      display: block;
    }

    .role-description {
      font-size: 0.875rem;
      color: #6b7280;
      margin-top: 0.25rem;
    }

    .dialog-footer {
      display: flex;
      gap: 0.75rem;
      justify-content: flex-end;
    }

    .dialog-footer md-outlined-button,
    .dialog-footer md-filled-button {
      cursor: pointer;
    }
  `}constructor(){super(),this.open=!1,this.userEmail="",this.roleDescriptions={admin:"Full access to all features and user management",player:"Access to core features and gameplay",coderFomo:"Access to coding challenges and competitions",viewer:"Read-only access to content"},this.currentRoles=[],this.selectedRoles=[]}updated(e){e.has("currentRoles")&&(this.selectedRoles=[...this.currentRoles])}render(){return K`
      <div class="overlay" @click=${this.handleOverlayClick}>
        <div class="dialog" @click=${e=>e.stopPropagation()}>
          <div class="dialog-header">
            <h2 class="dialog-title">Manage User Roles</h2>
            <p class="dialog-description">
              Select one or more roles for:
              <span class="user-email">${this.userEmail}</span>
            </p>
          </div>

          <div class="role-options">
            ${this.renderRoleOptions()}
          </div>

          <div class="dialog-footer">
            <md-outlined-button @click=${()=>this.cancel()}>
              Cancel
            </md-outlined-button>
            <md-filled-button
              ?disabled=${this.rolesUnchanged()}
              @click=${()=>this.confirm()}
            >
              Update Roles
            </md-filled-button>
          </div>
        </div>
      </div>
    `}renderRoleOptions(){return["admin","player","coderFomo","viewer"].map(e=>K`
        <div class="role-option" ?selected=${this.selectedRoles.includes(e)} @click=${()=>{this.toggleRole(e)}}>
          <md-checkbox
            .checked=${this.selectedRoles.includes(e)}
            @change=${()=>{this.toggleRole(e)}}
          ></md-checkbox>
          <div class="role-info">
            <span class="role-name">${this.formatRole(e)}</span>
            <div class="role-description">
              ${this.roleDescriptions[e]}
            </div>
          </div>
        </div>
      `)}toggleRole(e){const t=this.selectedRoles.indexOf(e);this.selectedRoles=-1===t?[...this.selectedRoles,e]:this.selectedRoles.filter((e,i)=>i!==t)}rolesUnchanged(){if(this.selectedRoles.length!==this.currentRoles.length)return!1;const e=new Set(this.selectedRoles);return this.currentRoles.every(t=>e.has(t))}confirm(){this.dispatchEvent(new CustomEvent("roles-selected",{detail:{selectedRoles:this.selectedRoles},bubbles:!0,composed:!0})),this.close()}cancel(){this.dispatchEvent(new CustomEvent("cancel",{bubbles:!0,composed:!0})),this.close()}close(){this.open=!1,this.selectedRoles=[...this.currentRoles]}handleOverlayClick(){this.cancel()}formatRole(e){return{admin:"Admin",player:"Player",coderFomo:"Coder Fomo",viewer:"Viewer"}[e]||e}};UY([C({type:Boolean,reflect:!0})],qY.prototype,"open",void 0),UY([C()],qY.prototype,"userEmail",void 0),UY([C()],qY.prototype,"currentRoles",void 0),UY([C()],qY.prototype,"selectedRoles",void 0),qY=UY([i("df-role-picker")],qY);const XY={pushups:{label:"Pushups",unit:"count",description:"Count of pushups completed"},squats:{label:"Squats",unit:"seconds",description:"Duration in seconds"},plank:{label:"Plank",unit:"seconds",description:"Hold duration in seconds"},dumbbells:{label:"Dumbbells",unit:"count",description:"Count of reps completed"},bands:{label:"Bands",unit:"seconds",description:"Pull duration in seconds"},hang:{label:"Hang",unit:"seconds",description:"Hold duration in seconds"}};var ZY=function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let BY=class extends(Nn(ve)){constructor(){super(...arguments),this.initializedUserId=null,this.storeError=null,this.selectedExerciseType="pushups",this.formValue="10",this.formNote="",this.isSubmitting=!1,this.submitMessage=null}static{this.styles=l`
    :host {
      display: block;
      color: var(--md-sys-color-on-surface, #0f172a);
    }

    .shell {
      background: var(--md-sys-color-surface, #ffffff);
      border-radius: 32px;
      padding: clamp(1.5rem, 4vw, 3rem);
      box-shadow: 0 30px 60px rgba(15, 23, 42, 0.12);
      border: 1px solid rgba(15, 23, 42, 0.08);
      display: flex;
      flex-direction: column;
      gap: 1.75rem;
    }

    header {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .badge {
      align-self: flex-start;
      padding: 0.25rem 0.75rem;
      border-radius: 999px;
      background: rgba(16, 185, 129, 0.18);
      color: #047857;
      font-weight: 600;
      font-size: 0.85rem;
    }

    .page-title {
      margin: 0;
      font-size: 1.75rem;
      font-weight: 700;
      color: #0f172a;
    }

    .hero-title {
      margin: 0;
      font-size: clamp(2rem, 5vw, 2.75rem);
      font-weight: 700;
      color: #0f172a;
    }

    .lead {
      margin: 0;
      max-width: 60ch;
      color: #475569;
      font-size: 1.05rem;
      line-height: 1.6;
    }

    .auth-panel,
    .activity-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1.5rem;
    }

    .card {
      border-radius: 24px;
      border: 1px solid rgba(148, 163, 184, 0.35);
      padding: 1.5rem;
      background: rgba(248, 250, 252, 0.85);
      backdrop-filter: blur(8px);
    }

    .card h3 {
      margin: 0 0 0.5rem;
      font-size: 1.1rem;
      color: #0f172a;
    }

    .card p {
      margin: 0;
      color: #475569;
    }

    form {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    md-filled-button,
    md-outlined-button,
    md-text-button {
      width: fit-content;
    }

    .history-list {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      margin-top: 1rem;
    }

    .history-item {
      border-radius: 20px;
      border: 1px solid rgba(226, 232, 240, 0.9);
      padding: 1rem 1.25rem;
      background: white;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 1rem;
      flex-wrap: wrap;
    }

    .history-item strong {
      font-size: 1.35rem;
      color: #0f172a;
    }

    .history-meta {
      display: flex;
      flex-direction: column;
      gap: 0.25rem;
      color: #475569;
    }

    .history-actions {
      display: flex;
      gap: 0.5rem;
      align-items: center;
    }

    .status {
      border-radius: 16px;
      padding: 0.85rem 1rem;
      font-size: 0.95rem;
    }

    .status.success {
      background: rgba(16, 185, 129, 0.15);
      color: #047857;
    }

    .status.error {
      background: rgba(248, 113, 113, 0.18);
      color: #b91c1c;
    }

    .summary-metrics {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 1rem;
      margin-top: 1rem;
    }

    .summary-tile {
      border-radius: 18px;
      padding: 1rem;
      background: rgba(226, 232, 240, 0.5);
      border: 1px solid rgba(15, 23, 42, 0.08);
    }

    .summary-tile dt {
      margin: 0;
      font-size: 0.85rem;
      color: #475569;
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    .summary-tile dd {
      margin: 0.4rem 0 0;
      font-size: 1.5rem;
      font-weight: 600;
      color: #0f172a;
    }

    .empty-state {
      border-radius: 20px;
      padding: 2rem;
      border: 1px dashed rgba(148, 163, 184, 0.8);
      text-align: center;
      color: #475569;
    }

    .collection-path {
      font-family: 'JetBrains Mono', 'SFMono-Regular', Consolas, monospace;
      font-size: 0.85rem;
      word-break: break-all;
    }
  `}disconnectedCallback(){super.disconnectedCallback(),this.resetStoreState()}render(){const e=lT.get(),t=e.authUser,i="authenticated"===e.authState&&!!t;!i&&this.initializedUserId&&this.resetStoreState(),i&&t?.uid&&t.uid!==this.initializedUserId&&!this.storeError&&this.initializeStore(t);const r=this.initializedUserId?oC.get():null,n=this.initializedUserId?sC.get():null;return K`
      <section class="shell">
        ${i?K`<h1 class="page-title">Fitness Log  ${t?.displayName||t?.email||"User"}</h1>`:ee}
        ${this.storeError?K`<div class="status error">
              ${this.storeError}
              <div>
                <md-text-button @click=${this.retryInitialization}>
                  Try again
                </md-text-button>
              </div>
            </div>`:ee}
        ${i?this.renderActivityAreas(r,n):this.renderSignedOutMessage()}
      </section>
    `}renderSignedOutMessage(){return K`
      <div class="empty-state">
        <p>Authenticate above to unlock the pushup form and history feed.</p>
      </div>
    `}renderActivityAreas(e,t){if(!this.initializedUserId)return K`<div class="empty-state">Initialising Firestore connection</div>`;const i=e?.documents??[],r=e?.status??"idle";return K`
      <section class="activity-grid">
        <div class="card">
          <h3>Activity summary</h3>
          <div class="summary-metrics">
            <dl class="summary-tile">
              <dt>Total entries</dt>
              <dd>${t?.entryCount??0}</dd>
            </dl>
            <dl class="summary-tile">
              <dt>Last update</dt>
              <dd>${t?.lastEntryAt?this.formatDate(t.lastEntryAt):""}</dd>
            </dl>
          </div>
        </div>
        <div class="card">
          <h3>Log exercise</h3>
          ${this.submitMessage?K`<div class="status ${this.submitMessage.variant}">${this.submitMessage.text}</div>`:ee}
          <form @submit=${this.handleSubmit}>
            <md-filled-select
              label="Exercise type"
              value=${this.selectedExerciseType}
              @change=${this.handleExerciseTypeChange}
              ?disabled=${this.isSubmitting}
            >
              ${Object.entries(XY).map(([e,t])=>K`
                  <md-select-option value=${e}>
                    <div slot="headline">${t.label}</div>
                  </md-select-option>
                `)}
            </md-filled-select>
            <md-outlined-text-field
              label="${XY[this.selectedExerciseType].label} (${XY[this.selectedExerciseType].unit})"
              type="number"
              required
              inputmode="numeric"
              helper=${XY[this.selectedExerciseType].description}
              value=${this.formValue}
              @input=${this.handleValueInput}
              ?disabled=${this.isSubmitting}
            ></md-outlined-text-field>
            <md-outlined-text-field
              label="Optional note"
              value=${this.formNote}
              supporting-text="Example: morning warm-up"
              @input=${this.handleNoteInput}
              ?disabled=${this.isSubmitting}
            ></md-outlined-text-field>
            <md-filled-button ?disabled=${this.isSubmitting} type="submit">
              ${this.isSubmitting?"Saving":"Save entry"}
            </md-filled-button>
          </form>
        </div>
      </section>

      <section class="card">
        <div style="display:flex;justify-content:space-between;align-items:center;gap:1rem;flex-wrap:wrap;">
          <h3 style="margin:0;">History</h3>
          <div class="history-actions">
            ${"loading"===r?K`<md-linear-progress indeterminate></md-linear-progress>`:K`
                  <md-text-button @click=${this.handleRefresh}>
                    Refresh
                  </md-text-button>
                `}
          </div>
        </div>
        ${0===i.length?K`<div class="empty-state">No exercises logged yet. Submit your first entry above.</div>`:K`
              <div class="history-list">
                ${i.map(e=>K`
                    <article class="history-item">
                      <div>
                        <strong>${e.value} ${XY[e.exerciseType].unit}</strong>
                        <div class="history-meta">
                          <span>${XY[e.exerciseType].label}</span>
                          <span>${this.formatDate(e.recordedAt)}</span>
                          ${e.note?K`<span>${e.note}</span>`:ee}
                        </div>
                      </div>
                      <div class="history-actions">
                        <md-text-button @click=${()=>this.handleDelete(e.id)}>
                          Delete
                        </md-text-button>
                      </div>
                    </article>
                  `)}
              </div>
            `}
      </section>
    `}async initializeStore(e){try{await async function(e,t,i){if(!t)throw new Error("A Firebase Auth user id is required to initialize the pushup store.");if(t===nC.get()&&iC.get())return;aC();const r=D_(e);i&&M_(r,{host:"127.0.0.1",port:8280}),await L_(r);const n=function(e){return`activity/${e}/pushups`}(t),o=Xk(r,n),s=new pT(o,{defaultConstraints:[RS("recordedAt","desc")],defaultQueryDescription:"Your activity history (newest first)",pageSize:20,mapDocument:lC});rC.set(o),iC.set(s),nC.set(t),await s.loadInitialPage(),s.startRealtime()}(Y_(),e.uid,G_("firestore")),this.initializedUserId=e.uid,this.storeError=null}catch(e){console.error("[df-activity-log] Failed to initialize pushup store",e),this.storeError="Unable to connect to the Firestore emulator. Verify it is running and reload the page."}}resetStoreState(){aC(),this.initializedUserId=null,this.storeError=null}handleExerciseTypeChange(e){const t=e.target;t?.value&&(this.selectedExerciseType=t.value,this.formValue="10")}handleValueInput(e){const t=e.target;this.formValue=t?.value??""}handleNoteInput(e){const t=e.target;this.formNote=t?.value??""}async handleSubmit(e){if(e.preventDefault(),!this.isSubmitting){this.isSubmitting=!0,this.submitMessage=null;try{const e=Number(this.formValue);await async function(e){if(!Number.isFinite(e.value))throw new Error("Exercise value must be a valid number.");const t=Math.max(0,Math.trunc(e.value));if(t<=0)throw new Error("Exercise value must be greater than zero.");const i=new Date,r=e.recordedAt??i,n={exerciseType:e.exerciseType,value:t,note:hC(e.note),recordedAt:r,createdAt:i,updatedAt:i,ownerId:dC()},o=cC(),s=await o.create(n);return await o.refresh(),s}({exerciseType:this.selectedExerciseType,value:e,note:this.formNote}),this.formValue="10",this.formNote="";const t=XY[this.selectedExerciseType].label;this.submitMessage={variant:"success",text:`${t} entry saved to Firestore.`}}catch(e){console.error("[df-activity-log] Failed to log exercise",e),this.submitMessage={variant:"error",text:e?.message??"Unable to save exercise. Check the console for details."}}finally{this.isSubmitting=!1}}}async handleDelete(e){try{await async function(e){const t=cC();await t.delete(e),await t.refresh()}(e),this.submitMessage={variant:"success",text:"Deleted entry."}}catch(e){console.error("[df-activity-log] Failed to delete entry",e),this.submitMessage={variant:"error",text:"Could not delete entry. Please try again."}}}async handleRefresh(){try{await async function(){const e=cC();await e.refresh()}()}catch(e){console.error("[df-activity-log] Failed to refresh pushups",e),this.submitMessage={variant:"error",text:"Unable to refresh right now."}}}retryInitialization(){const e=lT.get();e.authUser&&(this.storeError=null,this.initializeStore(e.authUser))}formatDate(e){return e?new Intl.DateTimeFormat("en",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric"}).format(e):"Not set"}};ZY([P()],BY.prototype,"initializedUserId",void 0),ZY([P()],BY.prototype,"storeError",void 0),ZY([P()],BY.prototype,"selectedExerciseType",void 0),ZY([P()],BY.prototype,"formValue",void 0),ZY([P()],BY.prototype,"formNote",void 0),ZY([P()],BY.prototype,"isSubmitting",void 0),ZY([P()],BY.prototype,"submitMessage",void 0),BY=ZY([i("df-activity-log-app")],BY);const jY=["VITE_FIREBASE_API_KEY","VITE_FIREBASE_AUTH_DOMAIN","VITE_FIREBASE_PROJECT_ID","VITE_FIREBASE_APP_ID"].filter(e=>!{MODE:"production",PROD:!0,DEV:!1,VITE_USE_EMULATOR:"false",VITE_FIREBASE_EMULATOR_UI:"http://127.0.0.1:5400",VITE_FIREBASE_API_KEY:"AIzaSyCGaJKzrUv_TgD97QLt-ydGPBbpCyCnrEw",VITE_FIREBASE_AUTH_DOMAIN:"peg-2035.firebaseapp.com",VITE_FIREBASE_PROJECT_ID:"peg-2035",VITE_FIREBASE_STORAGE_BUCKET:"peg-2035.appspot.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"1039825199205",VITE_FIREBASE_APP_ID:"1:1039825199205:web:44d7dfd0f6f970c0ee668c"}[e]);if(jY.length)throw new Error(`Missing Firebase environment variables: ${jY.join(", ")}. Copy .env.development.example to .env.development and supply real credentials before running pnpm dev.`);vC();
//# sourceMappingURL=df-activity-log.js.map
